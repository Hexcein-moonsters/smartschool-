// Type ForceLogin to bypass the password!

/*! For license information please see Quiz.js.LICENSE.txt */
!function() {
    var e, t = {
        50421: function(e) {
            var t = ["DIV", "SPAN", "P", "U", "I", "B", "EM", "STRONG", "STRIKE", "UL", "LI", "OL", "FONT", "BR", "BLOCKQUOTE"]
              , n = ["color", "font-weight", "text-align", "font-style", "text-decoration", "margin", "border", "padding", "vertical-align"]
              , r = ["style", "color", "align"]
              , o = ["STYLE", "SCRIPT", "TEXTAREA", "NOSCRIPT", "INPUT", "IMG", "TESTER"]
              , a = ["bw-sr-only", "cr-marker"];
            function i(e) {
                switch (e.nodeType) {
                case 1:
                    for (var n = e.tagName, r = 0; r < a.length; ++r)
                        if (e.classList.contains(a[r]))
                            return 1;
                    return -1 === t.indexOf(n) ? -1 === o.indexOf(n) ? 2 : 1 : 0;
                case 3:
                    return -1;
                case 9:
                    return 2;
                default:
                    return 1
                }
            }
            function s(e) {
                if (null == e)
                    return e;
                for (var t = e.split(";"), r = [], o = 0; o < t.length; ++o)
                    for (var a = t[o], i = 0; i < n.length; ++i)
                        if (a.split(":")[0].trim() === n[i]) {
                            r.push(a);
                            break
                        }
                return r.join(";")
            }
            e.exports = {
                allowed_bwwysiwyg_nodes: t,
                allowed_bwwysiwyg_style: n,
                allowed_bwwysiwyg_attrs: r,
                sanitizeNode: function e(t) {
                    for (var n = t.childNodes, o = 0; o < n.length; ++o) {
                        var a = n[o];
                        switch (i(a)) {
                        case 0:
                            if (a.hasAttributes())
                                for (var u = a.attributes, c = u.length - 1; c >= 0; c--) {
                                    var l = u[c].name;
                                    "style" === l ? a.setAttribute("style", s(u[c].value)) : -1 === r.indexOf(l) && a.removeAttribute(l)
                                }
                            e(a);
                            break;
                        case 1:
                            t.removeChild(a),
                            --o;
                            break;
                        case 2:
                            var d = a.textContent;
                            if (null != d) {
                                var f = document.createElement("span");
                                f.textContent = d,
                                t.replaceChild(f, a)
                            } else
                                t.removeChild(a),
                                --o
                        }
                    }
                }
            }
        },
        98274: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                allCorrect: function() {
                    return Ae
                },
                arrayCount: function() {
                    return oe
                },
                audioId: function() {
                    return _e
                },
                canonicalMatrix: function() {
                    return Me
                },
                check: function() {
                    return Be
                },
                cleanGroupElemPaths: function() {
                    return be
                },
                createNumericQuestionAnswer: function() {
                    return je
                },
                dragDropKey: function() {
                    return Ie
                },
                getFITText: function() {
                    return ge
                },
                getMatrixDimensions: function() {
                    return Ne
                },
                getWrongAnswerWeight: function() {
                    return te
                },
                isLegacyFITStyle: function() {
                    return me
                },
                isNotAutoCorrectingQuestionType: function() {
                    return Ue
                },
                linkifyLinks: function() {
                    return We
                },
                pictureId: function() {
                    return Se
                },
                processCorrectSentence: function() {
                    return qe
                },
                processDragWordsInSentence: function() {
                    return ve
                },
                processEquations: function() {
                    return we
                },
                processFillInText: function() {
                    return fe
                },
                processMarkSentence: function() {
                    return ke
                },
                processText: function() {
                    return xe
                },
                scoreForValidPolicyAndWeight: function() {
                    return se
                },
                splitNumberAndMetric: function() {
                    return Le
                },
                toFloat: function() {
                    return X
                },
                toText: function() {
                    return he
                },
                wordId: function() {
                    return Te
                }
            });
            var r = n(53142)
              , o = n.n(r)
              , a = n(10640)
              , i = n.n(a)
              , s = n(46343)
              , u = n.n(s)
              , c = n(57581)
              , l = n.n(c)
              , d = n(4642)
              , f = n.n(d)
              , p = n(75857)
              , h = n.n(p)
              , m = n(75254)
              , g = n.n(m)
              , v = n(46108)
              , w = n.n(v)
              , b = n(38202)
              , y = n.n(b)
              , C = n(40105)
              , x = n.n(C)
              , E = n(89088)
              , k = n.n(E)
              , S = n(17902)
              , T = n(11219)
              , _ = n(8138)
              , A = n.n(_)
              , O = function() {
                function e(t, n, r, o) {
                    this.message = t,
                    this.expected = n,
                    this.found = r,
                    this.location = o,
                    this.name = "SyntaxError",
                    "function" == typeof Error.captureStackTrace && Error.captureStackTrace(this, e)
                }
                return function(e, t) {
                    function n() {
                        this.constructor = e
                    }
                    n.prototype = t.prototype,
                    e.prototype = new n
                }(e, Error),
                {
                    SyntaxError: e,
                    parse: function(t) {
                        var r, o, a, i, s, u = arguments.length > 1 ? arguments[1] : {}, c = {}, l = {
                            Expression: K
                        }, d = K, f = function(e) {
                            return e
                        }, p = function(e) {
                            return x()(e, (function(e) {
                                return e[0]
                            }
                            ))
                        }, h = "^", m = {
                            type: "literal",
                            value: "^",
                            description: '"^"'
                        }, g = function() {
                            return {
                                cmd: "^"
                            }
                        }, v = "_", w = {
                            type: "literal",
                            value: "_",
                            description: '"_"'
                        }, b = function() {
                            return {
                                cmd: "_"
                            }
                        }, y = "\\", C = {
                            type: "literal",
                            value: "\\",
                            description: '"\\\\"'
                        }, E = /^[A-Za-z]/, k = {
                            type: "class",
                            value: "[A-Za-z]",
                            description: "[A-Za-z]"
                        }, S = function(e) {
                            return {
                                cmd: "\\" + e.join("")
                            }
                        }, T = /^[\\ {}|'."~=\^`&#]/, _ = {
                            type: "class",
                            value: "[\\\\ {}|'.\"~=^`&#]",
                            description: "[\\\\ {}|'.\"~=^`&#]"
                        }, A = function(e) {
                            return {
                                cmd: "\\" + e
                            }
                        }, O = "{", D = {
                            type: "literal",
                            value: "{",
                            description: '"{"'
                        }, I = "}", P = {
                            type: "literal",
                            value: "}",
                            description: '"}"'
                        }, R = function() {
                            return {
                                grp: []
                            }
                        }, L = function(e) {
                            return {
                                grp: e
                            }
                        }, N = /^[A-Za-z0-9\xC0-\u10FFFF.*\/+\-!=><&()[\]|\xB0,;:'\uFFFD"]/, F = {
                            type: "class",
                            value: "[A-Za-z0-9\\u00c0-\\u10FFFF.*/+\\-!=><&()\\[\\]|°,;:'�\"]",
                            description: "[A-Za-z0-9\\u00c0-\\u10FFFF.*/+\\-!=><&()\\[\\]|°,;:'�\"]"
                        }, M = function(e) {
                            return e
                        }, j = /^[ \t\n\r]/, q = {
                            type: "class",
                            value: "[ \\t\\n\\r]",
                            description: "[ \\t\\n\\r]"
                        }, B = 0, W = [{
                            line: 1,
                            column: 1,
                            seenCR: !1
                        }], U = 0, z = [], H = 0;
                        if ("startRule"in u) {
                            if (!(u.startRule in l))
                                throw new Error("Can't start parsing from rule \"" + u.startRule + '".');
                            d = l[u.startRule]
                        }
                        function Q(e) {
                            var n, r, o = W[e];
                            if (o)
                                return o;
                            for (n = e - 1; !W[n]; )
                                n--;
                            for (o = {
                                line: (o = W[n]).line,
                                column: o.column,
                                seenCR: o.seenCR
                            }; n < e; )
                                "\n" === (r = t.charAt(n)) ? (o.seenCR || o.line++,
                                o.column = 1,
                                o.seenCR = !1) : "\r" === r || "\u2028" === r || "\u2029" === r ? (o.line++,
                                o.column = 1,
                                o.seenCR = !0) : (o.column++,
                                o.seenCR = !1),
                                n++;
                            return W[e] = o,
                            o
                        }
                        function V(e, t) {
                            var n = Q(e)
                              , r = Q(t);
                            return {
                                start: {
                                    offset: e,
                                    line: n.line,
                                    column: n.column
                                },
                                end: {
                                    offset: t,
                                    line: r.line,
                                    column: r.column
                                }
                            }
                        }
                        function Y(e) {
                            B < U || (B > U && (U = B,
                            z = []),
                            z.push(e))
                        }
                        function K() {
                            var e, t, n, r;
                            return e = B,
                            (t = $()) === c && (t = null),
                            t !== c ? (n = function() {
                                var e, t, n, r;
                                if (e = [],
                                t = B,
                                (n = G()) !== c ? ((r = $()) === c && (r = null),
                                r !== c ? t = n = [n, r] : (B = t,
                                t = c)) : (B = t,
                                t = c),
                                t !== c)
                                    for (; t !== c; )
                                        e.push(t),
                                        t = B,
                                        (n = G()) !== c ? ((r = $()) === c && (r = null),
                                        r !== c ? t = n = [n, r] : (B = t,
                                        t = c)) : (B = t,
                                        t = c);
                                else
                                    e = c;
                                return e !== c && (e = p(e)),
                                e
                            }(),
                            n !== c ? ((r = $()) === c && (r = null),
                            r !== c ? e = t = f(n) : (B = e,
                            e = c)) : (B = e,
                            e = c)) : (B = e,
                            e = c),
                            e
                        }
                        function G() {
                            var e, n;
                            return (e = function() {
                                var e, n, r, o;
                                if (e = B,
                                94 === t.charCodeAt(B) ? (n = h,
                                B++) : (n = c,
                                0 === H && Y(m)),
                                n !== c && (n = g()),
                                (e = n) === c && (e = B,
                                95 === t.charCodeAt(B) ? (n = v,
                                B++) : (n = c,
                                0 === H && Y(w)),
                                n !== c && (n = b()),
                                (e = n) === c)) {
                                    if (e = B,
                                    92 === t.charCodeAt(B) ? (n = y,
                                    B++) : (n = c,
                                    0 === H && Y(C)),
                                    n !== c) {
                                        if (r = [],
                                        E.test(t.charAt(B)) ? (o = t.charAt(B),
                                        B++) : (o = c,
                                        0 === H && Y(k)),
                                        o !== c)
                                            for (; o !== c; )
                                                r.push(o),
                                                E.test(t.charAt(B)) ? (o = t.charAt(B),
                                                B++) : (o = c,
                                                0 === H && Y(k));
                                        else
                                            r = c;
                                        r !== c ? e = n = S(r) : (B = e,
                                        e = c)
                                    } else
                                        B = e,
                                        e = c;
                                    e === c && (e = B,
                                    92 === t.charCodeAt(B) ? (n = y,
                                    B++) : (n = c,
                                    0 === H && Y(C)),
                                    n !== c ? (T.test(t.charAt(B)) ? (r = t.charAt(B),
                                    B++) : (r = c,
                                    0 === H && Y(_)),
                                    r !== c ? e = n = A(r) : (B = e,
                                    e = c)) : (B = e,
                                    e = c))
                                }
                                return e
                            }()) === c && (e = function() {
                                var e, n, r, o;
                                return e = B,
                                123 === t.charCodeAt(B) ? (n = O,
                                B++) : (n = c,
                                0 === H && Y(D)),
                                n !== c ? ((r = $()) === c && (r = null),
                                r !== c ? (125 === t.charCodeAt(B) ? (o = I,
                                B++) : (o = c,
                                0 === H && Y(P)),
                                o !== c ? e = n = R() : (B = e,
                                e = c)) : (B = e,
                                e = c)) : (B = e,
                                e = c),
                                e
                            }()) === c && (e = function() {
                                var e, n, r, o;
                                return e = B,
                                123 === t.charCodeAt(B) ? (n = O,
                                B++) : (n = c,
                                0 === H && Y(D)),
                                n !== c && (r = K()) !== c ? (125 === t.charCodeAt(B) ? (o = I,
                                B++) : (o = c,
                                0 === H && Y(P)),
                                o !== c ? e = n = L(r) : (B = e,
                                e = c)) : (B = e,
                                e = c),
                                e
                            }()) === c && (N.test(t.charAt(B)) ? (n = t.charAt(B),
                            B++) : (n = c,
                            0 === H && Y(F)),
                            n !== c && (n = M(n)),
                            e = n),
                            e
                        }
                        function $() {
                            var e, n;
                            if (e = [],
                            j.test(t.charAt(B)) ? (n = t.charAt(B),
                            B++) : (n = c,
                            0 === H && Y(q)),
                            n !== c)
                                for (; n !== c; )
                                    e.push(n),
                                    j.test(t.charAt(B)) ? (n = t.charAt(B),
                                    B++) : (n = c,
                                    0 === H && Y(q));
                            else
                                e = c;
                            return e
                        }
                        if (window._ = n(45250),
                        (r = d()) !== c && B === t.length)
                            return r;
                        throw r !== c && B < t.length && Y({
                            type: "end",
                            description: "end of input"
                        }),
                        o = null,
                        a = z,
                        i = U < t.length ? t.charAt(U) : null,
                        s = U < t.length ? V(U, U + 1) : V(U, U),
                        null !== a && function(e) {
                            var t = 1;
                            for (e.sort((function(e, t) {
                                return e.description < t.description ? -1 : e.description > t.description ? 1 : 0
                            }
                            )); t < e.length; )
                                e[t - 1] === e[t] ? e.splice(t, 1) : t++
                        }(a),
                        new e(null !== o ? o : function(e, t) {
                            var n, r = new Array(e.length);
                            for (n = 0; n < e.length; n++)
                                r[n] = e[n].description;
                            return "Expected " + (e.length > 1 ? r.slice(0, -1).join(", ") + " or " + r[e.length - 1] : r[0]) + " but " + (t ? '"' + function(e) {
                                function t(e) {
                                    return e.charCodeAt(0).toString(16).toUpperCase()
                                }
                                return e.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\x08/g, "\\b").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\f/g, "\\f").replace(/\r/g, "\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g, (function(e) {
                                    return "\\x0" + t(e)
                                }
                                )).replace(/[\x10-\x1F\x80-\xFF]/g, (function(e) {
                                    return "\\x" + t(e)
                                }
                                )).replace(/[\u0100-\u0FFF]/g, (function(e) {
                                    return "\\u0" + t(e)
                                }
                                )).replace(/[\u1000-\uFFFF]/g, (function(e) {
                                    return "\\u" + t(e)
                                }
                                ))
                            }(t) + '"' : "end of input") + " found."
                        }(a, i),a,i,s)
                    }
                }
            }()
              , D = O.parse;
            function I(e) {
                return e.hasOwnProperty("grp")
            }
            function P(e) {
                return e.hasOwnProperty("cmd")
            }
            function R(e, t) {
                return A()(t) ? e === t : !(!I(t) || 1 !== t.grp.length) && R(e, t.grp[0])
            }
            function L(e, t) {
                return P(t) ? e.cmd === t.cmd && F(e.opt, t.opt) && F(e.params, t.params) : !(!I(t) || 1 !== t.grp.length) && L(e, t.grp[0])
            }
            function N(e, t) {
                return A()(e) ? R(e, t) : A()(t) ? R(t, e) : P(e) ? L(e, t) : P(t) ? L(t, e) : I(e) ? I(t) && F(e.grp, t.grp) : (console.error("Unknown latex node type", e),
                !1)
            }
            function F(e, t) {
                if (null == e)
                    return null == t;
                if (null == t)
                    return !1;
                if (e.length !== t.length)
                    return !1;
                for (var n = 0; n < e.length; ++n)
                    if (!1 === N(e[n], t[n]))
                        return !1;
                return !0
            }
            var M = ["\\left", "\\right", "\\limits"]
              , j = {
                "\\leq": function() {
                    return {
                        cmd: "\\le"
                    }
                },
                "\\geq": function() {
                    return {
                        cmd: "\\ge"
                    }
                },
                "\\neq": function() {
                    return {
                        cmd: "\\ne"
                    }
                },
                "\\vee": function() {
                    return {
                        cmd: "\\lor"
                    }
                },
                "\\mid": function() {
                    return {
                        cmd: "\\vert"
                    }
                },
                "\\wedge": function() {
                    return {
                        cmd: "\\land"
                    }
                },
                "\\": function() {
                    return {
                        cmd: "\\ne"
                    }
                },
                "\\overrightarrow": function() {
                    return {
                        cmd: "\\vec"
                    }
                },
                "\\dfrac": function() {
                    return {
                        cmd: "\\frac"
                    }
                },
                "\\notin": function() {
                    return [{
                        cmd: "\\not"
                    }, {
                        cmd: "\\in"
                    }]
                }
            }
              , q = {
                "�": function() {
                    return [{
                        cmd: "^"
                    }, {
                        cmd: "\\circ"
                    }]
                },
                "°": function() {
                    return [{
                        cmd: "^"
                    }, {
                        cmd: "\\circ"
                    }]
                },
                '"': function() {
                    return ["'", "'"]
                }
            }
              , B = {
                "\\frac": 2,
                "\\sum": 2,
                "\\prod": 2,
                "\\coprod": 2,
                "\\int": 2,
                "\\sqrt": 1,
                "^": 1,
                _: 1,
                "\\bar": 1,
                "\\dot": 1,
                "\\hat": 1,
                "\\tilde": 1,
                "\\vec": 1,
                "\\begin": 1,
                "\\end": 1
            };
            function W(e) {
                if (null == e)
                    return null;
                for (var t = [], n = 0; n < e.length; ++n) {
                    var r = e[n];
                    if (A()(r))
                        t.push(r);
                    else if (P(r)) {
                        if ("\\sqrt" === r.cmd && n < e.length - 2 && "[" === e[n + 1]) {
                            for (var o = [], a = n + 2; a < e.length && "]" !== e[a]; )
                                o.push(e[a++]);
                            "]" === e[a] && (r.opt = W(o),
                            n = a)
                        }
                        var i = B[r.cmd] || 0
                          , s = Math.min(i, e.length - n - 1);
                        if (s > 0) {
                            for (var u = [], c = 0; c < s; ++c)
                                u.push(e[++n]);
                            r.params = W(u)
                        }
                        t.push(r)
                    } else
                        I(r) ? t.push({
                            grp: W(r.grp)
                        }) : (console.error("mapCommandParams simply copies", r),
                        t.push(r))
                }
                return t
            }
            function U(e) {
                var t = 0;
                return h()(x()(e, (function(e) {
                    return P(e) ? ("\\begin" === e.cmd ? ++t : "\\end" === e.cmd && --t,
                    function(e) {
                        var t = {
                            cmd: e.cmd
                        };
                        return e.opt && (t.opt = U(e.opt)),
                        e.params && (t.params = x()(e.params, z)),
                        t
                    }(e)) : I(e) ? 0 === t ? U(e.grp) : z(e) : e
                }
                )))
            }
            function z(e) {
                return I(e) ? {
                    grp: U(e.grp)
                } : e
            }
            function H(e) {
                I(e) ? V(e.grp) : P(e) && Q(e)
            }
            function Q(e) {
                e.opt && V(e.opt),
                e.params && f()(e.params, H)
            }
            function V(e) {
                if (e.length > 0)
                    for (var t = 0; t < e.length; ++t)
                        if (P(e[t]) && Q(e[t]),
                        t > 0 && P(e[t - 1]) && P(e[t]) && "_" === e[t - 1].cmd && "^" === e[t].cmd) {
                            var n = e[t];
                            e[t] = e[t - 1],
                            e[t - 1] = n
                        }
            }
            function Y(e) {
                var t = U(W(function(e) {
                    var t = x()(e, (function(e) {
                        if (A()(e))
                            return q.hasOwnProperty(e) ? q[e]() : e;
                        if (P(e))
                            return -1 !== g()(M, e.cmd) ? [] : j.hasOwnProperty(e.cmd) ? j[e.cmd]() : e;
                        if (I(e)) {
                            var t = Y(e.grp);
                            return 0 === t.length ? [] : {
                                grp: t
                            }
                        }
                        return e
                    }
                    ))
                      , n = !1
                      , r = l()(t, (function(e, r) {
                        return n ? (n = !1,
                        !1) : r === t.length - 1 || !P(e) || "^" !== e.cmd && "_" !== e.cmd || !o()(t[r + 1]) || 0 !== t[r + 1].length || (n = !0,
                        !1)
                    }
                    ));
                    return h()(r)
                }(e)));
                return V(t),
                t
            }
            var K = n(36326)
              , G = n(22420)
              , $ = n(1309);
            function J(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function X(e) {
                return e ? parseFloat(e.replace(",", ".")) : 0
            }
            function Z(e, t) {
                return null == t ? e : e instanceof Array ? function(e, t) {
                    for (var n = e.length, r = [], o = 0; o < n; o++)
                        r[o] = (a = e[o],
                        null != (i = t[o]) ? i : a);
                    var a, i;
                    return r
                }(e, t) : t
            }
            function ee(e) {
                return "no" === e.needs_correction ? 0 : X(e["scoring-weight"])
            }
            function te(e) {
                var t = ee(e);
                if (!e.hasOwnProperty("scoring-wrong-answer-weight") || "" === e["scoring-wrong-answer-weight"])
                    return t;
                var n = X(e["scoring-wrong-answer-weight"]);
                return isNaN(n) ? t : n
            }
            function ne(e, t, n) {
                r = null === t ? -1 : parseInt(t) === parseInt(e.Valid) ? 1 : 0;
                var r, o = ee(e), a = r;
                return {
                    correctness: r = Z(a, n),
                    autoCorrectness: a,
                    score: 1 === r ? o : 0,
                    outof: o
                }
            }
            function re(e, t) {
                for (var n = 0; n < e.length; ++n)
                    if (e[n] === t)
                        return !0;
                return !1
            }
            function oe(e, t) {
                for (var n = 0, r = 0; r < e.length; ++r)
                    e[r] === t && ++n;
                return n
            }
            function ae(e, t, n) {
                return "each" === t ? oe(e, 1) * n : oe(e, 1) === e.length ? n : 0
            }
            function ie(e, t, n) {
                return "each" === t ? e.length * n : n
            }
            function se(e, t, n, r, o, a) {
                if (a) {
                    for (var i = 0, s = 0; s < e.length; ++s)
                        e[s] && 1 === t[s] && ++i;
                    return i * r
                }
                if ("each" === n) {
                    i = 0;
                    var u = 0;
                    for (s = 0; s < e.length; ++s)
                        e[s] && 1 === t[s] ? ++i : e[s] || 0 !== t[s] || ++u;
                    return Math.max(i * r - u * o, 0)
                }
                return "eachcorrect" === n ? oe(t, 1) * r : oe(t, 1) === t.length ? r : 0
            }
            function ue(e, t, n, r, o) {
                return o || "each" === n ? oe(e, !0) * r : "eachcorrect" === n ? e.length * r : r
            }
            function ce(e, t, n) {
                for (var r, o = e.policy, a = "yes" === e.limited_selection, i = e.Answers || [], s = re(t = t || y()(Array(i.length), !1), !0) || "eachcorrect" === o, u = e.hasOwnProperty("Valid") ? (r = e.Valid,
                r.replace(/\D/g, " ")).split(/\s+/) : "", c = [], l = 0; l < u.length; ++l)
                    c.push(parseInt(u[l], 10));
                var d = [];
                for (l = 0; l < i.length; ++l)
                    d.push(re(u, l + 1 + ""));
                var f = [];
                for (l = 0; l < i.length; ++l)
                    s ? !re(u, l + 1 + "") ^ !t[l] ? f.push(0) : f.push(1) : f.push(-1);
                var p = ee(e)
                  , h = f;
                return {
                    correctness: f = Z(h, n),
                    autoCorrectness: h,
                    correctAnswers: c,
                    score: se(d, f, o, p, te(e), a),
                    outof: ue(d, 0, o, p, a)
                }
            }
            function le(e) {
                var t, n, r = (0,
                K.trimAll)(e.split(":"));
                r.length >= 2 ? 0 === (t = r[0]).indexOf("text") ? (r.shift(),
                n = r.join(":")) : 0 === t.indexOf("select") ? (r.shift(),
                n = r.join(":").split("##").map((function(e) {
                    var t = e.trim();
                    return "-" === t ? "–" : t
                }
                )).join("##")) : (t = "text",
                n = e) : r.length < 2 && (t = "text",
                n = e);
                var o = t.match(/(.+)\((.*)\)/)
                  , a = []
                  , i = [];
                if (o && 3 === o.length) {
                    t = o[1].trim(),
                    a = (0,
                    K.trimAll)(o[2].split(";")).map((function(e) {
                        return (0,
                        K.trimAll)(e.split("="))
                    }
                    ));
                    for (var s = 0; s < a.length; ++s) {
                        var u = a[s];
                        "width" === u[0] ? i.push(u.join(":")) : console.error("FIT: Ignoring unsupported parameter " + u[0])
                    }
                }
                return {
                    type: t,
                    typeconfig: n,
                    style: i
                }
            }
            function de(e, t, n) {
                for (var r, o = 0, a = e.indexOf("&lt;&lt;"), i = "", s = 0; a >= 0; ) {
                    var u = e.substring(o, a)
                      , c = e.indexOf("&gt;&gt;", a);
                    if (c < 0) {
                        o = e.length;
                        break
                    }
                    i += null != (r = t(u, n(e.substring(a + 8, c)), s)) ? u + r : e.substring(o, c + 8),
                    o = c + 8,
                    a = e.indexOf("&lt;&lt;", c),
                    s += 1
                }
                return i + (null != (r = t(e.substring(o), null, s)) ? r : e.substring(o))
            }
            function fe(e, t) {
                return de(e, t, le)
            }
            var pe = {};
            function he(e) {
                return pe.hasOwnProperty(e) ? pe[e] : (t = "undefined" != typeof window && window.$ ? window.$(document.createElement("div")).html(e).text() : n(93394).A(e),
                pe[e] = t,
                t);
                var t
            }
            function me(e) {
                return !(e.hasOwnProperty("Sentence") && !(0,
                $.isEmptyRichText)(e.Sentence))
            }
            function ge(e) {
                return me(e) ? (0,
                $.richTextAsHtml)(e.Question) || "" : (0,
                $.richTextAsHtml)(e.Sentence) || ""
            }
            function ve(e, t) {
                return de(e, t, (function(e) {
                    return e
                }
                ))
            }
            function we(e, t) {
                return de(e, t, (function(e) {
                    return e
                }
                ))
            }
            function be(e) {
                var t = w()(e);
                return "Image" === e.Type ? (delete t.image.sources,
                delete t.image.alttext) : "Audio" === e.Type && (t.audio = function(e) {
                    var t = e.lastIndexOf("/");
                    if (-1 === t)
                        return e;
                    var n = e.lastIndexOf("/", t - 1);
                    return -1 === n ? e.substr(t) : e.substr(n)
                }(e.audio)),
                t
            }
            function ye(e) {
                return JSON.stringify(x()(e, (function(e) {
                    return k()(be(e))
                }
                )).sort())
            }
            function Ce(e) {
                for (var t = void 0, n = void 0, r = 0, o = function(o) {
                    for (var a = e[o], i = function(i) {
                        var s = a[i];
                        if (s.total > 1)
                            if (s.total > r)
                                r = s.total,
                                t = o,
                                n = i;
                            else if (s.total === r)
                                for (var u = e.map((function(e, r) {
                                    return r === t ? 0 : e[n].total || 0
                                }
                                )).sort((function(e, t) {
                                    return t - e
                                }
                                )), c = e.map((function(e, t) {
                                    return t === o ? 0 : e[i].total || 0
                                }
                                )).sort((function(e, t) {
                                    return t - e
                                }
                                )), l = 0; l < Math.max(c.length, u.length); l++) {
                                    var d = c[l]
                                      , f = u[l];
                                    if (0 === d && 0 === f)
                                        break;
                                    if (0 === f)
                                        break;
                                    if (0 === d) {
                                        r = s.total,
                                        t = o,
                                        n = i;
                                        break
                                    }
                                    if (d < f) {
                                        r = s.total,
                                        t = o,
                                        n = i;
                                        break
                                    }
                                    if (d !== f)
                                        break
                                }
                    }, s = 0; s < a.length; s++)
                        i(s)
                }, a = 0; a < e.length; a++)
                    o(a);
                return {
                    groupIndex: t,
                    answerIndex: n
                }
            }
            function xe(e, t, n) {
                for (var r = "", o = 0; o < e.length; ++o) {
                    var a = e.charAt(o);
                    /[\s]/.test(a) || /[~`!#$%^&*+=\-[\]\\;,./{}()|\\":<>?]/.test(a) ? (r.length > 0 && (t(r),
                    r = ""),
                    n(a)) : r += a
                }
                r.length > 0 && t(r)
            }
            function Ee(e, t, n) {
                for (var r = 0, o = e.indexOf("<<"); o >= 0; ) {
                    t(e.substring(r, o));
                    var a = e.indexOf(">>", o);
                    if (a < 0) {
                        r = e.length;
                        break
                    }
                    n(e.substring(o + 2, a)),
                    r = a + 2,
                    o = e.indexOf("<<", a)
                }
                t(e.substring(r))
            }
            function ke(e, t, n, r) {
                Ee(e, (function(e) {
                    xe(e, n, t)
                }
                ), (function(e) {
                    var t = e.split(":")
                      , o = t.length <= 2 ? t : [t.shift(), t.join(":")]
                      , a = (0,
                    K.trimAll)(o);
                    1 !== a.length ? "" !== a[0] ? "" !== a[1] ? r({
                        type: a[0],
                        word: a[1]
                    }) : n(a[0]) : n(a[1]) : n(a[0])
                }
                ))
            }
            function Se(e) {
                var t = e.hasOwnProperty("filename") ? e.filename : e;
                return e.hasOwnProperty("origbase") ? e.origbase : t
            }
            function Te(e) {
                return e
            }
            function _e(e, t) {
                return null == e || "" === e ? "" : t + ""
            }
            function Ae(e) {
                return oe(e.correctness, 1) === e.correctness.length
            }
            function Oe(e) {
                return null == e || "" === e
            }
            function De(e, t, n, r, o) {
                t = t || [];
                for (var a = [], i = e.pairs ? e.pairs : [], s = 0; s < i.length; ++s) {
                    var u = i[s]
                      , c = n(u.source, s);
                    if (!Oe(c)) {
                        for (var l = r(u.target), d = !1, f = 0; f < t.length; ++f)
                            if (t[f].source === c) {
                                t[f].target === l ? a.push(1) : a.push(0),
                                d = !0;
                                break
                            }
                        d || (Oe(l) ? a.push(2) : a.push(-1))
                    }
                }
                var p = oe(a, 1) > 0 || oe(a, 0) > 0 ? 1 : -1;
                for (s = 0; s < a.length; ++s)
                    2 === a[s] && (a[s] = p);
                var h = ee(e)
                  , m = a;
                return {
                    correctness: a = Z(m, o),
                    autoCorrectness: m,
                    score: oe(a, 1) * h,
                    outof: a.length * h
                }
            }
            function Ie(e) {
                return e.hasOwnProperty("name") ? e.name : e
            }
            function Pe(e, t, n, r) {
                t = t || [];
                for (var o = ee(e), a = [], i = e.Boxes ? e.Boxes : [], s = 0; s < i.length; ++s) {
                    var u = i[s]
                      , c = he(u.name ? u.name.trim() : u.name);
                    if (u.Items)
                        for (var l = 0; l < u.Items.length; ++l) {
                            var d = n(u.Items[l]);
                            a.push({
                                pair: [d, c],
                                correct: !1,
                                answer: null
                            })
                        }
                }
                var f = [];
                for (s = 0; s < t.length; ++s)
                    f.push({
                        pair: [t[s][0], t[s][1] ? t[s][1].trim() : t[s][1]],
                        used: !1
                    });
                for (s = 0; s < a.length; ++s) {
                    var p = a[s];
                    for (l = 0; l < f.length; ++l)
                        if (!(h = f[l]).used && Ie(p.pair[0]) === Ie(h.pair[0]) && p.pair[1] === h.pair[1]) {
                            p.correct = !0,
                            p.answer = h.pair[1],
                            h.used = !0;
                            break
                        }
                }
                for (s = 0; s < a.length; ++s)
                    if (!(p = a[s]).correct)
                        for (l = 0; l < f.length; ++l) {
                            var h;
                            if (!(h = f[l]).used && Ie(p.pair[0]) === Ie(h.pair[0])) {
                                p.answer = h.pair[1],
                                h.used = !0;
                                break
                            }
                        }
                var m = !1;
                for (s = 0; s < a.length; ++s)
                    if (null !== (p = a[s]).answer) {
                        m = !0;
                        break
                    }
                if (m)
                    for (s = 0; s < a.length; ++s)
                        null === (p = a[s]).answer && "" === p.pair[1] && (p.correct = !0,
                        p.answer = "");
                var g = [];
                for (s = 0; s < a.length; ++s)
                    (p = a[s]).correct ? g.push(1) : null === p.answer ? g.push(-1) : g.push(0);
                var v = e.policy
                  , w = (o = ee(e),
                g);
                return {
                    correctness: g = Z(w, r),
                    autoCorrectness: w,
                    items: a,
                    score: ae(g, v, o),
                    outof: ie(g, v, o)
                }
            }
            function Re(e, t, n) {
                var r = ee(e)
                  , o = t ? -2 : -1;
                return {
                    correctness: Z(o, n),
                    autoCorrectness: o,
                    score: 0,
                    outof: r
                }
            }
            function Le(e) {
                var t = /^ *(-?[0-9.,]+([eE]-?[0-9]+)?) *(E|P|T|G|M|k|h|da|d|c|m|u|n|p|f|a)?([^\d]+) *$/.exec(e.trim());
                if (null === t)
                    return null;
                var n, r = t[3];
                switch (r) {
                case void 0:
                    n = 0;
                    break;
                case "E":
                    n = 18;
                    break;
                case "P":
                    n = 15;
                    break;
                case "T":
                    n = 12;
                    break;
                case "G":
                    n = 9;
                    break;
                case "M":
                    n = 6;
                    break;
                case "k":
                    n = 3;
                    break;
                case "h":
                    n = 2;
                    break;
                case "da":
                    n = 1;
                    break;
                case "d":
                    n = -1;
                    break;
                case "c":
                    n = -2;
                    break;
                case "m":
                    n = -3;
                    break;
                case "u":
                    n = -6;
                    break;
                case "n":
                    n = -9;
                    break;
                case "p":
                    n = -12;
                    break;
                case "f":
                    n = -15;
                    break;
                case "a":
                    n = -18
                }
                return {
                    value: t[1],
                    prefix: r,
                    scale: n,
                    unit: null != t[3] && t[3].normalize ? t[4].normalize("NFKC") : t[4]
                }
            }
            function Ne(e) {
                if (null == e)
                    return null;
                for (var t = e.length, n = 1, r = 0; r < t; ++r) {
                    var o = e[r].split(" ");
                    n = Math.max(n, o.length)
                }
                return {
                    rows: t,
                    columns: n
                }
            }
            function Fe(e, t) {
                for (var n = [], r = 0; r < e.length; ++r) {
                    for (var o = 0; o < e[r].length; ++o) {
                        var a = e[r][o];
                        null == a || "" === a.trim() ? n.push("{}") : n.push(a.trim()),
                        o !== e[r].length - 1 && n.push("&")
                    }
                    r !== e.length - 1 && n.push("\\\\")
                }
                return "$$\\leftLEFT \\begin{array} {cc} VALUES \\end{array} \\rightRIGHT$$".replace("LEFT", "parentheses" === t ? "(" : "[").replace("RIGHT", "parentheses" === t ? ")" : "]").replace("VALUES", n.join(" "))
            }
            function Me(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "parentheses"
                  , n = Ne(e.matrix);
                if (null == n)
                    return null;
                for (var r = [], o = 0; o < n.rows; ++o) {
                    for (var a = [], i = e.matrix[o].split(" "), s = 0; s < n.columns; ++s)
                        a.push(i[s]);
                    r.push(a)
                }
                return Fe(r, t)
            }
            function je(e, t, n) {
                var r, o, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "parentheses", i = n.answer_style;
                if ("Single" === i)
                    r = t ? "" : e.single,
                    o = "$$" + (n.unit && "" !== n.unit ? n.single_number + n.unit : n.single_number) + "$$";
                else if ("Fraction" === i)
                    r = t ? "" : "$$\\frac {" + e.numerator + "}{" + e.denominator + "}$$",
                    o = "$$\\frac{" + n.numerator + "}{" + n.denominator + "}$$";
                else if ("Mixed" === i)
                    r = t ? "" : "$$" + e.wholenumber + " \\frac {" + e.numerator + "}{" + e.denominator + "}$$",
                    o = "$$" + n.whole_number + " \\frac {" + n.numerator + "}{" + n.denominator + "}$$";
                else if ("Exponential" === i)
                    r = t ? "" : "$$ {" + e.base + "} ^ {" + e.exponent + "}$$",
                    o = "$$ {" + n.base + "} ^ {" + n.exponent + "}$$";
                else if ("Matrix" === i) {
                    var s = []
                      , u = Ne(n.matrix);
                    if (null != u) {
                        for (var c = 0; c < u.rows; ++c) {
                            for (var l = [], d = 0; d < u.columns; ++d)
                                l.push(e["c_" + c + "_" + d]);
                            s.push(l)
                        }
                        r = t ? "" : Fe(s, a),
                        o = Me(n, a)
                    }
                }
                return {
                    answer: r,
                    canonicalAnswer: o
                }
            }
            function qe(e, t, n, r, o) {
                function a(e) {
                    t ? o(e, e, !1) : r(e, e)
                }
                Ee(function(e) {
                    for (var t = [], n = e.split("<br>"), r = 0; r < n.length; ++r)
                        t.push(he(n[r]));
                    return t.join("\n")
                }(e), (function(e) {
                    return xe(e, a, n)
                }
                ), (function(e) {
                    var t = e.split("/");
                    2 === t.length ? o(t[0], t[1], !0) : o(e, e, !0)
                }
                ))
            }
            var Be = {
                TextDescription: function() {
                    return {}
                },
                TextMultpleChoice: ne,
                RatedMultipleChoice: function(e, t) {
                    for (var n = 0, r = e.Answers ? e.Answers : [], o = 0; o < r.length; ++o)
                        X(r[o].value) > n && (n = X(r[o].value));
                    if (null === t || u()(t, {}))
                        return {
                            correctness: -1,
                            autoCorrectness: -1,
                            score: 0,
                            outof: n
                        };
                    var a = X(r[t].value);
                    return {
                        correctness: a === n ? 1 : 0,
                        autoCorrectness: 0 === a ? 0 : 1,
                        score: a,
                        outof: n
                    }
                },
                TextMultiSelect: ce,
                QuestionTable: function(e, t, n) {
                    var r = e.rows || [];
                    function o(e, t) {
                        var n = e.rows[t].split(/##/);
                        return n.length > 1 ? n[1].trim() : null
                    }
                    function a(e, t) {
                        var n = e.rows[t]
                          , r = n.split(/##/);
                        return r.length > 1 ? r[0] : n
                    }
                    t = t || y()(Array(r.length), !1);
                    for (var i = {}, s = e.columns ? e.columns : [], u = 0; u < s.length; ++u)
                        i[s[u].trim()] = u;
                    for (var c = [], l = [], d = [], f = 0; f < t.length; ++f) {
                        var p = parseInt(t[f])
                          , h = o(e, f);
                        d.push(a(e, f)),
                        null != i[h] ? l.push(i[h]) : l.push(null),
                        isNaN(p) ? c.push(-1) : null !== h && i.hasOwnProperty(h) ? i[h] === p ? c.push(1) : c.push(0) : c.push(-2)
                    }
                    var m = ee(e)
                      , g = c;
                    return {
                        correctness: c = Z(g, n),
                        autoCorrectness: g,
                        score: oe(c, 1) * m,
                        outof: c.length * m,
                        correctAnswers: l,
                        questions: d
                    }
                },
                MultiSelectQuestionTable: function(e, t, n) {
                    var r = e.rows || [];
                    t = t || y()(Array(r.length), !1);
                    for (var o = "yes" === e.limited_selection, a = {}, i = e.columns ? e.columns : [], s = 0; s < i.length; ++s)
                        a[i[s].trim()] = s;
                    var u = []
                      , c = []
                      , l = [];
                    f()(t, (function(t, n) {
                        var r = function(e, t) {
                            for (var n = function(e, t) {
                                return e.rows[t].split(/##/)
                            }(e, t), r = y()(Array(i.length), !1), o = 1; o < n.length; ++o) {
                                var s = n[o].trim();
                                a.hasOwnProperty(s) && (r[a[s]] = !0)
                            }
                            return r
                        }(e, n);
                        l.push(function(e, t) {
                            var n = e.rows[t]
                              , r = n.split(/##/);
                            return r.length > 1 ? r[0] : n
                        }(e, n)),
                        c.push(r),
                        u.push(x()(t, (function(e, t) {
                            return 1 === e === r[t] ? 1 : 0
                        }
                        )))
                    }
                    ));
                    var d = ee(e)
                      , p = 0
                      , m = 0;
                    if (o) {
                        var g = h()(c)
                          , v = h()(u)
                          , w = 0;
                        f()(g, (function(e, t) {
                            e && (m += d),
                            e && 1 === v[t] && (w += 1)
                        }
                        )),
                        p = w * d
                    } else if ("each" === e.policy) {
                        var b = te(e)
                          , C = h()(c)
                          , E = h()(u)
                          , k = 0
                          , S = 0;
                        f()(C, (function(e, t) {
                            e && (m += d),
                            e && 1 === E[t] ? k += 1 : e || 0 !== E[t] || (S += 1)
                        }
                        )),
                        p = Math.max(0, k * d - S * b)
                    } else
                        f()(u, (function(e) {
                            oe(e, 1) === e.length && (p += d)
                        }
                        )),
                        m = u.length * d;
                    var T = u;
                    return {
                        correctness: u = Z(T, n),
                        autoCorrectness: T,
                        score: p,
                        outof: m,
                        correctAnswers: c,
                        questions: l
                    }
                },
                PictureMultpleChoice: ne,
                PictureMultiSelect: ce,
                MultiLine: function(e, t, n) {
                    var r = ee(e);
                    if (t = t || "",
                    !e.hasOwnProperty("Keywords") || 0 === e.Keywords.length)
                        return {
                            correctness: T = _ = "" === t ? -1 : -2,
                            autoCorrectness: _,
                            score: 1 === T ? r : 0,
                            outof: r,
                            keywords: []
                        };
                    var a = e.Keywords
                      , s = e["case-sensitive"];
                    t = (0,
                    K.prepareForCompare)(t, s),
                    t = (0,
                    K.replaceBadQuotes)(t);
                    for (var u = 0, c = 0, d = [], p = [], h = 0; h < a.length; ++h) {
                        for (var m = l()((0,
                        K.trimAll)(a[h].split(/##/)), (function(e) {
                            return "" !== e
                        }
                        )), g = [], v = m.length > 1 && !1 === isNaN(m[m.length - 1]), w = 0; w < (v ? m.length - 1 : m.length); ++w)
                            g[w] = (0,
                            K.prepareForCompare)(m[w], s);
                        var b = function(e, t, n, r) {
                            for (var o = 0; o < r; ++o)
                                if (-1 !== e.indexOf((0,
                                K.replaceBadQuotes)(n[o])))
                                    return t[o];
                            return null
                        };
                        if (v) {
                            var y = X(m[m.length - 1]);
                            p.push(y),
                            ++u,
                            null != (C = b(t, m, g, m.length - 1)) ? d.push({
                                keyword: C,
                                match: !0
                            }) : d.push({
                                keyword: m[0],
                                match: !1
                            })
                        } else {
                            var C;
                            p.push(0),
                            ++c,
                            null != (C = b(t, m, g, m.length)) ? d.push({
                                keyword: C,
                                match: !0
                            }) : d.push({
                                keyword: m[0],
                                match: !1
                            })
                        }
                    }
                    u > 0 && c > 0 && console.error("Info: multiline question with keywords with and without points, keywords without points don't contribute to score.");
                    var x = l()(d, {
                        match: !0
                    }).length;
                    o()(n) && n.length <= d.length && f()(d, (function(e, t) {
                        e.autoMatch = e.match,
                        null != n[t] && (e.match = 1 === n[t])
                    }
                    ));
                    var E = l()(d, {
                        match: !0
                    }).length;
                    if ("" === t)
                        return {
                            correctness: T = _ = -1,
                            autoCorrectness: _,
                            score: 0,
                            outof: r,
                            keywords: d
                        };
                    if (u > 0) {
                        f()(d, (function(e, t) {
                            e.match && 0 != p[t] && (e.points = p[t] + "")
                        }
                        ));
                        var k = i()(l()(p, (function(e, t) {
                            return null != d[t].autoMatch ? d[t].autoMatch : d[t].match
                        }
                        )))
                          , S = i()(l()(p, (function(e, t) {
                            return d[t].match
                        }
                        )));
                        return {
                            correctness: T = S >= r ? 1 : 0,
                            autoCorrectness: _ = k >= r ? 1 : 0,
                            score: S > r ? r : S,
                            outof: r,
                            keywords: d
                        }
                    }
                    var T, _ = x === a.length ? 1 : 0;
                    return {
                        correctness: T = E === a.length ? 1 : 0,
                        autoCorrectness: _,
                        score: 1 === T ? r : 0,
                        outof: r,
                        keywords: d
                    }
                },
                RichText: function(e, t, n) {
                    var r = ee(e)
                      , o = null != t && "" !== t ? -2 : -1;
                    return {
                        correctness: Z(o, n),
                        autoCorrectness: o,
                        score: 0,
                        outof: r
                    }
                },
                ExtraMultiLine: function() {
                    return null
                },
                ExtraCheckbox: function() {
                    return null
                },
                FillInText: function(e, t, n) {
                    t = t || [];
                    var r = e["case-sensitive"];
                    var o = 0
                      , a = [];
                    fe(ge(e), (function(e, n) {
                        if (null !== n)
                            if (o < t.length) {
                                var i = (s = n,
                                u = t[o++].trim(),
                                "text" === s.type ? function(e, t) {
                                    if ("" === t)
                                        return -1;
                                    var n = he(e.typeconfig);
                                    return "" === n ? -2 : (0,
                                    K.matchesOneOfAnswers)(t, n, r) ? 1 : 0
                                }(s, u) : "select" === s.type ? function(e, t) {
                                    return null == t || "-" === t ? -1 : "" !== t || function(e) {
                                        for (var t = e.split(/##/, 1), n = 0; n < t.length; ++n)
                                            if ("" === t[n])
                                                return !0;
                                        return !1
                                    }(e.typeconfig) ? t === he((n = e.typeconfig.split(/##/, 1)).length > 0 ? n[0].trim() : "") ? 1 : 0 : -1;
                                    var n
                                }(s, u) : null);
                                null !== i && a.push(i)
                            } else
                                t.length > 0 && console.error("Error: FIT has more input fields than answers"),
                                a.push(-1);
                        var s, u
                    }
                    ));
                    var i = ee(e)
                      , s = a
                      , u = (a = Z(s, n),
                    e.policy || "each");
                    return {
                        correctness: a,
                        autoCorrectness: s,
                        score: ae(a, u, i),
                        outof: ie(a, u, i)
                    }
                },
                FillInTable: function(e, t, n) {
                    function r(e, n) {
                        for (var r = 0; r < t.length; ++r) {
                            var o = t[r];
                            if (o.row === e && o.column === n)
                                return o.value.trim()
                        }
                        return null
                    }
                    t = t || [];
                    for (var o = e["case-sensitive"], a = e.tabledata, i = [], s = [], u = a && a.values ? a.values : [], c = 0; c < u.length; ++c)
                        for (var l = u[c], d = 0; d < l.length; ++d) {
                            var f = l[d];
                            if (f.hasOwnProperty("CellRole"))
                                if ("input" === f.CellRole)
                                    null === (p = r(c, d)) || "" === p ? (i.push(-1),
                                    s.push({
                                        row: c,
                                        column: d,
                                        answer: "",
                                        correctness: -1
                                    })) : (i.push(-2),
                                    s.push({
                                        row: c,
                                        column: d,
                                        answer: p,
                                        correctness: -2
                                    }));
                                else if ("checked" === f.CellRole) {
                                    var p = r(c, d)
                                      , h = f.value.startsWith("select:") ? f.value.replace(/^(select:)/, "").split("##")[0] : f.value;
                                    if ("" === p && "" === h) {
                                        i.push(1),
                                        s.push({
                                            row: c,
                                            column: d,
                                            answer: "",
                                            correctness: 1
                                        });
                                        continue
                                    }
                                    if (null === p || "" === p) {
                                        i.push(-1);
                                        var m = {
                                            row: c,
                                            column: d,
                                            answer: "",
                                            correctness: -1
                                        };
                                        "" !== h && (m.correct = h),
                                        s.push(m);
                                        continue
                                    }
                                    if ("" === f.value) {
                                        i.push(-2),
                                        s.push({
                                            row: c,
                                            column: d,
                                            answer: p,
                                            correctness: -2
                                        });
                                        continue
                                    }
                                    (0,
                                    K.matchesOneOfAnswers)(p, h, o) ? (i.push(1),
                                    s.push({
                                        row: c,
                                        column: d,
                                        answer: p,
                                        correct: h,
                                        correctness: 1
                                    })) : (i.push(0),
                                    s.push({
                                        row: c,
                                        column: d,
                                        answer: p,
                                        correct: h,
                                        correctness: 0
                                    }))
                                }
                        }
                    var g = ee(e)
                      , v = i;
                    i = Z(v, n);
                    var w = e.policy || "each";
                    return {
                        correctness: i,
                        autoCorrectness: v,
                        correctioninfo: s,
                        score: ae(i, w, g),
                        outof: ie(i, w, g)
                    }
                },
                AnnotatePicture: function(e, t, n) {
                    t = t || [];
                    for (var r = [], o = e["case-sensitive"], a = e.EditFields ? e.EditFields : [], i = 0; i < a.length; ++i) {
                        var s = a[i]
                          , u = i < t.length ? t[i].trim() : "";
                        if ("" === u)
                            r.push(-1);
                        else if (s.Valid && "" !== s.Valid)
                            if (s.Valid.startsWith("select:")) {
                                var c = s.Valid.split(":");
                                c.shift();
                                var l = c.join(":").split("##");
                                (0,
                                K.matchesOneOfAnswers)(u, l[0], o) ? r.push(1) : r.push(0)
                            } else
                                (0,
                                K.matchesOneOfAnswers)(u, s.Valid, o) ? r.push(1) : r.push(0);
                        else
                            r.push(-2)
                    }
                    var d = ee(e)
                      , f = r
                      , p = (r = Z(f, n),
                    e.policy || "each");
                    return {
                        correctness: r,
                        autoCorrectness: f,
                        score: ae(r, p, d),
                        outof: ie(r, p, d)
                    }
                },
                SingleLine: function(e, t, n) {
                    t = (t = t || "").trim();
                    var r, o = ee(e);
                    if ("" === t)
                        r = -1;
                    else {
                        var a = e.Valid;
                        if ("" === a)
                            r = -2;
                        else {
                            var i = e["case-sensitive"];
                            r = (0,
                            K.matchesOneOfAnswers)(t, a, i) ? 1 : 0
                        }
                    }
                    var s = Z(r, n);
                    return {
                        correctness: s,
                        autoCorrectness: r,
                        score: 1 === s ? o : 0,
                        outof: o
                    }
                },
                PictureOrdering: function(e, t, n) {
                    var r = e.Pictures || [];
                    t = t || y()(Array(r.length), null);
                    for (var o = ee(e), a = [], i = 0; i < r.length; ++i)
                        i >= t.length || null === t[i] ? a.push(-1) : t[i] === Se(r[i]) ? a.push(1) : a.push(0);
                    var s = a
                      , u = (a = Z(s, n),
                    e.policy);
                    return {
                        correctness: a,
                        autoCorrectness: s,
                        score: ae(a, u, o),
                        outof: ie(a, u, o)
                    }
                },
                WordOrdering: function(e, t, n) {
                    var r = e.Words || []
                      , o = ee(e);
                    if ("each" === e.policy) {
                        for (var a = [], i = 0; i < r.length; ++i)
                            null === t ? a.push(-1) : t[i] === r[i] ? a.push(1) : a.push(0);
                        return {
                            correctness: a = Z(s = a, n),
                            autoCorrectness: s,
                            score: oe(a, 1) * o,
                            outof: a.length * o
                        }
                    }
                    if (null === t || u()(t, {}))
                        return {
                            correctness: a = Z(s = -1, n),
                            autoCorrectness: s,
                            score: 0,
                            outof: o
                        };
                    var s, c = "Sentences" === e.order_type ? "\n" : " ", l = r.join(c), d = t ? t.join(c) : "", f = !1;
                    if (d === l)
                        f = !0;
                    else if (e.AlternateAnswers) {
                        d = t.join(" ");
                        var p = e.AlternateAnswers;
                        for (i = 0; i < p.length; ++i)
                            d.replace(/ /g, "") === p[i].replace(/ /g, "") && (f = !0)
                    }
                    return {
                        correctness: a = Z(s = a = f ? 1 : 0, n),
                        autoCorrectness: s,
                        score: a * o,
                        outof: o
                    }
                },
                Match: De,
                WordMatch: function(e, t, n) {
                    return De(e, t, Te, Te, n)
                },
                WordPictureMatch: function(e, t, n) {
                    return De(e, t, Te, Se, n)
                },
                AudioWordMatch: function(e, t, n) {
                    return De(e, t, _e, Te, n)
                },
                AudioPictureMatch: function(e, t, n) {
                    return De(e, t, _e, Se, n)
                },
                PicturePictureMatch: function(e, t, n) {
                    return De(e, t, Se, Se, n)
                },
                DragDrop: Pe,
                TextDragDrop: function(e, t, n) {
                    return Pe(e, t, Te, n)
                },
                PictureDragDrop: function(e, t, n) {
                    return Pe(e, t, Se, n)
                },
                Whiteboard: Re,
                Photo: Re,
                AudioRecording: Re,
                Numeric: function(e, t, n) {
                    var r = e.answer_style;
                    if ("Single" === r) {
                        var o = (t = t || {
                            single: ""
                        }).single;
                        if ("" === o)
                            v = -1;
                        else if (null != (g = e.single_number) && (g = g.trim()),
                        "" === g)
                            v = -2;
                        else if (isNaN(g) && isNaN(g.replace(",", ".")))
                            v = function(e, t, n) {
                                try {
                                    if (void 0 !== n && "" !== n) {
                                        var r = Le("0" + n);
                                        if (null !== r) {
                                            if (null === (o = Le(t)))
                                                return !1;
                                            if (o.unit !== r.unit)
                                                return !1;
                                            t = o.value * Math.pow(10, o.scale - r.scale)
                                        }
                                    } else {
                                        var o;
                                        if (null !== (o = Le(t)))
                                            return !1
                                    }
                                    return e = (e = (e = (e = e.replace(/NOT/g, "!")).replace(/AND/g, "&&")).replace(/OR/g, "||")).replace(/X/g, t),
                                    !0 === (0,
                                    T.Ay)({}, e)
                                } catch (n) {
                                    return console.log("Problem calculating expression, returning false", e, t),
                                    !1
                                }
                            }(g, o.replace(",", "."), e.unit) ? 1 : 0;
                        else if (void 0 === e.unit || "" === e.unit)
                            v = null === (a = Le(o)) && X(o) === X(g) ? 1 : 0;
                        else {
                            var a = Le(o)
                              , i = Le("0" + e.unit);
                            v = null === a || null === i || a.unit !== i.unit || X(o) * Math.pow(10, a.scale - i.scale) !== X(g) ? 0 : 1
                        }
                    } else {
                        var s = []
                          , u = [];
                        if ("Fraction" === r)
                            t = t || {
                                numeragor: "",
                                denominator: ""
                            },
                            s.push(t.numerator),
                            s.push(t.denominator),
                            u.push(e.numerator),
                            u.push(e.denominator);
                        else if ("Mixed" === r)
                            t = t || {
                                wholenumber: "",
                                numeragor: "",
                                denominator: ""
                            },
                            s.push(t.wholenumber),
                            s.push(t.numerator),
                            s.push(t.denominator),
                            u.push(e.whole_number),
                            u.push(e.numerator),
                            u.push(e.denominator);
                        else if ("Exponential" === r)
                            t = t || {
                                base: "",
                                exponent: ""
                            },
                            s.push(t.base),
                            s.push(t.exponent),
                            u.push(e.base),
                            u.push(e.exponent);
                        else {
                            if ("Matrix" !== r)
                                return console.error("Wrong type for Numeric question type: ", r),
                                null;
                            t = t || {};
                            var c = Ne(e.matrix);
                            if (null != c)
                                for (var l = 0; l < c.rows; ++l)
                                    for (var d = e.matrix[l].trim().split(" "), f = 0; f < c.columns; ++f)
                                        s.push(t["c_" + l + "_" + f]),
                                        u.push(d[f])
                        }
                        var p = !0
                          , h = !0
                          , m = !1;
                        for (l = 0; l < s.length; ++l) {
                            var g;
                            "" !== s[l] && (p = !1),
                            null != (g = u[l]) && (g = g.trim()),
                            "" === g && (m = !0),
                            g !== s[l] && (h = !1)
                        }
                        v = p ? -1 : m ? -2 : h ? 1 : 0
                    }
                    var v, w = ee(e), b = v;
                    return {
                        correctness: v = Z(b, n),
                        autoCorrectness: b,
                        score: 1 === v ? w : 0,
                        outof: w
                    }
                },
                BalanceChemicalEquation: function(e, t, n) {
                    var r = e.Equation || ""
                      , o = S.parseEquation(r)
                      , a = S.reduceReactantsAndProducts(o);
                    t = t || ("type3" === e.SubType ? [] : {
                        balanced: "",
                        reactantsTable: "type1" === e.SubType ? [] : l()(x()(a.reactants, (function(e, t) {
                            return {
                                row: t,
                                value: ""
                            }
                        }
                        )), (function(e, t) {
                            return t % 2 == 1
                        }
                        )),
                        productsTable: "type1" === e.SubType ? x()(a.products, (function(e, t) {
                            return {
                                row: t,
                                value: ""
                            }
                        }
                        )) : l()(x()(a.products, (function(e, t) {
                            return {
                                row: t,
                                value: ""
                            }
                        }
                        )), (function(e, t) {
                            return t % 2 == 0
                        }
                        ))
                    });
                    var i = [];
                    function s(e, t) {
                        for (var n = 0; n < e.length; ++n) {
                            var r = e[n];
                            "" === r.value ? i.push(-1) : i.push(parseInt(r.value) === t[r.row].qty ? 1 : 0)
                        }
                    }
                    switch (e.SubType) {
                    case "type1":
                    case "type2":
                        "" === t.balanced ? i.push(-1) : S.isBalanced(r) === ("yes" === t.balanced) ? i.push(1) : i.push(0),
                        s(t.reactantsTable, a.reactants),
                        s(t.productsTable, a.products);
                        break;
                    case "type3":
                        for (var u = o.reactants.concat(o.products), c = 0; c < u.length; ++c)
                            c < t.length ? i.push(u[c].qty === parseInt(t[c]) ? 1 : 0) : i.push(-1)
                    }
                    var d = ee(e)
                      , f = i;
                    return {
                        correctness: i = Z(f, n),
                        autoCorrectness: f,
                        score: oe(i, 1) * d,
                        outof: i.length * d
                    }
                },
                IonicCompoundBuilder: function(e, t, n) {
                    t = t || {
                        posIons: [],
                        negIons: []
                    };
                    var r = S.parseFormula(e.Valid || "")
                      , o = t.posIons.concat(t.negIons)
                      , a = S.joinIonsToFormula(o)
                      , i = S.totalCharge(o);
                    s = 0 === a.length ? -1 : 0 !== i ? 0 : S.equalFormulas(a, r) ? 1 : 0;
                    var s, u = ee(e), c = s;
                    return {
                        correctness: s = Z(c, n),
                        autoCorrectness: c,
                        score: 1 === s ? u : 0,
                        outof: u
                    }
                },
                CorrectSentence: function(e, t, n) {
                    t = t || [];
                    var r = []
                      , o = []
                      , a = []
                      , i = e["case-sensitive"]
                      , s = "each" === e.policy
                      , u = "yes" === e["all-words-editable"]
                      , c = 0
                      , l = !1;
                    qe(e.Sentence || "", u, (function() {}
                    ), (function() {}
                    ), (function(e, n, u) {
                        var d = c < t.length ? t[c++] : "";
                        d !== e && (l = !0),
                        s ? (a.push(1),
                        r.push(d),
                        (0,
                        K.matchesOneOfAnswers)(d, n, i) ? o.push(1) : d === e ? o.push(-1) : o.push(0)) : (a.push(u ? 1 : -1),
                        r.push(d),
                        (0,
                        K.matchesOneOfAnswers)(d, n, i) ? o.push(1) : u ? o.push(d === e ? -1 : 0) : o.push(0))
                    }
                    ));
                    var d = ee(e)
                      , f = te(e)
                      , p = o
                      , h = (o = Z(p, n),
                    oe(a, 1))
                      , m = 0
                      , g = 0;
                    for (c = 0; c < a.length; ++c)
                        1 === a[c] ? 1 === o[c] && ++m : 1 !== o[c] && ++g;
                    var v = Math.max(m * d - g * f, 0);
                    return {
                        correctness: o,
                        autoCorrectness: p,
                        score: v,
                        answers: r,
                        outof: h * d,
                        answered: l
                    }
                },
                DragWordsInSentence: function(e, t, n) {
                    t = t || [];
                    var r = 0
                      , o = [];
                    ve((0,
                    $.richTextAsHtml)(e.Sentence), (function(e, n) {
                        if (null !== n)
                            if (r < t.length) {
                                var a = (i = n,
                                "" === (s = t[r++].trim()) ? -1 : s.trim() === i.trim() ? 1 : 0);
                                null !== a && o.push(a)
                            } else
                                o.push(-1),
                                t.length > 0 && console.error("Error: DWIS has more input fields than answers");
                        var i, s
                    }
                    ));
                    var a = ee(e)
                      , i = o;
                    return {
                        correctness: o = Z(i, n),
                        autoCorrectness: i,
                        score: oe(o, 1) * a,
                        outof: o.length * a
                    }
                },
                Equations: function(e, t, n) {
                    t = t || [];
                    var r = 0
                      , o = [];
                    we((0,
                    $.richTextAsHtml)(e.Sentence), (function(e, n) {
                        if (null !== n)
                            if (r < t.length) {
                                var a = t[r++].trim()
                                  , i = function(e, t) {
                                    return "" === (t = t.trim()) ? -1 : "" === (e = e.trim()) ? -2 : -1 === e.split("##").map((function(e) {
                                        return (e = e.trim()).startsWith("$$") && (e = e.substring(2)),
                                        e.endsWith("$$") && (e = e.substring(0, e.length - 2)),
                                        function(e, t) {
                                            var n, r;
                                            try {
                                                n = D(e)
                                            } catch (e) {
                                                n = null
                                            }
                                            try {
                                                r = D(t)
                                            } catch (e) {
                                                r = null
                                            }
                                            return null == n ? null == r && e === t : null != r && F(Y(n), Y(r))
                                        }(t, e.trim()) ? 1 : 0
                                    }
                                    )).indexOf(1) ? 0 : 1
                                }(he(n), a);
                                null !== i && o.push(i)
                            } else
                                o.push(-1),
                                t.length > 0 && console.error("Error: EQ has more input fields than answers")
                    }
                    ));
                    var a = ee(e)
                      , i = o
                      , s = (o = Z(i, n),
                    e.policy || "each");
                    return {
                        correctness: o,
                        autoCorrectness: i,
                        score: ae(o, s, a),
                        outof: ie(o, s, a)
                    }
                },
                Group: function(e, t, n) {
                    t = t || [];
                    var r = []
                      , o = []
                      , a = []
                      , i = e.groups || [];
                    if (Math.max.apply(0, x()(t, (function(e) {
                        return e.length
                    }
                    ))) <= 1)
                        r = y()(Array(i.length), -1),
                        o = y()(Array(t.length), -1),
                        a = y()(Array(t.length), [-1]);
                    else {
                        var s = x()(i, (function(e) {
                            return ye(e.elements || [])
                        }
                        ))
                          , u = x()(t, (function(e) {
                            return ye(e)
                        }
                        ));
                        r = x()(s, (function(e) {
                            return -1 === u.indexOf(e) ? 0 : 1
                        }
                        )),
                        o = x()(u, (function(e) {
                            return -1 === s.indexOf(e) ? 0 : 1
                        }
                        )),
                        a = function(e, t) {
                            for (var n = [], r = function(e, t) {
                                return e.map((function(e, n) {
                                    return t.map((function(t, r) {
                                        var o = (e.elements || []).map((function(e) {
                                            return k()(be(e))
                                        }
                                        ))
                                          , a = t.map((function(e) {
                                            var t = function(e, t) {
                                                return e.indexOf(k()(be(t)))
                                            }(o, e);
                                            return t >= 0 ? (o.splice(t, 1),
                                            1) : 0
                                        }
                                        ));
                                        return {
                                            correctness: a,
                                            total: a.reduce((function(e, t) {
                                                return e + t
                                            }
                                            ), 0),
                                            answerIndex: r,
                                            groupIndex: n
                                        }
                                    }
                                    ))
                                }
                                ))
                            }(e, t), o = w()(r), a = w()(e); a.length >= 1; ) {
                                var i = Ce(o);
                                if (void 0 !== i.answerIndex && void 0 !== i.groupIndex) {
                                    var s = o[i.groupIndex][i.answerIndex];
                                    n[s.answerIndex] = s.correctness;
                                    for (var u = 0; u < o.length; u++)
                                        o[u].splice(i.answerIndex, 1);
                                    o.splice(i.groupIndex, 1),
                                    a.splice(i.groupIndex, 1)
                                } else
                                    a = []
                            }
                            return n = t.map((function(e, t) {
                                return n[t] || e.map((function() {
                                    return 0
                                }
                                ))
                            }
                            )),
                            n
                        }(i, t)
                    }
                    var c = Z(r, n)
                      , l = ee(e)
                      , d = ("each" === e.policy ? function(e) {
                        return h()(e).filter((function(e) {
                            return 1 === e
                        }
                        )).reduce((function(e, t) {
                            return e + t
                        }
                        ), 0)
                    }(a) : oe(c, 1)) * l;
                    return {
                        correctness: c,
                        autoCorrectness: r,
                        score: d,
                        outof: ("each" === e.policy ? e.groups.map((function(e) {
                            return e.elements ? e.elements.length : 0
                        }
                        )).reduce((function(e, t) {
                            return e + t
                        }
                        ), 0) : c.length) * l,
                        answerCorrectness: o,
                        answerItemCorrectness: a
                    }
                },
                MarkSentence: function(e, t, n) {
                    var r = []
                      , o = []
                      , a = 0
                      , i = oe(t = t || [], "") === t.length;
                    ke(e.Sentence || "", (function() {}
                    ), (function() {
                        i ? (r.push(-1),
                        o.push(-1)) : "" === t[a] ? (r.push(1),
                        o.push(1)) : (r.push(0),
                        o.push(0)),
                        ++a
                    }
                    ), (function(n) {
                        if ("yes" === e.mark_individual_words) {
                            var s = !0;
                            xe(n.word, (function() {
                                i ? o.push(-1) : t[a] === n.type ? o.push(1) : (o.push(0),
                                s = !1),
                                ++a
                            }
                            ), (function() {}
                            )),
                            i ? r.push(-1) : s ? r.push(1) : r.push(0)
                        } else
                            i ? (r.push(-1),
                            o.push(-1)) : t[a] === n.type ? (r.push(1),
                            o.push(1)) : (r.push(0),
                            o.push(0)),
                            ++a
                    }
                    ));
                    var s = r;
                    r = Z(s, n);
                    var u = 0
                      , c = 0
                      , l = 0
                      , d = null
                      , f = 1;
                    a = 0,
                    ke(e.Sentence || "", (function() {}
                    ), (function() {
                        0 !== r[a] || d === t[a] && 0 == f ? d = "" : (++u,
                        d = t[a]),
                        f = r[a],
                        ++a
                    }
                    ), (function() {
                        ++l,
                        1 === r[a] ? (++c,
                        d = "") : 0 === r[a] && (d = t[a]),
                        ++a
                    }
                    ));
                    var p = ee(e)
                      , h = te(e);
                    return {
                        correctness: r,
                        autoCorrectness: s,
                        wordcorrectness: o,
                        score: Math.max(0, c * p - u * h),
                        outof: p * l
                    }
                },
                CrossWord: function(e, t, n) {
                    t = t || [];
                    var r = []
                      , o = e["case-sensitive"]
                      , a = e.words
                      , i = (0,
                    G.W0)([], t)
                      , s = [];
                    if (a && a.length > 0)
                        for (var u = 0; u < a.length; u++) {
                            var c = a[u]
                              , l = (0,
                            G.fI)(i, c)
                              , d = (0,
                            G.sy)(i, c);
                            s.push(l),
                            d ? (0,
                            K.matchesOneOfAnswers)(c.word, l, o) ? r.push(1) : r.push(0) : r.push(-1)
                        }
                    var f = (0,
                    G.A$)(i, a, o)
                      , p = ee(e)
                      , h = r;
                    return {
                        correctness: r = Z(h, n),
                        autoCorrectness: h,
                        score: oe(r, 1) * p,
                        outof: r.length * p,
                        correctedCrossword: f,
                        answerWords: s
                    }
                },
                Rubric: function(e, t, n) {
                    var r = e.rubric
                      , o = 0
                      , a = []
                      , i = 0;
                    if (r) {
                        var s = r.labels
                          , u = r.rows;
                        if (s && s.length && u && u.length) {
                            var c = s.map((function(e) {
                                return X(e.weight) || 0
                            }
                            ))
                              , l = 0;
                            u.forEach((function(e) {
                                var t = e.cells.map((function(e, t) {
                                    return "0" === e.weight ? X(e.weight) : X(e.weight) || c[t] || 0
                                }
                                ));
                                n && e.cells.forEach((function(e, r) {
                                    1 === n[l] && (i += t[r]),
                                    l++
                                }
                                ));
                                var r, a = Math.max.apply(Math, function(e) {
                                    if (Array.isArray(e))
                                        return J(e)
                                }(r = t) || function(e) {
                                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                                        return Array.from(e)
                                }(r) || function(e, t) {
                                    if (e) {
                                        if ("string" == typeof e)
                                            return J(e, t);
                                        var n = Object.prototype.toString.call(e).slice(8, -1);
                                        return "Object" === n && e.constructor && (n = e.constructor.name),
                                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? J(e, t) : void 0
                                    }
                                }(r) || function() {
                                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                }());
                                o += a
                            }
                            )),
                            a = u.map((function() {
                                return s.map((function() {
                                    return -2
                                }
                                ))
                            }
                            )).reduce((function(e, t) {
                                return e.concat(t)
                            }
                            ))
                        }
                    }
                    var d = a;
                    return a = Z(d, n),
                    "no" === e.needs_correction ? {
                        correctness: a,
                        autoCorrectness: -2,
                        score: 0,
                        outof: 0
                    } : {
                        correctness: a,
                        autoCorrectness: d,
                        score: i,
                        outof: o
                    }
                }
            };
            function We(e) {
                return e.replace(/\b(?:https?):\/\/[a-z0-9-+&@#/%?=~_|!:,.;]*[a-z0-9-+&@#/%=~_|]/gim, '<a href="$&" target="_blank" class="weblink">$&</a>')
            }
            function Ue(e) {
                return -1 !== g()(["RichText", "Photo", "Whiteboard", "AudioRecording", "Rubric"], e)
            }
        },
        2616: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                ionlist: function() {
                    return r
                }
            });
            var r = [{
                ion: "H",
                charge: 1,
                pattern: [{
                    atom: "H",
                    qty: 1
                }]
            }, {
                ion: "K",
                charge: 1,
                pattern: [{
                    atom: "K",
                    qty: 1
                }]
            }, {
                ion: "Cu",
                charge: 1,
                pattern: [{
                    atom: "Cu",
                    qty: 1
                }]
            }, {
                ion: "Ag",
                charge: 1,
                pattern: [{
                    atom: "Ag",
                    qty: 1
                }]
            }, {
                ion: "Na",
                charge: 1,
                pattern: [{
                    atom: "Na",
                    qty: 1
                }]
            }, {
                ion: "NH4",
                charge: 1,
                pattern: [{
                    atom: "N",
                    qty: 1
                }, {
                    atom: "H",
                    qty: 4
                }]
            }, {
                ion: "Ba",
                charge: 2,
                pattern: [{
                    atom: "Ba",
                    qty: 1
                }]
            }, {
                ion: "Mg",
                charge: 2,
                pattern: [{
                    atom: "Mg",
                    qty: 1
                }]
            }, {
                ion: "Cu",
                charge: 2,
                pattern: [{
                    atom: "Cu",
                    qty: 1
                }]
            }, {
                ion: "Pb",
                charge: 2,
                pattern: [{
                    atom: "Pb",
                    qty: 1
                }]
            }, {
                ion: "Fe",
                charge: 2,
                pattern: [{
                    atom: "Fe",
                    qty: 1
                }]
            }, {
                ion: "Zn",
                charge: 2,
                pattern: [{
                    atom: "Zn",
                    qty: 1
                }]
            }, {
                ion: "Ca",
                charge: 2,
                pattern: [{
                    atom: "Ca",
                    qty: 1
                }]
            }, {
                ion: "Al",
                charge: 3,
                pattern: [{
                    atom: "Al",
                    qty: 1
                }]
            }, {
                ion: "Fe",
                charge: 3,
                pattern: [{
                    atom: "Fe",
                    qty: 1
                }]
            }, {
                ion: "I",
                charge: -1,
                pattern: [{
                    atom: "I",
                    qty: 1
                }]
            }, {
                ion: "Cl",
                charge: -1,
                pattern: [{
                    atom: "Cl",
                    qty: 1
                }]
            }, {
                ion: "F",
                charge: -1,
                pattern: [{
                    atom: "F",
                    qty: 1
                }]
            }, {
                ion: "NO3",
                charge: -1,
                pattern: [{
                    atom: "N",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 3
                }]
            }, {
                ion: "OH",
                charge: -1,
                pattern: [{
                    atom: "O",
                    qty: 1
                }, {
                    atom: "H",
                    qty: 1
                }]
            }, {
                ion: "HCO3",
                charge: -1,
                pattern: [{
                    atom: "H",
                    qty: 1
                }, {
                    atom: "C",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 3
                }]
            }, {
                ion: "CH3COO",
                charge: -1,
                pattern: [{
                    atom: "C",
                    qty: 1
                }, {
                    atom: "H",
                    qty: 3
                }, {
                    atom: "C",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 1
                }]
            }, {
                ion: "CO3",
                charge: -2,
                pattern: [{
                    atom: "C",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 3
                }]
            }, {
                ion: "SO4",
                charge: -2,
                pattern: [{
                    atom: "S",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 4
                }]
            }, {
                ion: "O",
                charge: -2,
                pattern: [{
                    atom: "O",
                    qty: 1
                }]
            }, {
                ion: "S",
                charge: -2,
                pattern: [{
                    atom: "S",
                    qty: 1
                }]
            }, {
                ion: "PO4",
                charge: -3,
                pattern: [{
                    atom: "P",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 4
                }]
            }, {
                ion: "Hg",
                charge: 1,
                pattern: [{
                    atom: "Hg",
                    qty: 1
                }]
            }, {
                ion: "Hg",
                charge: 2,
                pattern: [{
                    atom: "Hg",
                    qty: 1
                }]
            }, {
                ion: "Ni",
                charge: 2,
                pattern: [{
                    atom: "Ni",
                    qty: 1
                }]
            }, {
                ion: "Mn",
                charge: 2,
                pattern: [{
                    atom: "Mn",
                    qty: 1
                }]
            }, {
                ion: "Mn",
                charge: 4,
                pattern: [{
                    atom: "Mn",
                    qty: 1
                }]
            }, {
                ion: "Sn",
                charge: 2,
                pattern: [{
                    atom: "Sn",
                    qty: 1
                }]
            }, {
                ion: "Sn",
                charge: 4,
                pattern: [{
                    atom: "Sn",
                    qty: 1
                }]
            }, {
                ion: "Pb",
                charge: 4,
                pattern: [{
                    atom: "Pb",
                    qty: 1
                }]
            }, {
                ion: "Cr",
                charge: 3,
                pattern: [{
                    atom: "Cr",
                    qty: 1
                }]
            }, {
                ion: "NO2",
                charge: -1,
                pattern: [{
                    atom: "N",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 2
                }]
            }, {
                ion: "Br",
                charge: -1,
                pattern: [{
                    atom: "Br",
                    qty: 1
                }]
            }, {
                ion: "MnO4",
                charge: -1,
                pattern: [{
                    atom: "Mn",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 4
                }]
            }, {
                ion: "HPO4",
                charge: -2,
                pattern: [{
                    atom: "H",
                    qty: 1
                }, {
                    atom: "P",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 4
                }]
            }, {
                ion: "SO3",
                charge: -2,
                pattern: [{
                    atom: "S",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 3
                }]
            }, {
                ion: "HCOO",
                charge: -1,
                pattern: [{
                    atom: "H",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 1
                }]
            }, {
                ion: "PO3",
                charge: -3,
                pattern: [{
                    atom: "P",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 3
                }]
            }, {
                ion: "ClO",
                charge: -1,
                pattern: [{
                    atom: "Cl",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 1
                }]
            }, {
                ion: "ClO2",
                charge: -1,
                pattern: [{
                    atom: "Cl",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 2
                }]
            }, {
                ion: "ClO3",
                charge: -1,
                pattern: [{
                    atom: "Cl",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 3
                }]
            }, {
                ion: "ClO4",
                charge: -1,
                pattern: [{
                    atom: "Cl",
                    qty: 1
                }, {
                    atom: "O",
                    qty: 4
                }]
            }]
        },
        17902: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                equalFormulas: function() {
                    return O
                },
                formatEquation: function() {
                    return v
                },
                formatFormula: function() {
                    return h
                },
                formatIon: function() {
                    return m
                },
                isBalanced: function() {
                    return E
                },
                joinIonsToFormula: function() {
                    return _
                },
                matchIon: function() {
                    return k
                },
                matchOrder: function() {
                    return C
                },
                parseCharge: function() {
                    return l
                },
                parseEquation: function() {
                    return p
                },
                parseFormula: function() {
                    return d
                },
                reduceIons: function() {
                    return T
                },
                reduceReactantsAndProducts: function() {
                    return x
                },
                splitFormulaInIons: function() {
                    return S
                },
                totalCharge: function() {
                    return A
                }
            });
            var r = n(53142)
              , o = n.n(r)
              , a = function(e) {
                return !isNaN(1 * e)
            }
              , i = function(e) {
                var t = e.charCodeAt(0);
                return t >= 65 && t <= 90 || t >= 97 && t <= 122
            }
              , s = function(e) {
                return i(e) && e === e.toUpperCase()
            }
              , u = function(e) {
                return i(e) && e === e.toLowerCase()
            }
              , c = function(e, t, n, r, a) {
                var i;
                if (t)
                    if ("" === n && (n = 1),
                    o()(t) && "1" === n)
                        for (var s = 0; s < t.length; ++s)
                            i = {
                                atom: t[s].atom,
                                qty: parseInt(t[s].qty)
                            },
                            s === t.length - 1 && (0 !== r && (i.charge = r),
                            "" !== a && (i.phase = a)),
                            e.push(i);
                    else
                        i = {
                            atom: t,
                            qty: parseInt(n)
                        },
                        0 !== r && (i.charge = r),
                        "" !== a && (i.phase = a),
                        e.push(i)
            }
              , l = function(e) {
                for (var t = "", n = 0, r = 0; r < e.length; ++r) {
                    var o = e.charAt(r);
                    if (a(o))
                        t += o;
                    else if ("+" === o) {
                        if (n = 1,
                        r !== e.length - 1)
                            return 0
                    } else {
                        if ("-" !== o)
                            return 0;
                        if (n = -1,
                        r !== e.length - 1)
                            return 0
                    }
                }
                return parseInt(t) * n
            }
              , d = function e(t) {
                var n = []
                  , r = ""
                  , o = ""
                  , i = 0
                  , d = "";
                if (-1 !== t.indexOf("!") || -1 !== t.indexOf("@") || -1 !== t.indexOf("#") || -1 !== t.indexOf("$"))
                    return [];
                var f = t + "H";
                f = f.replace(/\(s\)/g, "!").replace(/\(aq\)/g, "@").replace(/\(g\)/g, "#").replace(/\(l\)/g, "$");
                for (var p = 0; p < f.length; ++p) {
                    var h = f.charAt(p);
                    if (s(h))
                        c(n, r, o, i, d),
                        r = h,
                        o = "",
                        d = "",
                        i = 0;
                    else if (u(h)) {
                        if (!r)
                            return [];
                        r += h
                    } else if (a(h)) {
                        if (!r)
                            return [];
                        o += h
                    } else if ("(" === h) {
                        for (var m = !1, g = p + 1; g < f.length; ++g)
                            if (")" === f.charAt(g)) {
                                m = !0;
                                break
                            }
                        if (!m)
                            return [];
                        if (!a(f.charAt(g + 1)))
                            return [];
                        if (c(n, r, o, i, d),
                        0 === (r = e(f.substring(p + 1, g))).length)
                            return [];
                        o = "",
                        d = "",
                        i = 0,
                        p = g
                    } else if ("{" === h) {
                        for (m = !1,
                        g = p + 1; g < f.length; ++g)
                            if ("}" === f.charAt(g)) {
                                m = !0;
                                break
                            }
                        if (!m)
                            return [];
                        var v = f.substring(p + 1, g);
                        i = l(v),
                        p = g
                    } else if ("!" === h) {
                        if ("" !== d)
                            return [];
                        d = "s"
                    } else if ("@" === h) {
                        if ("" !== d)
                            return [];
                        d = "aq"
                    } else if ("#" === h) {
                        if ("" !== d)
                            return [];
                        d = "g"
                    } else {
                        if ("$" !== h)
                            return [];
                        if ("" !== d)
                            return [];
                        d = "l"
                    }
                }
                return n
            }
              , f = function(e, t) {
                for (var n = "", r = 0; r < e.length; ++r) {
                    var o = e.charAt(r);
                    if (!a(o)) {
                        n = "" === n ? 1 : parseInt(n);
                        var i = d(e.substring(r));
                        return 0 !== i.length && (t.push({
                            formula: i,
                            qty: n
                        }),
                        !0)
                    }
                    n += o
                }
                return console.error("Chemistryparser parseTerm: This should never happen"),
                !1
            }
              , p = function(e) {
                var t = e.replace(/ /g, "").split("=");
                if (2 !== t.length)
                    return {
                        reactants: [],
                        products: []
                    };
                for (var n = t[0].replace(/\+\}/g, "*}").split("+"), r = t[1].replace(/\+\}/g, "*}").split("+"), o = [], a = [], i = 0; i < n.length; ++i) {
                    var s = n[i].replace(/\*\}/g, "+}");
                    if (!f(s, o))
                        return {
                            reactants: [],
                            products: []
                        }
                }
                for (i = 0; i < r.length; ++i)
                    if (s = r[i].replace(/\*\}/g, "+}"),
                    !f(s, a))
                        return {
                            reactants: [],
                            products: []
                        };
                return {
                    reactants: o,
                    products: a
                }
            }
              , h = function e(t) {
                for (var n = "", r = 0; r < t.length; ++r) {
                    var a = t[r];
                    o()(a.atom) ? a.qty > 1 ? n = n + "(" + e(a.atom) + ")" : n += e(a.atom) : n += a.atom,
                    a.qty > 1 && (n = n + "_{" + a.qty + "}"),
                    a.phase && (n = n + "(" + a.phase + ")")
                }
                return n
            }
              , m = function(e) {
                var t = h(d(e.ion)) + "^{";
                return 1 === e.charge ? t += "+" : -1 === e.charge ? t += "-" : e.charge > 0 ? t += e.charge + "+" : t += -e.charge + "-",
                t + "}"
            }
              , g = function(e, t) {
                for (var n = [], r = 0; r < e.length; ++r) {
                    var o = e[r]
                      , a = "";
                    t || 1 === o.qty || (a = o.qty + " \\, "),
                    a += h(o.formula),
                    t ? n.push({
                        formula: a,
                        qty: o.qty
                    }) : n.push(a)
                }
                return n
            }
              , v = function(e, t) {
                return {
                    reactants: g(e.reactants, t),
                    products: g(e.products, t)
                }
            }
              , w = function(e) {
                for (var t = [], n = 0; n < e.length; ++n)
                    for (var r = e[n].formula, a = e[n].qty, i = 0; i < r.length; ++i) {
                        var s = r[i];
                        if (o()(s.atom))
                            for (var u = 0; u < s.atom.length; ++u)
                                t.push({
                                    atom: s.atom[u].atom,
                                    qty: s.atom[u].qty * s.qty * a
                                });
                        else
                            t.push({
                                atom: s.atom,
                                qty: s.qty * a
                            })
                    }
                return t
            }
              , b = function(e) {
                for (var t = [], n = 0; n < e.length; ++n) {
                    for (var r = e[n], o = !1, a = 0; a < t.length; ++a) {
                        var i = t[a];
                        if (r.atom === i.atom) {
                            i.qty = i.qty + r.qty,
                            o = !0;
                            break
                        }
                    }
                    o || t.push(r)
                }
                return t
            }
              , y = function(e, t) {
                for (var n = 0; n < e.length; ++n)
                    if (e[n].atom === t)
                        return n;
                return -1
            }
              , C = function(e, t) {
                for (var n = 0, r = 0; r < e.length; ++r) {
                    var o = y(t, e[r].atom);
                    if (o === n)
                        ++n;
                    else if (o >= n) {
                        var a = t.splice(o, 1)[0];
                        t.splice(n, 0, a),
                        ++n
                    }
                }
            }
              , x = function(e) {
                var t = w(e.reactants)
                  , n = w(e.products);
                return t = b(t),
                n = b(n),
                C(t, n),
                {
                    reactants: t,
                    products: n
                }
            }
              , E = function(e) {
                var t = p(e)
                  , n = x(t);
                if (0 === n.reactants.length)
                    return !1;
                if (n.reactants.length !== n.products.length)
                    return !1;
                for (var r = 0; r < n.reactants.length; ++r) {
                    var o = n.reactants[r]
                      , a = n.products[r];
                    if (a.atom !== o.atom || a.qty !== o.qty)
                        return !1
                }
                return !0
            }
              , k = function(e, t) {
                var n = 1;
                if (o()(e[0].atom)) {
                    if (n = e[0].qty,
                    e = e[0].atom,
                    t.pattern.length !== e.length)
                        return 0
                } else if (t.pattern.length > e.length)
                    return 0;
                for (var r = 0; r < t.pattern.length; ++r) {
                    var a = t.pattern[r]
                      , i = e[r];
                    if (a.atom !== i.atom)
                        return 0;
                    if (1 === t.pattern.length)
                        n = i.qty;
                    else if (a.qty !== i.qty)
                        return 0
                }
                return n
            }
              , S = function(e, t) {
                for (var n = [], r = d(e); r.length > 0; ) {
                    for (var o = {
                        ion: {
                            pattern: []
                        }
                    }, a = 0; a < t.length; ++a) {
                        var i = t[a]
                          , s = k(r, i);
                        s > 0 && i.pattern.length > o.ion.pattern.length && (o = {
                            ion: i,
                            qty: s
                        })
                    }
                    if (!(o.ion.pattern.length > 0))
                        return console.error("Error: formula contains unknown ions!"),
                        console.error("Partial match: "),
                        console.error(n),
                        console.error("Head of parsedFormula:"),
                        console.error(r),
                        [];
                    n.push({
                        ion: o.ion.ion,
                        charge: o.ion.charge,
                        qty: o.qty
                    }),
                    o.qty > 1 ? r.splice(0, 1) : r.splice(0, o.ion.pattern.length)
                }
                return n
            }
              , T = function(e) {
                for (var t = [], n = 0; n < e.length; ++n) {
                    for (var r = e[n], o = !1, a = 0; a < t.length; ++a) {
                        var i = t[a];
                        if (r.ion === i.ion.ion && r.charge === i.ion.charge) {
                            i.qty++,
                            o = !0;
                            break
                        }
                    }
                    o || t.push({
                        ion: r,
                        qty: 1
                    })
                }
                return t
            }
              , _ = function(e) {
                e = T(e);
                for (var t = [], n = 0; n < e.length; ++n) {
                    var r = e[n];
                    1 === r.ion.pattern.length ? t.push({
                        atom: r.ion.pattern[0].atom,
                        qty: r.qty
                    }) : t.push({
                        atom: r.ion.pattern,
                        qty: r.qty
                    })
                }
                return function(e) {
                    for (var t = [], n = 0; n < e.length; ++n) {
                        var r = e[n];
                        if (o()(r.atom))
                            if (1 === r.qty)
                                for (var a = 0; a < r.atom.length; ++a)
                                    t.push({
                                        atom: r.atom[a].atom,
                                        qty: r.atom[a].qty
                                    });
                            else
                                t.push(r);
                        else
                            t.push(r)
                    }
                    return t
                }(t)
            }
              , A = function(e) {
                for (var t = 0, n = 0; n < e.length; ++n)
                    t += e[n].charge;
                return t
            }
              , O = function e(t, n) {
                if (t.length !== n.length)
                    return !1;
                for (var r = 0; r < t.length; ++r) {
                    if (t[r].qty !== n[r].qty)
                        return !1;
                    if (o()(t[r].atom)) {
                        if (!o()(n[r].atom))
                            return !1;
                        if (!e(t[r].atom, n[r].atom))
                            return !1
                    } else if (t[r].atom !== n[r].atom)
                        return !1
                }
                return !0
            }
        },
        54542: function(e) {
            e.exports = {
                light: {
                    white: "#FFFFFF",
                    black: "#010539",
                    red: "#D34400",
                    orange: "#F39C12",
                    yellow: "#F1C40F",
                    green: "#13A04E",
                    "#00de00": "#13A04E",
                    blue: "#3498DB",
                    purple: "#9B59B6",
                    "#bc00de": "#9B59B6",
                    brown: "#A56D47"
                },
                dark: {
                    white: "#FFFFFF",
                    black: "#010539",
                    red: "#C0392B",
                    orange: "#E67E22",
                    yellow: "#F39C12",
                    green: "#118C44",
                    "#00de00": "#118C44",
                    blue: "#2980B9",
                    purple: "#8E44AD",
                    "#bc00de": "#8E44AD",
                    brown: "#8C6239"
                }
            }
        },
        65585: function(e, t) {
            "use strict";
            t.A = function(e) {
                if ("undefined" == typeof window || window.navigator && window.navigator.userAgent && (window.navigator.userAgent.indexOf("PhantomJS") >= 0 || window.navigator.userAgent.indexOf("ibookwidgets") >= 0)) {
                    e = e.replace(/&quot;/g, '"');
                    var t = /src='([^']+)'/.exec(e);
                    return t || (t = /src="([^"]+)"/.exec(e)) ? t[1] : null
                }
                var n = (new window.DOMParser).parseFromString("<html>" + e + "</html>", "text/html").getElementsByTagName("iframe");
                return n.length > 0 ? n[0].src : null
            }
        },
        93394: function(e, t) {
            "use strict";
            t.A = function(e) {
                return "undefined" == typeof window || window.navigator && window.navigator.userAgent && (window.navigator.userAgent.indexOf("PhantomJS") >= 0 || window.navigator.userAgent.indexOf("ibookwidgets") >= 0) ? e : (new window.DOMParser).parseFromString("<div>" + e + "</div>", "text/html").documentElement.textContent
            }
        },
        74827: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                isLetter: function() {
                    return o
                },
                isLetterRegexp: function() {
                    return r
                }
            });
            var r = function() {
                try {
                    return RegExp(/^\p{L}/, "u")
                } catch (e) {
                    return /(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])/
                }
            }();
            function o(e) {
                return null != e.match(r)
            }
        },
        58065: function(e, t, n) {
            var r = n(85685)
              , o = n(71651);
            o.default && (o = o.default);
            var a = {
                ADD_TAGS: ["iframe"],
                ADD_ATTR: ["target", "autocorrect", "marker", "widget"]
            }
              , i = o();
            r.fn.extend({
                sanitizeHtml: function(e, t) {
                    return i.sanitize(e, t || a)
                },
                safeHtml: function(e, t) {
                    return null == e ? this.html() : this.html(this.sanitizeHtml(e, t))
                },
                safeAppend: function(e, t) {
                    return null == e ? this.append(null) : this.append(this.sanitizeHtml(e, t))
                },
                safeAttr: function(e, t) {
                    var n = this.get(0).tagName;
                    return i.isValidAttribute(n, e, t) ? this.attr(e, t) : this
                },
                isSafeURLForNavigation: function(e) {
                    return i.isValidAttribute("a", "href", e)
                }
            }),
            e.exports = r
        },
        26598: function(e) {
            e.exports = function() {
                var e = {
                    0: "debug",
                    1: "info",
                    2: "error"
                };
                function t(t, n, r) {
                    return n >= r ? function() {
                        !function(t, n, r) {
                            var o = Array.prototype.slice.call(r);
                            o.unshift(t + " (" + e[n] + "):"),
                            console.log.apply(console, o)
                        }(t, n, arguments)
                    }
                    : function() {}
                }
                return {
                    DEBUG: 0,
                    INFO: 1,
                    ERROR: 2,
                    createLogger: function(e, n) {
                        return void 0 === n && (n = 1),
                        {
                            debug: t(e, 0, n),
                            info: t(e, 1, n),
                            error: t(e, 2, n)
                        }
                    }
                }
            }()
        },
        19986: function(e) {
            e.exports = function() {
                function e(e) {
                    return window.location.origin + window.location.pathname.substr(0, window.location.pathname.lastIndexOf("/") + 1) + e
                }
                return {
                    createTextOrPictureAnswer: function(t, n) {
                        return "undefined" == typeof bwshortcode ? t : {
                            type: "Image",
                            url: e(n),
                            name: t
                        }
                    },
                    createPairAnswer: function(t, n, r, o) {
                        return "undefined" == typeof bwshortcode ? "" !== r ? t + " - " + r : t + " -" : "" === r ? void 0 === n || "" === n ? {
                            type: "WordPair",
                            name1: t,
                            name2: ""
                        } : {
                            type: "ImageWordPair",
                            url1: e(n),
                            name1: t,
                            name2: ""
                        } : void 0 === n || "" === n ? void 0 === o || "" === o ? {
                            type: "WordPair",
                            name1: t,
                            name2: r
                        } : {
                            type: "WordImagePair",
                            name1: t,
                            name2: r,
                            url2: e(o)
                        } : void 0 === o || "" === o ? {
                            type: "ImageWordPair",
                            name1: t,
                            url1: e(n),
                            name2: r
                        } : {
                            type: "ImagePair",
                            name1: t,
                            url1: e(n),
                            name2: r,
                            url2: e(o)
                        }
                    },
                    createWordListAnswer: function(t, n) {
                        if ("undefined" == typeof bwshortcode) {
                            for (var r = [], o = 0; o < n.length; ++o)
                                r.push(n[o].name);
                            return t + " - " + r.join(" ")
                        }
                        for (var a = {
                            name: t,
                            list: [],
                            type: "WordImageListPair"
                        }, i = 0; i < n.length; ++i)
                            void 0 !== n[i].pic && "" !== n[i].pic ? a.list.push({
                                name: n[i].name,
                                url: e(n[i].pic)
                            }) : (a.list.push({
                                name: n[i].name
                            }),
                            a.type = "WordWordListPair");
                        return a
                    }
                }
            }()
        },
        45027: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                createRandomSeed: function() {
                    return r
                },
                randomId: function() {
                    return s
                },
                randomIndexList: function() {
                    return a
                },
                shuffleArray: function() {
                    return o
                }
            }),
            Math.imul || (Math.imul = function(e, t) {
                var n = (4194303 & e) * (t |= 0);
                return 4290772992 & e && (n += (4290772992 & e) * t | 0),
                0 | n
            }
            );
            var r = function(e) {
                for (var t = 1779033703 ^ e.length, n = 0; n < e.length; n++)
                    t = (t = Math.imul(t ^ e.charCodeAt(n), 3432918353)) << 13 | t >>> 19;
                return function() {
                    return t = Math.imul(t ^ t >>> 16, 2246822507),
                    t = Math.imul(t ^ t >>> 13, 3266489909),
                    (t ^= t >>> 16) >>> 0
                }
            }((new Date).toLocaleString() + Math.random());
            function o(e, t) {
                var n = function(e) {
                    return e = e || r(),
                    t = e,
                    function() {
                        var e = t += 1831565813;
                        return e = Math.imul(e ^ e >>> 15, 1 | e),
                        (((e ^= e + Math.imul(e ^ e >>> 7, 61 | e)) ^ e >>> 14) >>> 0) / 4294967296
                    }
                    ;
                    var t
                }(t);
                return e.sort((function() {
                    return .5 - n()
                }
                ))
            }
            function a(e, t) {
                for (var n = [], r = 0; r < e; ++r)
                    n.push(r);
                return o(n, t)
            }
            var i = {};
            function s(e) {
                for (; ; ) {
                    for (var t = "", n = 0; n < e; n++)
                        t += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".charAt(Math.floor(54 * Math.random()));
                    if (!i.hasOwnProperty(t))
                        return i[t] = !0,
                        t
                }
            }
        },
        15541: function(e, t, n) {
            var r = n(45250).remove;
            n(14475);
            var o = window.AudioContext || window.webkitAudioContext;
            e.exports = function(e) {
                return {
                    callbacks: {
                        start: [],
                        stop: [],
                        pause: [],
                        resume: [],
                        streamReady: [],
                        streamError: [],
                        dataAvailable: [],
                        progress: []
                    },
                    start: function() {
                        var t = this
                          , n = navigator.mediaDevices.getUserMedia({
                            audio: !0,
                            video: !1
                        });
                        if (null == n)
                            return console.error("Usermedia did not return promise"),
                            void this.executeCallbacks("streamError", "ERROR");
                        function r(e, t) {
                            var n = this;
                            this.analyser = e.createAnalyser(),
                            this.fftSize = 2048;
                            var r = this.analyser.frequencyBinCount;
                            this.dataArray = new Uint8Array(r),
                            t.connect(this.analyser),
                            this.getAverageVolume = function() {
                                return n.analyser.getByteTimeDomainData(n.dataArray),
                                Math.sqrt(n.dataArray.reduce((function(e, t) {
                                    var n = t - 128;
                                    return (n < -128 || n > 127) && console.log(n),
                                    e + n * n
                                }
                                ), 0) / r)
                            }
                        }
                        var a = function(n) {
                            var a = n.getAudioTracks()[0].getSettings().sampleRate;
                            t.audioContext = new o({
                                sampleRate: a
                            }),
                            t.audioContext ? (t.gumStream = n,
                            t.input = t.audioContext.createMediaStreamSource(t.gumStream),
                            t.volumeAnalyser = new r(t.audioContext,t.input),
                            t.recorder = new WebAudioRecorder(t.input,{
                                workerDir: e.workerDir,
                                encoding: "mp3",
                                numChannels: 2,
                                onEncoderLoading: function(e, t) {
                                    console.log("Loading " + t + " encoder...")
                                },
                                onEncoderLoaded: function(e, t) {
                                    console.log(t + " encoder loaded")
                                }
                            }),
                            t.recorder.onComplete = function(e, n) {
                                t.executeCallbacks("dataAvailable", {
                                    detail: {
                                        blob: n,
                                        mimetype: "audio/mpeg"
                                    }
                                }),
                                t.state = "done",
                                t.audioContext.close && t.audioContext.close()
                            }
                            ,
                            t.recorder.onTimeout = function() {
                                t.stop()
                            }
                            ,
                            t.callbacks.progress.length > 0 && (t.recorder.onEncodingProgress = function(e, t) {
                                console.log("Progress: ", t),
                                this.executeCallbacks("progress", t)
                            }
                            ),
                            t.recorder.setOptions({
                                timeLimit: 600,
                                encodeAfterRecord: !0,
                                mp3: {
                                    bitRate: 64
                                }
                            }),
                            t.recorder.startRecording(),
                            t.executeCallbacks("start")) : t.executeCallbacks("streamError", "ERROR")
                        };
                        n.then((function(e) {
                            if (navigator.mediaDevices.getSupportedConstraints) {
                                var t = navigator.mediaDevices.getSupportedConstraints();
                                t && t.sampleRate ? e.getAudioTracks()[0].applyConstraints({
                                    sampleRate: 48e3
                                }).then((function() {
                                    console.log("Media recorder constraints set"),
                                    a(e)
                                }
                                )).catch((function(t) {
                                    console.error("Could not set media constraints", t),
                                    a(e)
                                }
                                )) : (console.log("No media support for setting sample rate constraint"),
                                a(e))
                            } else
                                console.log("No media support for checking constraints"),
                                a(e)
                        }
                        )).catch((function(e) {
                            console.error("Could not get input for recording"),
                            console.error(e),
                            t.executeCallbacks("streamError", e)
                        }
                        ))
                    },
                    resume: function() {
                        this.recorder.resume(),
                        this.executeCallbacks("resume")
                    },
                    pause: function() {
                        this.recorder.pause(),
                        this.executeCallbacks("pause")
                    },
                    getAverageVolume: function() {
                        return this.volumeAnalyser ? this.volumeAnalyser.getAverageVolume() : 0
                    },
                    stop: function() {
                        this.gumStream.getAudioTracks()[0].stop(),
                        this.recorder && (this.recorder.pause(),
                        this.recorder.finishRecording(),
                        delete this.volumeAnalyser),
                        this.executeCallbacks("stop", {
                            detail: {
                                msg: "Encoding using LAME"
                            }
                        })
                    },
                    initStream: function() {
                        var e = this;
                        "initialized" === this.state || (this.state = "initialized"),
                        null != o && null != navigator.mediaDevices ? setTimeout((function() {
                            e.executeCallbacks("streamReady")
                        }
                        )) : setTimeout((function() {
                            e.executeCallbacks("streamError", "ERROR")
                        }
                        ))
                    },
                    addEventListener: function(e, t) {
                        this.callbacks[e].push({
                            cb: t
                        })
                    },
                    removeEventListener: function(e, t) {
                        r(this.callbacks[e], {
                            cb: t
                        })
                    },
                    executeCallbacks: function() {
                        for (var e = arguments[0], t = [], n = 1; n < arguments.length; ++n)
                            t.push(arguments[n]);
                        for (var r = 0; r < this.callbacks[e].length; ++r)
                            this.callbacks[e][r].cb.apply(null, t)
                    }
                }
            }
        },
        81227: function(e, t, n) {
            "use strict";
            n.d(t, {
                Ay: function() {
                    return v
                }
            });
            var r = n(57581)
              , o = n.n(r)
              , a = n(71651)
              , i = n.n(a)
              , s = n(50421);
            function u(e) {
                return function(e) {
                    if (Array.isArray(e))
                        return c(e)
                }(e) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(e) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return c(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? c(e, t) : void 0
                    }
                }(e) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function c(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var l = u(s.allowed_bwwysiwyg_nodes)
              , d = u(s.allowed_bwwysiwyg_style)
              , f = u(s.allowed_bwwysiwyg_attrs)
              , p = i()();
            function h(e, t) {
                "height" === t.attrName && "svg" !== e.tagName && (t.keepAttr = !1)
            }
            function m(e, t) {
                if ("style" !== t.attrName)
                    return e;
                var n = t.attrValue.split(";")
                  , r = !1
                  , o = n.map((function(e) {
                    var t, n = e.split(":");
                    return "color" !== n[0].trim() ? e : "white" === (t = (t = n[1].trim()).toLowerCase()) || "#fff" === t || 7 === t.length && "#" === t[0] && "f" === t[1] && "f" === t[3] && "f" === t[5] ? (r = !0,
                    "color:#bbb") : e
                }
                ));
                r && (t.attrValue = o.join(";"))
            }
            function g(e, t) {
                var n = d;
                if ("style" !== t.attrName)
                    return e;
                var r = t.attrValue.split(";")
                  , a = o()(r, (function(e) {
                    return n.indexOf(e.split(":")[0].trim()) >= 0
                }
                ));
                r.length !== a.length && (t.attrValue = a.join(";") + (t.attrValue.endsWith(";") ? ";" : ""))
            }
            var v = function(e, t) {
                var n = t && !0 === t.richTextAnswer ? {
                    ALLOWED_TAGS: l,
                    ALLOWED_ATTR: f
                } : null;
                t && !0 === t.removeHeightAttributes && p.addHook("uponSanitizeAttribute", h),
                t && !0 === t.darkenWhiteText && p.addHook("uponSanitizeAttribute", m),
                t && !0 === t.richTextAnswer && p.addHook("uponSanitizeAttribute", g);
                var r = p.sanitize(e, n);
                return r = r.replace('width="16" xmlns="http://www.w3.org/2000/svg"', 'width="16" height="16" xmlns="http://www.w3.org/2000/svg"'),
                t && !0 === t.removeHeightAttributes && p.removeAllHooks(),
                t && !0 === t.darkenWhiteText && p.removeAllHooks(),
                t && !0 === t.richTextAnswer && p.removeAllHooks(),
                r
            }
        },
        97857: function(e, t, n) {
            "use strict";
            n.d(t, {
                JI: function() {
                    return O
                },
                f_: function() {
                    return I
                },
                qm: function() {
                    return R
                }
            });
            var r = n(3514)
              , o = n.n(r)
              , a = n(57581)
              , i = n.n(a)
              , s = n(22053)
              , u = n.n(s)
              , c = n(39817)
              , l = n.n(c)
              , d = n(81936)
              , f = n.n(d)
              , p = n(92154)
              , h = n.n(p)
              , m = n(75254)
              , g = n.n(m)
              , v = n(4642)
              , w = n.n(v)
              , b = n(40105)
              , y = n.n(b)
              , C = n(98274)
              , x = n(2616)
              , E = n(17902)
              , k = n(82750);
            function S(e) {
                var t = /.*c[ts]_(.*)/.exec(e);
                return parseInt(t[1])
            }
            function T(e, t, n, r) {
                for (var o = {}, a = {}, i = 0; i < (r.pairs || []).length; ++i) {
                    var s = r.pairs[i];
                    o[i] = e(s.source, i),
                    a[i] = t(s.target, i)
                }
                return y()(JSON.parse(n), (function(e) {
                    return {
                        source: o[S(e.sourceId)],
                        target: a[S(e.targetId)]
                    }
                }
                ))
            }
            function _(e) {
                var t = JSON.parse(e)
                  , n = [];
                return w()(t, (function(e) {
                    var t = e.name
                      , r = e.words;
                    "DD_BOXES" !== t && w()(r, (function(e) {
                        n.push([e, t])
                    }
                    ))
                }
                )),
                n
            }
            function A(e) {
                return JSON.parse(e).answers
            }
            var O = {
                TextDescription: null,
                TextMultpleChoice: function(e, t) {
                    var n = (t.Answers || []).indexOf(e);
                    return -1 === n ? null : n + 1
                },
                RatedMultipleChoice: function(e, t) {
                    var n = h()(t.Answers || [], {
                        answer: e
                    });
                    return -1 === n ? null : n
                },
                TextMultiSelect: function(e) {
                    return y()(JSON.parse(e) || [], (function(e) {
                        return 1 === e
                    }
                    ))
                },
                QuestionTable: function(e, t) {
                    for (var n = JSON.parse(e), r = [], o = 0; o < (t.rows || []).length; ++o)
                        n && n.hasOwnProperty(o + "") && "" !== n[o + ""] && null != n[o + ""] ? r.push(n[o + ""] + "") : r.push(null);
                    return r
                },
                MultiSelectQuestionTable: function(e) {
                    return JSON.parse(e)
                },
                PictureMultpleChoice: function(e, t) {
                    var n = h()(t.Answers || [], {
                        origbase: e
                    });
                    return -1 === n ? null : n + 1
                },
                PictureMultiSelect: function(e, t) {
                    var n = JSON.parse(e);
                    return y()(t.Answers || [], (function(e) {
                        return -1 !== g()(n, e.origbase)
                    }
                    ))
                },
                MultiLine: u(),
                RichText: u(),
                ExtraMultiLine: u(),
                ExtraCheckbox: function(e) {
                    return "yes" === e ? "yes" : "no"
                },
                FillInText: JSON.parse,
                FillInTable: function(e, t) {
                    for (var n = JSON.parse(e), r = [], o = t.tabledata && t.tabledata.values ? t.tabledata.values : [], a = 0; a < o.length; ++a)
                        for (var i = o[a], s = 0; s < i.length; ++s) {
                            var u = i[s];
                            if (!u.hasOwnProperty("CellRole") || "input" === u.CellRole || "checked" === u.CellRole) {
                                var c = f()(n, {
                                    row: a,
                                    column: s
                                });
                                c ? r.push(c) : r.push({
                                    row: a,
                                    column: s,
                                    value: ""
                                })
                            }
                        }
                    return r
                },
                AnnotatePicture: JSON.parse,
                SingleLine: u(),
                PictureOrdering: function(e) {
                    return y()(JSON.parse(e), (function(e) {
                        return "" === e ? null : e
                    }
                    ))
                },
                WordOrdering: JSON.parse,
                WordMatch: T.bind(null, C.wordId, C.wordId),
                WordPictureMatch: T.bind(null, C.wordId, C.pictureId),
                AudioWordMatch: T.bind(null, C.audioId, C.wordId),
                AudioPictureMatch: T.bind(null, C.audioId, C.pictureId),
                PicturePictureMatch: T.bind(null, C.pictureId, C.pictureId),
                TextDragDrop: _,
                PictureDragDrop: _,
                Whiteboard: null,
                Photo: null,
                AudioRecording: null,
                Numeric: JSON.parse,
                BalanceChemicalEquation: function(e, t) {
                    var n = JSON.parse(e);
                    switch (t.SubType) {
                    case "type1":
                    case "type2":
                        return {
                            balanced: n.checkedAnswer,
                            reactantsTable: n.enteredReactantsTableValues,
                            productsTable: n.enteredProductsTableValues
                        };
                    case "type3":
                        return y()(n.enteredCoefficients, (function(e) {
                            return e ? e + "" : "1"
                        }
                        ))
                    }
                    return null
                },
                IonicCompoundBuilder: function(e) {
                    var t = JSON.parse(e)
                      , n = []
                      , r = [];
                    return w()(t, (function(e) {
                        if (!(e > x.ionlist.length - 1)) {
                            var t = x.ionlist[e];
                            t.charge > 0 ? n.push(Object.assign({}, t, {
                                ionIndex: parseInt(e)
                            })) : r.push(Object.assign({}, t, {
                                ionIndex: parseInt(e)
                            }))
                        }
                    }
                    )),
                    {
                        posIons: n,
                        negIons: r
                    }
                },
                CorrectSentence: function(e, t) {
                    var n = A(e)
                      , r = [];
                    return (0,
                    C.processCorrectSentence)(t.Sentence, "yes" === t["all-words-editable"], (function() {}
                    ), (function() {}
                    ), (function(e) {
                        r.push(e)
                    }
                    )),
                    y()(n, (function(e, t) {
                        return "" === e ? r[t] : " " === e ? "" : e
                    }
                    ))
                },
                DragWordsInSentence: A,
                Equations: A,
                Group: function(e) {
                    var t = A(e);
                    return y()(t, (function(e) {
                        return y()(e, C.cleanGroupElemPaths)
                    }
                    ))
                },
                MarkSentence: A,
                CrossWord: JSON.parse,
                Rubric: JSON.parse
            };
            function D(e, t, n) {
                return n
            }
            function I(e, t, n, r) {
                var o = k.create({
                    background_resize_policy: t.resize_policy,
                    transparentbackground: !1,
                    background_image: t.img,
                    image_on_top: "yes" === t.image_on_top
                });
                return new Promise((function(a) {
                    var i = 0
                      , s = !1;
                    function u() {
                        s && 0 === i && ("PNG" === r | "JPEG" === r && o.restrictUsedArea(-5e3, -5e3, 5e3, 5e3),
                        a(o.imgData(r)))
                    }
                    null != t.img && "" !== t.img && (++i,
                    o.initializeBackgroundImage().then((function() {
                        --i,
                        u()
                    }
                    ))),
                    o.load(e, (function(e, t) {
                        ++i,
                        n.readImage(e).then((function(e) {
                            return t(e)
                        }
                        ))
                    }
                    ), (function() {
                        --i,
                        u()
                    }
                    )),
                    s = !0,
                    u()
                }
                ))
            }
            function P(e) {
                return e
            }
            var R = {
                TextDescription: null,
                TextMultpleChoice: P,
                RatedMultipleChoice: P,
                TextMultiSelect: function(e, t, n) {
                    return t.Answers ? y()(n, (function(e, n) {
                        return e ? t.Answers[n] : ""
                    }
                    )) : []
                },
                QuestionTable: function(e, t, n) {
                    return t.rows ? y()(n, (function(e) {
                        return null !== e ? t.columns[e] : null
                    }
                    )) : []
                },
                MultiSelectQuestionTable: D,
                PictureMultpleChoice: P,
                PictureMultiSelect: function(e, t, n) {
                    return t.Answers ? y()(n, (function(e, n) {
                        return e ? t.Answers[n].origbase : ""
                    }
                    )) : []
                },
                MultiLine: P,
                RichText: P,
                ExtraMultiLine: P,
                ExtraCheckbox: D,
                FillInText: D,
                FillInTable: function(e, t, n) {
                    var r = t.tabledata && t.tabledata.values ? t.tabledata.values : [];
                    return y()(i()(n, (function(e) {
                        return e.row < r.length && e.column < r[e.row].length && ("input" === r[e.row][e.column].CellRole || "checked" === r[e.row][e.column].CellRole)
                    }
                    )), (function(e) {
                        return e.value
                    }
                    ))
                },
                AnnotatePicture: function(e, t, n) {
                    return y()(n, (function(e, n) {
                        return t.EditFields[n].name + ": " + ("" === e ? "(no answer)" : e)
                    }
                    ))
                },
                SingleLine: P,
                PictureOrdering: function(e, t, n) {
                    return y()(n, (function(e) {
                        return null == e ? "" : e
                    }
                    ))
                },
                WordOrdering: function(e, t, n) {
                    return o()(n) ? "" : "each" === t.policy ? n : n.join(" ")
                },
                WordMatch: null,
                WordPictureMatch: null,
                AudioWordMatch: null,
                AudioPictureMatch: null,
                PicturePictureMatch: null,
                TextDragDrop: null,
                PictureDragDrop: null,
                Whiteboard: null,
                AudioRecording: null,
                Photo: null,
                Numeric: function(e, t, n) {
                    var r = -1 !== h()(l()(n, (function(e) {
                        return "" !== e
                    }
                    )));
                    return (0,
                    C.createNumericQuestionAnswer)(n, !r, t).answer
                },
                BalanceChemicalEquation: function() {
                    return null
                },
                IonicCompoundBuilder: function(e, t, n) {
                    var r = n.posIons.concat(n.negIons)
                      , o = E.joinIonsToFormula(r);
                    return "$$" + E.formatFormula(o) + "$$"
                },
                CorrectSentence: D,
                DragWordsInSentence: D,
                Equations: D,
                Group: D,
                MarkSentence: D,
                CrossWord: P,
                Rubric: P
            }
        },
        36326: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                createCaseSensitiveKeywordListMatchRegexpForNFKC: function() {
                    return L
                },
                matchesOneOfAnswers: function() {
                    return A
                },
                prepareForCompare: function() {
                    return S
                },
                removeDiacritics: function() {
                    return h
                },
                removePunctuationMarks: function() {
                    return v
                },
                replaceBadQuotes: function() {
                    return l
                },
                simplifyWhitespace: function() {
                    return x
                },
                trimAll: function() {
                    return _
                }
            });
            var r = n(40105)
              , o = n.n(r)
              , a = n(57581)
              , i = n.n(a)
              , s = n(74827)
              , u = n(1693)
              , c = n.n(u);
            function l(e) {
                return (e || "").replace(/[\u2018\u2019]/g, "'")
            }
            var d = [{
                base: "A",
                letters: "AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"
            }, {
                base: "AA",
                letters: "Ꜳ"
            }, {
                base: "AE",
                letters: "ÆǼǢ"
            }, {
                base: "AO",
                letters: "Ꜵ"
            }, {
                base: "AU",
                letters: "Ꜷ"
            }, {
                base: "AV",
                letters: "ꜸꜺ"
            }, {
                base: "AY",
                letters: "Ꜽ"
            }, {
                base: "B",
                letters: "BⒷＢḂḄḆɃƂƁ"
            }, {
                base: "C",
                letters: "CⒸＣĆĈĊČÇḈƇȻꜾ"
            }, {
                base: "D",
                letters: "DⒹＤḊĎḌḐḒḎĐƋƊƉꝹÐ"
            }, {
                base: "DZ",
                letters: "ǱǄ"
            }, {
                base: "Dz",
                letters: "ǲǅ"
            }, {
                base: "E",
                letters: "EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"
            }, {
                base: "F",
                letters: "FⒻＦḞƑꝻ"
            }, {
                base: "G",
                letters: "GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"
            }, {
                base: "H",
                letters: "HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"
            }, {
                base: "I",
                letters: "IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"
            }, {
                base: "J",
                letters: "JⒿＪĴɈ"
            }, {
                base: "K",
                letters: "KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"
            }, {
                base: "L",
                letters: "LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"
            }, {
                base: "LJ",
                letters: "Ǉ"
            }, {
                base: "Lj",
                letters: "ǈ"
            }, {
                base: "M",
                letters: "MⓂＭḾṀṂⱮƜ"
            }, {
                base: "N",
                letters: "NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"
            }, {
                base: "NJ",
                letters: "Ǌ"
            }, {
                base: "Nj",
                letters: "ǋ"
            }, {
                base: "O",
                letters: "OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"
            }, {
                base: "OI",
                letters: "Ƣ"
            }, {
                base: "OO",
                letters: "Ꝏ"
            }, {
                base: "OU",
                letters: "Ȣ"
            }, {
                base: "OE",
                letters: "Œ"
            }, {
                base: "oe",
                letters: "œ"
            }, {
                base: "P",
                letters: "PⓅＰṔṖƤⱣꝐꝒꝔ"
            }, {
                base: "Q",
                letters: "QⓆＱꝖꝘɊ"
            }, {
                base: "R",
                letters: "RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"
            }, {
                base: "S",
                letters: "SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"
            }, {
                base: "T",
                letters: "TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"
            }, {
                base: "TZ",
                letters: "Ꜩ"
            }, {
                base: "U",
                letters: "UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"
            }, {
                base: "V",
                letters: "VⓋＶṼṾƲꝞɅ"
            }, {
                base: "VY",
                letters: "Ꝡ"
            }, {
                base: "W",
                letters: "WⓌＷẀẂŴẆẄẈⱲ"
            }, {
                base: "X",
                letters: "XⓍＸẊẌ"
            }, {
                base: "Y",
                letters: "YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"
            }, {
                base: "Z",
                letters: "ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"
            }, {
                base: "a",
                letters: "aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"
            }, {
                base: "aa",
                letters: "ꜳ"
            }, {
                base: "ae",
                letters: "æǽǣ"
            }, {
                base: "ao",
                letters: "ꜵ"
            }, {
                base: "au",
                letters: "ꜷ"
            }, {
                base: "av",
                letters: "ꜹꜻ"
            }, {
                base: "ay",
                letters: "ꜽ"
            }, {
                base: "b",
                letters: "bⓑｂḃḅḇƀƃɓ"
            }, {
                base: "c",
                letters: "cⓒｃćĉċčçḉƈȼꜿↄ"
            }, {
                base: "d",
                letters: "dⓓｄḋďḍḑḓḏđƌɖɗꝺ"
            }, {
                base: "dz",
                letters: "ǳǆ"
            }, {
                base: "e",
                letters: "eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"
            }, {
                base: "f",
                letters: "fⓕｆḟƒꝼ"
            }, {
                base: "g",
                letters: "gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"
            }, {
                base: "h",
                letters: "hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"
            }, {
                base: "hv",
                letters: "ƕ"
            }, {
                base: "i",
                letters: "iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"
            }, {
                base: "j",
                letters: "jⓙｊĵǰɉ"
            }, {
                base: "k",
                letters: "kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"
            }, {
                base: "l",
                letters: "lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"
            }, {
                base: "lj",
                letters: "ǉ"
            }, {
                base: "m",
                letters: "mⓜｍḿṁṃɱɯ"
            }, {
                base: "n",
                letters: "nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"
            }, {
                base: "nj",
                letters: "ǌ"
            }, {
                base: "o",
                letters: "oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"
            }, {
                base: "oi",
                letters: "ƣ"
            }, {
                base: "ou",
                letters: "ȣ"
            }, {
                base: "oo",
                letters: "ꝏ"
            }, {
                base: "p",
                letters: "pⓟｐṕṗƥᵽꝑꝓꝕ"
            }, {
                base: "q",
                letters: "qⓠｑɋꝗꝙ"
            }, {
                base: "r",
                letters: "rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"
            }, {
                base: "s",
                letters: "sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"
            }, {
                base: "t",
                letters: "tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"
            }, {
                base: "tz",
                letters: "ꜩ"
            }, {
                base: "u",
                letters: "uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"
            }, {
                base: "v",
                letters: "vⓥｖṽṿʋꝟʌ"
            }, {
                base: "vy",
                letters: "ꝡ"
            }, {
                base: "w",
                letters: "wⓦｗẁẃŵẇẅẘẉⱳ"
            }, {
                base: "x",
                letters: "xⓧｘẋẍ"
            }, {
                base: "y",
                letters: "yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"
            }, {
                base: "z",
                letters: "zⓩｚźẑżžẓẕƶȥɀⱬꝣ"
            }]
              , f = null
              , p = null;
            function h(e) {
                return null == f && (f = function() {
                    for (var e = {}, t = 0; t < d.length; t++)
                        for (var n = d[t].letters, r = 0; r < n.length; r++)
                            e[n[r]] = d[t].base;
                    return e
                }()),
                e.replace(/[\u0301\u0060]/gi, "").replace(/[^\u0000-\u007E]/g, (function(e) {
                    return f[e] || e
                }
                ))
            }
            var m = /[!,-.:;?"'`()[\]{}\u2026\u2014]/g
              , g = "[!,-.:;?\"'`()[\\]{}\\u2026\\u2014]*";
            function v(e) {
                return e.replace(m, "")
            }
            var w = /\s+/g
              , b = "\\s+"
              , y = / ([!,-.:;?"'`()[\]{}\u2026\u2014])/g
              , C = /([!,-.:;?"'`()[\]{}\u2026\u2014]) /g;
            function x(e) {
                return e.replace(w, " ").replace(y, "$1").replace(C, "$1")
            }
            var E = "\\s+[!,-.:;?\"'`()[\\]{}\\u2026\\u2014\\s]*";
            function k(e) {
                if ("string" == typeof e || e instanceof String)
                    switch (e) {
                    case "no":
                        e = {
                            case: "1",
                            accent: "0",
                            white: "0",
                            punct: "0"
                        };
                        break;
                    case "yes_ignore_accents":
                        e = {
                            case: "0",
                            accent: "1",
                            white: "0",
                            punct: "0"
                        };
                        break;
                    case "no_ignore_accents":
                        e = {
                            case: "1",
                            accent: "1",
                            white: "0",
                            punct: "0"
                        };
                        break;
                    default:
                        e = {
                            case: "0",
                            accent: "0",
                            white: "0",
                            punct: "0"
                        }
                    }
                return e
            }
            function S(e, t) {
                return e ? (t = k(t),
                e.normalize && (e = e.normalize("NFKC")),
                t && ("1" === t.case && (e = e.toLowerCase()),
                "1" === t.accent && (e = h(e)),
                "1" === t.punct && (e = v(e)),
                "1" === t.white && (e = x(e))),
                e) : ""
            }
            function T(e) {
                return e.replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F\x7F-\x9F\u200B]/g, "")
            }
            function _(e) {
                for (var t = 0; t < e.length; ++t)
                    e[t] = e[t].trim();
                return e
            }
            function A(e, t, n) {
                e = l(e),
                t = l(t),
                e = S(e, n);
                var r = _((t = S(t, n)).split(/##/));
                r.length > 1 && (r = i()(r));
                for (var o = 0; o < r.length; ++o)
                    if (T(e.trim()) === T(r[o].trim()))
                        return !0;
                return !1
            }
            var O = function(e) {
                return (e + "").replace(/([\\.+*?[^\]$(){}=!<>|:])/g, "\\$1")
            }
              , D = /\s/g
              , I = null;
            function P(e) {
                return !(null == e.match(D))
            }
            function R(e) {
                return !(null == e.match(m))
            }
            function L(e, t) {
                var n = (t = k(t)) && "1" === t.case ? "gi" : "g"
                  , r = t && "1" === t.punct
                  , a = t && "1" === t.white
                  , i = t && "1" === t.accent;
                if (e = o()(e, (function(e) {
                    return e.normalize ? e.normalize("NFKC") : e
                }
                )),
                !r && !a && !i) {
                    var u = o()(e, O).join("|");
                    return new RegExp("(" + u + ")",n)
                }
                null == I && (I = new (c())),
                i && null == p && (p = function() {
                    for (var e = {}, t = 0; t < d.length; t++)
                        if (1 === d[t].base.length)
                            for (var n = d[t].letters + d[t].base, r = "[" + n + "]", o = 0; o < n.length; o++)
                                e[n[o]] = r;
                    return e
                }());
                var l = o()(e, (function(e) {
                    for (var t = I.splitGraphemes(e), n = [], o = 0; o < t.length; ++o) {
                        var u, c = t[o];
                        if ((0,
                        s.isLetter)(c))
                            i ? n.push(null !== (u = p[c]) && void 0 !== u ? u : c) : n.push(c),
                            r && o !== t.length - 1 && n.push(g);
                        else if (P(c))
                            if (a)
                                if (r) {
                                    for (; o + 1 < t.length && (P(t[o + 1]) || R(t[o + 1])); )
                                        ++o;
                                    n.push(E)
                                } else {
                                    for (; o + 1 < t.length && P(t[o + 1]); )
                                        ++o;
                                    n.push(b)
                                }
                            else
                                n.push(c),
                                r && n.push(g);
                        else
                            R(c) && r || n.push(O(c))
                    }
                    return n.join("")
                }
                )).join("|");
                return new RegExp("(" + l + ")",n)
            }
        },
        90589: function(e, t, n) {
            "use strict";
            function r(e) {
                if (0 === e.length)
                    throw new Error("too little params");
                var t = e[0];
                return e.shift(),
                t
            }
            function o(e) {
                if (0 === e.length)
                    throw new Error("too little params");
                if (isNaN(e[0]))
                    throw new Error("wrong param type, not int");
                var t = parseInt(e[0]);
                return e.shift(),
                t
            }
            function a(e, t) {
                return e.length > 0 && e[0] === t && (e.shift(),
                !0)
            }
            function i(e, t, n) {
                if ("" === e)
                    return "";
                var r = function(e, t) {
                    var n = Math.pow(10, t || 0);
                    return String(Math.round(e * n) / n)
                }(e, t);
                return n && (r = String(r).split("").reverse().join("").replace(/(\d{3}\B)/g, "$1,").split("").reverse().join("")),
                r
            }
            function s(e, t) {
                if (isNaN(e))
                    return e;
                var n, s, u, c, l = e, d = t.split(", ");
                try {
                    if ("number" === (n = r(d)))
                        l = i(e, s = o(d), u = a(d, "ts"));
                    else if ("percentage" === n)
                        l = i(100 * e, s = o(d), u = a(d, "ts")),
                        l += "%";
                    else if ("currency" === n) {
                        s = o(d),
                        u = a(d, "ts"),
                        c = r(d);
                        var f = a(d, "post");
                        l = i(e, s, u),
                        f ? l += c : l = c + l
                    }
                } catch (e) {
                    console.log("Error parsing format: " + e)
                }
                return l
            }
            function u(e, t, n) {
                for (var r = 0; r < e.length; ++r) {
                    var o = e[r];
                    if (o.row === t && o.column === n)
                        return o
                }
                return null
            }
            function c(e, t, n, r) {
                for (var o = '<table border="1" style="border-collapse:collapse">', a = e && e.values ? e.values : [], i = 0; i < a.length; ++i) {
                    o += "<tr>";
                    for (var c = a[i], l = 0; l < c.length; ++l) {
                        var d, f = c[l];
                        if (f.hasOwnProperty("CellRole"))
                            if ("checked" === f.CellRole || "input" === f.CellRole) {
                                var p = r ? u(r.correctioninfo, i, l) : null;
                                f.hasOwnProperty("CellFormat") ? (d = s(t[i][l], f.CellFormat),
                                n && p && (0 === p.correctness || -1 === p.correctness && p.hasOwnProperty("correct")) && (d += " (" + s(p.correct, f.CellFormat) + ")")) : (d = t[i][l],
                                n && p && (0 === p.correctness || -1 === p.correctness && p.hasOwnProperty("correct")) && (d += " (" + p.correct + ")"))
                            } else
                                d = "calculated" === f.CellRole ? f.hasOwnProperty("CellFormat") ? s(t[i][l], f.CellFormat) : t[i][l] : f.value;
                        else
                            d = f.hasOwnProperty("CellFormat") ? s(t[i][l], f.CellFormat) : t[i][l];
                        var h = "padding: 5px;";
                        if (n && f.hasOwnProperty("CellRole") && ("checked" === f.CellRole || "input" === f.CellRole)) {
                            var m = r ? u(r.correctioninfo, i, l) : null
                              , g = m && -2 === m.correctness
                              , v = m && 1 === m.correctness;
                            g ? (h += "color:black;",
                            h += "background: #FAAE3C;") : v ? (h += "color:green;",
                            h += "background: #C0FFC0;") : (h += "color:red;",
                            h += "background:#FFC0C0;")
                        } else
                            f.hasOwnProperty("BackgroundColor") && (h += "background:" + f.BackgroundColor + ";"),
                            f.hasOwnProperty("TextColor") && (h += "color:" + f.TextColor + ";");
                        f.hasOwnProperty("HAlign") && (h += "text-align:" + f.HAlign + ";"),
                        f.hasOwnProperty("VAlign") && (h += "vertical-align:" + f.VAlign + ";"),
                        f.hasOwnProperty("BorderLeft") && (h += "border-left:" + f.BorderLeft + ";"),
                        f.hasOwnProperty("BorderRight") && (h += "border-right:" + f.BorderRight + ";"),
                        f.hasOwnProperty("BorderTop") && (h += "border-top:" + f.BorderTop + ";"),
                        f.hasOwnProperty("BorderBottom") && (h += "border-bottom:" + f.BorderBottom + ";"),
                        o += '<td style="' + h + '">' + d + "</td>"
                    }
                    o += "</tr>"
                }
                return o + "</table>"
            }
            n.r(t),
            n.d(t, {
                findCorrection: function() {
                    return u
                },
                realValueToDisplayValue: function() {
                    return s
                },
                styledTableToHtml: function() {
                    return c
                }
            })
        },
        63181: function(e, t, n) {
            "use strict";
            n.d(t, {
                Tl: function() {
                    return a
                },
                ks: function() {
                    return o
                }
            }),
            n(58065);
            var r = [];
            function o(e) {
                r = e
            }
            function a(e) {
                return r && r[e] && "" !== r[e] ? r[e] : e
            }
        },
        69713: function(e, t, n) {
            function r(e) {
                return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                r(e)
            }
            e = n.nmd(e);
            var o = n(24846).imageToDataURL;
            !function(t, o) {
                "use strict";
                "function" == typeof bwdefine ? bwdefine("bw/whiteboard_drawing", ["bw/color-maps"], o) : "object" === r(e) && e.exports && (e.exports = o(n(54542)))
            }(0, (function(e) {
                "use strict";
                function t(e) {
                    return e.substr(2)
                }
                function n(t) {
                    return "background" === t ? "background" : e && e.light.hasOwnProperty(t) ? e.light[t] : t
                }
                function r(e) {
                    return "C," + n(e)
                }
                function a(e) {
                    var t = e.split(",");
                    return t.shift(),
                    {
                        dx: parseInt(t.shift()),
                        dy: parseInt(t.shift()),
                        w: parseInt(t.shift()),
                        h: parseInt(t.shift()),
                        rad: parseFloat(t.shift()),
                        src: t.join(",")
                    }
                }
                return {
                    transformToRgbColors: function(e) {
                        var n = [];
                        try {
                            for (var o = e.split("\n"), a = 0; a < o.length; ++a) {
                                var i = o[a];
                                if ("C" === i[0]) {
                                    var s = t(i);
                                    n.push(r(s))
                                } else
                                    n.push(i)
                            }
                        } catch (e) {
                            console.log("Exception transforming drawing to rgb"),
                            console.log(e)
                        }
                        return n.join("\n")
                    },
                    getPhotosFromData: function(e) {
                        if (!e)
                            return [];
                        var t = [];
                        try {
                            for (var n = e.split("\n"), r = 0; r < n.length; ++r) {
                                var o = n[r];
                                if ("P" === o[0]) {
                                    var i = a(o);
                                    t.push(i.src)
                                }
                            }
                        } catch (e) {
                            console.log("Exception getting photos"),
                            console.log(e)
                        }
                        return t
                    },
                    create: function() {
                        var e = []
                          , r = 0;
                        function i() {
                            r < e.length - 1 && e.splice(r + 1, e.length - 1 - r),
                            e[r].objectpointer < e[r].objects.length && e[r].objects.splice(e[r].objectpointer, e[r].objects.length - e[r].objectpointer)
                        }
                        function s(t) {
                            return i(),
                            e[r].objects.push(t),
                            ++e[r].objectpointer,
                            t
                        }
                        function u(e, t, n) {
                            return s({
                                type: "line",
                                points: e,
                                color: t,
                                linewidth: n
                            })
                        }
                        function c(e, t, n, r, o) {
                            return s({
                                type: "text",
                                x: e,
                                y: t,
                                text: n,
                                color: r,
                                fontsize: o
                            })
                        }
                        function l(e, t, n, r, o, a, i) {
                            return s({
                                type: "photo",
                                img: e,
                                imgsrc: t,
                                dx: n,
                                dy: r,
                                w: o,
                                h: a,
                                rad: i
                            })
                        }
                        function d(e) {
                            return parseInt(e.substr(2))
                        }
                        function f(e) {
                            return parseInt(e.substr(2))
                        }
                        function p(e) {
                            return parseInt(e.substr(2))
                        }
                        function h(e, t, n) {
                            for (var r = e.split(","), o = [], a = 1; a < r.length; ++a) {
                                var i = r[a].split(":");
                                2 !== i.length ? console.log("Invalid point when reading whiteboard line: " + r[a]) : o.push({
                                    x: parseInt(i[0]),
                                    y: parseInt(i[1])
                                })
                            }
                            u(o, t, n)
                        }
                        function m(e, t, n) {
                            var r = e.split(",");
                            r.shift(),
                            c(parseInt(r.shift()), parseInt(r.shift()), r.join(","), t, n)
                        }
                        function g(e, t, n) {
                            var r = a(e)
                              , o = new Image;
                            o.onload = function() {
                                setTimeout(n)
                            }
                            ,
                            o.error = function() {
                                console.log("Error loading image", r.src),
                                n(!0)
                            }
                            ,
                            t(r.src, (function(e) {
                                "data:" !== e.substr(0, 5) && (o.crossOrigin = "Anonymous",
                                e += (-1 === e.indexOf("?") ? "?" : "&") + "bw_cors=1"),
                                o.src = e
                            }
                            )),
                            l(o, r.src, r.dx, r.dy, r.w, r.h, r.rad)
                        }
                        function v(e) {
                            return "C," + e
                        }
                        function w(e) {
                            return "W," + e
                        }
                        function b(e) {
                            return "S," + e
                        }
                        function y(e) {
                            var t = [];
                            t.push("L");
                            for (var n = 0; n < e.points.length; ++n)
                                t.push(e.points[n].x + ":" + e.points[n].y);
                            return t.join(",")
                        }
                        function C(e) {
                            return "T," + e.x + "," + e.y + "," + e.text
                        }
                        function x(e) {
                            return "P," + e.dx + "," + e.dy + "," + e.w + "," + e.h + "," + e.rad + "," + e.imgsrc
                        }
                        function E() {
                            for (var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], n = [], o = "", a = 0, i = 0, s = 0; s < (t ? e[r].objects.length : e[r].objectpointer); ++s) {
                                var u = e[r].objects[s];
                                "line" === u.type ? (u.color !== o && (o = u.color,
                                n.push(v(o))),
                                u.linewidth !== i && (i = u.linewidth,
                                n.push(w(i))),
                                n.push(y(u))) : "text" === u.type ? (u.color !== o && (o = u.color,
                                n.push(v(o))),
                                u.fontsize !== a && (a = u.fontsize,
                                n.push(b(a))),
                                n.push(C(u))) : "photo" === u.type && n.push(x(u))
                            }
                            return n.push("I," + e[r].objectpointer),
                            n.join("\n")
                        }
                        function k(e, t, r, o) {
                            e.beginPath(),
                            e.fillStyle = n(r),
                            e.arc(t.x, t.y, o / 2, Math.PI / 180 * 0, Math.PI / 180 * 360, !1),
                            e.fill()
                        }
                        function S(e, t, r) {
                            !function(e, t, r, o, a) {
                                if (e.save(),
                                "background" !== r) {
                                    k(e, t[0], r, o),
                                    e.beginPath(),
                                    e.strokeStyle = n(r),
                                    e.lineWidth = o,
                                    e.moveTo(t[0].x, t[0].y);
                                    var i = 0;
                                    for (i = 1; i < t.length - 2; i++) {
                                        var s = (t[i].x + t[i + 1].x) / 2
                                          , u = (t[i].y + t[i + 1].y) / 2;
                                        e.quadraticCurveTo(t[i].x, t[i].y, s, u)
                                    }
                                    t.length > 2 ? e.quadraticCurveTo(t[i].x, t[i].y, t[i + 1].x, t[i + 1].y) : e.lineTo(t[i].x, t[i].y),
                                    e.stroke(),
                                    k(e, t[t.length - 1], r, o)
                                } else
                                    for (i = 0; i < t.length; i++)
                                        a(e, t[i].x, t[i].y);
                                e.restore()
                            }(t, e.points, e.color, e.linewidth, r)
                        }
                        function T(e, t) {
                            t.font = e.fontsize + "px Arial",
                            t.fillStyle = n(e.color),
                            t.fillText(e.text, e.x, e.y)
                        }
                        function _(e, t) {
                            if (t.save(),
                            t.translate(e.dx, e.dy),
                            t.rotate(e.rad),
                            !0 === e.img.complete)
                                try {
                                    t.drawImage(e.img, -e.w / 2, -e.h / 2, e.w, e.h)
                                } catch (e) {
                                    console.log("Can't draw image... no clue why..." + e)
                                }
                            else
                                t.fillStyle = "#E0E0E0",
                                t.fillRect(-e.w / 2, -e.h / 2, e.w, e.h),
                                t.strokeStyle = "black",
                                t.strokeRect(-e.w / 2, -e.h / 2, e.w, e.h),
                                t.font = "16px Arial",
                                t.fillStyle = "black",
                                t.textAlign = "center",
                                t.textBaseline = "middle",
                                t.fillText("Can't load image", 0, 0);
                            t.restore()
                        }
                        function A(e, t) {
                            return {
                                x1: Math.min(e.x1, t.x1),
                                x2: Math.max(e.x2, t.x2),
                                y1: Math.min(e.y1, t.y1),
                                y2: Math.max(e.y2, t.y2)
                            }
                        }
                        function O(e) {
                            for (var t = {
                                x1: Number.MAX_VALUE,
                                x2: -Number.MAX_VALUE,
                                y1: Number.MAX_VALUE,
                                y2: -Number.MAX_VALUE
                            }, n = 0; n < e.points.length; ++n) {
                                var r = e.points[n];
                                if (isNaN(r.x) || isNaN(r.y))
                                    throw Object();
                                t.x1 = Math.min(t.x1, r.x),
                                t.x2 = Math.max(t.x2, r.x),
                                t.y1 = Math.min(t.y1, r.y),
                                t.y2 = Math.max(t.y2, r.y)
                            }
                            return t
                        }
                        function D(e, t) {
                            t.save(),
                            t.font = e.fontsize + "px Arial";
                            var n = t.measureText(e.text);
                            if (t.restore(),
                            isNaN(e.x) || isNaN(e.y))
                                throw Object();
                            return {
                                x1: e.x,
                                x2: e.x + n.width,
                                y1: e.y - e.fontsize,
                                y2: e.y
                            }
                        }
                        return e.push({
                            objects: [],
                            objectpointer: 0
                        }),
                        {
                            clearPage: function() {
                                i(),
                                e.push({
                                    objects: [],
                                    objectpointer: 0
                                }),
                                ++r
                            },
                            isEmpty: function() {
                                return 0 === e[r].objectpointer
                            },
                            addLine: u,
                            addText: c,
                            addPhoto: l,
                            load: function(n, o, a) {
                                try {
                                    for (var i = "", s = 0, u = 0, c = n.split("\n"), l = 0; l < c.length; ++l) {
                                        var v = c[l];
                                        "C" === v[0] ? i = t(v) : "W" === v[0] ? s = d(v) : "S" === v[0] ? u = f(v) : "L" === v[0] ? h(v, i, s) : "T" === v[0] ? m(v, i, u) : "P" === v[0] ? g(v, o, a) : "I" === v[0] ? e[r].objectpointer = p(v) : (console.log("Invalid line when reading whiteboard data"),
                                        console.log(v))
                                    }
                                } catch (e) {
                                    console.log("Error loading whiteboard data"),
                                    console.log(e)
                                }
                            },
                            save: E,
                            undo: function() {
                                e[r].objectpointer > 0 ? --e[r].objectpointer : r > 0 && --r
                            },
                            redo: function() {
                                e[r].objectpointer < e[r].objects.length ? ++e[r].objectpointer : r < e.length - 1 && ++r
                            },
                            drawToContext: function(t, n) {
                                n = n || function(e, t, n) {
                                    e.clearRect(t, n, 20, 20)
                                }
                                ;
                                for (var o = 0; o < e[r].objectpointer; ++o) {
                                    var a = e[r].objects[o];
                                    "line" === a.type ? S(a, t, n) : "text" === a.type ? T(a, t) : "photo" === a.type && _(a, t)
                                }
                            },
                            toWWB: function() {
                                for (var t = {}, n = 0; n < e[r].objectpointer; ++n) {
                                    var a = e[r].objects[n];
                                    "photo" === a.type && (t[a.imgsrc] = a.imgsrc.startsWith("bwimg:") ? a.img.src : o(a.img, {
                                        src: a.imgsrc
                                    }))
                                }
                                return {
                                    resources: t,
                                    data: E(!1)
                                }
                            },
                            bounds: function(t) {
                                if (0 === e[r].objectpointer)
                                    return {
                                        x1: 0,
                                        x2: 0,
                                        y1: 0,
                                        y2: 0
                                    };
                                for (var n, o, a = {
                                    x1: Number.MAX_VALUE,
                                    x2: -Number.MAX_VALUE,
                                    y1: Number.MAX_VALUE,
                                    y2: -Number.MAX_VALUE
                                }, i = 0; i < e[r].objectpointer; ++i) {
                                    var s = e[r].objects[i];
                                    if ("line" === s.type) {
                                        if (s.points.length > 0)
                                            try {
                                                a = A(a, O(s))
                                            } catch (e) {
                                                console.log("Ignoring bounds for invalid line"),
                                                console.log(s)
                                            }
                                    } else if ("text" === s.type)
                                        try {
                                            a = A(a, D(s, t))
                                        } catch (e) {
                                            console.log("Ignoring bounds for invalid text"),
                                            console.log(s)
                                        }
                                    else
                                        "photo" === s.type && (a = A(a, (n = s,
                                        void 0,
                                        o = Math.sqrt(n.w * n.w + n.h * n.h) / 2,
                                        {
                                            x1: n.dx - o,
                                            x2: n.dx + o,
                                            y1: n.dy - o,
                                            y2: n.dy + o
                                        })))
                                }
                                return a
                            },
                            restrictUsedArea: function(t, n, o, a) {
                                if (0 !== e[r].objectpointer)
                                    for (var i = 0; i < e[r].objectpointer; ++i) {
                                        var s = e[r].objects[i];
                                        "line" === s.type ? s.points = s.points.map((function(e) {
                                            return {
                                                x: Math.min(o, Math.max(t, e.x)),
                                                y: Math.min(a, Math.max(n, e.y))
                                            }
                                        }
                                        )) : "text" === s.type ? (s.x = Math.min(o, Math.max(t, s.x)),
                                        s.y = Math.min(a, Math.max(n, s.y))) : "photo" === s.type && (s.dx = Math.min(o, Math.max(t, s.dx)),
                                        s.dy = Math.min(a, Math.max(n, s.dy)))
                                    }
                            }
                        }
                    }
                }
            }
            ))
        },
        82750: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                create: function() {
                    return u
                }
            });
            var r = n(69713)
              , o = n.n(r)
              , a = n(85685)
              , i = n.n(a)
              , s = n(24846);
            function u(e) {
                var t = o().create()
                  , n = !0 === e.image_on_top
                  , r = {
                    image: null,
                    policy: e.background_resize_policy && "" !== e.background_resize_policy ? e.background_resize_policy : "No resize",
                    isDefined: function() {
                        return null !== this.image
                    },
                    isNull: function() {
                        return null === this.image || 0 === this.width() || 0 === this.height()
                    },
                    width: function() {
                        return this.image.width
                    },
                    height: function() {
                        return this.image.height
                    },
                    scale: function(e, t) {
                        if (this.isNull())
                            return 1;
                        var n = e / this.width()
                          , r = t / this.height();
                        switch (this.policy) {
                        case "Cover entire area, keep aspect ratio":
                            return Math.max(n, r);
                        case "Contain entire picture, keep aspect ratio":
                            return Math.min(n, r);
                        default:
                            return 1
                        }
                    },
                    origin: function(e, t, n) {
                        return this.isNull() || "Cover entire area, keep aspect ratio" !== this.policy && "Contain entire picture, keep aspect ratio" !== this.policy ? {
                            x: 0,
                            y: 0
                        } : {
                            x: (e - n * this.width()) / 2,
                            y: (t - n * this.height()) / 2
                        }
                    },
                    drawScale: function() {
                        return 1 / this.scale(1024, 650)
                    }
                };
                function a(t, n) {
                    !0 === e.transparentbackground ? n.clearRect(0, 0, t.width, t.height) : (n.fillStyle = "white",
                    n.fillRect(0, 0, t.width, t.height))
                }
                function u(e) {
                    r.isNull() || e.drawImage(r.image, 0, 0)
                }
                function c(e, t, n, o, a) {
                    o = o || {
                        x: 0,
                        y: 0
                    },
                    a = a || 1;
                    var i = t - 10
                      , s = n - 10;
                    if (r.isNull())
                        e.clearRect(i, s, 20, 20);
                    else {
                        e.fillStyle = "white",
                        e.fillRect(i, s, 20, 20),
                        s -= 1;
                        var u = ((i -= 1) - o.x) / a
                          , c = (s - o.y) / a;
                        if (u < r.width() && c < r.height()) {
                            var l = Math.min(r.width() - u, 22 / a)
                              , d = Math.min(r.height() - c, 22 / a)
                              , f = l * a
                              , p = d * a;
                            u > 0 && c > 0 && e.drawImage(r.image, u, c, l, d, i, s, f, p)
                        }
                    }
                }
                function l(e) {
                    n || u(e),
                    t.drawToContext(e, c),
                    n && u(e)
                }
                function d() {
                    var e = document.createElement("canvas").getContext("2d")
                      , n = t.bounds(e);
                    return n = {
                        x1: n.x1 - 8,
                        y1: n.y1 - 8,
                        x2: n.x2 + 8,
                        y2: n.y2 + 8
                    },
                    r.isNull() || (n.x1 = Math.min(n.x1, 0),
                    n.y1 = Math.min(n.y1, 0),
                    n.x2 = Math.max(n.x2, r.width()),
                    n.y2 = Math.max(n.y2, r.height())),
                    n
                }
                function f(e, t, n, r) {
                    var o = document.createElement("canvas")
                      , i = o.getContext("2d");
                    o.width = e,
                    o.height = t,
                    a(o, i),
                    i.save(),
                    i.scale(n, n),
                    i.translate(-r.x, -r.y),
                    l(i),
                    i.restore();
                    var s = o.toDataURL();
                    return console.log("Image data: " + s.length + " bytes"),
                    s
                }
                return {
                    clearPage: function(e, n) {
                        a(e, n),
                        t.clearPage()
                    },
                    drawScreen: a,
                    draw: function(e, t, n, r) {
                        a(e, t),
                        t.save(),
                        t.translate(n.x, n.y),
                        t.scale(r, r),
                        l(t),
                        t.restore()
                    },
                    calculateBounds: d,
                    toPng: f,
                    imgData: function(o) {
                        return "PNG" === o ? (a = d(),
                        c = 2048 / (i = Math.max(100, a.x2 - a.x1)),
                        l = 1536 / (u = Math.max(100, a.y2 - a.y1)),
                        f(i * (p = Math.min(1, c, l)), u * p, p, {
                            x: a.x1,
                            y: a.y1
                        })) : "WWB" === o ? function() {
                            var o = t.toWWB()
                              , a = d();
                            return a.x1 = Math.floor(a.x1),
                            a.y1 = Math.floor(a.y1),
                            a.x2 = Math.ceil(a.x2),
                            a.y2 = Math.ceil(a.y2),
                            o.width = a.x2 - a.x1,
                            o.height = a.y2 - a.y1,
                            r.isNull() || (o.resources[n ? "foreground" : "background"] = (0,
                            s.imageToDataURL)(r.image, {
                                src: e.background_image
                            })),
                            "data:image/vnd.bookwidgets.wwb;base64," + function(e) {
                                if ("function" == typeof btoa) {
                                    for (var t = (new TextEncoder).encode(e), n = "", r = 0; r < t.length; r++)
                                        n += String.fromCodePoint(t[r]);
                                    return btoa(n)
                                }
                                return Buffer.from(e).toString("base64")
                            }(JSON.stringify(o))
                        }() : (console.error("image data requested with wrong image type", o),
                        null);
                        var a, i, u, c, l, p
                    },
                    erase: c,
                    backgroundImage: r,
                    initializeBackgroundImage: function() {
                        var t = i().Deferred();
                        if (e.background_image && "" !== e.background_image) {
                            r.image = new Image,
                            r.image.onload = function() {
                                setTimeout((function() {
                                    t.resolve()
                                }
                                ))
                            }
                            ,
                            r.image.onerror = function(t) {
                                console.error("Background image load error", t, e.background_image)
                            }
                            ;
                            var n = e.background_image;
                            n.startsWith("data:") || "http:" !== window.location.protocol && "https:" !== window.location.protocol || (r.image.crossOrigin = "Anonymous",
                            n += (-1 === n.indexOf("?") ? "?" : "&") + "bw_cors=1"),
                            r.image.src = n
                        }
                        return t
                    },
                    drawImage: u,
                    drawImageTranslated: function(e, t, n) {
                        e.save(),
                        e.translate(t.x, t.y),
                        e.scale(n, n),
                        u(e),
                        e.restore()
                    },
                    undo: t.undo.bind(t),
                    redo: t.redo.bind(t),
                    save: t.save.bind(t),
                    load: t.load.bind(t),
                    addLine: t.addLine.bind(t),
                    addText: t.addText.bind(t),
                    addPhoto: t.addPhoto.bind(t),
                    isEmpty: t.isEmpty.bind(t),
                    restrictUsedArea: function(e, n, r, o) {
                        t.restrictUsedArea(e, n, r, o)
                    }
                }
            }
        },
        51958: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                BCE_NO_LABEL: function() {
                    return A
                },
                BCE_YES_LABEL: function() {
                    return _
                },
                MATCH_TYPE_AUDIO: function() {
                    return p
                },
                MATCH_TYPE_PIC: function() {
                    return f
                },
                MATCH_TYPE_WORD: function() {
                    return d
                },
                appSafeUnescape: function() {
                    return v
                },
                arrayContains: function() {
                    return w
                },
                bceBalancedLabelToYesNo: function() {
                    return O
                },
                bceCreateTableData: function() {
                    return D
                },
                bceFormatQuestion: function() {
                    return L
                },
                bceProductsEditableFields: function() {
                    return P
                },
                bceReactantsEditableFields: function() {
                    return I
                },
                getDateString: function() {
                    return N
                },
                isDefined: function() {
                    return h
                },
                isMatchDistractor: function() {
                    return y
                },
                matchElemId: function() {
                    return C
                },
                numericGetMatrixElem: function() {
                    return T
                },
                questionTableRowAnswer: function() {
                    return k
                },
                questionTableRowAnswers: function() {
                    return S
                },
                questionTableRowQuestion: function() {
                    return E
                },
                questionTableSplitRow: function() {
                    return x
                },
                removeNonNumbers: function() {
                    return b
                },
                safeArray: function() {
                    return m
                },
                safeString: function() {
                    return g
                }
            });
            var r = n(41580)
              , o = n.n(r)
              , a = n(8138)
              , i = n.n(a)
              , s = n(98274)
              , u = n(17902)
              , c = n(58065)
              , l = n.n(c)
              , d = 0
              , f = 1
              , p = 2;
            function h(e) {
                return !(null == e || i()(e) && "" === e.trim() || (o()(e) && console.log("isDefined returns true for ", e),
                0))
            }
            function m(e) {
                return null == e ? [] : e
            }
            function g(e) {
                return null == e ? "" : e
            }
            function v(e) {
                return l()(document.createElement("div")).safeHtml(e).text()
            }
            function w(e, t) {
                return -1 !== e.indexOf(t)
            }
            function b(e) {
                return e.replace(/\D/g, " ")
            }
            function y(e, t) {
                return t === f ? null == e.sources || 0 === e.sources.length : "" === e
            }
            function C(e, t, n) {
                return e === d ? t : e === f ? (0,
                s.pictureId)(t) : e === p ? n + "" : (console.error("Invalid element type: ", e),
                0)
            }
            function x(e, t) {
                return e.rows[t].split(/##/)
            }
            function E(e, t) {
                return x(e, t)[0].trim()
            }
            function k(e, t) {
                var n = x(e, t);
                return n.length > 1 ? n[1].trim() : null
            }
            function S(e, t) {
                for (var n = x(e, t), r = [], o = 1; o < n.length; ++o)
                    r.push(n[o].trim());
                return r
            }
            function T(e, t, n) {
                if (null == e)
                    return null;
                if (e.length <= t)
                    return null;
                var r = e[t].split(" ");
                return r.length <= n ? null : r[n]
            }
            var _ = "Yes, this equation is balanced"
              , A = "No, this equation is not balanced";
            function O(e, t) {
                return null == e || "" === e ? "" : "yes" === e || "no" === e ? e : e === (t = t || function(e) {
                    return e
                }
                )(_) ? "yes" : "no"
            }
            function D(e, t) {
                var n, r = [];
                switch (t) {
                case "none":
                    break;
                case "all":
                    r = function(e, t) {
                        for (var n = [], r = 0; r <= t; r++)
                            n.push(r);
                        return n
                    }(0, e.length - 1);
                    break;
                case "odd":
                    for (n = 1; n < e.length; n += 2)
                        r.push(n);
                    break;
                case "even":
                    for (n = 0; n < e.length; n += 2)
                        r.push(n)
                }
                var o = {
                    values: [],
                    layout: {
                        rows: [],
                        columns: [{
                            width: 100
                        }, {
                            width: 100
                        }]
                    },
                    answers: []
                };
                for (n = 0; n < e.length; ++n) {
                    var a = "readonly"
                      , i = "" + e[n].qty;
                    r.length > 0 && n === r[0] && (a = "checked",
                    r.shift()),
                    o.values.push([{
                        value: e[n].atom,
                        CellRole: "readonly"
                    }, {
                        value: i,
                        CellRole: a
                    }]),
                    o.layout.rows.push({
                        height: 30
                    }),
                    o.answers.push("" + e[n].qty)
                }
                return o
            }
            function I(e) {
                return "type1" === e ? "none" : "odd"
            }
            function P(e) {
                return "type1" === e ? "all" : "even"
            }
            function R(e, t, n) {
                for (var r = [], o = 0; o < e.length; ++o)
                    n ? r.push("<span class='nowrap'>_____ $$" + e[o].formula + "$$</span>") : t ? r.push("<span class='nowrap bce-field empty'><input type='text' /> $$" + e[o].formula + "$$</span>") : r.push("<span class='nowrap'>$$" + e[o] + "$$</span>");
                return r
            }
            function L(e, t) {
                var n = u.parseEquation(e.Equation)
                  , r = "type3" === e.SubType
                  , o = u.formatEquation(n, r || t)
                  , a = "";
                return a += R(o.reactants, r, t).join("$$\\, + \\,$$"),
                (a += " <span class='nowrap'>$$\\: \\rightarrow \\:$$</span> ") + R(o.products, r, t).join("$$\\, + \\,$$")
            }
            function N() {
                var e = new Date
                  , t = e.getDate()
                  , n = e.getMonth() + 1
                  , r = e.getYear();
                return r < 1900 && (r += 1900),
                (1 === n ? "January" : 2 === n ? "February" : 3 === n ? "March" : 4 === n ? "April" : 5 === n ? "May" : 6 === n ? "June" : 7 === n ? "July" : 8 === n ? "August" : 9 === n ? "September" : 10 === n ? "October" : 11 === n ? "November" : "December") + " " + t + ", " + r
            }
        },
        77262: function() {
            !function(e) {
                "use strict";
                e.fn.cleanHtml = function() {
                    var t = e(this).html();
                    return t && t.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/, "")
                }
                ,
                e.fn.wysiwyg = function(t) {
                    var n, r, o, a, i = this, s = function() {
                        r.activeToolbarClass && e(r.toolbarSelector).find(o).each((function() {
                            var t = e(this).data(r.commandRole);
                            t = t.split(" ").shift(),
                            document.queryCommandState(t) ? e(this).addClass(r.activeToolbarClass) : e(this).removeClass(r.activeToolbarClass)
                        }
                        ))
                    }, u = function(e, t) {
                        var n = e.split(" ")
                          , r = n.shift()
                          , o = n.join(" ") + (t || "");
                        document.execCommand(r, 0, o),
                        s()
                    }, c = function() {
                        var e = window.getSelection();
                        if (e.getRangeAt && e.rangeCount)
                            return e.getRangeAt(0)
                    }, l = function() {
                        n = c()
                    }, d = function() {
                        var e = window.getSelection();
                        if (n) {
                            try {
                                e.removeAllRanges()
                            } catch (e) {
                                document.body.createTextRange().select(),
                                document.selection.empty()
                            }
                            e.addRange(n)
                        }
                    }, f = function(t) {
                        i.focus(),
                        e.each(t, (function(t, n) {
                            /^image\//.test(n.type) ? e.when(function(t) {
                                var n = e.Deferred()
                                  , r = new FileReader;
                                return r.onload = function(e) {
                                    n.resolve(e.target.result)
                                }
                                ,
                                r.onerror = n.reject,
                                r.onprogress = n.notify,
                                r.readAsDataURL(t),
                                n.promise()
                            }(n)).done((function(e) {
                                u("insertimage", e)
                            }
                            )).fail((function(e) {
                                r.fileUploadError("file-reader", e)
                            }
                            )) : r.fileUploadError("unsupported-file-type", n.type)
                        }
                        ))
                    }, p = function(e, t) {
                        d(),
                        document.queryCommandSupported("hiliteColor") && document.execCommand("hiliteColor", 0, t || "transparent"),
                        l(),
                        e.data(r.selectionMarker, t)
                    };
                    return r = e.extend({}, e.fn.wysiwyg.defaults, t),
                    o = "a[data-" + r.commandRole + "],button[data-" + r.commandRole + "],input[type=button][data-" + r.commandRole + "]",
                    a = r.hotKeys,
                    e.each(a, (function(e, t) {
                        i.keydown(e, (function(e) {
                            i.attr("contenteditable") && i.is(":visible") && (e.preventDefault(),
                            e.stopPropagation(),
                            u(t))
                        }
                        )).keyup(e, (function(e) {
                            i.attr("contenteditable") && i.is(":visible") && (e.preventDefault(),
                            e.stopPropagation())
                        }
                        ))
                    }
                    )),
                    "" != e(this).attr("placeholder") && ("" == e(this).html() && e(this).html(e(this).attr("placeholder")),
                    e(this).html() == e(this).attr("placeholder") && e(this).addClass("placeholderText"),
                    e(this).bind("focus", (function(t) {
                        if ("" != e(this).attr("placeholder") && e(this).text() == e(this).attr("placeholder")) {
                            var n = this;
                            setTimeout((function() {
                                e(n).removeClass("placeholderText"),
                                e(n).html("")
                            }
                            ), 10)
                        }
                    }
                    )),
                    e(this).bind("blur", (function(t) {
                        "" != e(this).attr("placeholder") && "" == e(this).text() && (e(this).addClass("placeholderText"),
                        e(this).html(e(this).attr("placeholder")))
                    }
                    ))),
                    r.dragAndDropImages && i.on("dragenter dragover", !1).on("drop", (function(e) {
                        var t = e.originalEvent.dataTransfer;
                        e.stopPropagation(),
                        e.preventDefault(),
                        t && t.files && t.files.length > 0 && f(t.files)
                    }
                    )),
                    function(t, n) {
                        t.find(o).click((function() {
                            d(),
                            i.focus(),
                            u(e(this).data(n.commandRole)),
                            l()
                        }
                        )),
                        t.find("[data-toggle=dropdown]").click(d),
                        t.find("input[type=text][data-" + n.commandRole + "]").on("webkitspeechchange change", (function() {
                            var t = this.value;
                            this.value = "",
                            d(),
                            t && (i.focus(),
                            u(e(this).data(n.commandRole), t)),
                            l()
                        }
                        )).on("focus", (function() {
                            var t = e(this);
                            t.data(n.selectionMarker) || (p(t, n.selectionColor),
                            t.focus())
                        }
                        )).on("blur", (function() {
                            var t = e(this);
                            t.data(n.selectionMarker) && p(t, !1)
                        }
                        )),
                        t.find("input[type=file][data-" + n.commandRole + "]").change((function() {
                            d(),
                            "file" === this.type && this.files && this.files.length > 0 && f(this.files),
                            l(),
                            this.value = ""
                        }
                        ))
                    }(e(r.toolbarSelector), r),
                    i.attr("contenteditable", !0).on("mouseup keyup mouseout", (function() {
                        l(),
                        s()
                    }
                    )),
                    e(window).bind("touchend", (function(e) {
                        var t = i.is(e.target) || i.has(e.target).length > 0
                          , n = c();
                        n && n.startContainer === n.endContainer && n.startOffset === n.endOffset && !t || (l(),
                        s())
                    }
                    )),
                    this
                }
                ,
                e.fn.wysiwyg.defaults = {
                    hotKeys: {
                        "ctrl+b meta+b": "bold",
                        "ctrl+i meta+i": "italic",
                        "ctrl+u meta+u": "underline",
                        "ctrl+z meta+z": "undo",
                        "ctrl+y meta+y meta+shift+z": "redo",
                        "ctrl+l meta+l": "justifyleft",
                        "ctrl+r meta+r": "justifyright",
                        "ctrl+e meta+e": "justifycenter",
                        "ctrl+j meta+j": "justifyfull",
                        "shift+tab": "outdent",
                        tab: "indent"
                    },
                    toolbarSelector: "[data-role=editor-toolbar]",
                    commandRole: "edit",
                    activeToolbarClass: "btn-info",
                    selectionMarker: "edit-focus-marker",
                    selectionColor: "darkgrey",
                    dragAndDropImages: !0,
                    fileUploadError: function(e, t) {
                        console.log("File upload error", e, t)
                    }
                }
            }(window.jQuery)
        },
        89866: function(e, t, n) {
            "use strict";
            var r = n(40105)
              , o = n.n(r);
            n(68989),
            n(18291),
            n(20563),
            n(67533),
            n(86724),
            n(60194),
            n(91607),
            n(24321),
            n(40860),
            n(39393),
            void 0 === n.g && (window.global = window);
            var a = n(14041)
              , i = n(99870)
              , s = n.n(i)
              , u = n(85685)
              , c = n.n(u)
              , l = n(43144)
              , d = n.n(l);
            function f(e) {
                var t = e.icon
                  , n = e.onClick
                  , r = e.onHold
                  , o = e.className
                  , i = e.id
                  , u = e.description
                  , c = e.label
                  , l = e.children
                  , d = (0,
                a.useRef)(null)
                  , f = (0,
                a.useRef)(!1);
                function p() {
                    d.current = setTimeout((function() {
                        d.current = null,
                        r && (f.current = !0,
                        r())
                    }
                    ), 3e3)
                }
                function h() {
                    null != d.current && (clearTimeout(d.current),
                    d.current = null)
                }
                return a.createElement("div", {
                    className: s()("bw-toolbutton", o, null != c && "bw-labeled-toolbutton"),
                    onClick: function() {
                        f.current || n()
                    },
                    onKeyDown: function(e) {
                        var t = e.key;
                        "Enter" !== t && " " !== t || (e.preventDefault(),
                        e.stopPropagation(),
                        n())
                    },
                    "aria-label": u,
                    role: "button",
                    tabIndex: 0,
                    id: i
                }, t && a.createElement("div", {
                    className: s()("bw-icon", t),
                    onMouseDown: p,
                    onMouseUp: h
                }), c && a.createElement("span", null, c), !!l && a.createElement("div", {
                    className: s()("bw-icon"),
                    onMouseDown: p,
                    onMouseUp: h
                }, l))
            }
            var p = n(63181)
              , h = n(30692);
            function m() {
                var e = (0,
                a.useMemo)((function() {
                    return (0,
                    h.getBacklinkInfo)()
                }
                ), [])
                  , t = e.backlink
                  , n = e.backbutton;
                return null == t ? null : n ? a.createElement("div", {
                    className: "widget-backlink widget-backlink-text",
                    onClick: h.moveBackToPreviousWidget
                }, n) : a.createElement("div", {
                    className: "widget-backlink widget-backlink-icon",
                    onClick: h.moveBackToPreviousWidget
                })
            }
            var g = n(99860)
              , v = n(23798)
              , w = n(83657)
              , b = n.n(w)
              , y = {
                count: 0
            }
              , C = [];
            function x(e) {
                b()(C, (function(t) {
                    return t(e)
                }
                ))
            }
            function E() {
                var e = {
                    count: y.count + 1
                };
                y = e,
                x(e)
            }
            function k() {
                var e = {
                    count: y.count - 1
                };
                y = e,
                x(e)
            }
            var S, T = n(78514), _ = n.n(T), A = void 0, O = [], D = function(e) {
                var t = e.studentaccount;
                return {
                    init: function() {
                        var e = function(e) {
                            var n;
                            switch (e) {
                            case t.ANONYMOUS:
                                n = void 0;
                                break;
                            case t.OFFLINE:
                                n = {
                                    state: "offline",
                                    text: _()("You're offline")
                                };
                                break;
                            case t.ONLINE:
                                var r = t.getUserName();
                                -1 != r.indexOf("@") && (r = r.substring(0, r.indexOf("@"))),
                                n = {
                                    state: "online",
                                    text: r
                                }
                            }
                            A = n,
                            function(e) {
                                b()(O, (function(t) {
                                    return t(e)
                                }
                                ))
                            }(n)
                        };
                        e(t.ANONYMOUS),
                        t.initialized().then((function() {
                            e(t.getState()),
                            t.registerStateChangeCallback(e)
                        }
                        ), (function() {
                            e(t.ANONYMOUS)
                        }
                        ))
                    }
                }
            }
            .bind(null), I = D, P = n(78073);
            function R() {
                window.custom_alert((0,
                v.wk)().criticalAlert.message, (0,
                v.wk)().criticalAlert.title)
            }
            function L(e, t) {
                (0,
                v.$j)((0,
                v.wN)((0,
                v.wk)(), {
                    message: e,
                    title: t
                })),
                R()
            }
            function N() {
                (0,
                v.$j)((0,
                v.AM)((0,
                v.wk)()))
            }
            function F() {
                return new Promise((function(e) {
                    document.getElementsByTagName("html")[0].classList.add("bw-print-mode"),
                    (0,
                    v.$j)((0,
                    v.nL)((0,
                    v.wk)(), !0)),
                    setTimeout((function() {
                        P.scheduleOrExecuteIfNoLatex((function() {
                            var t = new Event("resize");
                            t.printMode = !0,
                            window.dispatchEvent(t),
                            setTimeout(e, 1e3)
                        }
                        ))
                    }
                    ), 1e3)
                }
                ))
            }
            function M() {
                document.getElementsByTagName("html")[0].classList.remove("bw-print-mode"),
                (0,
                v.$j)((0,
                v.nL)((0,
                v.wk)(), !1))
            }
            S = function(e) {
                return (0,
                v.$j)((0,
                v.Pz)((0,
                v.wk)(), e))
            }
            ,
            O.push(S),
            S(A),
            function(e) {
                C.push(e),
                e(y)
            }((function(e) {
                return (0,
                v.$j)((0,
                v.Pf)((0,
                v.wk)(), e))
            }
            ));
            var j = n(51958)
              , q = {
                CancelPrintButton: "via6aUNkceMuvN8KRfRe"
            };
            function B(e) {
                return B = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                B(e)
            }
            function W(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== B(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== B(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === B(o) ? o : String(o)), r)
                }
                var o
            }
            function U() {
                return a.createElement("div", {
                    id: "storage-busy-marker",
                    className: "busy"
                })
            }
            function z(e) {
                var t = e.title
                  , n = e.buttons
                  , r = e.storageBusy
                  , o = e.showMenu
                  , i = e.onMenuClicked
                  , u = e.criticalAlert
                  , c = e.className
                  , l = e.alwaysVisibleButtons
                  , d = (0,
                a.useMemo)((function() {
                    return (0,
                    j.appSafeUnescape)(t)
                }
                ), [t]);
                return a.createElement("div", {
                    id: "top-container",
                    className: s()("top-container", c, o && "bw-show-popup-menu")
                }, a.createElement("div", {
                    className: "titlebar-layout"
                }, a.createElement("div", {
                    className: "closebutton-container"
                }, r && a.createElement(U, null)), a.createElement("div", {
                    className: "title-container",
                    role: "banner"
                }, a.createElement("span", {
                    id: "title"
                }, d)), (n || l) && a.createElement("div", {
                    className: "bw-toolbar",
                    role: "toolbar"
                }, u && a.createElement(f, {
                    id: "critical-alert-button",
                    icon: "bw-icon-critical-error",
                    onClick: R
                }), l, !o && a.createElement("div", {
                    id: "title-toolbar",
                    className: "bw-button-group"
                }, n), a.createElement(f, {
                    id: "menubutton",
                    icon: "bw-icon-menu",
                    onClick: i,
                    description: (0,
                    p.Tl)("menu")
                }))))
            }
            function H(e) {
                var t = e.title
                  , n = e.buttons
                  , r = e.alwaysVisibleButtons
                  , o = e.bottomcontainerclassnames
                  , i = e.widgetState
                  , u = e.main
                  , c = e.children
                  , l = e.instructions
                  , d = a.useCallback((function() {
                    (0,
                    v.$j)((0,
                    v.XG)(i, !1))
                }
                ), [i]);
                return a.createElement(a.Fragment, null, (null != t || null != n) && a.createElement(z, {
                    title: t,
                    buttons: n,
                    alwaysVisibleButtons: r,
                    storageBusy: i.storageBusyState && i.storageBusyState.count > 0,
                    showMenu: i.showMenu,
                    criticalAlert: i.criticalAlert,
                    onMenuClicked: N
                }), a.createElement("div", {
                    id: "bottom-container",
                    className: s()("bottom-container", o)
                }, u, c), i.showMenu && a.createElement("div", {
                    className: "bw-menu-overlay",
                    onClick: N
                }, a.createElement("div", {
                    id: "title-toolbar",
                    className: "bw-button-group"
                }, n)), i.printMode && a.createElement("div", {
                    className: s()(q.CancelPrintButton, "bw-no-print"),
                    onClick: M,
                    role: "button"
                }, "Cancel print mode"), i.showInstructions && a.createElement(g.InfoDialog, {
                    instructions: l,
                    onOK: d,
                    onClose: d
                }), a.createElement(m, null))
            }
            var Q = function() {
                return e = function e(t, n, r) {
                    !function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, e),
                    this.widget = t;
                    var o = document.createElement("div");
                    o.className = s()("top-bottom-layout", r && r.titleOverlay && "title-overlay"),
                    o.id = "container",
                    document.body.appendChild(o),
                    document.body.className = s()("bw", r && r.useBorderWhenWide && "bw-use-border-when-wide", r && r.noUserSelect && "no-user-select", r && r.rightToLeft && "right-to-left", r && r.allowTextSelection && "allow_text_selection", r && r.className),
                    this.container = o,
                    this.props = {
                        config: n,
                        state: null
                    },
                    this.widgetInit()
                }
                ,
                t = [{
                    key: "widgetInit",
                    value: function() {
                        window.criticalAlert = L
                    }
                }, {
                    key: "updateState",
                    value: function(e) {
                        if (null != this.widget) {
                            Object.assign(this.props, {
                                state: e
                            });
                            var t = a.createElement(this.widget, this.props);
                            d().render(t, this.container)
                        } else
                            console.error("Error: no widget set")
                    }
                }, {
                    key: "unmount",
                    value: function() {
                        d().unmountComponentAtNode(this.container),
                        this.widget = null
                    }
                }],
                t && W(e.prototype, t),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e;
                var e, t
            }()
              , V = n(45027)
              , Y = n(52826)
              , K = n.n(Y);
            function G(e, t) {
                if (e === "ForceLogin") xo(e)
                var n, r, o, a = (n = t.s,
                r = e ? e.normalize("NFC") : "",
                (o = new (K())).update(n),
                o.update(r),
                o.digest("base64"));
                return t.h === a
            }
            var $ = n(79715)
              , J = function(e) {
                var t = e.width
                  , n = e.height;
                return a.createElement("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: t,
                    height: n,
                    viewBox: "0 0 30 30",
                    focusable: "false",
                    "aria-hidden": "true"
                }, a.createElement("path", {
                    fill: "none",
                    stroke: "currentColor",
                    d: "M 1 15  C 2 10 8 5 15 5   C 22 5 28 10 29 15  C 28 20 22 25 15 25  C 8 25 2 20 1 15  Z  "
                }), a.createElement("path", {
                    fill: "none",
                    stroke: "currentColor",
                    d: "  M 15 8  A 7 7 0 1 0 22 15   A 7 7 0 0 0 15 8   Z   "
                }))
            }
              , X = function(e) {
                var t = e.width
                  , n = e.height;
                return a.createElement("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: t,
                    height: n,
                    viewBox: "0 0 30 30",
                    focusable: "false",
                    "aria-hidden": "true"
                }, a.createElement("path", {
                    fill: "none",
                    stroke: "currentColor",
                    d: "M 1 15  C 2 10 8 5 15 5   C 22 5 28 10 29 15  C 28 20 22 25 15 25  C 8 25 2 20 1 15  Z  "
                }), a.createElement("path", {
                    fill: "none",
                    stroke: "currentColor",
                    d: "  M 15 8  A 7 7 0 1 0 22 15   A 7 7 0 0 0 15 8   Z   "
                }), a.createElement("line", {
                    x1: "2",
                    x2: "28",
                    y1: "5",
                    y2: "25",
                    strokeLinecap: "round",
                    stroke: "currentColor"
                }))
            }
              , Z = n(36915)
              , ee = {
                wrongPassword: "ejDa6ng7VCwHsm9CHH_R",
                input: "ul0Y7gGcm6xwMP3tQDhH",
                icon: "BDubi4PkdcMD93GCwh7X",
                PasswordDialog: "TX7LXEKKA3kMVYWXuUEq"
            };
            function te(e, t) {
                return function(e) {
                    if (Array.isArray(e))
                        return e
                }(e) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(e, t) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return ne(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? ne(e, t) : void 0
                    }
                }(e, t) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function ne(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function re(e) {
                console.log(e);
                //setTimeout(function(){xo(e)},5000)
                var t = e.label
                  , n = e.password
                  , r = e.onOk
                  , o = e.show_typed_text
                  , i = e.onCancel
                  , s = e.extraMessage
                  , u = te((0,
                a.useState)(!1), 2)
                  , c = u[0]
                  , l = u[1]
                  , d = te((0,
                a.useState)(o), 2)
                  , f = d[0]
                  , h = d[1]
                  , g = te((0,
                a.useState)(!1), 2)
                  , v = g[0]
                  , w = g[1]
                  , b = te((0,
                a.useState)((0,
                V.randomId)(30)), 1)[0]
                  , y = (0,
                a.useRef)(null);
                function C() {
                    null != y.current && G(y.current.value, n) ? r(y.current.value) : l(!0)
                }
                return a.createElement(Z.J, null, a.createElement(Z.l, {
                    title: null != t ? t : (0,
                    p.Tl)("Please enter password"),
                    onOk: C,
                    OK: (0,
                    p.Tl)("OK"),
                    onCancel: i,
                    Cancel: (0,
                    p.Tl)("Cancel"),
                    className: ee.PasswordDialog
                }, c && a.createElement("div", {
                    id: "wrongpwd",
                    className: ee.wrongPassword
                }, (0,
                p.Tl)("Wrong password...")), a.createElement("div", {
                    className: "content"
                }, a.createElement("label", {
                    className: "ui-input-text"
                }, (0,
                p.Tl)("Password")), a.createElement("input", {
                    ref: y,
                    type: f ? "text" : "password",
                    id: b,
                    name: b,
                    onKeyDown: function(e) {
                        c && l(!1),
                        "Enter" === e.key && (C(),
                        e.preventDefault(),
                        e.stopPropagation())
                    },
                    onChange: function() {
                        y && y.current && w(y.current.value.length > 0)
                    },
                    className: ee.input
                }), v ? a.createElement(oe, {
                    onClick: function() {
                        h(!f)
                    },
                    pwdIsShown: f
                }) : null), s && a.createElement($.s, {
                    style: {
                        textAlign: "center"
                    },
                    text: s
                })), a.createElement(m, null))
            }
            var oe = function(e) {
                var t = e.onClick
                  , n = e.pwdIsShown;
                return a.createElement("button", {
                    className: ee.icon,
                    onClick: t,
                    "aria-label": "toggle password visibility"
                }, n ? a.createElement(J, {
                    width: 14,
                    height: 14
                }) : a.createElement(X, {
                    width: 14,
                    height: 14
                }))
            }
              , ae = 30
              , ie = 40
              , se = 40;
            function ue(e, t, n) {
                if (-1 === e)
                    return "";
                var r = 2 * Math.PI * e / n
                  , o = 2 * Math.PI * (e + 1) / n
                  , a = ie + Math.sin(r) * t
                  , i = se - Math.cos(r) * t
                  , s = ie + Math.sin(o) * t
                  , u = se - Math.cos(o) * t;
                return "M ".concat(a, " ").concat(i, " A ").concat(t, " ").concat(t, " 0 0 1 ").concat(s, " ").concat(u)
            }
            function ce(e) {
                var t = e.i
                  , n = e.max
                  , r = e.className;
                return a.createElement("path", {
                    d: ue(t, ae, n),
                    className: r
                })
            }
            function le(e) {
                var t = e.config
                  , n = e.id
                  , r = e.state
                  , o = e.current;
                return a.createElement("div", {
                    id: n,
                    className: "bw-progress-circle bw-centering-container"
                }, a.createElement("div", {
                    className: "bw-progress-circle-text bw-centered"
                }, "i" === t[o] ? a.createElement("div", {
                    className: "bw-info"
                }, "i") : a.createElement("span", null, t[o])), a.createElement("svg", {
                    className: "bw-progress-circle-drawing",
                    xmlns: "http://www.w3.org/2000/svg",
                    version: "1.1",
                    viewBox: "0 0 80 80"
                }, r.map((function(e, n) {
                    return a.createElement(ce, {
                        key: n,
                        i: n,
                        max: t.length,
                        className: e.progress
                    })
                }
                )), a.createElement(ce, {
                    i: o,
                    max: t.length,
                    className: "the marker"
                })))
            }
            var de = n(57581)
              , fe = n.n(de)
              , pe = n(58065)
              , he = n.n(pe)
              , me = n(36387)
              , ge = n(46343)
              , ve = n.n(ge)
              , we = n(6322)
              , be = n(3222)
              , ye = n(49161)
              , Ce = n(17496)
              , xe = n(62375)
              , Ee = n(50466)
              , ke = n(84966)
              , Se = n(19986)
              , Te = n.n(Se)
              , _e = n(16806)
              , Ae = n(69049);
            function Oe(e) {
                return Oe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Oe(e)
            }
            function De(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== Oe(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== Oe(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === Oe(o) ? o : String(o)), r)
                }
                var o
            }
            var Ie = n(1309).richTextAsHtml
              , Pe = n(73668)
              , Re = Pe.getNumbering
              , Le = Pe.hasSubmitCheckPage
              , Ne = Pe.calculateMaxScoreForQuestion;
            function Fe(e) {
                var t = Ce.getConfigSync()
                  , n = {};
                n.translate = p.Tl,
                n.getNumbering = function(e, n) {
                    return Re(t, e, n)
                }
                ,
                n.createQuestionDiv = function(t, n, r) {
                    return he()(document.createElement("h1")).addClass(r).append(e.getIndexPrefix(t)).append(he()(document.createElement("div")).addClass("question-text").safeHtml(P.prepare(n)))
                }
                ,
                n.textAnswerToDisplayString = function(e) {
                    if (null == e)
                        return "";
                    var t = e.split(/##/);
                    return t.length > 0 ? t.join(" / ") : ""
                }
                ,
                n.textSelectAnswerToDisplayString = function(e) {
                    if (null == e)
                        return "";
                    if (e.startsWith("select:")) {
                        var t = e.split(":");
                        return t.shift(),
                        t.join(":").split("##")[0]
                    }
                    return ""
                }
                ,
                n.spellcheckattrib = function() {
                    return (0,
                    be.spellCheckAttribString)("yes" === t.spellcheck)
                }
                ,
                n.addSpellCheckAttrib = function(e) {
                    e.attr(this.getSpellcheckAttrib())
                }
                ,
                n.addSpellCheckAttrib = function(e) {
                    e.attr((0,
                    be.spellCheckAttribs)("yes" === t.spellcheck))
                }
                ,
                n.inputModeAttrib = function(e) {
                    return o()((0,
                    ye.keyboardAttribs)(e), (function(e, t) {
                        return "".concat(t, '="').concat(e, '"')
                    }
                    )).join(" ")
                }
                ,
                n.addInputModeAttrib = function(e, t) {
                    e.attr((0,
                    ye.keyboardAttribs)(t))
                }
                ,
                n.getSpellcheckAttrib = function() {
                    return (0,
                    be.spellCheckAttribs)("yes" === t.spellcheck)
                }
                ,
                n.getInputModeAttrib = function(e) {
                    return (0,
                    ye.keyboardAttribs)(e)
                }
                ,
                n.replaceBadQuotes = function(e) {
                    return e.replace(/[\u2018\u2019]/g, "'")
                }
                ,
                n.compareVal = function(e, t, n) {
                    return (e = this.replaceBadQuotes(e)) === this.replaceBadQuotes(t)
                }
                ,
                n.matchesOneOfAnswers = function(e, t, n) {
                    n && (e = e.toLowerCase(),
                    t = t.toLowerCase()),
                    e = this.replaceBadQuotes(e);
                    for (var r = (t = this.replaceBadQuotes(t)).split(/##/), o = 0; o < r.length; ++o)
                        if (e === r[o].trim())
                            return !0;
                    return !1
                }
                ,
                n.processEmbeddedElements = function(e) {
                    P.processMathElems(e),
                    ke.resolveYoutubePlaceholders(e),
                    Ee.processAudioTags(e)
                }
                ,
                n.imageLoadedCallbacks = [],
                n.triggerImageLoaded = function() {
                    for (var e = 0; e < this.imageLoadedCallbacks.length; ++e)
                        n.imageLoadedCallbacks[e]()
                }
                ,
                n.addImageLoadedCallback = function(e) {
                    this.imageLoadedCallbacks.push(e)
                }
                ,
                n.blurFocused = function() {
                    var e = document.querySelector(":focus");
                    e && e.blur()
                }
                ,
                n.createTextOrPictureAnswer = Te().createTextOrPictureAnswer,
                n.createPairAnswer = Te().createPairAnswer,
                n.createWordListAnswer = Te().createWordListAnswer,
                n.createMultiSelectAnswerCollector = function(e, t, n) {
                    return {
                        _score: "each" == e ? 0 : t,
                        max: "each" == e ? 0 : t,
                        correctness: [],
                        answers: [],
                        add: function(r, o, a) {
                            "each" === e ? r ? (this.max += t,
                            n ? o ? (this.answers.push(a),
                            this.correctness.push(1),
                            this._score += t) : (this.answers.push(""),
                            this.correctness.push(0)) : (this.answers.push(""),
                            this.correctness.push(-1))) : n ? o ? (this.answers.push(a),
                            this.correctness.push(0),
                            this._score -= t) : (this.answers.push(""),
                            this.correctness.push(1)) : (this.answers.push(""),
                            this.correctness.push(-1)) : n ? r ? o ? (this.answers.push(a),
                            this.correctness.push(1)) : (this.answers.push(""),
                            this.correctness.push(0),
                            this._score = 0) : o ? (this.answers.push(a),
                            this.correctness.push(0),
                            this._score = 0) : (this.answers.push(""),
                            this.correctness.push(1)) : (this.answers.push(""),
                            this.correctness.push(-1),
                            this._score = 0)
                        },
                        score: function() {
                            return "each" == e && this._score < 0 ? 0 : this._score
                        }
                    }
                }
                ,
                n.needToSyncTags = function() {
                    return !0
                }
                ,
                n.data = function(e, t, n) {
                    return void 0 === n ? e.data(t) : e.data(t, n)
                }
                ,
                n.hasData = function(e, t) {
                    return void 0 !== e.data(t)
                }
                ,
                n.findByData = function(e, t, n, r) {
                    for (var o = e.find(t), a = 0; a < o.length; ++a) {
                        var i = he()(o[a]);
                        if (this.data(i, n) === r)
                            return i
                    }
                    return console.log("not found ", n, r),
                    he()()
                }
                ,
                n.addClass = function(e, t) {
                    var n = e.attr("class")
                      , r = n ? n.split(" ") : [];
                    -1 === r.indexOf(t) && (r.push(t),
                    e.attr("class", r.join(" ")))
                }
                ,
                n.removeClass = function(e, t) {
                    var n = e.attr("class")
                      , r = n ? n.split(" ") : []
                      , o = r.indexOf(t);
                    -1 !== o && (r.splice(o, 1),
                    e.attr("class", r.join(" ")))
                }
                ,
                n.setTagValue = function(e, t, n) {
                    var r = this;
                    e.each((function() {
                        var e = he()(this);
                        r.addClass(e, "bw-tagged");
                        var o = r.data(e, "tags") || {};
                        o[t] = n,
                        r.data(e, "tags", o),
                        r.needToSyncTags() && (n ? r.addClass(e, t) : r.removeClass(e, t))
                    }
                    ))
                }
                ,
                n.setTag = function(e, t) {
                    this.setTagValue(e, t, !0)
                }
                ,
                n.clearTag = function(e, t) {
                    this.setTagValue(e, t, !1)
                }
                ,
                n.findTag = function(e, t) {
                    var n = this;
                    return e.find(".bw-tagged").filter((function() {
                        return !0 === n.data(he()(this), "tags")[t]
                    }
                    ))
                }
                ,
                n.hasTag = function(e, t) {
                    return !!e.is(".bw-tagged") && !0 === this.data(e, "tags")[t]
                }
                ,
                n.syncDomWithTags = function(e) {
                    var t = this;
                    function n(e) {
                        var n = t.data(e, "tags");
                        for (var r in n)
                            n.hasOwnProperty(r) && (n[r] ? t.addClass(e, r) : t.removeClass(e, r))
                    }
                    e.is(".bw-tagged") && n(e),
                    e.find(".bw-tagged").each((function() {
                        n(he()(this))
                    }
                    ))
                }
                ,
                n.clearDomTagInfo = function(e) {
                    var t = this;
                    function n(e) {
                        var n = t.data(e, "tags");
                        for (var r in n)
                            n.hasOwnProperty(r) && t.removeClass(e, r)
                    }
                    e.is(".bw-tagged") && n(e),
                    e.find(".bw-tagged").each((function() {
                        n(he()(this))
                    }
                    ))
                }
                ,
                n.syncDomWithTagsIfRequired = function(e) {
                    this.needToSyncTags() && this.syncDomWithTags(e)
                }
                ,
                n.addNarrowScreenPadding = function(e) {
                    he()(document.createElement("div")).addClass("narrow-screen-padding").appendTo(e)
                }
                ,
                n.addOptionalImage = function(e, t, n, r) {
                    if (e && e.sources && 0 != e.sources.length) {
                        var o = t ? t.toLowerCase() : "big"
                          , a = he()(document.createElement("figure")).addClass("picture").append(_e.create({
                            img: e,
                            loadcb: r
                        }).addClass(o)).appendTo(n);
                        e.hasOwnProperty("caption") && "" !== e.caption && (a.addClass("with-caption"),
                        he()(document.createElement("figcaption")).text(e.caption).appendTo(a))
                    }
                }
                ,
                n.createOptionalImage = function(e, t, n) {
                    this.addOptionalImage(e.img, e.imgsize, t, n)
                }
                ,
                n.calculateMaxScoreForQuestion = function(e) {
                    return Ne(e)
                }
                ,
                n.QuestionTypeBase = function(e, t, r, o, a) {
                    return {
                        data: e,
                        pindex: t,
                        changeCB: r,
                        qc: o,
                        question: a,
                        state: {},
                        save: function() {
                            return null
                        },
                        load: function() {
                            return !1
                        },
                        clear: function() {
                            return !1
                        },
                        setReadOnly: function() {
                            return !1
                        },
                        setCorrection: function() {},
                        updateState: function() {
                            if (!this.loading) {
                                var e = this.save();
                                ve()(e, this.state.answer) || (this.state.answer = e,
                                this.changeCB && this.changeCB("answer", this.state.answer))
                            }
                        },
                        syncWithState: function(e, t, r) {
                            if (!e.hasOwnProperty("answer") || e.answer.answer === this.state.answer || this.savesResource && null != e.answer && null != this.state.answer || (this.loading = !0,
                            this.state.answer = e.answer.answer,
                            null == e.answer || null == e.answer.answer ? this.clear() : this.load(e.answer.answer),
                            this.loading = !1),
                            t.hasOwnProperty("readOnly") && t.readOnly !== this.state.readOnly && (this.readOnly = t.readOnly,
                            this.setReadOnly(t.readOnly),
                            this.state.readOnly = t.readOnly),
                            t.hasOwnProperty("showCorrectness") || t.hasOwnProperty("showCorrectAnswers") || t.hasOwnProperty("showAnsweredCorrect")) {
                                var o = "no" !== r.needs_correction && r.__hasSecureConfig && (t.showCorrectness || t.showCorrectAnswers || t.showAnsweredCorrect);
                                !o || this.state.correctionPrepared && this.state.fullquestionconfig == r || (o && this.prepareCorrection && (this.prepareCorrection(r),
                                n.syncDomWithTags(this.question)),
                                this.state.correctionPrepared = o,
                                this.state.fullquestionconfig = r),
                                o ? t.showCorrectness === this.state.showCorrectness && t.showCorrectAnswers === this.state.showCorrectAnswers && this.state.correction === e.correction || (this.setCorrection(e.correction, r, t.showCorrectness, t.showCorrectAnswers),
                                this.state.correction = e.correction,
                                this.state.showCorrectness = t.showCorrectness,
                                this.state.showCorrectAnswers = t.showCorrectAnswers) : null != this.state.correction && (this.setCorrection(null),
                                this.state.correction = null)
                            }
                            this.showMandatoryFieldReminder && t.hasOwnProperty("showMandatoryFieldReminder") && t.showMandatoryFieldReminder !== this.state.showMandatoryFieldReminder && (this.state.showMandatoryFieldReminder = t.showMandatoryFieldReminder,
                            this.showMandatoryFieldReminder(t.showMandatoryFieldReminder))
                        },
                        getQuestionHtml: function() {
                            return Ie(this.data.Question)
                        },
                        getQuestionNumber: function(e) {
                            return n.getNumbering(this.data, e)
                        },
                        getTitleClass: function() {
                            return "the-question"
                        },
                        renderTypeSpecificPart: function() {}
                    }
                }
                ;
                var r = function() {
                    return e = function e(t) {
                        !function(e, t) {
                            if (!(e instanceof t))
                                throw new TypeError("Cannot call a class as a function")
                        }(this, e),
                        this.obj = t,
                        this.state = {},
                        this.obj.onresize && (this.onresize = this.obj.onresize.bind(this.obj)),
                        this.obj.repaint && (this.repaint = this.obj.repaint.bind(this.obj))
                    }
                    ,
                    (r = [{
                        key: "updateHintState",
                        value: function(e) {
                            this.state.hint = e,
                            this.obj.changeCB && this.obj.changeCB("hint", e)
                        }
                    }, {
                        key: "renderTitle",
                        value: function() {
                            n.createQuestionDiv(this.numbering, this.obj.getQuestionHtml(), this.obj.getTitleClass()).appendTo(this.divs.questdiv),
                            xe.process(this.divs.questdiv)
                        }
                    }, {
                        key: "render",
                        value: function() {
                            var e = this;
                            if (this.obj.questionid = "QC" + this.obj.pindex,
                            this.question = this.obj.question || he()("#" + this.obj.questionid),
                            this.obj.question = this.question,
                            this.divs = this.obj.qc.getQuestionImageDivs(this.question, this.obj.data.imgsize, this.obj.data.img, this.obj.data.imgpos),
                            this.obj.div = this.divs.answerdiv,
                            n.addNarrowScreenPadding(this.question),
                            this.numbering = this.obj.getQuestionNumber(this.question.attr("qindex")),
                            this.question.attr("numbering", this.numbering),
                            this.renderTitle(),
                            this.obj.data.audio && "" != this.obj.data.audio && Ee.createPlayer(this.obj.data.audio, this.qc.isQuiz).appendTo(this.divs.audiodiv),
                            this.obj.renderTypeSpecificPart(),
                            this.obj.data.videoid && "" !== this.obj.data.videoid) {
                                var r = he()(document.createElement("div")).addClass("videodiv").appendTo(this.divs.videodiv);
                                if (ke.isYoutubeUrl(this.obj.data.videoid)) {
                                    var o = this.questionid + "_video";
                                    he()(document.createElement("div")).attr("id", o).appendTo(r),
                                    ke.playYouTube("#" + o, this.obj.data.videoid)
                                } else
                                    ke.createHtml5VideoPlayer(this.obj.data.videoid).appendTo(r)
                            } else
                                (0,
                                Ae.hasIframeConfiguration)(this.obj.data) && (0,
                                Ae.createIframe)(this.obj.data, this.divs.videodiv);
                            if (this.createHint(this.obj.data, this.divs.hintdiv, (function(t) {
                                e.updateHintState(t)
                            }
                            )),
                            this.divs.rationalediv.addClass("rationalediv"),
                            n.createOptionalImage(this.obj.data, this.divs.imgdiv),
                            n.processEmbeddedElements(this.question),
                            "yes" === t.show_question_points && "true" !== this.obj.data.noquestion) {
                                var a = n.calculateMaxScoreForQuestion(this.obj.data);
                                a > 0 && he()(document.createElement("div")).addClass("question-points").append(he()(document.createElement("span")).addClass("scored-points").safeHtml("&nbsp;&nbsp;")).safeAppend(" / ").append(a).prependTo(this.question)
                            }
                            if (this.obj.repaint) {
                                var i = !1;
                                this.question.find("img").one("load", (function() {
                                    e.obj.repaint()
                                }
                                )).each((function() {
                                    this.complete && (i = !0)
                                }
                                )),
                                i && this.obj.repaint()
                            }
                            return this.question[0]
                        }
                    }, {
                        key: "createHint",
                        value: function(e, t, n) {
                            if (null != e.hint && "" != e.hint) {
                                he()(document.createElement("div")).addClass("hint").safeHtml(P.prepare(Ie(e.hint))).appendTo(t).click((function() {
                                    he()(this).hide(),
                                    he()(this).parent().parent().find(".hintbutton").show(),
                                    n && n(!1)
                                }
                                )).hide(),
                                xe.process(t);
                                var r = he()(document.createElement("div")).appendTo(t);
                                he()(document.createElement("div")).addClass("hintbutton").safeHtml((0,
                                p.Tl)("Show hint")).appendTo(r).makeButton().enterOrSpaceClicks().click((function() {
                                    he()(this).parent().parent().find(".hint").show(),
                                    he()(this).hide(),
                                    n && n(!0)
                                }
                                ))
                            }
                        }
                    }, {
                        key: "createRationale",
                        value: function(e, r, o) {
                            if (null != e.Rationale && "" != e.Rationale || null != e.rationale_img && e.rationale_img.sources && e.rationale_img.sources.length > 0 || void 0 !== o) {
                                if (r.hasClass("rationale") || (r = r.find(".rationale").length > 0 ? r.find(".rationale") : he()(document.createElement("div")).addClass("rationale").appendTo(r)),
                                r.empty(),
                                void 0 !== o && (r.append(o),
                                (0,
                                we.setAutoDirectionIfRequired)(r.find(".the-answer-text"), t.direction)),
                                void 0 !== e.Rationale) {
                                    var a = he()(document.createElement("div")).addClass("the-rationale").safeHtml(P.prepare(Ie(e.Rationale))).appendTo(r);
                                    (0,
                                    we.setAutoDirectionIfRequired)(a, t.direction),
                                    xe.process(a)
                                }
                                n.addOptionalImage(e.rationale_img, e.rationale_imgsize, a),
                                r.hide()
                            } else
                                "" === r.safeHtml() && r.hasClass("rationale") && r.hide()
                        }
                    }, {
                        key: "prepareRationale",
                        value: function(e) {
                            var t = this.obj.createExtraRationale ? this.obj.createExtraRationale(e) : null;
                            return this.createRationale(e, this.divs.rationalediv, t),
                            t ? {
                                extrarationale: t
                            } : null
                        }
                    }, {
                        key: "showRationale",
                        value: function(e) {
                            this.prepareRationale(e);
                            var t = this.question.find(".rationale");
                            "" !== t.safeHtml() && (t.show(),
                            P.processMathElems(t),
                            ke.resolveYoutubePlaceholders(t),
                            Ee.processAudioTags(t))
                        }
                    }, {
                        key: "hideRationale",
                        value: function(e) {
                            this.question.find(".rationale").hide()
                        }
                    }, {
                        key: "syncWithState",
                        value: function(e, t, n) {
                            this.obj.syncWithState(e, t, n),
                            e.hasOwnProperty("hint") && e.hint !== this.state.hint && (this.question.find(".hint").toggleClass(e.hint),
                            this.question.find(".hintbutton").toggleClass(!e.hint),
                            this.state.hint = e.hint),
                            e.hasOwnProperty("score") && e.score !== this.state.score && (null == e.score ? this.question.find(".scored-points").safeHtml("&nbsp;&nbsp;") : this.question.find(".scored-points").text(e.score),
                            this.state.score = e.score),
                            t.hasOwnProperty("showRationale") && t.showRationale !== this.state.showRationale && (t.showRationale ? this.showRationale(n) : this.hideRationale(),
                            this.state.showRationale = t.showRationale)
                        }
                    }, {
                        key: "clear",
                        value: function() {
                            this.obj.clear()
                        }
                    }]) && De(e.prototype, r),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    e;
                    var e, r
                }();
                return n.QuestionObjectWrapper = r,
                n.createCorrectWrongMarker = function(e) {
                    e = e || {};
                    var t = he()(document.createElement(e.hasOwnProperty("elementType") ? e.elementType : "span")).addClass("cr-marker");
                    return he()(document.createElement("span")).addClass(e.hasOwnProperty("correctClass") ? "cr-correct " + e.correctClass : "cr-correct").attr("aria-hidden", "true").safeHtml("&#x2713;").appendTo(t),
                    he()(document.createElement("span")).addClass("cr-correct bw-sr-only").safeHtml((0,
                    p.Tl)("correct answer")).appendTo(t),
                    he()(document.createElement("span")).addClass(e.hasOwnProperty("wrongClass") ? "cr-wrong " + e.wrongClass : "cr-wrong").attr("aria-hidden", "true").safeHtml("&#x2718;").appendTo(t),
                    he()(document.createElement("span")).addClass("cr-wrong bw-sr-only").safeHtml((0,
                    p.Tl)("wrong answer")).appendTo(t),
                    t
                }
                ,
                n.widgetSupportsCorrection = function() {
                    return "yes" === t.show_correct || "yes" === t.color_correct_answers || "question-specific" === t.color_correct_answers
                }
                ,
                n.needToColorCorrectAnswersForQuestion = function(e, t) {
                    return "question-specific" === e.color_correct_answers && "yes" === t.color_correct_answers
                }
                ,
                n.questionSupportsCorrection = function(e) {
                    return "yes" === t.show_correct || "yes" === t.color_correct_answers || this.needToColorCorrectAnswersForQuestion(t, e)
                }
                ,
                n.hasSubmitCheckPage = function() {
                    return Le(t)
                }
                ,
                n.isQuiz = function() {
                    return e.isQuiz
                }
                ,
                n
            }
            function Me(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function je(e) {
                var t, n, r = e.maxpx, o = e.maxpercent, i = e.margin, s = e.className, u = e.children, c = (t = (0,
                a.useState)(100),
                n = 2,
                function(e) {
                    if (Array.isArray(e))
                        return e
                }(t) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(t, n) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return Me(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Me(e, t) : void 0
                    }
                }(t, n) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()), l = c[0], d = c[1];
                return (0,
                a.useLayoutEffect)((function() {
                    function e() {
                        d(window.innerHeight)
                    }
                    return window.addEventListener("resize", e),
                    e(),
                    function() {
                        return window.removeEventListener("resize", e)
                    }
                }
                ), []),
                a.createElement("div", {
                    style: {
                        position: "relative",
                        height: Math.min(r, o * (l - i) / 100)
                    },
                    className: s
                }, u)
            }
            var qe = n(73668);
            function Be(e) {
                return Be = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Be(e)
            }
            function We(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== Be(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== Be(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === Be(o) ? o : String(o)), r)
                }
                var o
            }
            function Ue(e) {
                return Ue = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                Ue(e)
            }
            function ze(e, t) {
                return ze = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                ze(e, t)
            }
            var He = function(e) {
                function t(e) {
                    var n, r, o, a;
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    a = [e],
                    o = Ue(o),
                    n = function(e, t) {
                        if (t && ("object" === Be(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, a || [], Ue(r).constructor) : o.apply(r, a))).element = null,
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && ze(e, t)
                }(t, e),
                n = t,
                (r = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        var t = this.props
                          , n = t.img
                          , r = t.onLoaded
                          , o = t.className;
                        null != e && null == this.element && (he()(e).append(_e.create(Object.assign({}, this.props.options, {
                            img: n,
                            loadcb: r
                        })).addClass(o)),
                        this.element = e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        return a.createElement("div", {
                            ref: this.setWrapperDivRef.bind(this)
                        })
                    }
                }]) && We(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.PureComponent);
            function Qe(e) {
                return Qe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Qe(e)
            }
            function Ve(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== Qe(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== Qe(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === Qe(o) ? o : String(o)), r)
                }
                var o
            }
            function Ye(e) {
                return Ye = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                Ye(e)
            }
            function Ke(e, t) {
                return Ke = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                Ke(e, t)
            }
            var Ge = function(e) {
                function t(e) {
                    var n, r, o, a;
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    a = [e],
                    o = Ye(o),
                    n = function(e, t) {
                        if (t && ("object" === Qe(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, a || [], Ye(r).constructor) : o.apply(r, a))).element = null,
                    n.setWrapperDivRef = n.setWrapperDivRef.bind(n),
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && Ke(e, t)
                }(t, e),
                n = t,
                (r = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        if (null != e && null == this.element) {
                            this.element = e;
                            var t = Ee.createPlayerLimited(this.props.audio, !1, this.props.numberOfPlays, this.props.setCurrentAudioPlays, this.props.getCurrentAudioPlaysDetail);
                            t.control.appendTo(e),
                            this.props.isAutoPlay && t.player.player.play()
                        }
                    }
                }, {
                    key: "render",
                    value: function() {
                        return a.createElement("div", {
                            className: this.props.className,
                            ref: this.setWrapperDivRef
                        })
                    }
                }]) && Ve(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.PureComponent);
            function $e(e) {
                return $e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                $e(e)
            }
            function Je(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== $e(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== $e(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === $e(o) ? o : String(o)), r)
                }
                var o
            }
            function Xe(e) {
                return Xe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                Xe(e)
            }
            function Ze(e, t) {
                return Ze = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                Ze(e, t)
            }
            var et = function(e) {
                function t(e) {
                    var n, r, o, a;
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    a = [e],
                    o = Xe(o),
                    n = function(e, t) {
                        if (t && ("object" === $e(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, a || [], Xe(r).constructor) : o.apply(r, a))).element = null,
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && Ze(e, t)
                }(t, e),
                n = t,
                (r = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        if (null != e && null == this.element)
                            if (this.element = e,
                            ke.isYoutubeUrl(this.props.videoid)) {
                                var t = (0,
                                V.randomId)(30) + "_video";
                                he()(document.createElement("div")).attr("id", t).appendTo(e),
                                ke.playYouTube(e, this.props.videoid)
                            } else
                                ke.createHtml5VideoPlayer(this.props.videoid).appendTo(e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        return a.createElement("div", {
                            className: this.props.className,
                            ref: this.setWrapperDivRef.bind(this)
                        })
                    }
                }]) && Je(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.PureComponent);
            function tt(e) {
                return tt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                tt(e)
            }
            function nt(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== tt(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== tt(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === tt(o) ? o : String(o)), r)
                }
                var o
            }
            function rt(e) {
                return rt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                rt(e)
            }
            function ot(e, t) {
                return ot = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                ot(e, t)
            }
            var at = function(e) {
                function t(e) {
                    var n, r, o, a;
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    a = [e],
                    o = rt(o),
                    n = function(e, t) {
                        if (t && ("object" === tt(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, a || [], rt(r).constructor) : o.apply(r, a))).element = null,
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && ot(e, t)
                }(t, e),
                n = t,
                (r = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        null != e && null == this.element && (this.element = e,
                        (0,
                        Ae.createIframe)(this.props.iframeconfig, e))
                    }
                }, {
                    key: "render",
                    value: function() {
                        return a.createElement("div", {
                            className: this.props.className,
                            ref: this.setWrapperDivRef.bind(this)
                        })
                    }
                }]) && nt(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.PureComponent);
            function it(e) {
                var t = e.score
                  , n = e.max
                  , r = e.isTotal;
                return n <= 0 ? null : a.createElement("div", {
                    className: "question-points",
                    role: "text"
                }, a.createElement("span", {
                    className: "bw-sr-only"
                }, r ? (0,
                p.Tl)("total score") : (0,
                p.Tl)("question score")), a.createElement("span", {
                    className: "scored-points"
                }, null == t ? "  " : (0,
                qe.roundScore)(t)), " / ", (0,
                qe.roundScore)(n))
            }
            function st(e) {
                var t = e.id
                  , n = e.action
                  , r = e.className
                  , o = e.children;
                return a.createElement("div", {
                    id: t,
                    className: s()("textbutton bw-button", r),
                    role: "button",
                    tabIndex: 0,
                    onClick: n
                }, o)
            }
            var ut = n(82594)
              , ct = function(e) {
                var t = e.width
                  , n = e.height;
                return a.createElement("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: t,
                    height: n,
                    viewBox: "0 0 16 16",
                    focusable: "false",
                    "aria-hidden": "true",
                    fill: "currentColor"
                }, a.createElement("path", {
                    d: "M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"
                }), a.createElement("path", {
                    d: "M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"
                }))
            }
              , lt = n(9735);
            function dt(e) {
                return dt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                dt(e)
            }
            function ft(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== dt(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== dt(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === dt(o) ? o : String(o)), r)
                }
                var o
            }
            function pt(e) {
                return pt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                pt(e)
            }
            function ht(e, t) {
                return ht = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                ht(e, t)
            }
            var mt = function(e) {
                function t(e) {
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    n = this,
                    o = [e],
                    r = pt(r = t),
                    function(e, t) {
                        if (t && ("object" === dt(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(n, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(r, o || [], pt(n).constructor) : r.apply(n, o));
                    var n, r, o
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && ht(e, t)
                }(t, e),
                n = t,
                (r = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        if (this.wrapperdiv = e,
                        null != e && null == this.question) {
                            var t = this.props
                              , n = (t.questionconfig,
                            t.d_i)
                              , r = (t.answerupdated,
                            t.questionstate)
                              , o = t.config
                              , a = t.questionObject
                              , i = (t.context,
                            a);
                            i.question = he()(e),
                            i.questionid = "QC" + (n + 1),
                            i.div = he()(e),
                            this.question = i,
                            i.renderTypeSpecificPart(r.seed),
                            (0,
                            we.setAutoDirectionIfRequired)(he()(e), o.direction),
                            P.processMathElems(i.div),
                            this.componentDidUpdate(),
                            i.onResize && (this.onResize = this.onResize.bind(this),
                            window.addEventListener("resize", this.onResize))
                        }
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function() {
                        var e = this.props
                          , t = e.questionstate
                          , n = e.questionconfig
                          , r = e.questionconfigincludingcorrection
                          , o = e.readOnly
                          , a = e.showCorrectness
                          , i = e.showCorrectAnswers
                          , s = e.showRationale
                          , u = e.showAnsweredCorrect
                          , c = e.showMandatoryFieldReminder;
                        if (t)
                            try {
                                var l = r || n
                                  , d = {
                                    readOnly: o,
                                    showCorrectness: a,
                                    showCorrectAnswers: i,
                                    showRationale: s,
                                    showAnsweredCorrect: u,
                                    showMandatoryFieldReminder: c
                                };
                                this.question && this.question.syncWithState(t, d, l)
                            } catch (e) {
                                console.error(e),
                                this.question.clear()
                            }
                    }
                }, {
                    key: "onResize",
                    value: function(e) {
                        this.question && this.question.onResize && this.question.onResize(null == e ? void 0 : e.printMode)
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        this.question.onResize && window.removeEventListener("resize", this.onResize),
                        this.question.cleanup && this.question.cleanup(),
                        he()(this.wrapperdiv).html(),
                        delete this.question
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        this.question.onResize && setTimeout(this.onResize)
                    }
                }, {
                    key: "render",
                    value: function() {
                        return a.createElement("div", {
                            ref: this.setWrapperDivRef.bind(this)
                        })
                    }
                }]) && ft(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.Component);
            function gt(e) {
                var t = e.questionObject
                  , n = e.questionconfigincludingcorrection;
                return a.createElement("div", {
                    className: "the-answer",
                    ref: function(e) {
                        e && (he()(e).empty().append(t.createExtraRationaleJQuery(n)),
                        P.processMathElems(he()(e)))
                    }
                })
            }
            var vt = function(e) {
                var t = e.questionObject
                  , n = e.direction
                  , r = e.questionconfigincludingcorrection;
                if (t.createExtraRationale) {
                    var o = t.createExtraRationale(r);
                    if (o)
                        return a.createElement($.s, {
                            className: "the-answer",
                            text: o,
                            direction: n,
                            directionSelector: ".the-answer-text"
                        })
                } else if (t.createExtraRationaleJQuery)
                    return a.createElement(gt, {
                        questionObject: t,
                        questionconfigincludingcorrection: r
                    });
                return null
            }
              , wt = n(1309)
              , bt = Fe({
                isQuiz: !1
            });
            var yt = n(46795)
              , Ct = "A7Oyah9DMA9KAbtvWHql";
            function xt(e) {
                return xt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                xt(e)
            }
            function Et(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== xt(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== xt(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === xt(o) ? o : String(o)), r)
                }
                var o
            }
            function kt(e) {
                return kt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                kt(e)
            }
            function St(e, t) {
                return St = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                St(e, t)
            }
            var Tt = function(e) {
                function t(e) {
                    var n, r, o, a;
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    a = [e],
                    o = kt(o),
                    n = function(e, t) {
                        if (t && ("object" === xt(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, a || [], kt(r).constructor) : o.apply(r, a))).element = null,
                    n.scratchpad = null,
                    n.data = null,
                    n.id = (0,
                    V.randomId)(20),
                    n.onResize = n.onResize.bind(n),
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && St(e, t)
                }(t, e),
                n = t,
                r = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        var t = this
                          , n = this.props
                          , r = n.context
                          , o = n.lines
                          , a = n.enable_photo
                          , i = n.data
                          , s = n.onUpdate;
                        if (null != e && null == this.element) {
                            this.element = e;
                            var u = (0,
                            yt.bindToContext)(r);
                            this.scratchpad = u.create(this.element, {
                                lines: o,
                                enable_pan: !0,
                                enable_photo: a
                            }),
                            null != i && (this.data = i,
                            this.scratchpad.load(i)),
                            this.scratchpad.div.on("change", (function() {
                                var e = t.scratchpad.save();
                                e !== t.data && (t.data = e,
                                s(e))
                            }
                            )),
                            window.addEventListener("resize", this.onResize),
                            setTimeout(this.scratchpad.onResize.bind(this.scratchpad))
                        }
                    }
                }, {
                    key: "onResize",
                    value: function() {
                        this.element && this.scratchpad.onResize()
                    }
                }, {
                    key: "componentDidUpdate",
                    value: function() {
                        if (null != this.scratchpad) {
                            var e = this.props.data;
                            e !== this.data && (null == e ? this.scratchpad.clear() : this.scratchpad.load(e),
                            this.data = e)
                        }
                    }
                }, {
                    key: "componentWillUnmount",
                    value: function() {
                        window.removeEventListener("resize", this.onResize),
                        this.element && (this.element.innerHTML = ""),
                        delete this.scratchpad
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props.readOnly;
                        return a.createElement("div", {
                            id: this.id,
                            ref: this.setWrapperDivRef.bind(this),
                            className: s()("Q581regS1WF968u7Glm5", "scratchpad bw-row-container w-cover")
                        }, a.createElement("div", {
                            className: "bw-row-fixed bw-column-container scratchpadtoolbar"
                        }, a.createElement("div", {
                            className: Ct
                        }, a.createElement("div", {
                            className: "bw-button bw-icon-small bw-icon-angle-left bw-row-fixed bw-column-fixed scratchpad-prev"
                        })), a.createElement("div", {
                            className: Ct
                        }, a.createElement("div", {
                            className: "bw-button bw-icon-small bw-icon-angle-right bw-column-fixed scratchpad-next"
                        })), a.createElement("div", {
                            className: s()("new-toolbar-wrapper bw-column-resizing", e && "hidden")
                        }, a.createElement("div", {
                            className: "w-toolbar-wrapper"
                        }, a.createElement("div", {
                            className: "bw-toolbar maintoolbar"
                        }, a.createElement("div", {
                            className: "scratchpad-undo-redo-container bw-button-group"
                        }), a.createElement("div", {
                            className: "scratchpad-draw-tools-container bw-button-group"
                        }), a.createElement("div", {
                            className: "scratchpad-width-buttons-container bw-button-group"
                        }), a.createElement("div", {
                            className: "scratchpad-colors-container bw-button-group"
                        })), a.createElement("div", {
                            className: "bw-toolbar hidden phototoolbar"
                        }, a.createElement("div", {
                            id: "photo-buttons-container",
                            className: "bw-button-group"
                        }))))), a.createElement("input", {
                            type: "file",
                            accept: "image/*",
                            className: "take-picture-field hidden"
                        }), a.createElement("div", {
                            className: "scratchboardwrapper bw-row-resizing"
                        }, a.createElement("canvas", {
                            className: "scratchboardgrid"
                        }), a.createElement("div", {
                            className: "scratchboard bw-row-resizing"
                        }), a.createElement("div", {
                            className: "photo-placer hidden"
                        }), a.createElement("input", {
                            type: "class",
                            id: "textedit",
                            size: 200
                        }), a.createElement("div", {
                            className: "overlay"
                        })))
                    }
                }],
                r && Et(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.Component)
              , _t = function(e) {
                var t = e.starQuestionToggle
                  , n = e.id;
                return t && n ? a.createElement("button", {
                    style: {
                        backgroundColor: "transparent",
                        border: "none",
                        color: "inherit",
                        height: "32px",
                        width: "32px"
                    },
                    onClick: function() {
                        t && t(n)
                    },
                    role: "button",
                    "aria-label": (0,
                    qe.questionIsStarred)(n) ? (0,
                    p.Tl)("starred") : (0,
                    p.Tl)("unstarred")
                }, (0,
                qe.questionIsStarred)(n) ? a.createElement("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: "16",
                    height: "16",
                    fill: "#F1C40F",
                    className: "bi bi-star-fill",
                    viewBox: "0 0 16 16",
                    style: {
                        position: "relative",
                        top: "2.5px"
                    }
                }, a.createElement("path", {
                    d: "M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"
                })) : a.createElement("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: "16",
                    height: "16",
                    fill: "currentColor",
                    className: "bi bi-star",
                    viewBox: "0 0 16 16",
                    style: {
                        position: "relative",
                        top: "2.5px",
                        opacity: "0.3"
                    }
                }, a.createElement("path", {
                    d: "M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"
                }))) : null
            }
              , At = function() {
                return a.createElement("svg", {
                    xmlns: "http://www.w3.org/2000/svg",
                    width: "18",
                    height: "18",
                    fill: "#F1C40F",
                    className: "bi bi-star-fill",
                    viewBox: "0 0 16 16",
                    style: {
                        position: "absolute",
                        bottom: "0px",
                        right: "0px"
                    }
                }, a.createElement("path", {
                    d: "M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"
                }))
            };
            function Ot(e) {
                return Ot = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Ot(e)
            }
            function Dt(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, Lt(r.key), r)
                }
            }
            function It(e) {
                return It = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                It(e)
            }
            function Pt(e, t) {
                return Pt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                Pt(e, t)
            }
            function Rt(e, t, n) {
                return (t = Lt(t))in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n,
                e
            }
            function Lt(e) {
                var t = function(e) {
                    if ("object" !== Ot(e) || null === e)
                        return e;
                    var t = e[Symbol.toPrimitive];
                    if (void 0 !== t) {
                        var n = t.call(e, "string");
                        if ("object" !== Ot(n))
                            return n;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return String(e)
                }(e);
                return "symbol" === Ot(t) ? t : String(t)
            }
            var Nt = Fe({
                isQuiz: !1
            });
            function Ft(e) {
                var t = e.imgsize
                  , n = e.img
                  , r = e.imgpos
                  , o = e.rtl
                  , i = e.QuestionTitle
                  , u = e.Image
                  , c = e.Answer
                  , l = e.ScratchPad
                  , d = e.Hint
                  , f = e.Audio
                  , p = e.Rationale
                  , h = e.Video
                  , m = n && n.sources && n.sources.length > 0;
                return !m || "Small" !== t && "Medium" !== t ? a.createElement(a.Fragment, null, m && r && r.startsWith("Before") && a.createElement("div", null, u), i, f, m && r && r.startsWith("Between") && a.createElement("div", null, u), c, l, d, p, m && r && r.startsWith("After") && a.createElement("div", null, u), h) : a.createElement(a.Fragment, null, a.createElement("div", {
                    className: s()("bw-column-container bw-wrap", t.toLowerCase(), o && "reverse")
                }, a.createElement("div", {
                    className: "picture-left bw-column-resizing"
                }, i, f, c), a.createElement("div", {
                    className: "picture-right bw-column-fixed"
                }, u)), a.createElement("div", {
                    style: {
                        clear: "both"
                    }
                }), l, d, p, h)
            }
            function Mt(e) {
                var t = e.number
                  , n = e.title
                  , r = e.className
                  , o = e.starQuestionToggle
                  , i = e.id
                  , s = e.questionType;
                return a.createElement("h2", {
                    className: r,
                    tabIndex: -1
                }, null != t && "" !== t && a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "questionnumber"
                }, (0,
                p.Tl)("QUESTION") + " " + t, a.createElement("div", {
                    className: "bw-sr-only"
                }, s), a.createElement(_t, {
                    starQuestionToggle: o,
                    id: i
                }))), a.createElement($.s, {
                    className: "question-text",
                    text: n,
                    id: "question-" + i
                }))
            }
            function jt(e) {
                var t = e.imgcnf
                  , n = e.imgsize
                  , r = e.loadcb;
                if (!t || !t.sources || 0 === t.sources.length)
                    return null;
                var o = n ? n.toLowerCase() : "big"
                  , i = "Small" === n ? 200 : "Medium" === n ? 300 : 400
                  , u = t.hasOwnProperty("caption") && "" !== t.caption;
                return a.createElement("figure", {
                    className: s()("picture", u && "with-caption")
                }, a.createElement(He, {
                    img: t,
                    onLoaded: r,
                    className: o,
                    options: {
                        maxHeight: i
                    }
                }), u && a.createElement("figcaption", null, t.caption))
            }
            function qt(e) {
                var t = e.questionconfig
                  , n = e.extrarationale
                  , r = e.direction;
                return (0,
                qe.questionHasNoRationale)(t) && null == n ? null : a.createElement("div", {
                    className: "rationale"
                }, n, t.Rationale && a.createElement(a.Fragment, null, a.createElement($.s, {
                    className: "the-rationale",
                    text: t.Rationale,
                    direction: r
                })), a.createElement(jt, {
                    imgcnf: t.rationale_img,
                    imgsize: t.rationale_imgsize
                }))
            }
            function Bt(e) {
                var t = e.audio
                  , n = e.numberOfPlays
                  , r = e.setCurrentAudioPlays
                  , o = e.getCurrentAudioPlaysDetail
                  , i = e.isAutoPlay;
                return null == t || "" === t ? null : a.createElement("div", null, a.createElement(Ge, {
                    isAutoPlay: i,
                    audio: t,
                    numberOfPlays: n,
                    setCurrentAudioPlays: r,
                    getCurrentAudioPlaysDetail: o
                }))
            }
            function Wt(e) {
                var t = e.className
                  , n = e.text
                  , r = e.onClick;
                return a.createElement("div", {
                    className: t,
                    onClick: r,
                    role: "button",
                    tabIndex: 0
                }, n)
            }
            function Ut(e) {
                var t = e.show
                  , n = e.text
                  , r = e.onClick
                  , o = e.direction
                  , i = a.useCallback((function() {
                    var e = window.getSelection();
                    null != e && 0 !== e.toString().length || r()
                }
                ), [r])
                  , s = a.useRef(null);
                return (0,
                a.useEffect)((function() {
                    t && s.current && s.current.focus()
                }
                ), [t]),
                (0,
                wt.isEmptyRichText)(n) ? null : a.createElement("div", {
                    className: "hintdiv"
                }, t ? a.createElement($.H, {
                    ref: s,
                    className: "hint",
                    text: n,
                    onClick: i,
                    direction: o
                }) : a.createElement(Wt, {
                    className: "hintbutton",
                    text: (0,
                    p.Tl)("Show hint"),
                    onClick: i
                }))
            }
            function zt(e) {
                var t = e.questionconfig;
                return t.videoid && "" !== t.videoid ? a.createElement("div", {
                    className: "videowrapper"
                }, a.createElement(et, {
                    className: "videodiv",
                    videoid: t.videoid
                })) : (0,
                Ae.hasIframeConfiguration)(t) ? a.createElement(at, {
                    className: "videowrapper",
                    iframeconfig: t
                }) : null
            }
            var Ht = function(e) {
                var t, n = e.questionState, r = e.onClick, o = (0,
                a.useMemo)((function() {
                    return Rt(Rt({}, ut.f4.REMOVE_FULL, (0,
                    p.Tl)("Your answers couldn't be loaded because the question changed")), ut.f4.REMOVE_PART, (0,
                    p.Tl)("Some of your answers couldn't be loaded because the question changed"))
                }
                ), []);
                return n && n.answer && n.answer.answerLoadError && !1 !== n.isanswerLoadErrorVisible && (t = o[n.answer.answerLoadError]),
                t && !1 !== n.isanswerLoadErrorVisible ? a.createElement("div", {
                    className: "Ojf4MJtdDVb1dY0LT9wQ"
                }, a.createElement("span", {
                    className: "N1DYKfnHVEg6AaX3_1PQ"
                }, a.createElement(ct, {
                    height: 12,
                    width: 12
                })), a.createElement("span", {
                    className: "yp7L5_CijrHtMBvZfOIM"
                }, t), a.createElement("button", {
                    className: "eVdaA6nSdK2cxnft0W7f",
                    onClick: r,
                    "aria-label": "toggle password visibility"
                }, a.createElement("span", {
                    className: "bw-icon bw-icon-close _hnOWqDcOo_b8XVjzTvk"
                }))) : null
            }
              , Qt = function() {
                var e = (0,
                p.Tl)("No correction available because the widget was modified");
                return a.createElement("div", {
                    className: "WyzpLBCiofMpmnqchou4"
                }, a.createElement("span", {
                    className: "I85E8aP9K7p8AwUbRME7"
                }, a.createElement(ct, {
                    height: 12,
                    width: 12
                })), a.createElement("span", {
                    className: "fqLpwwfndJTrnBJhogZr"
                }, e))
            }
              , Vt = function(e) {
                function t(e) {
                    var n, r, o, i;
                    !function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    i = [e],
                    o = It(o),
                    n = function(e, t) {
                        if (t && ("object" === Ot(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, i || [], It(r).constructor) : o.apply(r, i))).state = {
                        title: ""
                    };
                    var s = n.props
                      , u = s.config
                      , c = s.questionconfig
                      , l = s.d_i
                      , d = s.answerupdated
                      , f = s.context;
                    return n.max_score = (0,
                    qe.calculateMaxScoreForQuestion)(c),
                    n.onResize = n.onResize.bind(n),
                    n.questionTypeService = function(e, t, n, r, o) {
                        var i = function(e, t) {
                            for (var n = [], r = e.questions || [], o = 0; o < r.length; ++o) {
                                for (var a = r[o].Type, i = lt[a], s = !0, u = 0; u < n.length; ++u)
                                    if (n[u][0] == i[0]) {
                                        s = !1;
                                        break
                                    }
                                s && n.push(i)
                            }
                            for (var c = {}, l = 0; l < n.length; ++l) {
                                var d = n[l][1]
                                  , f = n[l][2];
                                for (var p in d)
                                    c[p] = [d[p](t), f]
                            }
                            return {
                                questionTypes: c
                            }
                        }(e, bt)
                          , s = i.questionTypes[t.Type];
                        return "react" === s[1] ? function(e, t) {
                            return Object.assign({}, {
                                getTitleClass: function() {
                                    return "the-question"
                                },
                                onResize: function() {},
                                getQuestionHtml: function() {
                                    return (0,
                                    wt.richTextAsHtml)(t.Question)
                                },
                                getQuestionType: function() {
                                    return e.name
                                }
                            }, e)
                        }(s[0], t) : function(e, t, n, r, o) {
                            var i = e(t, n + 1, r, o);
                            return {
                                QuestionContent: function(e) {
                                    return a.createElement(mt, Object.assign({}, e, {
                                        questionObject: i
                                    }))
                                },
                                QuestionExtraRationale: function(e) {
                                    return a.createElement(vt, Object.assign({}, e, {
                                        questionObject: i
                                    }))
                                },
                                getQuestionHtml: function() {
                                    return i.getQuestionHtml()
                                },
                                getTitleClass: function() {
                                    return i.getTitleClass()
                                },
                                onResize: function() {
                                    i.onResize && i.onResize()
                                },
                                getQuestionType: function() {
                                    return i.name
                                }
                            }
                        }(s[0], t, n, r, o)
                    }(u, c, l, d, f),
                    n.onHintClicked = n.onHintClicked.bind(n),
                    n.onScratchpadClicked = n.onScratchpadClicked.bind(n),
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && Pt(e, t)
                }(t, e),
                n = t,
                r = [{
                    key: "onResize",
                    value: function() {
                        setTimeout(this.questionTypeService.onResize.bind(this))
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        var e = this.questionTypeService;
                        this.setState({
                            title: e.getQuestionHtml()
                        }),
                        this.onResize()
                    }
                }, {
                    key: "onHintClicked",
                    value: function() {
                        var e = this.props;
                        (0,
                        e.answerupdated)("showHint", !e.questionstate.showHint)
                    }
                }, {
                    key: "onScratchpadClicked",
                    value: function() {
                        var e = this.props;
                        (0,
                        e.answerupdated)("showScratchpad", !e.questionstate.showScratchpad)
                    }
                }, {
                    key: "onQuestionAnswerLoadMessage",
                    value: function(e) {
                        this.props.answerupdated("QuestionAnswerMessage", e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e, t, n = this, r = this.props, o = r.answerupdated, i = r.checkMode, u = r.className, c = r.config, l = r.context, d = r.d_i, h = r.doneLabel, m = r.innerRef, g = r.onDone, v = r.qindex, w = r.questionconfig, b = r.questionconfigincludingcorrection, y = r.questionstate, C = r.readOnly, x = r.showAnsweredCorrect, E = r.showCorrectness, k = r.showCorrectAnswers, S = r.showMandatoryFieldReminder, T = r.showRationale, _ = r.starQuestionToggle, A = r.setCurrentAudioPlays, O = r.getCurrentAudioPlaysDetail, D = "QC" + (d + 1), I = {};
                        I["question-type"] = w.Type;
                        var P = b && b.__hasSecureConfig;
                        return a.createElement("div", Object.assign({
                            ref: m,
                            className: s()("content", u, !C && "entry-mode", C && "readonly-mode", "no" !== w.needs_correction && i && "check-mode", P && "no" !== w.needs_correction && E && "show-correctness", P && "no" !== w.needs_correction && k && "show-correct-answers", i && "check-mode-rationale", P && "no" !== w.needs_correction && x && "color-correct-answers"),
                            id: D
                        }, I), "yes" === c.show_question_points && "true" !== w.noquestion && a.createElement(it, {
                            max: this.max_score,
                            score: (0,
                            qe.needToShowEndScore)(c) ? y.score : null
                        }), a.createElement(Ft, {
                            imgsize: w.imgsize,
                            img: w.img,
                            imgpos: w.imgpos,
                            rtl: (0,
                            we.isRtlOrRtlMixed)(c && c.direction),
                            QuestionTitle: a.createElement(Mt, {
                                number: (0,
                                qe.getNumbering)(c, w, v),
                                title: this.state.title,
                                starQuestionToggle: _,
                                id: w.id,
                                className: this.questionTypeService.getTitleClass(),
                                questionType: this.questionTypeService.getQuestionType()
                            }),
                            Image: a.createElement(jt, {
                                imgcnf: w.img,
                                imgsize: w.imgsize,
                                loadcb: function() {
                                    setTimeout(n.onResize)
                                }
                            }),
                            Answer: a.createElement("div", {
                                className: "answerdiv"
                            }, a.createElement("div", null, a.createElement(Ht, {
                                onClick: this.onQuestionAnswerLoadMessage.bind(this, !1),
                                questionState: y
                            })), E && !P && a.createElement("div", null, a.createElement(Qt, null)), a.createElement(this.questionTypeService.QuestionContent, {
                                answerupdated: o,
                                config: c,
                                context: l,
                                d_i: d,
                                questionconfig: w,
                                questionconfigincludingcorrection: b,
                                questionstate: y,
                                readOnly: C,
                                showAnsweredCorrect: P && x,
                                showCorrectness: P && E,
                                showCorrectAnswers: P && k,
                                showMandatoryFieldReminder: S,
                                showRationale: P && T
                            })),
                            ScratchPad: a.createElement(a.Fragment, null, ("yes" === c.scratchpad || "question-specific" === c.scratchpad && "yes" === w.scratchpad) && "true" !== w.noquestion && (!C || (null === (e = y.scratchpad) || void 0 === e ? void 0 : e.length)) && a.createElement("div", {
                                className: "scratchpad-button"
                            }, a.createElement(f, {
                                icon: "bw-icon-notes",
                                onClick: this.onScratchpadClicked,
                                className: s()((null === (t = y.scratchpad) || void 0 === t ? void 0 : t.length) && "bw-selected", "yC_Q9EDj09DhPvyRgLlX"),
                                description: (0,
                                p.Tl)("Draft pages")
                            })), y.showScratchpad && a.createElement(je, {
                                className: "Qh9cmA4i34oqiGNBRS_6",
                                maxpx: 600,
                                margin: 80,
                                maxpercent: 90
                            }, a.createElement(Tt, {
                                context: l,
                                lines: c.scratchpad_lines,
                                enable_photo: "no" !== c.scratchpad_enable_photo,
                                data: y.scratchpad,
                                onUpdate: C ? void 0 : o.bind(null, "scratchpad"),
                                readOnly: C
                            }))),
                            Hint: a.createElement(Ut, {
                                show: y.showHint,
                                text: w.hint,
                                direction: c.direction,
                                onClick: this.onHintClicked
                            }),
                            Audio: a.createElement(Bt, {
                                isAutoPlay: "yes" === c.auto_play_audio,
                                audio: w.audio,
                                numberOfPlays: w.audioNumberOfPlayes,
                                setCurrentAudioPlays: function(e, t) {
                                    A(w.id, e, t)
                                },
                                getCurrentAudioPlaysDetail: function() {
                                    return O(w.id)
                                }
                            }),
                            Rationale: P && T ? a.createElement(qt, {
                                questionconfig: b,
                                extrarationale: "no" !== w.needs_correction && i ? a.createElement(this.questionTypeService.QuestionExtraRationale, {
                                    direction: c.direction,
                                    questionconfigincludingcorrection: b,
                                    qu: Nt
                                }) : null,
                                direction: c.direction
                            }) : null,
                            Video: a.createElement(zt, {
                                questionconfig: w
                            })
                        }), g && a.createElement("div", {
                            className: "yYce6EUORqWWGrSeeKZg"
                        }, a.createElement(st, {
                            className: "rfRPNzwWaDRkN0qtkGxa",
                            action: g
                        }, h)))
                    }
                }],
                r && Dt(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.Component)
              , Yt = a.forwardRef((function(e, t) {
                return a.createElement(Vt, Object.assign({
                    innerRef: t
                }, e))
            }
            ))
              , Kt = n(26598);
            function Gt(e) {
                return Gt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Gt(e)
            }
            function $t(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== Gt(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== Gt(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === Gt(o) ? o : String(o)), r)
                }
                var o
            }
            var Jt = (0,
            Kt.createLogger)("CountdownTimer");
            function Xt(e) {
                return e > 9 ? e : "0" + e
            }
            var Zt = function() {
                return e = function e() {
                    (function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }
                    )(this, e),
                    this.starttime = null,
                    this.countdowntime = 0,
                    this.running = !1,
                    this.initialized = !1
                }
                ,
                (t = [{
                    key: "updateDisplay",
                    value: function() {
                        this.display.update(this.timeLeft())
                    }
                }, {
                    key: "timeLeft",
                    value: function() {
                        var e;
                        if (0 == this.countdowntime && console.log("getting time left but  no countdown time set"),
                        null == this.starttime)
                            console.log("getting time left but no starttime set"),
                            e = this.countdowntime;
                        else {
                            var t = new Date;
                            (e = this.countdowntime - (t.getTime() - this.starttime.getTime()) / 1e3) < 0 && (e = 0)
                        }
                        return parseInt(e)
                    }
                }, {
                    key: "elapsed",
                    value: function() {
                        return this.countdowntime - this.timeLeft()
                    }
                }, {
                    key: "setStartTime",
                    value: function(e) {
                        Jt.debug("Set start time to " + e),
                        this.starttime = new Date(e),
                        this.updateDisplay()
                    }
                }, {
                    key: "getStartTime",
                    value: function(e) {
                        return null == this.starttime ? null : this.starttime.getTime()
                    }
                }, {
                    key: "isInitialized",
                    value: function() {
                        return this.initialized
                    }
                }, {
                    key: "reset",
                    value: function() {
                        this.starttime = null
                    }
                }, {
                    key: "start",
                    value: function() {
                        if (Jt.debug("Starting countdown timer"),
                        this.running)
                            console.log("Error: start called twice");
                        else {
                            if (null == this.starttime) {
                                var e = new Date;
                                this.setStartTime(e.getTime())
                            }
                            this.timerid = setInterval(this.update.bind(this), 1e3),
                            this.running = !0,
                            this.updateDisplay()
                        }
                    }
                }, {
                    key: "init",
                    value: function(e, t) {
                        Jt.debug("Initializing countdown timer"),
                        this.display = t,
                        t.show(),
                        !0 === this.running && this.stop(),
                        e.hasOwnProperty("time") && (this.countdowntime = e.time || 60),
                        e.hasOwnProperty("timeoutCB") && (this.callback = e.timeoutCB),
                        e.hasOwnProperty("starttime") && this.setStartTime(parseInt(e.starttime)),
                        this.initialized = !0
                    }
                }, {
                    key: "stop",
                    value: function() {
                        this.running = !1,
                        clearInterval(this.timerid),
                        this.updateDisplay()
                    }
                }, {
                    key: "elapsedFormatted",
                    value: function() {
                        var e = this.elapsed();
                        return Xt(parseInt(e / 60)) + ":" + Xt(e % 60)
                    }
                }, {
                    key: "update",
                    value: function() {
                        0 == this.timeLeft() && (this.stop(),
                        null != this.callback && this.callback()),
                        this.updateDisplay()
                    }
                }]) && $t(e.prototype, t),
                n && $t(e, n),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e;
                var e, t, n
            }()
              , en = {
                button_pointer: "VfXPNmn4TbyqzoQRVPE6"
            };
            function tn(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var nn = {
                top: "0px"
            };
            function rn(e) {
                var t, n, r = e.secondsleft, o = e.totalTime, i = Xt(r % 60), s = Xt(parseInt(r / 60 + "") % 60), u = Xt(parseInt(r / 3600 + "")), c = (t = a.useState(!0),
                n = 2,
                function(e) {
                    if (Array.isArray(e))
                        return e
                }(t) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(t, n) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return tn(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? tn(e, t) : void 0
                    }
                }(t, n) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()), l = c[0], d = c[1], f = a.useRef();
                (0,
                a.useEffect)((function() {
                    var e = setTimeout((function() {
                        l && !f.current && d(!1)
                    }
                    ), 1e4);
                    return function() {
                        return clearTimeout(e)
                    }
                }
                ), []);
                var p = r / (60 * o) * 360
                  , h = (360 - p) * Math.PI / 180 + 3 * Math.PI / 2
                  , m = 50 + 30 * Math.cos(h)
                  , g = 50 + 30 * Math.sin(h)
                  , v = a.createElement("span", null);
                return l || (v = 360 === p ? a.createElement(on, null) : p >= 180 ? a.createElement(an, {
                    largeArcFlag: "1",
                    x: m,
                    y: g
                }) : a.createElement(an, {
                    largeArcFlag: "0",
                    x: m,
                    y: g
                })),
                a.createElement("div", {
                    id: "bwcountdown",
                    onClick: function() {
                        f.current || (f.current = !0),
                        d(!l)
                    },
                    className: en.button_pointer,
                    style: l ? {} : nn
                }, l ? a.createElement("span", null, u > 0 && a.createElement("label", {
                    id: "bwhours",
                    className: en.button_pointer
                }, u, ":"), a.createElement("label", {
                    id: "bwminutes",
                    className: en.button_pointer
                }, s, ":"), a.createElement("label", {
                    id: "bwseconds",
                    className: en.button_pointer
                }, i)) : v)
            }
            var on = function() {
                return a.createElement("svg", {
                    viewBox: "0 0 100 100",
                    width: "28",
                    height: "28"
                }, a.createElement("circle", {
                    cx: "50",
                    cy: "50",
                    r: "40",
                    stroke: "currentColor",
                    strokeWidth: "4",
                    fill: "rgba(0,0,0,0)"
                }), a.createElement("circle", {
                    cx: "50",
                    cy: "50",
                    r: "30",
                    stroke: "currentColor",
                    strokeWidth: "0",
                    fill: "currentColor"
                }))
            }
              , an = function(e) {
                var t = e.largeArcFlag
                  , n = e.x
                  , r = e.y;
                return a.createElement("svg", {
                    viewBox: "0 0 100 100",
                    width: "28",
                    height: "28"
                }, a.createElement("circle", {
                    cx: "50",
                    cy: "50",
                    r: "40",
                    stroke: "currentColor",
                    strokeWidth: "4",
                    fill: "rgba(0,0,0,0)"
                }), a.createElement("path", {
                    d: "M 50 50 L 50 20 A 30 30 0 " + t + " 0 " + n + " " + r + " z",
                    stroke: "currentColor",
                    strokeWidth: "0",
                    fill: "currentColor"
                }))
            }
              , sn = {
                blink: "YyeFlA_0flv3HAd7FELU",
                blinker: "fl3jYIpbkqZoCZUoAy6g"
            };
            function un(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function cn(e) {
                var t, n, r = e.loginstate, o = e.text, i = e.onClick, u = (t = (0,
                a.useState)(!0),
                n = 2,
                function(e) {
                    if (Array.isArray(e))
                        return e
                }(t) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(t, n) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return un(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? un(e, t) : void 0
                    }
                }(t, n) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()), c = u[0], l = u[1], d = (0,
                a.useRef)(null);
                (0,
                a.useEffect)((function() {
                    l(!0),
                    clearTimeout(d.current),
                    d.current = setTimeout((function() {
                        l(!1)
                    }
                    ), 4e3)
                }
                ), [r]);
                var f = {
                    state: r
                };
                return a.createElement("div", Object.assign({
                    className: s()("loginbutton bw-tooltext", c && sn.blink),
                    id: "loginbutton",
                    onClick: i
                }, f), o)
            }
            n(38885).showPdf;
            var ln = n(69049);
            ln.hasIframeConfiguration,
            ln.createIframe,
            n(62375),
            n(1309).richTextAsHtml,
            n(84966),
            n(78073),
            n(50466),
            n(58065);
            n(78514),
            a.PureComponent,
            n(54569);
            var dn = n(85119)
              , fn = n(3326)
              , pn = n.n(fn)
              , hn = n(79138)
              , mn = n.n(hn)
              , gn = function(e) {
                var t = mn()({
                    fill: "currentcolor",
                    display: "inline-block",
                    verticalAlign: "middle"
                }, e.iconStyle)
                  , n = e.size;
                return "lg" === n ? mn()(t, {
                    width: "1.3em",
                    height: "1.3em"
                }) : "2x" === n ? mn()(t, {
                    width: "2em",
                    height: "2em"
                }) : "3x" === n ? mn()(t, {
                    width: "3em",
                    height: "3em"
                }) : "4x" === n ? mn()(t, {
                    width: "4em",
                    height: "4em"
                }) : "md" === n ? mn()(t, {
                    width: "1em",
                    height: "1em"
                }) : "sm" === n ? mn()(t, {
                    width: ".75em",
                    height: ".75em"
                }) : "xs" === n && mn()(t, {
                    width: ".5em",
                    height: ".5em"
                }),
                a.createElement("span", {
                    style: e.style,
                    className: e.className
                }, a.createElement("svg", Object.assign({
                    viewBox: "0 0 1792 1792"
                }, pn()(e, ["style", "iconStyle", "className", "size"]), {
                    style: t
                })))
            }
              , vn = function(e) {
                return e.selected ? a.createElement(gn, Object.assign({
                    viewBox: "0 0 32 32"
                }, e), a.createElement("rect", {
                    x: "1",
                    y: "1",
                    width: "30",
                    height: "24",
                    rx: "4",
                    fill: "none",
                    stroke: "currentColor",
                    strokeWidth: "2"
                }), a.createElement("rect", {
                    x: "2",
                    y: "2",
                    width: "28",
                    height: "4"
                }), a.createElement("rect", {
                    x: "2",
                    y: "9",
                    width: "28",
                    height: "3"
                }), a.createElement("rect", {
                    x: "2",
                    y: "15",
                    width: "28",
                    height: "3"
                }), a.createElement("rect", {
                    x: "2",
                    y: "21",
                    width: "28",
                    height: "4"
                }), a.createElement("rect", {
                    x: "2",
                    y: "2",
                    width: "3",
                    height: "20"
                }), a.createElement("rect", {
                    x: "9",
                    y: "2",
                    width: "2",
                    height: "16"
                }), a.createElement("rect", {
                    x: "15",
                    y: "2",
                    width: "2",
                    height: "16"
                }), a.createElement("rect", {
                    x: "21",
                    y: "2",
                    width: "2",
                    height: "16"
                }), a.createElement("rect", {
                    x: "27",
                    y: "2",
                    width: "3",
                    height: "20"
                })) : a.createElement(gn, Object.assign({
                    viewBox: "0 0 32 32"
                }, e), a.createElement("rect", {
                    x: "0.5",
                    y: "0.5",
                    width: "31",
                    height: "25",
                    rx: "4",
                    fill: "none",
                    stroke: "currentColor",
                    strokeWidth: "1"
                }), a.createElement("rect", {
                    x: "5",
                    y: "6",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "11",
                    y: "6",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "17",
                    y: "6",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "23",
                    y: "6",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "5",
                    y: "12",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "11",
                    y: "12",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "17",
                    y: "12",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "23",
                    y: "12",
                    width: "4",
                    height: "3"
                }), a.createElement("rect", {
                    x: "5",
                    y: "18",
                    width: "22",
                    height: "3"
                }))
            }
              , wn = n(61743)
              , bn = {
                fullwidth: "Yt8szvbUu8WYnrnKoQmg"
            };
            function yn(e) {
                var t = e.state
                  , n = e.progressConfig
                  , r = e.progressState
                  , o = e.navController
                  , i = e.switchToPage
                  , u = a.useRef(null);
                return a.useEffect((function() {
                    t.showQuestionList && u.current && u.current.focus()
                }
                ), [t.showQuestionList]),
                a.createElement("div", {
                    id: "questions-wrapper",
                    className: "bw-column-fixed"
                }, a.createElement(me.A, {
                    in: t.showQuestionList,
                    timeout: 300,
                    classNames: "fade",
                    unmountOnExit: !0
                }, a.createElement("div", {
                    id: "questions",
                    className: "bw-column-fixed questions_shown",
                    style: {
                        left: "0px"
                    },
                    role: "dialog"
                }, n.map((function(e, n) {
                    if (n > o.lastQuestionListElementToShow(t))
                        return null;
                    var c, l, d = t.config.questions[t.questionOrder[n]], f = [];
                    "i" === e ? (f.push((0,
                    p.Tl)("Info section")),
                    c = "bw-info") : f.push((0,
                    p.Tl)("Question") + " " + e),
                    "i" !== e && ((t.readOnly && t.showCorrectness || (0,
                    qe.isQuestionLocked)(t, n) && "yes" === t.config.show_correct) && r[n].correctness ? (f.push("correct answer" === r[n].correctness ? (0,
                    p.Tl)("correct") : "wrong answer" === r[n].correctness ? (0,
                    p.Tl)("wrong") : "manual correction required" === r[n].correctness ? (0,
                    p.Tl)("needs manual correction") : "partial" === r[n].correctness ? (0,
                    p.Tl)("partially correct answer") : void 0),
                    l = r[n].correctness) : "done" === r[n].progress && (f.push((0,
                    p.Tl)("answered")),
                    l = "answered"));
                    var h = !(t.readOnly && t.showCorrectness) && d && d.id && (0,
                    qe.questionIsStarred)(d.id);
                    return h && f.push((0,
                    p.Tl)("starred")),
                    a.createElement("div", {
                        key: n,
                        ref: 0 === n ? u : null,
                        style: {
                            position: "relative"
                        },
                        "aria-label": f.join(","),
                        className: s()("question-button bw-button", c, l),
                        onClick: i.bind(null, n),
                        role: "button",
                        tabIndex: 0
                    }, "" === e ? a.createElement("span", null, " ") : e, h ? a.createElement(At, null) : null)
                }
                )))))
            }
            function Cn(e, t) {
                return !(e.readOnly || "yes" !== t.submit_answers || "no" !== t.submit_only_once && e.submitted)
            }
            function xn(e) {
                var t = e.config
                  , n = e.state
                  , r = e.clearAll
                  , o = e.submitAnswers
                  , i = e.checkAnswers
                  , u = e.shareAnswers
                  , c = e.downloadAnswers
                  , l = e.switchToEditMode
                  , d = e.onLoginClicked
                  , h = e.onCalculatorClicked
                  , m = e.onExtraKeyboardClicked
                  , g = e.showAnswerKeys
                  , v = e.showInstructions
                  , w = e.largeSubmitButton
                  , b = n.readOnly;
                console.log("xn(e):",e);
                var y = (0,
                a.useMemo)((function() {
                    return !!t["extra-keyboard-languages"] && fe()(t["extra-keyboard-languages"], (function(e) {
                        return "1" === e
                    }
                    )).length > 0 || !!t["extra-keyboard-symbols"]
                }
                ), [t]);
                return a.createElement(a.Fragment, null, null != n.loginState && a.createElement(cn, {
                    loginstate: n.loginState.state,
                    text: n.loginState.text,
                    onClick: d
                }), null != n.countdown && a.createElement(rn, {
                    secondsleft: n.countdown,
                    totalTime: t.countdown_time
                }), null != v && a.createElement(f, {
                    icon: "bw-icon-info",
                    onClick: v,
                    description: (0,
                    p.Tl)("Instructions")
                }), b && "yes" === t.allow_edit_after_check_or_send && a.createElement(f, {
                    icon: "bw-icon-edit",
                    onClick: l,
                    description: (0,
                    p.Tl)("Switch to edit mode")
                }), "None" !== t.provide_calculator && a.createElement(f, {
                    icon: "bw-icon-calculator",
                    onClick: h,
                    className: s()(n.showCalculator && "bw-selected"),
                    description: (0,
                    p.Tl)("Calculator")
                }), y && a.createElement(f, {
                    onClick: m,
                    className: s()(n.showExtraKeyboard && "bw-selected"),
                    description: (0,
                    p.Tl)("Keyboard")
                }, a.createElement(vn, {
                    selected: n.showExtraKeyboard
                })), !b && "no" === t.submit_answers && ("yes" === t.show_correct || (0,
                qe.needToShowEndScore)(t)) && a.createElement(f, {
                    id: "checkbutton",
                    icon: "bw-icon-accept",
                    onClick: i,
                    description: (0,
                    p.Tl)("Check answers")
                }), "yes" === t.allow_sharing && a.createElement(f, {
                    icon: "bw-icon-share",
                    onClick: u,
                    description: (0,
                    p.Tl)("Share")
                }), ("yes" === t.allow_download || !0 === n.showAnswerKeys) && a.createElement(f, {
                    icon: "bw-icon-download",
                    onClick: c,
                    description: (0,
                    p.Tl)("Download")
                }), Cn(n, t) && (w ? a.createElement(f, {
                    id: "sendbutton",
                    label: (0,
                    p.Tl)("Submit"),
                    onClick: o,
                    description: (0,
                    p.Tl)("Send")
                }) : a.createElement(f, {
                    id: "sendbutton",
                    icon: "bw-icon-send",
                    onClick: o,
                    description: (0,
                    p.Tl)("Send")
                })), ((!b || "no" === t.submit_only_once || "no" === t.submit_answers) && (b || "yes" !== t.question_by_question) || (0,
                wn.isPreview)()) && a.createElement(f, {
                    id: "clearbutton",
                    icon: "bw-icon-trash",
                    onClick: r,
                    onHold: g,
                    description: (0,
                    p.Tl)("Clear and restart")
                }))
            }
            function En(e) {
                var t = e.config
                  , n = e.state
                  , r = e.submitAnswers
                  , o = e.checkAnswers
                  , i = e.progressConfig
                  , u = e.progressState
                  , c = e.questionDone
                  , l = e.navController
                  , d = e.context
                  , f = e.gotoNextQuestion
                  , h = e.gotoPrevQuestion
                  , m = e.starQuestionToggle
                  , g = e.setCurrentAudioPlays
                  , v = e.getCurrentAudioPlaysDetail
                  , w = function(e) {
                    return (0,
                    a.useMemo)((function() {
                        return (0,
                        qe.calculateMaxScore)(e)
                    }
                    ), [e])
                }(t)
                  , b = function(e, t, n) {
                    return (0,
                    a.useMemo)((function() {
                        var r = (0,
                        qe.getFeedbackMsg)(e, {
                            score: t,
                            max: n
                        });
                        return (0,
                        qe.needToShowSebQuitLink)(e) && (r = null != r ? r + (0,
                        qe.getSebQuitMessage)() : (0,
                        qe.getSebQuitMessage)()),
                        r
                    }
                    ), [e, t, n])
                }(t, n.totalScore, w)
                  , y = (0,
                a.useRef)(null)
                  , C = Object.assign({}, d, {
                    getScrollObject: function() {
                        return y.current
                    }
                })
                  , x = (0,
                a.useCallback)((function() {
                    (0,
                    qe.gotoQuestion)(0)
                }
                ), [])
                  , E = n.questionOrder
                  , k = n.currentQuestion
                  , S = (0,
                a.useCallback)((function() {
                    var e = c();
                    (0,
                    qe.gotoQuestion)(e)
                }
                ), [c])
                  , T = l.needToShowPrevQuestionButton(n)
                  , _ = l.needToShowNextQuestionButton(n)
                  , A = (0,
                a.useRef)()
                  , O = (0,
                a.useCallback)((function(e) {
                    A.current = e
                }
                ), []);
                if (a.useEffect((function() {
                    if (A.current) {
                        var e = A.current.querySelector("h2");
                        e && e.focus()
                    }
                }
                ), [n.currentQuestion]),
                null == E)
                    return null;
                var D = 0
                  , I = (0,
                qe.hasSubmitCheckPage)(t)
                  , P = function(e, t, n) {
                    return "yes" === e.submit_answers ? {
                        buttonid: "big-submit-button",
                        buttonlabel: (0,
                        p.Tl)("Submit"),
                        buttonaction: t
                    } : "yes" === e.show_correct ? {
                        buttonid: "big-check-button",
                        buttonlabel: (0,
                        p.Tl)("Show answers"),
                        buttonaction: n
                    } : {
                        buttonid: "big-check-button",
                        buttonlabel: (0,
                        p.Tl)("Show score"),
                        buttonaction: n
                    }
                }(t, r, o)
                  , R = P.buttonid
                  , L = P.buttonlabel
                  , N = P.buttonaction
                  , F = (0,
                j.safeArray)(t.questions)
                  , M = (0,
                we.isRtlOrRtlMixed)(t && t.direction)
                  , q = a.createElement("div", {
                    className: s()("navbutton bw-button bw-icon-large bw-row-fixed prevarrow", M ? "bw-icon-angle-right" : "bw-icon-angle-left", !T && "bw-icon-hidden"),
                    onClick: h,
                    onKeyDown: function(e) {
                        var t = e.key;
                        "Enter" !== t && " " !== t || (e.preventDefault(),
                        e.stopPropagation(),
                        h())
                    },
                    role: "button",
                    tabIndex: 0,
                    "aria-label": (0,
                    p.Tl)("Previous question")
                })
                  , B = a.createElement("div", {
                    className: s()("navbutton bw-button move-forward bw-icon-large nextarrow", M ? "bw-icon-angle-left" : "bw-icon-angle-right", !_ && "bw-icon-hidden"),
                    onClick: f,
                    onKeyDown: function(e) {
                        var t = e.key;
                        "Enter" !== t && " " !== t || (e.preventDefault(),
                        e.stopPropagation(),
                        f())
                    },
                    role: "button",
                    tabIndex: 0,
                    "aria-label": (0,
                    p.Tl)("Next question")
                });
                return a.createElement(a.Fragment, null, a.createElement("div", {
                    className: "left-container bw-column-fixed bw-row-container"
                }, a.createElement("div", {
                    className: "bw-row-resizing"
                }), M ? B : q), a.createElement("div", {
                    className: "question-content-wrapper bw-column-resizing bw-column-container"
                }, a.createElement("div", {
                    className: s()("question-content bw-row-resizing contentarea"),
                    ref: y,
                    id: "question-content",
                    style: {
                        overflowY: "auto",
                        direction: M ? "rtl" : "ltr"
                    }
                }, F.map((function(e, r) {
                    var o = E[r]
                      , i = t.questions[o];
                    "true" !== i.noquestion && ++D;
                    var u, c = "yes" === t.info_numbering ? r + 1 : D;
                    return a.createElement(me.A, {
                        key: r,
                        in: r === k || n.printMode,
                        appear: !0,
                        timeout: 300,
                        classNames: "fade",
                        unmountOnExit: (u = i,
                        !(null != u.videoid && "" !== u.videoid))
                    }, a.createElement(Yt, {
                        ref: O,
                        config: t,
                        questionconfig: i,
                        questionconfigincludingcorrection: n.questionConfigIncludingCorrection && n.questionConfigIncludingCorrection[o],
                        checkMode: l.isQuestionInCheckMode(n, r),
                        readOnly: l.isQuestionReadOnly(n, r),
                        showCorrectness: l.showCorrectnessForQuestion(n, r),
                        showCorrectAnswers: l.showCorrectAnswersForQuestion(n, r),
                        showRationale: l.showRationaleForQuestion(n, r),
                        showAnsweredCorrect: n.showAnsweredCorrect || (0,
                        qe.needToColorCorrectAnswersForQuestion)(t, i),
                        questionstate: n && n.questions && n.questions[o],
                        c_i: o,
                        d_i: r,
                        qindex: c,
                        className: s()(r + 1 & 1 ? "odd" : "even", r === k && "active"),
                        answerupdated: qe.answerUpdated.bind(null, d, o),
                        onDone: l.needToShowDoneButton(n, r) ? S : void 0,
                        doneLabel: l.doneButtonLabel(n),
                        context: C,
                        starQuestionToggle: m,
                        setCurrentAudioPlays: g,
                        getCurrentAudioPlaysDetail: v
                    }))
                }
                )), I && a.createElement(me.A, {
                    in: F.length === k && !n.printMode,
                    timeout: 300,
                    classNames: "fade",
                    unmountOnExit: !0
                }, a.createElement("div", {
                    className: s()("submitpage", 1 & F.length ? "even" : "odd", F.length === k && "active", !n.readOnly && "entry-mode", n.readOnly && "readonly-mode", n.checkMode && "check-mode"),
                    id: "QC" + F.length,
                    key: "submitpage"
                }, "yes" === t.show_question_points && a.createElement(it, {
                    max: w,
                    score: (0,
                    qe.needToShowEndScore)(t) ? n.totalScore : null,
                    isTotal: !0
                }), a.createElement("div", {
                    className: "bw-centering-container"
                }, ("yes" !== t.submit_answers || Cn(n, t)) && a.createElement("div", {
                    className: "pre-submit bw-centered textdescription"
                }, a.createElement("p", null, function(e) {
                    return "yes" === e.question_by_question ? null : "yes" === e.submit_answers ? (0,
                    p.Tl)("Click the button to submit or go back to review your answers.") : "yes" === e.show_correct ? (0,
                    p.Tl)("Click the button to see the correct answers or go back to review your answers.") : (0,
                    p.Tl)("Click the button to see your score or go back to review your answers.")
                }(t)), a.createElement(st, {
                    id: R,
                    action: N
                }, L))), a.createElement("div", {
                    className: "post-submit"
                }, a.createElement("div", {
                    className: "feedbackwrapper bw-centering-container"
                }, a.createElement("div", {
                    className: "feedback bw-centered"
                }, b && a.createElement("div", {
                    className: "textdescriptiontitle"
                }, null != b && (0,
                p.Tl)("Feedback"), null == b && (0,
                qe.needToShowEndScore)(t) && (0,
                p.Tl)("Score")), (0,
                qe.needToShowEndScore)(t) && a.createElement("p", {
                    className: "textdescription"
                }, (0,
                p.Tl)("Your score is") + ": " + ("Score vs maximum" === t.show_score ? (0,
                qe.roundScore)(n.totalScore) + " / " + (0,
                qe.roundScore)(w) : (0,
                qe.roundScore)(n.totalScore))), b && a.createElement($.s, {
                    className: s()(bn.fullwidth, "textdescription"),
                    text: b
                }), null == b && !(0,
                qe.needToShowEndScore)(t) && a.createElement("div", {
                    className: "textdescriptiontitle"
                }, (0,
                p.Tl)("All done !")), a.createElement(st, {
                    action: x,
                    className: "bw-centered"
                }, a.createElement("span", {
                    className: "bw-icon-small bw-icon-angle-left",
                    style: {
                        position: "relative",
                        left: "10px"
                    }
                }), a.createElement("span", {
                    className: "bw-icon-small bw-icon-angle-left",
                    style: {
                        position: "relative",
                        left: "-10px"
                    }
                })))))))), a.createElement(yn, {
                    state: n,
                    progressConfig: i,
                    progressState: u,
                    navController: l,
                    switchToPage: function(e) {
                        (0,
                        qe.gotoQuestion)(e),
                        (0,
                        qe.showQuestionList)(!1)
                    }
                })), a.createElement("div", {
                    className: "right-container bw-column-fixed bw-row-container"
                }, a.createElement("div", {
                    className: "progress-container \n        bw-row-fixed",
                    onClick: l.canShowQuestionList(n) ? qe.toggleShowQuestionList : void 0,
                    role: "button",
                    tabIndex: 0,
                    "aria-label": (0,
                    p.Tl)("Show question list")
                }, a.createElement(le, {
                    id: "progress",
                    config: i,
                    state: u,
                    current: k
                })), a.createElement("div", {
                    className: "bw-row-resizing"
                }), M ? q : B))
            }
            var kn = {
                popup: "uL60I90MEKq4dZF71tD8",
                setting_popup: "SMRXWG1s6vlFUr2D6E2G",
                lang: "yBl0SFLDWjFtpl3y4C7Y",
                button: "OBR7e0bG_7EDkEZEohe2",
                settingButton: "kqzXBoe1XHkdDmjUeyAR",
                settingsIcon: "c6wvKCr_tDIcoIqfXOT7",
                pauseicon: "Jf5xGjf6hhX6CwHbi0pF",
                playicon: "fciVD9lLZQJI3IhbunPz",
                waitingicon: "RNTmYYl4S_II1ThN46B9",
                settingsDialog: "Q3yYh1tqNJBMsFXwg7uI",
                settingblock: "SZFLv79xQ9NCta3Pw2Qm",
                tts_play_container: "KHSq93QsvbVp375pFq78",
                settingTitle: "FgYummfWFqJkvSzM6kDH",
                tts_setting_container: "XvD_PtuUobV7AOBT9hmH",
                tts_setting_select_container: "yHzqpYeFAH_JKohNGVB6",
                tts_setting_rate: "e0an52VMWpxjiodNwn81",
                settings: "r9iiRDhu2UFnPZBBNejD"
            }
              , Sn = n(77752)
              , Tn = function(e) {
                return a.createElement(gn, Object.assign({
                    viewBox: "0 0 1792 1792"
                }, e), a.createElement("path", {
                    d: "M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"
                }))
            }
              , _n = function(e) {
                var t = e.replace("-", "_");
                return An[t] || ""
            }
              , An = {
                ar_sa: "مرحبًا! كيف حالك؟",
                eu_es: "Kaixo! Zelan zaude?",
                ca_es: "Hola! Com estàs?",
                zh_hk: "你好！ 你好吗？",
                zh_cn: "你好！ 你好吗？",
                zh_tw: "你好！ 你好吗？",
                cs_cz: "Ahoj! Jak se máte?",
                da_dk: "Hej! Hvordan har du det?",
                nl_nl: "Hallo! Hoe gaat het?",
                nl_be: "Hallo! Hoe gaat het?",
                en_us: "Hello! How are you?",
                en_au: "Hello! How are you?",
                en_uk: "Hello! How are you?",
                en_ca: "Hello! How are you?",
                en_in: "Hello! How are you?",
                en_ie: "Hello! How are you?",
                en_sc: "Hello! How are you?",
                en_za: "Hello! How are you?",
                fo_fo: "Hvussu gongur tað?",
                fi_fi: "Hei! Mitä kuuluu?",
                fr_fr: "Bonjour! Comment ça va?",
                fr_be: "Bonjour! Comment ça va?",
                fr_ca: "Bonjour! Comment ça va?",
                fy_nl: "Hallo! Hoe giet it mei dy?",
                gl_es: "Ola! Como estás?",
                de_de: "Hallo! Wie geht es?",
                de_ch: "Hallo! Wie geht es?",
                el_gr: "Γειά σου! Πώς είσαι;",
                he_il: "שלום! מה שלומך?",
                hi_in: "नमस्ते! आप कैसे हैं?",
                hu_hu: "Helló! Hogy vagy?",
                id_id: "Halo! Apa kabarmu?",
                it_it: "Ciao! Come stai?",
                ja_jp: "こんにちは！ 元気ですか？",
                ko_kr: "안녕하세요! 어떻게 지내세요?",
                nb_no: "Hallo! Hvordan har du det?",
                nn_no: "Hallo! Hvordan har du det?",
                pl_pl: "Cześć! Jak się masz?",
                pt_pt: "Olá! Como vai você?",
                pt_br: "Olá! Como vai você?",
                ro_ro: "Buna ziua! Ce mai faci?",
                sk_sk: "Ahoj! Ako sa máš?",
                ru_ru: "Привет! Как вы?",
                es_es: "¡Hola! ¿Qué tal?",
                es_us: "¡Hola! ¿Cómo estás?",
                es_ar: "¡Hola! ¿Cómo andás?",
                es_mx: "¡Hola! ¿Cómo andas?",
                sv_se: "Hallå! Hur mår du?",
                sv_fi: "Hallå! Hur mår du?",
                th_th: "สวัสดี! คุณเป็นอย่างไร?",
                tr_tr: "Merhaba! Nasılsın?",
                uk_ua: "Привіт! Як справи?",
                cy_cy: "Helo! Sut wyt ti?"
            }
              , On = n(48983)
              , Dn = n.n(On);
            function In(e, t, n) {
                var r = t.lang.toLowerCase().replace("-", "_")
                  , o = (n && !1 === t.localService ? 2 : 0) + (t.default ? 1 : 0);
                return e === r ? 16 + o : e.substring(0, 2) === r.substring(0, 2) ? 2 === r.length ? 8 + o : 4 + o : 0
            }
            function Pn(e, t) {
                if (null == e)
                    return null;
                e = e.toLowerCase().replace("-", "_");
                for (var n = window.speechSynthesis.getVoices(), r = 0, o = null, a = 0; a < n.length; a++) {
                    var i = In(e, n[a], t);
                    i > r && (r = i,
                    o = n[a])
                }
                return o
            }
            function Rn(e, t, n) {
                var r;
                if (null == e)
                    return !1;
                var o = new SpeechSynthesisUtterance(t)
                  , a = null !== (r = n.voice) && void 0 !== r ? r : Pn(e, n.preferonline);
                return null != a && (o.voiceURI = a.voiceURI,
                o.lang = a.lang,
                o.voice = a,
                o.rate = n.rate || 1,
                o.onstart = n.onstart,
                o.onend = n.onend,
                window.speechSynthesis.speak(o),
                !0)
            }
            function Ln() {
                window.speechSynthesis.cancel()
            }
            function Nn() {
                window.speechSynthesis.pause()
            }
            function Fn() {
                window.speechSynthesis.resume()
            }
            function Mn(e) {
                return e.substring(3)
            }
            function jn(e) {
                var t = localStorage.getItem("lang_" + e);
                return t ? JSON.parse(t) : {
                    rate: 0,
                    voice: void 0
                }
            }
            function qn(e, t, n) {
                var r = jn(e)
                  , o = {
                    URI: t ? t.voiceURI : r.voice ? r.voice.voiceURI : void 0,
                    lang: t ? t.lang : r.voice ? r.voice.lang : e
                };
                localStorage.setItem("lang_" + e, JSON.stringify({
                    voice: t || r.voice ? o : void 0,
                    rate: n || (r.rate ? r.rate : 1)
                }))
            }
            function Bn(e) {
                var t = jn(e);
                return t && t.voice ? function(e, t) {
                    var n = window.speechSynthesis.getVoices();
                    return n && n.find((function(n) {
                        return n.lang === t && n.voiceURI === e
                    }
                    )) || null
                }(t.voice.URI, t.voice.lang) : null
            }
            function Wn(e) {
                var t = jn(e);
                return t && t.rate ? t.rate : 1
            }
            var Un = n(81438);
            function zn(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var Hn = new (n.n(Un)())({});
            function Qn(e, t, n) {
                return null == e || "" === e ? "" : (e += "",
                n.length > 0 ? (o = Hn).sprintf.apply(o, [t(Hn, e)].concat(function(e) {
                    if (Array.isArray(e))
                        return zn(e)
                }(r = n) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(r) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return zn(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? zn(e, t) : void 0
                    }
                }(r) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }())) : t(Hn, e));
                var r, o
            }
            function Vn(e) {
                for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
                    n[r - 1] = arguments[r];
                return Qn(e, (function(e, t) {
                    return e.gettext(t)
                }
                ), n)
            }
            var Yn = function(e) {
                var t = e.replace("_", "-").toLocaleLowerCase()
                  , n = Kn.find((function(e) {
                    return e.value.replace("_", "-").toLocaleLowerCase() === t
                }
                ));
                return n ? n.text : ""
            }
              , Kn = [{
                value: "ar_ar",
                text: "العربية"
            }, {
                value: "ar_sa",
                text: "العربية (السعودية)"
            }, {
                value: "ca_es",
                text: "Català"
            }, {
                value: "cs_cz",
                text: "Čeština"
            }, {
                value: "cy_cy",
                text: "Cymraeg"
            }, {
                value: "da_dk",
                text: "Dansk"
            }, {
                value: "de_ch",
                text: "Deutsch (Schweiz)"
            }, {
                value: "de_de",
                text: "Deutsch (Deutschland)"
            }, {
                value: "el_gr",
                text: "Ελληνικά"
            }, {
                value: "en_au",
                text: "English (Australia)"
            }, {
                value: "en_ca",
                text: "English (Canada)"
            }, {
                value: "en_ie",
                text: "English (Ireland)"
            }, {
                value: "en_in",
                text: "English (India)"
            }, {
                value: "en_sc",
                text: "English (Scotland)"
            }, {
                value: "en_uk",
                text: "English (United Kingdom)"
            }, {
                value: "en_us",
                text: "English (USA)"
            }, {
                value: "en_za",
                text: "English (South Africa)"
            }, {
                value: "es_es",
                text: "Español (España)"
            }, {
                value: "es_mx",
                text: "Español (México)"
            }, {
                value: "es_us",
                text: "Español (EE.UU)"
            }, {
                value: "es_ar",
                text: "Español (Argentina)"
            }, {
                value: "eu_es",
                text: "Euskara"
            }, {
                value: "fi_fi",
                text: "Suomi"
            }, {
                value: "fo_fo",
                text: "Føroyskt"
            }, {
                value: "fr_be",
                text: "Français (Belgique)"
            }, {
                value: "fr_ca",
                text: "Français (Canada)"
            }, {
                value: "fr_fr",
                text: "Français (France)"
            }, {
                value: "fy_nl",
                text: "Frysk"
            }, {
                value: "gl_es",
                text: "Galego"
            }, {
                value: "he_il",
                text: "עברית"
            }, {
                value: "hi_in",
                text: "हिन्दी"
            }, {
                value: "hu_hu",
                text: "Magyar"
            }, {
                value: "id_id",
                text: "Bahasa Indonesia"
            }, {
                value: "it_it",
                text: "Italiano"
            }, {
                value: "ja_jp",
                text: "日本語"
            }, {
                value: "ko_kr",
                text: "한국어"
            }, {
                value: "nl_be",
                text: "Nederlands (België)"
            }, {
                value: "nl_nl",
                text: "Nederlands (Nederland)"
            }, {
                value: "nb_no",
                text: "Norsk (Bokmål)"
            }, {
                value: "nn_no",
                text: "Norsk (Nynorsk)"
            }, {
                value: "pl_pl",
                text: "Polski"
            }, {
                value: "pt_br",
                text: "Português (Brasil)"
            }, {
                value: "pt_pt",
                text: "Português (Portugal)"
            }, {
                value: "ro_ro",
                text: "Română"
            }, {
                value: "ru_ru",
                text: "Русский"
            }, {
                value: "sk_sk",
                text: "Slovenčina"
            }, {
                value: "sv_fi",
                text: "Svenska (Finland)"
            }, {
                value: "sv_se",
                text: "Svenska (Sverige)"
            }, {
                value: "th_th",
                text: "ไทย"
            }, {
                value: "tr_tr",
                text: "Türkçe"
            }, {
                value: "uk_ua",
                text: "Українська"
            }, {
                value: "zh_cn",
                text: "中文"
            }, {
                value: "zh_hk",
                text: "粵語"
            }, {
                value: "zh_tw",
                text: "中文 (中華民國)"
            }];
            function Gn(e) {
                return Gn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Gn(e)
            }
            function $n(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== Gn(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== Gn(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === Gn(o) ? o : String(o)), r)
                }
                var o
            }
            function Jn(e, t) {
                return function(e) {
                    if (Array.isArray(e))
                        return e
                }(e) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(e, t) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return Xn(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Xn(e, t) : void 0
                    }
                }(e, t) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function Xn(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var Zn = ["", ".", "..", "..."];
            function er(e) {
                var t = e.lang
                  , n = e.showLang
                  , r = e.state
                  , o = e.onPress
                  , i = Jn((0,
                a.useState)(0), 2)
                  , s = i[0]
                  , u = i[1];
                return (0,
                a.useEffect)((function() {
                    if ("waiting" === r) {
                        var e = setTimeout((function() {
                            u((s + 1) % 4)
                        }
                        ), 250);
                        return function() {
                            clearTimeout(e)
                        }
                    }
                }
                ), [r, s]),
                a.createElement("div", {
                    className: kn.button,
                    onMouseDown: function(e) {
                        e.stopPropagation(),
                        e.preventDefault(),
                        o()
                    },
                    role: "button",
                    "aria-label": (0,
                    p.Tl)("Play audio")
                }, ("ready" === r || "paused" === r) && a.createElement("div", {
                    className: kn.playicon
                }, "▶"), "waiting" === r && a.createElement("div", {
                    className: kn.waitingicon
                }, Zn[s]), "playing" === r && a.createElement("div", {
                    className: kn.pauseicon
                }, "||"), n && a.createElement("span", {
                    className: kn.lang
                }, t.substring(0, 2)))
            }
            var tr = function(e) {
                var t = e.onClick;
                return a.createElement("div", {
                    className: kn.settingButton,
                    onMouseDown: function(e) {
                        e.stopPropagation(),
                        e.preventDefault(),
                        t()
                    },
                    role: "button",
                    "aria-label": (0,
                    p.Tl)("Play audio")
                }, a.createElement(Tn, {
                    className: kn.settingsIcon,
                    size: "md"
                }))
            }
              , nr = function(e) {
                var t = e.title
                  , n = e.lang
                  , r = e.onRateChange
                  , o = e.rateValue
                  , i = e.preferonline
                  , s = e.onVoiceChange
                  , u = e.voice
                  , c = function(e, t) {
                    var n = Pn(e, t);
                    if (null == e)
                        return [];
                    e = e.toLowerCase().replace("-", "_");
                    var r = window.speechSynthesis.getVoices()
                      , o = r.filter((function(n) {
                        return In(e, n, t) >= 16
                    }
                    ));
                    return o.length ? (n && -1 === o.indexOf(n) && o.push(n),
                    o) : (o = r.filter((function(n) {
                        return In(e, n, t) >= 4
                    }
                    )),
                    n && -1 === o.indexOf(n) && o.push(n),
                    o)
                }(n, i)
                  , l = function(e, t) {
                    var n = Mn(t).toLowerCase();
                    return !e || !Dn()(e, (function(e) {
                        return Mn(e.lang).toLowerCase() !== n
                    }
                    ))
                }(c, n)
                  , d = u ? c.indexOf(u) : 0;
                return -1 === d && (s(c[0]),
                d = 0),
                a.createElement(a.Fragment, null, a.createElement("p", {
                    className: kn.settingTitle
                }, t), a.createElement("div", {
                    className: kn.settingblock
                }, a.createElement("div", {
                    className: kn.tts_setting_container
                }, a.createElement("div", {
                    className: kn.tts_setting_rate
                }, a.createElement("p", null, Number(o).toFixed(2), "x"), a.createElement("input", {
                    type: "range",
                    onInput: function(e) {
                        r(e),
                        Ln();
                        var t = e.target.value;
                        setTimeout((function() {
                            Ln(),
                            Rn(n, _n(n), {
                                onstart: function() {},
                                onend: function() {},
                                preferonline: i,
                                rate: t,
                                voice: c[d]
                            }) || (0,
                            Sn.showAlert)("No voice available for language: " + n, "Text to Speech error")
                        }
                        ), 10)
                    },
                    min: .05,
                    step: .05,
                    max: 2,
                    defaultValue: o
                })), c && c.length > 1 ? a.createElement("div", {
                    className: kn.tts_setting_select_container
                }, a.createElement("select", {
                    name: "",
                    id: "",
                    onChange: function(e) {
                        var t = c[e.target.value];
                        Ln(),
                        t && (s(t),
                        Rn(n, _n(n), {
                            onstart: function() {},
                            onend: function() {},
                            preferonline: i,
                            rate: o,
                            voice: t
                        }) || (0,
                        Sn.showAlert)("No voice available for language: " + n, "Text to Speech error"))
                    },
                    value: d
                }, c.map((function(e, t) {
                    return a.createElement("option", {
                        key: t,
                        value: t
                    }, function(e, t) {
                        return e.name + (t ? "" : " (" + Mn(e.lang) + ")")
                    }(e, l))
                }
                )))) : null)))
            }
              , rr = function(e) {
                var t = e.onClose
                  , n = e.lang1
                  , r = e.lang2
                  , o = e.preferonline
                  , i = Jn((0,
                a.useState)(Wn(n)), 2)
                  , s = i[0]
                  , u = i[1]
                  , c = Jn((0,
                a.useState)(Wn(r)), 2)
                  , l = c[0]
                  , d = c[1]
                  , f = Jn((0,
                a.useState)(Bn(n)), 2)
                  , p = f[0]
                  , h = f[1]
                  , m = Jn((0,
                a.useState)(Bn(r)), 2)
                  , g = m[0]
                  , v = m[1];
                return a.createElement(Z.J, null, a.createElement(Z.l, {
                    className: kn.settingsDialog,
                    title: Vn("Text-to-speech settings"),
                    onOk: function() {
                        t()
                    },
                    onClose: function() {
                        t()
                    }
                }, a.createElement("div", {
                    className: kn.settings
                }, a.createElement(nr, {
                    title: Yn(n),
                    lang: n,
                    onRateChange: function(e) {
                        u(e.target.value),
                        qn(n, void 0, e.target.value)
                    },
                    rateValue: s,
                    preferonline: o,
                    voice: p,
                    onVoiceChange: function(e) {
                        h(e),
                        qn(n, e, void 0)
                    }
                }), "xxxx" !== r ? a.createElement(nr, {
                    title: Yn(r),
                    lang: r,
                    onRateChange: function(e) {
                        d(e.target.value),
                        qn(r, void 0, e.target.value)
                    },
                    rateValue: l,
                    preferonline: o,
                    voice: g,
                    onVoiceChange: function(e) {
                        v(e),
                        qn(r, e, void 0)
                    }
                }) : null)))
            };
            function or(e) {
                var t = e.lang1
                  , n = e.lang2
                  , r = e.text
                  , o = e.preferonline
                  , i = e.onSettingOpen
                  , s = Jn((0,
                a.useState)("ready"), 2)
                  , u = s[0]
                  , c = s[1]
                  , l = Jn((0,
                a.useState)("ready"), 2)
                  , d = l[0]
                  , f = l[1];
                return a.createElement(a.Fragment, null, a.createElement(er, {
                    lang: t,
                    showLang: "xxxx" !== n,
                    state: u,
                    onPress: function() {
                        "ready" !== d && (Ln(),
                        f("ready")),
                        "ready" === u ? (Ln(),
                        c("waiting"),
                        Rn(t, r, {
                            onstart: function() {
                                c("playing")
                            },
                            onend: function() {
                                c("ready")
                            },
                            preferonline: o,
                            rate: Wn(t),
                            voice: Bn(t)
                        }) || (0,
                        Sn.showAlert)("No voice available for language: " + t, "Text to Speech error")) : "playing" === u ? (Nn(),
                        c("paused")) : "paused" === u && (Fn(),
                        c("playing"))
                    }
                }), "xxxx" !== n && a.createElement(er, {
                    lang: n,
                    showLang: !0,
                    state: d,
                    onPress: function() {
                        "ready" !== u && (Ln(),
                        c("ready")),
                        "ready" === d ? (Ln(),
                        f("waiting"),
                        Rn(n, r, {
                            onstart: function() {
                                f("playing")
                            },
                            onend: function() {
                                f("ready")
                            },
                            preferonline: o,
                            rate: Wn(n),
                            voice: Bn(n)
                        }) || (0,
                        Sn.showAlert)("No voice available for language: " + n)) : "playing" === d ? (Nn(),
                        f("paused")) : "paused" === d && (Fn(),
                        f("playing"))
                    }
                }), a.createElement(tr, {
                    onClick: function() {
                        i()
                    }
                }))
            }
            function ar(e) {
                return "xxxx" === e ? 40 : 110
            }
            var ir = function() {
                return e = function e(t, n, r) {
                    !function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, e),
                    this.lang1 = t,
                    this.lang2 = n,
                    this.preferonline = r,
                    this.shown = !1,
                    this.scheduled = !1,
                    this.text = "",
                    this.timeout = null,
                    this.settingsShown = !1,
                    this.schedule = this.schedule.bind(this),
                    this.showOnMouseUp = this.showOnMouseUp.bind(this),
                    this.showOnTimeout = this.showOnTimeout.bind(this),
                    this.hide = this.hide.bind(this),
                    this.hideSettings = this.hideSettings.bind(this),
                    this.showSettings = this.showSettings.bind(this)
                }
                ,
                (t = [{
                    key: "hide",
                    value: function() {
                        var e;
                        this.shown && (Ln(),
                        (e = document.getElementById("speech-popup")) && e.remove(),
                        this.shown = !1)
                    }
                }, {
                    key: "show",
                    value: function(e, t) {
                        e = Math.min(e, window.innerWidth - ar(this.lang2)),
                        function(e, t, n, r, o, i, s) {
                            var u = document.createElement("div");
                            u.id = "speech-popup",
                            u.style.left = r + "px",
                            u.style.top = o + "px",
                            u.className = kn.popup,
                            document.body.appendChild(u),
                            d().render(a.createElement(or, {
                                lang1: e,
                                lang2: t,
                                preferonline: n,
                                text: i,
                                onSettingOpen: s
                            }), u)
                        }(this.lang1, this.lang2, this.preferonline, e, t, this.text, this.showSettings)
                    }
                }, {
                    key: "showSettings",
                    value: function() {
                        var e, t, n, r, o;
                        this.settingsShown || (e = this.hideSettings,
                        t = this.lang1,
                        n = this.lang2,
                        r = this.preferonline,
                        (o = document.createElement("div")).id = "speech-settings-popup",
                        o.className = kn.setting_popup,
                        document.body.appendChild(o),
                        d().render(a.createElement(rr, {
                            onClose: e,
                            lang1: t,
                            lang2: n,
                            preferonline: r
                        }), o),
                        this.settingsShown = !0)
                    }
                }, {
                    key: "hideSettings",
                    value: function() {
                        var e;
                        this.settingsShown = !1,
                        (e = document.getElementById("speech-settings-popup")) && (d().render(a.createElement("div", null), e),
                        e.remove())
                    }
                }, {
                    key: "showOnMouseUp",
                    value: function(e) {
                        this.shown || (this.shown = !0,
                        this.show(e.clientX, e.clientY)),
                        this.unschedule()
                    }
                }, {
                    key: "showOnTimeout",
                    value: function(e) {
                        if (!this.shown) {
                            this.shown = !0;
                            var t = function(e) {
                                if (!window.getSelection)
                                    return {
                                        x: 0,
                                        y: 0
                                    };
                                var t = window.getSelection();
                                if (null == t)
                                    return {
                                        x: 0,
                                        y: 0
                                    };
                                if (!document.activeElement || "textarea" !== document.activeElement.tagName.toLowerCase() && "input" !== document.activeElement.tagName.toLowerCase()) {
                                    var n = t.getRangeAt(0).getClientRects();
                                    return n.length > 0 ? {
                                        x: n[n.length - 1].right,
                                        y: n[n.length - 1].bottom
                                    } : {
                                        x: 0,
                                        y: 0
                                    }
                                }
                                var r = he()(document.activeElement)
                                  , o = r.offset();
                                return {
                                    x: o.left + r.outerWidth() - e,
                                    y: o.top + r.outerHeight()
                                }
                            }(ar(this.lang2));
                            this.show(t.x, t.y)
                        }
                        this.unschedule()
                    }
                }, {
                    key: "unschedule",
                    value: function() {
                        this.scheduled && (window.removeEventListener("mouseup", this.showOnMouseUp),
                        this.scheduled = !1),
                        null != this.timeout && (clearTimeout(this.timeout),
                        this.timeout = null)
                    }
                }, {
                    key: "schedule",
                    value: function() {
                        this.scheduled ? clearTimeout(this.timeout) : (window.addEventListener("mouseup", this.showOnMouseUp),
                        this.scheduled = !0),
                        this.timeout = setTimeout(this.showOnTimeout, 800)
                    }
                }, {
                    key: "setText",
                    value: function(e) {
                        this.text = e.trim(),
                        this.hide(),
                        "" === this.text ? this.unschedule() : this.schedule()
                    }
                }]) && $n(e.prototype, t),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e;
                var e, t
            }();
            function sr(e, t, n) {
                if (window.speechSynthesis && !(0,
                wn.isIOS)()) {
                    window.speechSynthesis.getVoices();
                    var r = new ir(e,t,n);
                    document.addEventListener("selectionchange", (function() {
                        r.setText(function() {
                            if (!window.getSelection)
                                return "";
                            if (document.activeElement && ("textarea" === document.activeElement.tagName.toLowerCase() || "input" === document.activeElement.tagName.toLowerCase()))
                                return document.activeElement.value.substring(document.activeElement.selectionStart, document.activeElement.selectionEnd);
                            var e = window.getSelection();
                            return e ? e.toString() : ""
                        }())
                    }
                    ))
                }
            }
            var ur = n(19605);
            function cr(e) {
                return cr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                cr(e)
            }
            function lr(e, t) {
                var n = []
                  , r = this.options;
                return r.onProgress && e && r.onProgress.call(this, e, t, this.completed.length),
                this.completed.length + this.errors.length === this.queue.length && (n.push(this.completed),
                this.errors.length && n.push(this.errors),
                r.onComplete.apply(this, n)),
                this
            }
            function dr(e, t) {
                this.options = {
                    pipeline: !1,
                    auto: !0,
                    onComplete: function() {}
                },
                t && "object" === cr(t) && this.setOptions(t),
                this.addQueue(e),
                this.queue.length && this.options.auto && setTimeout(this.processQueue.bind(this))
            }
            dr.prototype.setOptions = function(e) {
                var t, n = this.options;
                for (t in e)
                    e.hasOwnProperty(t) && (n[t] = e[t]);
                return this
            }
            ,
            dr.prototype.addQueue = function(e) {
                return this.queue = e.slice(),
                this
            }
            ,
            dr.prototype.reset = function() {
                return this.completed = [],
                this.errors = [],
                this
            }
            ,
            dr.prototype.load = function(e, t) {
                var n = this
                  , r = this.options;
                function o() {
                    lr.call(n, e),
                    r.pipeline && n.loadNext(t)
                }
                function a() {
                    n.errors.push(e),
                    r.onError && r.onError.call(n, e),
                    o()
                }
                function i() {
                    n.completed.push(e),
                    o()
                }
                var s = e.toLowerCase();
                if (s.endsWith(".png") || s.endsWith(".jpg") || s.endsWith(".jpeg") || s.endsWith(".gif")) {
                    var u = new Image;
                    u.onerror = u.onabort = function() {
                        this.onerror = this.onabort = this.onload = null,
                        a()
                    }
                    ,
                    u.onload = function() {
                        this.onerror = this.onabort = this.onload = null,
                        i()
                    }
                    ,
                    "data:" !== e.substr(0, 5) && (u.crossOrigin = "Anonymous"),
                    u.src = e
                } else if (s.endsWith(".m4a") || s.endsWith(".mpg") || s.endsWith(".mp3")) {
                    var c = new Audio;
                    c.addEventListener("canplaythrough", i, !1),
                    c.addEventListener("error", a, !1),
                    c.src = e
                } else
                    console.log("Skipping preload for", e),
                    n.loadNext(t);
                return this
            }
            ,
            dr.prototype.loadNext = function(e) {
                return e++,
                this.queue[e] && this.load(this.queue[e], e),
                this
            }
            ,
            dr.prototype.processQueue = function() {
                var e = 0
                  , t = this.queue
                  , n = t.length;
                if (this.reset(),
                this.options.pipeline)
                    this.load(t[0], 0);
                else
                    for (; e < n; ++e)
                        this.load(t[e], e);
                return this
            }
            ;
            var fr, pr = n(39429), hr = n.n(pr), mr = n(4296), gr = function(e) {
                var t = e.bwConfig
                  , n = e.studentaccount
                  , r = e.bwdsstorage
                  , o = e.writecachingonlinestorage
                  , a = {}
                  , i = he().Deferred();
                a.initialized = function() {
                    return i
                }
                ;
                var s = (0,
                mr.getParameters)()
                  , u = s.hasOwnProperty("teacher_id") ? s.teacher_id : ""
                  , c = s.hasOwnProperty("school_id") ? s.school_id : "";
                return t.getConfig().then((function(e) {
                    var t = "no" !== e.save_answers;
                    function s(e) {
                        return "student_name" == e || "student_email" == e || "student_id" == e
                    }
                    var l = null
                      , d = -1;
                    function f(a) {
                        if (i.resolve(),
                        a == d)
                            return console.log("Warning: setting identical storage state, ignoring"),
                            he().when();
                        var s = e.book_title && "" !== e.book_title ? e.book_title : "_no_name_";
                        switch (a) {
                        case n.ANONYMOUS:
                            l = r.createInfoStorage(s, "", t);
                            break;
                        case n.OFFLINE:
                            l = r.createInfoStorage(s, n.getUserId(), t);
                            break;
                        case n.ONLINE:
                            l = o.createInfoStorage(s, u, c)
                        }
                        return d = a,
                        he().when()
                    }
                    a.get = function(e, r) {
                        if (d != n.ANONYMOUS && n.hasProperty(e))
                            r(n.getProperty(e));
                        else if (t) {
                            var o = function(t) {
                                r(t[e])
                            };
                            if (null == l)
                                return void r(null);
                            s(e) ? l.getCommonProperties(o) : l.getGroupProperties(o)
                        } else
                            r(null)
                    }
                    ,
                    a.set = function(e, r) {
                        if (d != n.ANONYMOUS && n.hasProperty(e))
                            console.log("Request setting read-only property... skipping");
                        else if (t) {
                            var o = {};
                            o[e] = r,
                            s(e) ? l.setCommonProperties(o) : l.setGroupProperties(o)
                        }
                    }
                    ,
                    a.hasStudentAccount = function() {
                        return d == n.OFFLINE || d == n.ONLINE
                    }
                    ,
                    a.getStudentAccountUserId = function() {
                        return n.getUserId()
                    }
                    ,
                    a.getStudentAccountUserName = function() {
                        return n.getUserName()
                    }
                    ,
                    a.getStudentAccountEmail = function() {
                        return n.getEmail()
                    }
                    ,
                    a.getStudentAccountProviderId = function() {
                        return n.getProviderId()
                    }
                    ,
                    a.getStudentAccountProviderHumanId = function() {
                        return n.getProviderHumanId()
                    }
                    ,
                    a.getStudentAccountToken = function() {
                        return n.getUserToken()
                    }
                    ,
                    a.getStudentAccountClassName = function() {
                        return n.getUserClassName()
                    }
                    ,
                    a.isCoAccount = function() {
                        return n.isCoAccount()
                    }
                    ,
                    n.initialized().then((function() {
                        f(n.getState()),
                        n.registerStateChangeCallback(f)
                    }
                    ), (function() {
                        f(n.ANONYMOUS)
                    }
                    ))
                }
                )),
                a
            }, vr = n(31004), wr = n(14337), br = [];
            function yr() {
                0 != br.length ? (fr = br.shift()).cb(fr.data).always((function() {
                    for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)
                        t[n] = arguments[n];
                    fr.deferred.resolve.apply(null, t),
                    yr()
                }
                )) : fr = void 0
            }
            function Cr(e, t, n, r) {
                if (n && br.length && br[br.length - 1].cb === e) {
                    var o = br[br.length - 1];
                    return o.data = n(o.data, t),
                    o.deferred
                }
                var a = he().Deferred()
                  , i = {
                    cb: e,
                    data: t,
                    deferred: a
                };
                return r ? br.unshift(i) : br.push(i),
                void 0 === fr && yr(),
                a
            }
            function xr(e) {
                Cr((function() {
                    return e(),
                    he().when()
                }
                ))
            }
            var Er = n(3138);
            function kr(e) {
                return kr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                kr(e)
            }
            function Sr() {
                Sr = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , o = "function" == typeof Symbol ? Symbol : {}
                  , a = o.iterator || "@@iterator"
                  , i = o.asyncIterator || "@@asyncIterator"
                  , s = o.toStringTag || "@@toStringTag";
                function u(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    u({}, "")
                } catch (e) {
                    u = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function c(e, t, n, o) {
                    var a = t && t.prototype instanceof f ? t : f
                      , i = Object.create(a.prototype)
                      , s = new S(o || []);
                    return r(i, "_invoke", {
                        value: C(e, n, s)
                    }),
                    i
                }
                function l(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = c;
                var d = {};
                function f() {}
                function p() {}
                function h() {}
                var m = {};
                u(m, a, (function() {
                    return this
                }
                ));
                var g = Object.getPrototypeOf
                  , v = g && g(g(T([])));
                v && v !== t && n.call(v, a) && (m = v);
                var w = h.prototype = f.prototype = Object.create(m);
                function b(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        u(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function y(e, t) {
                    function o(r, a, i, s) {
                        var u = l(e[r], e, a);
                        if ("throw" !== u.type) {
                            var c = u.arg
                              , d = c.value;
                            return d && "object" == kr(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                o("next", e, i, s)
                            }
                            ), (function(e) {
                                o("throw", e, i, s)
                            }
                            )) : t.resolve(d).then((function(e) {
                                c.value = e,
                                i(c)
                            }
                            ), (function(e) {
                                return o("throw", e, i, s)
                            }
                            ))
                        }
                        s(u.arg)
                    }
                    var a;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    o(e, n, t, r)
                                }
                                ))
                            }
                            return a = a ? a.then(r, r) : r()
                        }
                    })
                }
                function C(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = x(i, n);
                                if (s) {
                                    if (s === d)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = l(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === d)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function x(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        x(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        d;
                    var o = l(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        d;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    d) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    d)
                }
                function E(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function k(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function S(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(E, this),
                    this.reset(!0)
                }
                function T(e) {
                    if (e) {
                        var t = e[a];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: _
                    }
                }
                function _() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return p.prototype = h,
                r(w, "constructor", {
                    value: h,
                    configurable: !0
                }),
                r(h, "constructor", {
                    value: p,
                    configurable: !0
                }),
                p.displayName = u(h, s, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === p || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h,
                    u(e, s, "GeneratorFunction")),
                    e.prototype = Object.create(w),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                b(y.prototype),
                u(y.prototype, i, (function() {
                    return this
                }
                )),
                e.AsyncIterator = y,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new y(c(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                b(w),
                u(w, s, "Generator"),
                u(w, a, (function() {
                    return this
                }
                )),
                u(w, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = T,
                S.prototype = {
                    constructor: S,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(k),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        d) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        d
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                k(n),
                                d
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    k(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: T(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        d
                    }
                },
                e
            }
            function Tr(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function _r(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function i(e) {
                            Tr(a, r, o, i, s, "next", e)
                        }
                        function s(e) {
                            Tr(a, r, o, i, s, "throw", e)
                        }
                        i(void 0)
                    }
                    ))
                }
            }
            var Ar = function(e) {
                var t = e.bwConfig
                  , n = e.credentialstorage
                  , r = e.throbber
                  , o = {
                    INIT: -1,
                    ANONYMOUS: 0,
                    OFFLINE: 1,
                    ONLINE: 2
                }
                  , a = he().Deferred()
                  , i = he().Deferred();
                return o.initialized = function() {
                    return a.resolve(),
                    i
                }
                ,
                o.showAlert = Sn.showAlert,
                t.getConfig().then((function(e) {
                    var t, s = null !== (t = e.parameters) && void 0 !== t ? t : (0,
                    mr.getParameters)(), u = (0,
                    wr.isLTI)(), c = s.sso, l = s.login_hint, d = o.INIT, f = !1;
                    o.stateChangeCallbacks = [],
                    o.registerStateChangeCallback = function(e) {
                        this.stateChangeCallbacks.push(e)
                    }
                    ,
                    o.triggerStateChangeCallbacks = function() {
                        for (var e = [], t = 0; t < this.stateChangeCallbacks.length; ++t)
                            e.push(this.stateChangeCallbacks[t](d, f));
                        return he().when.apply(null, e)
                    }
                    ,
                    o.onlinecheck_enabled = !1,
                    o.onlinecheck_count = 0;
                    var p = null
                      , h = .5;
                    function m() {
                        return (0,
                        wr.isLTI)() || c
                    }
                    function g(e, t, n, a, s, u, d) {
                        return new Promise((function(f) {
                            var p = r("body");
                            e.getStudentInfo(t, n).then((function(t) {
                                p.close(),
                                !c || n || t.provider === c && l && 0 != l.length && (t.providerID === l || t.providerHumanID === l) ? e.setCredentials(t, a.school) ? (e.setState(o.ONLINE),
                                i.resolve(),
                                f(!0)) : (console.log("Invalid student credentials"),
                                e.showAlert("Invalid student credentials", _()("Sign in failed"))) : (console.log("Logged in with incompatible credentials. Re-login."),
                                e.showAlert(_()("Wrong widget link"), _()("Sign in failed")))
                            }
                            ), (function(t) {
                                if (p.close(),
                                console.log("Error getting student info -> either invalid token or wrong connection"),
                                s && 401 !== t.status)
                                    console.log("got token -> moving offline"),
                                    e.setState(o.OFFLINE),
                                    i.resolve(),
                                    f(!0);
                                else if (s || 401 !== t.status) {
                                    console.log("other login problem -> retry");
                                    var n = e.showAlert(_()("Retrying...") + " (".concat(u, ")"), _()("Sign in failed"));
                                    setTimeout((function() {
                                        n.dialog("close"),
                                        f(!1)
                                    }
                                    ), d)
                                } else
                                    console.log("sid invalid -> reloading"),
                                    window.location.reload()
                            }
                            ))
                        }
                        ))
                    }
                    o.isStudentAccountsSupported = m,
                    o.setCredentials = function(e, t) {
                        var r, o = {
                            username: (r = e,
                            r.firstName && "" !== r.firstName && r.lastName && "" !== r.lastName ? r.firstName + " " + r.lastName : r.firstName && "" !== r.firstName ? r.firstName : r.lastName && "" !== r.lastName ? r.lastName : r.providerHumanID && "" !== r.providerHumanID && r.providerHumanID !== r.providerID ? r.providerHumanID : r.email && "" !== r.email ? r.email.substring(0, r.email.indexOf("@")) : r.providerID),
                            userid: e.id,
                            email: e.email,
                            providerid: e.providerID,
                            providerhumanid: e.providerHumanID,
                            provider: e.provider,
                            school: t,
                            className: e.className,
                            token: e.token,
                            sid: null,
                            coaccount: e.isCoAccount
                        };
                        return !(!o.userid || !o.token || (Er.LA(o),
                        n.setCredentials(Er.z3()),
                        0))
                    }
                    ,
                    o.loadCredentials = _r(Sr().mark((function e() {
                        var t;
                        return Sr().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    return e.prev = 0,
                                    e.next = 3,
                                    n.getCredentials();
                                case 3:
                                    null !== (t = e.sent) ? Er.LA(t) : Er.IU(),
                                    e.next = 11;
                                    break;
                                case 7:
                                    e.prev = 7,
                                    e.t0 = e.catch(0),
                                    console.log("credentials load failure"),
                                    Er.IU();
                                case 11:
                                    return e.abrupt("return", Er.z3());
                                case 12:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e, null, [[0, 7]])
                    }
                    ))),
                    o.getStudentInfo = function(t, n, r) {
                        var o = null
                          , a = null;
                        return null != t && "" !== t ? a = {
                            Authorization: "BWWAAuthToken " + t
                        } : null != n && "" !== n && (o = {
                            sid: n
                        }),
                        r && ((o = null != o ? o : {}).pc = r),
                        he().ajax({
                            type: "GET",
                            dataType: "json",
                            data: o,
                            url: e.student_account_server + "/student/GetInfo",
                            headers: a,
                            timeout: 1e4
                        })
                    }
                    ,
                    o.checkIfOnline = function() {
                        if (!this.onlinecheck_enabled)
                            return he().when();
                        var e = he().Deferred()
                          , t = Er.dG();
                        return this.getStudentInfo(t, null, ++this.onlinecheck_count).done((function() {
                            console.log("Got back online !"),
                            o.goOnline(),
                            e.resolve()
                        }
                        )).fail((function() {
                            e.reject()
                        }
                        )),
                        e
                    }
                    ,
                    o.goOffline = function() {
                        var e = this;
                        console.log("goOffline"),
                        Cr((function() {
                            return console.log("Executing goOffline"),
                            e.setState(o.OFFLINE)
                        }
                        ), null, void 0, !0)
                    }
                    ,
                    o.goOnline = function() {
                        var e = this;
                        console.log("goOnline"),
                        Cr((function() {
                            return console.log("Executing goOnline"),
                            e.setState(o.ONLINE)
                        }
                        ), null, void 0, !0)
                    }
                    ,
                    o.scheduleOnlineCheck = function() {
                        var e = this;
                        h = Math.min(2 * h, 20),
                        this.onlinecheck_enabled && (p = setTimeout((function() {
                            e.checkIfOnline().always((function() {
                                e.scheduleOnlineCheck()
                            }
                            ))
                        }
                        ), 1e3 * h))
                    }
                    ,
                    o.startOnlineCheck = function() {
                        this.onlinecheck_enabled = !0,
                        this.onlinecheck_count = 0,
                        h = .5,
                        this.scheduleOnlineCheck()
                    }
                    ,
                    o.stopOnlineCheck = function() {
                        this.onlinecheck_enabled = !1,
                        null !== p && clearTimeout(p)
                    }
                    ,
                    o.setState = function(e) {
                        return e === d ? (console.log("Warning: setting identical storage state, ignoring", e),
                        he().when()) : (d === o.OFFLINE && this.stopOnlineCheck(),
                        e === o.OFFLINE && this.startOnlineCheck(),
                        d = e,
                        this.triggerStateChangeCallbacks())
                    }
                    ,
                    o.setForceOfflineStorage = function() {
                        return !1 === f && (f = !0),
                        this.triggerStateChangeCallbacks()
                    }
                    ,
                    o.setAnonymous = function() {
                        this.setState(this.ANONYMOUS),
                        i.resolve()
                    }
                    ,
                    o.initializeWithStoredCredentials = function() {
                        var e = _r(Sr().mark((function e(t) {
                            var n, r, o, a, i, s, u;
                            return Sr().wrap((function(e) {
                                for (; ; )
                                    switch (e.prev = e.next) {
                                    case 0:
                                        if (n = t.token,
                                        r = t.sid,
                                        a = null != r && "" !== r,
                                        !1 != (o = null != n && "" !== n) || !1 !== a) {
                                            e.next = 8;
                                            break
                                        }
                                        return console.log("Wrong widget link: no token and no sid..."),
                                        this.showAlert(_()("Wrong widget link"), _()("Sign in failed")),
                                        e.abrupt("return");
                                    case 8:
                                        i = 1,
                                        s = 5,
                                        u = 1e3;
                                    case 11:
                                        if (!(i <= s)) {
                                            e.next = 22;
                                            break
                                        }
                                        return e.next = 15,
                                        g(this, n, r, t, o, "".concat(i, "/").concat(s), u);
                                    case 15:
                                        if (!e.sent) {
                                            e.next = 18;
                                            break
                                        }
                                        return e.abrupt("return");
                                    case 18:
                                        ++i,
                                        u < 8e3 && (u *= 2),
                                        e.next = 11;
                                        break;
                                    case 22:
                                        this.showAlert(_()("Sign in failed"), _()("Sign in failed"), _()("Reload"), (function() {
                                            window.location.reload()
                                        }
                                        ));
                                    case 23:
                                    case "end":
                                        return e.stop()
                                    }
                            }
                            ), e, this)
                        }
                        )));
                        return function(t) {
                            return e.apply(this, arguments)
                        }
                    }(),
                    o.initialize = _r(Sr().mark((function e() {
                        var t, n;
                        return Sr().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    return e.next = 2,
                                    new Promise((function(e) {
                                        he()(e)
                                    }
                                    ));
                                case 2:
                                    if (m()) {
                                        e.next = 7;
                                        break
                                    }
                                    return console.log("no student accounts supported"),
                                    this.setState(this.ANONYMOUS),
                                    i.resolve(),
                                    e.abrupt("return");
                                case 7:
                                    if (!(t = s.sid)) {
                                        e.next = 13;
                                        break
                                    }
                                    return console.log("Got SID from params"),
                                    "blank" === window.location.pathname || window.WidgetParams || window.history.replaceState("", document.title, window.location.pathname + window.location.search + (0,
                                    mr.removeQueryStringParameter)((0,
                                    mr.getHash)(), "sid")),
                                    this.initializeWithStoredCredentials({
                                        sid: t
                                    }),
                                    e.abrupt("return");
                                case 13:
                                    if (u || !(0,
                                    wn.isPreview)()) {
                                        e.next = 17;
                                        break
                                    }
                                    return this.setState(this.ANONYMOUS),
                                    i.resolve(),
                                    e.abrupt("return");
                                case 17:
                                    return e.next = 19,
                                    this.loadCredentials();
                                case 19:
                                    n = e.sent,
                                    this.initializeWithStoredCredentials(n);
                                case 21:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e, this)
                    }
                    ))),
                    a.then((function() {
                        o.initialize()
                    }
                    )),
                    o.getUserToken = function() {
                        return Er.dG()
                    }
                    ,
                    o.getUserSid = function() {
                        return Er.kr()
                    }
                    ,
                    o.getUserName = function() {
                        return Er.J3()
                    }
                    ,
                    o.getUserClassName = function() {
                        return Er.xn()
                    }
                    ,
                    o.getUserId = function() {
                        return Er.F6()
                    }
                    ,
                    o.getEmail = function() {
                        return Er.hS()
                    }
                    ,
                    o.getProviderId = function() {
                        return Er.fs()
                    }
                    ,
                    o.getProviderHumanId = function() {
                        return Er.af()
                    }
                    ,
                    o.isCoAccount = function() {
                        return Er.yf()
                    }
                    ,
                    o.getState = function() {
                        return d
                    }
                    ,
                    o.getForceOfflineStorage = function() {
                        return f
                    }
                    ,
                    o.hasProperty = function(e) {
                        return "user_id" === e
                    }
                    ,
                    o.getProperty = function(e) {
                        if ("user_id" == e)
                            return this.getUserId()
                    }
                }
                )),
                o
            }
              , Or = n(4642)
              , Dr = n.n(Or)
              , Ir = function(e) {
                var t, n, r, o, a, i = e.bwConfig, s = e.studentaccount, u = e.studentaccountbutton, c = e.bwdsstorage, l = e.writecachingonlinestorage, d = e.throbber, f = {}, p = "", h = !1, m = (0,
                mr.getParameters)(), g = m.hasOwnProperty("teacher_id") ? m.teacher_id : "", v = m.hasOwnProperty("school_id") ? m.school_id : "", w = m.hasOwnProperty("course_id") ? m.course_id : "", b = m.storageKey, y = m.hasOwnProperty("student_class_id") && !m.hasOwnProperty("iscid") ? m.student_class_id : "", C = m.hasOwnProperty("context_id") ? m.context_id : "", x = null;
                f.WIDGET_ANONYMOUS = 0,
                f.WIDGET_OFFLINE = 1,
                f.WIDGET_ONLINE = 2;
                var S = -1
                  , T = !1;
                function _() {
                    return S !== f.WIDGET_ONLINE || T ? he().when(!1) : x.moveImageOnlineIfRequired()
                }
                function A() {
                    Cr(_).done((function(e) {
                        e && A()
                    }
                    ))
                }
                function O() {
                    var e = d("body")
                      , n = he().Deferred();
                    return E(),
                    x.loadAll((function(r) {
                        k(),
                        e.close(),
                        Promise.resolve(t(r)).then((function() {
                            A(),
                            n.resolve()
                        }
                        ))
                    }
                    )),
                    n
                }
                f.stateChanged = function(e, u) {
                    if (e === S && u === T)
                        return console.log("Warning: setting identical storage state, ignoring"),
                        he().when();
                    if (S === f.WIDGET_OFFLINE && e === f.WIDGET_ONLINE && !0 === u)
                        return S = e,
                        T = u,
                        he().when();
                    var d = "no" !== i.getConfigSync().save_answers;
                    switch (e) {
                    case f.WIDGET_ANONYMOUS:
                        console.log("Using anonymous storage"),
                        x = c.createWidgetStorage(r, n, a, h, "", b, p, d);
                        break;
                    case f.WIDGET_ONLINE:
                        if (!1 === u) {
                            console.log("Using online storage"),
                            x = l.createWidgetStorage(r, n, o, a, h, s.getUserId(), b, p, g, v, w, null == y || "" === y ? s.getUserClassName() ? s.getUserClassName() : "" : y, C);
                            break
                        }
                    case f.WIDGET_OFFLINE:
                        console.log("Using offline storage"),
                        x = c.createWidgetStorage(r, n, a, h, s.getUserId(), b, p, d)
                    }
                    var m, _ = S, D = T;
                    return S = e,
                    T = u,
                    function(e, t) {
                        return -1 != e && e + t < 3
                    }(_, e) ? O() : _ === f.WIDGET_OFFLINE && e === f.WIDGET_ONLINE ? (m = he().Deferred(),
                    E(),
                    x.goneOnlineSync((function(e) {
                        k(),
                        "CONFLICT" == e.status && t(e.data),
                        "OFFLINE" !== e.status && A(),
                        m.resolve()
                    }
                    )),
                    m) : _ === f.WIDGET_ONLINE && e === f.WIDGET_OFFLINE || D !== T ? function() {
                        var e = he().Deferred();
                        return x.loadAll((function(t) {
                            e.resolve()
                        }
                        )),
                        e
                    }() : he().when()
                }
                ,
                f.init = function(e) {
                    var i = this;
                    t = e.updateCallback,
                    n = e.type,
                    r = e.group,
                    o = e.name,
                    a = e.id,
                    h = e.singleKey,
                    p = e.extension,
                    s.initialized().then((function() {
                        i.stateChanged(s.getState(), s.getForceOfflineStorage()),
                        O(),
                        s.registerStateChangeCallback(i.stateChanged.bind(i))
                    }
                    ), (function() {
                        i.stateChanged(s.ANONYMOUS, !0),
                        O()
                    }
                    ));
                    var c = !!e.hide_account;
                    s.isStudentAccountsSupported() && !c && u.init()
                }
                ;
                var D = null;
                function I(e, t) {
                    var n = e || {};
                    for (var r in t)
                        n[r] = t[r];
                    return n
                }
                function P(e) {
                    var n = he().Deferred();
                    return E(),
                    x.write(e, (function(e) {
                        k(),
                        e && "CONFLICT" === e.status && (t(e.data),
                        function(e) {
                            br = fe()(br, (function(t) {
                                return t.cb !== e
                            }
                            ))
                        }(P)),
                        n.resolve()
                    }
                    )),
                    n
                }
                return f.prepareStorageUpgrade = function(e) {
                    D = e
                }
                ,
                f.write = function(e) {
                    null !== x && (null != D && (e = I(D, e),
                    D = null),
                    Cr(P, e, h ? function(e, t) {
                        return t
                    }
                    : I))
                }
                ,
                f.registerImage = function(e) {
                    var t = he().Deferred()
                      , n = (new Date).getTime() + function() {
                        for (var e = "", t = 0; t < 5; t++)
                            e += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62 * Math.random()));
                        return e
                    }();
                    return xr((function() {
                        x.writeImage(n, e).done((function() {
                            t.resolve("bwimg:" + n)
                        }
                        )).fail((function() {
                            t.reject()
                        }
                        ))
                    }
                    )),
                    t
                }
                ,
                f.clearImage = function(e) {
                    var t = he().Deferred();
                    return 0 !== e.indexOf("bwimg:") ? (t.reject(),
                    t) : (xr((function() {
                        var n = e.substring(6);
                        x.clearImage(n).done((function() {
                            t.resolve()
                        }
                        )).fail((function() {
                            console.log("Could not clear image"),
                            t.reject()
                        }
                        ))
                    }
                    )),
                    t)
                }
                ,
                f.getImageUrl = function(e) {
                    var t = he().Deferred();
                    return 0 !== e.indexOf("bwimg:") ? (t.resolve(e),
                    t) : (xr((function() {
                        var n = e.substring(6);
                        x.readImage(n).done((function(e) {
                            t.resolve(e)
                        }
                        )).fail((function() {
                            t.reject("")
                        }
                        ))
                    }
                    )),
                    t)
                }
                ,
                f.sync = function(e) {
                    xr(e)
                }
                ,
                f.clear = function() {}
                ,
                f.throttlers = [],
                f.createThrottler = function(e) {
                    var t = {
                        cb: e,
                        maxdelay: arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 2e3,
                        timeout: null,
                        flush: function() {
                            null != this.timeout && (this.clear(),
                            this.cb())
                        },
                        cancel: function() {
                            null != this.timeout && (clearTimeout(this.timeout),
                            this.clear())
                        },
                        clear: function() {
                            this.timeout = null,
                            k()
                        },
                        trigger: function() {
                            var e = this;
                            null != this.cb && null == this.timeout && (E(),
                            this.timeout = setTimeout((function() {
                                e.flush()
                            }
                            ), this.maxdelay))
                        }
                    };
                    return this.throttlers.push(t),
                    t
                }
                ,
                f.cancelThrottlers = function() {
                    Dr()(this.throttlers, (function(e) {
                        e.cancel()
                    }
                    ))
                }
                ,
                f.flushThrottlers = function() {
                    Dr()(this.throttlers, (function(e) {
                        e.flush()
                    }
                    ))
                }
                ,
                f
            }
              , Pr = n(87526)
              , Rr = n.n(Pr);
            function Lr(e, t) {
                var n = e || {};
                for (var r in t) {
                    var o = t[r];
                    null === o ? delete n[r] : n[r] = o
                }
                return n
            }
            var Nr = function() {
                return (new Date).getTime()
            }
              , Fr = function() {
                var e = null;
                try {
                    (e = parseInt(sessionStorage.getItem("widget-storage-session"))) && "true" === sessionStorage.getItem("widget-session-running-" + e) && (e = null)
                } catch (t) {
                    e = null
                }
                if (null == e || isNaN(e)) {
                    e = Nr();
                    try {
                        sessionStorage.setItem("widget-storage-session", e + "")
                    } catch (e) {}
                }
                try {
                    sessionStorage.setItem("widget-session-running-" + e, "true")
                } catch (e) {}
                return window.addEventListener("beforeunload", (function() {
                    try {
                        sessionStorage.removeItem("widget-session-running-" + e)
                    } catch (e) {}
                }
                )),
                e
            }()
              , Mr = function() {
                var e = null;
                try {
                    e = localStorage.getItem("ws-bid")
                } catch (e) {
                    console.error("Could not load browser ID from localStorage", e)
                }
                if (null == e) {
                    e = Nr() + "";
                    try {
                        localStorage.setItem("ws-bid", e + "")
                    } catch (t) {
                        console.log("Could not save browser ID to localStorage", t),
                        e += "_"
                    }
                }
                return e
            }()
              , jr = function(e) {
                var t = e.bwConfig
                  , n = e.studentaccount
                  , r = e.blob
                  , o = e.dialog
                  , a = e.tr
                  , i = t.getConfigSync();
                return {
                    createWidgetStorage: function(e, t, s, u, c, l, d, f, p) {
                        var h = {}
                          , m = null
                          , g = null
                          , v = -1
                          , w = null;
                        function b(e, t) {
                            var r = n.getUserToken();
                            return he().ajax({
                                type: "POST",
                                data: e,
                                url: t,
                                headers: {
                                    Authorization: "BWWAAuthToken " + r
                                },
                                timeout: 3e4,
                                connectTimeout: 2e3,
                                beforeSend: function(e, t) {
                                    var n = this
                                      , r = t.xhr;
                                    t.xhr = function() {
                                        var e = r();
                                        return n.connectTimeoutCB = setTimeout((function() {
                                            console.log("Connection timeout occurred !"),
                                            e.abort()
                                        }
                                        ), n.connectTimeout),
                                        e.onreadystatechange = function() {
                                            1 == this.readyState && clearTimeout(n.connectTimeoutCB)
                                        }
                                        ,
                                        e
                                    }
                                }
                            })
                        }
                        return h.loadAll = function(r) {
                            var h, b, y, C = {
                                "widget-id": s,
                                "widget-type": e,
                                "widget-name": t,
                                "teacher-id": c,
                                "school-id": l,
                                "course-id": d,
                                "class-id": f,
                                "context-id": p,
                                "session-id": Fr,
                                "browser-id": Mr
                            };
                            void 0 !== window.bwshortcode && (C["widget-shortcode"] = window.bwshortcode),
                            h = C,
                            b = function(e) {
                                if (m = e.id,
                                g = e.url,
                                v = e.version,
                                w = JSON.parse(e.data),
                                e.isObserved) {
                                    var t = JSON.parse(sessionStorage.getItem("observerMessage")) || [];
                                    Rr()(t, s) || (o.showInfoMessage(a("Your progress on this activity will be shared with your teacher.")),
                                    t.push(s),
                                    sessionStorage.setItem("observerMessage", JSON.stringify(t)))
                                }
                                var n, i, c;
                                e.submissionInfo && e.submissionInfo.storage_timestamp && (n = e.submissionInfo,
                                o.showInfoMessage(a("Your working copy of %s was submitted by your teacher.").replace("%s", (i = new Date(n.storage_timestamp),
                                c = window.navigator.userLanguage || window.navigator.language,
                                new Intl.DateTimeFormat(c,{
                                    dateStyle: "full",
                                    timeStyle: "long"
                                }).format(i)))));
                                try {
                                    r(u ? w.hasOwnProperty("DATA") ? w.DATA : "" : w, v)
                                } catch (e) {
                                    console.error("Error in widget load callback"),
                                    console.error(e)
                                }
                            }
                            ,
                            y = function(e) {
                                403 === e.status ? (console.log("Online  storage nog allowed in this case, use offline storage: ", e.responseText),
                                n.setForceOfflineStorage()) : (console.error("Got error reading widget data"),
                                n.goOffline()),
                                r(u ? null : {}, -1)
                            }
                            ,
                            he().ajax({
                                type: "GET",
                                dataType: "json",
                                data: h,
                                timeout: 3e4,
                                headers: {
                                    Authorization: "BWWAAuthToken " + n.getUserToken()
                                },
                                url: i.student_account_server + "/widget-storage/",
                                connectTimeout: 2e3,
                                beforeSend: function(e, t) {
                                    var n = this
                                      , r = t.xhr;
                                    t.xhr = function() {
                                        var e = r();
                                        return n.connectTimeoutCB = setTimeout((function() {
                                            console.log("Connection timeout occurred !"),
                                            e.abort()
                                        }
                                        ), n.connectTimeout),
                                        e.onreadystatechange = function() {
                                            1 == this.readyState && clearTimeout(n.connectTimeoutCB)
                                        }
                                        ,
                                        e
                                    }
                                },
                                success: b,
                                error: y
                            })
                        }
                        ,
                        h.overwrite = function(e, t, r) {
                            var o = u ? {
                                DATA: e
                            } : e;
                            !function(e, t, r, o, a, i, s) {
                                var u = {
                                    version: r,
                                    data: JSON.stringify(o),
                                    i: 1,
                                    "session-id": Fr,
                                    "browser-id": Mr,
                                    timestamp: Nr()
                                };
                                s && (u.sync = 1);
                                var c = n.getUserToken();
                                he().ajax({
                                    type: "PUT",
                                    contentType: "text/plain",
                                    data: JSON.stringify(u),
                                    url: t,
                                    headers: {
                                        Authorization: "BWWAAuthToken " + c
                                    },
                                    timeout: 3e4,
                                    success: a,
                                    error: i
                                })
                            }(0, g, v, o, (function(e) {
                                v = e.version,
                                e.hasOwnProperty("url") && (g = e.url),
                                w = e.hasOwnProperty("data") ? JSON.parse(e.data) : o,
                                t({
                                    status: "OK",
                                    data: u ? w.hasOwnProperty("DATA") ? w.DATA : null : w,
                                    version: v
                                })
                            }
                            ), (function(e) {
                                if (console.log("Got error putting widget data"),
                                409 == e.status) {
                                    console.log("Conflict, someone wrote newer data");
                                    var r = JSON.parse(e.responseText);
                                    v = r.version,
                                    w = JSON.parse(r.data),
                                    t({
                                        status: "CONFLICT",
                                        data: u ? w.hasOwnProperty("DATA") ? w.DATA : null : w,
                                        version: v
                                    })
                                } else
                                    n.goOffline(),
                                    t({
                                        status: "OFFLINE"
                                    })
                            }
                            ), r)
                        }
                        ,
                        h.write = function(e, t) {
                            this.overwrite(u ? e : Lr(w, e), t)
                        }
                        ,
                        h.setNextUploadVersion = function(e) {
                            v = e
                        }
                        ,
                        h.writeImage = function(e, t) {
                            var o = he().Deferred();
                            return function(e, t) {
                                return b({
                                    name: t,
                                    confirm: "1",
                                    contentType: "image/jpeg"
                                }, i.student_account_server + "/widget-storage/" + e + "/resources")
                            }(m, e).done((function(e) {
                                (function(e, t, n) {
                                    var o = new r([n],{
                                        type: "image/jpeg"
                                    });
                                    return he().ajax({
                                        url: e,
                                        data: o,
                                        processData: !1,
                                        contentType: o.type,
                                        type: "PUT"
                                    })
                                }
                                )(e.upload_url, 0, t).done((function() {
                                    var t;
                                    (t = e.confirm_url,
                                    b({}, t)).done((function() {
                                        o.resolve()
                                    }
                                    )).fail((function() {
                                        console.log("confirming upload failed"),
                                        n.goOffline(),
                                        o.reject()
                                    }
                                    ))
                                }
                                )).fail((function() {
                                    console.log("upload resource failed"),
                                    n.goOffline(),
                                    o.reject()
                                }
                                ))
                            }
                            )).fail((function() {
                                console.log("getting image url failed"),
                                n.goOffline(),
                                o.reject()
                            }
                            )),
                            o
                        }
                        ,
                        h.clearImage = function() {
                            return he().Deferred().resolve()
                        }
                        ,
                        h.readImage = function(e) {
                            var t = i.student_account_server + "/widget-storage/" + m + "/resources/" + e
                              , r = n.getUserToken()
                              , o = he().Deferred();
                            return he().ajax({
                                url: t,
                                headers: {
                                    Authorization: "BWWAAuthToken " + r
                                },
                                type: "GET"
                            }).done((function(e) {
                                he().ajax({
                                    url: e.url,
                                    type: "GET"
                                }).done((function(e) {
                                    o.resolve(e)
                                }
                                )).fail((function() {
                                    o.reject()
                                }
                                ))
                            }
                            )).fail((function() {
                                o.reject()
                            }
                            )),
                            o
                        }
                        ,
                        h.sync = function(e) {
                            e()
                        }
                        ,
                        h.setSessionID = function(e) {
                            Fr = e
                        }
                        ,
                        h.setBrowserID = function(e) {
                            Mr = e
                        }
                        ,
                        h
                    }
                }
            }
              , qr = n(49632);
            function Br(e) {
                return Br = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                Br(e)
            }
            function Wr() {
                Wr = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , o = "function" == typeof Symbol ? Symbol : {}
                  , a = o.iterator || "@@iterator"
                  , i = o.asyncIterator || "@@asyncIterator"
                  , s = o.toStringTag || "@@toStringTag";
                function u(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    u({}, "")
                } catch (e) {
                    u = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function c(e, t, n, o) {
                    var a = t && t.prototype instanceof f ? t : f
                      , i = Object.create(a.prototype)
                      , s = new S(o || []);
                    return r(i, "_invoke", {
                        value: C(e, n, s)
                    }),
                    i
                }
                function l(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = c;
                var d = {};
                function f() {}
                function p() {}
                function h() {}
                var m = {};
                u(m, a, (function() {
                    return this
                }
                ));
                var g = Object.getPrototypeOf
                  , v = g && g(g(T([])));
                v && v !== t && n.call(v, a) && (m = v);
                var w = h.prototype = f.prototype = Object.create(m);
                function b(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        u(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function y(e, t) {
                    function o(r, a, i, s) {
                        var u = l(e[r], e, a);
                        if ("throw" !== u.type) {
                            var c = u.arg
                              , d = c.value;
                            return d && "object" == Br(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                o("next", e, i, s)
                            }
                            ), (function(e) {
                                o("throw", e, i, s)
                            }
                            )) : t.resolve(d).then((function(e) {
                                c.value = e,
                                i(c)
                            }
                            ), (function(e) {
                                return o("throw", e, i, s)
                            }
                            ))
                        }
                        s(u.arg)
                    }
                    var a;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    o(e, n, t, r)
                                }
                                ))
                            }
                            return a = a ? a.then(r, r) : r()
                        }
                    })
                }
                function C(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = x(i, n);
                                if (s) {
                                    if (s === d)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = l(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === d)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function x(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        x(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        d;
                    var o = l(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        d;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    d) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    d)
                }
                function E(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function k(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function S(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(E, this),
                    this.reset(!0)
                }
                function T(e) {
                    if (e) {
                        var t = e[a];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: _
                    }
                }
                function _() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return p.prototype = h,
                r(w, "constructor", {
                    value: h,
                    configurable: !0
                }),
                r(h, "constructor", {
                    value: p,
                    configurable: !0
                }),
                p.displayName = u(h, s, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === p || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h,
                    u(e, s, "GeneratorFunction")),
                    e.prototype = Object.create(w),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                b(y.prototype),
                u(y.prototype, i, (function() {
                    return this
                }
                )),
                e.AsyncIterator = y,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new y(c(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                b(w),
                u(w, s, "Generator"),
                u(w, a, (function() {
                    return this
                }
                )),
                u(w, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = T,
                S.prototype = {
                    constructor: S,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(k),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        d) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        d
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                k(n),
                                d
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    k(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: T(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        d
                    }
                },
                e
            }
            function Ur(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function zr(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function i(e) {
                            Ur(a, r, o, i, s, "next", e)
                        }
                        function s(e) {
                            Ur(a, r, o, i, s, "throw", e)
                        }
                        i(void 0)
                    }
                    ))
                }
            }
            var Hr = function(e) {
                var t = e.bwds
                  , n = !1;
                function r(e) {
                    var n = he().Deferred();
                    return t.remove(e, (function(e) {
                        return null === e || e.code == qr.b.BWDS_ERROR_UNKNOWN ? n.resolve() : (console.log("Remove failed: " + JSON.stringify(e)),
                        n.reject()),
                        n
                    }
                    )),
                    n
                }
                function o(e, r, o) {
                    var a = he().Deferred();
                    return t.write(e, r, (function(e) {
                        if (null === e)
                            a.resolve();
                        else {
                            if (o && !1 === n) {
                                if (e.code == qr.b.BWDS_ERROR_SECURITY) {
                                    var t = wn.getPlatform();
                                    "ibw-platform-ipad-ibooks-epub" === t ? window.criticalAlert("Unable to save your answer, please restart iBooks to solve this issue.<br>" + t.getIOSIBooksRestartInfo(), "Storage error") : window.criticalAlert("Storing answers not supported on this platform.", "Storage error")
                                } else
                                    window.criticalAlert("Could not save your answer.", "Storage problem");
                                n = !0
                            }
                            console.log("Save failed"),
                            a.reject()
                        }
                    }
                    )),
                    a
                }
                function a(e, r) {
                    var o = he().Deferred();
                    return t.read(e, (function(e, t) {
                        if (null === e)
                            t ? o.resolve(t) : (console.log("How did this happen?  No saved data on read!"),
                            o.reject({}));
                        else {
                            if (r && !1 === n)
                                if (e.code == qr.b.BWDS_ERROR_SECURITY) {
                                    var a = wn.getPlatform();
                                    "ibw-platform-ipad-ibooks-epub" === a ? window.criticalAlert("Unable to save your answer, please restart iBooks to solve this issue.<br>" + a.getIOSIBooksRestartInfo(), "Storage error") : window.criticalAlert("Storing answers not supported on this platform.", "Storage error"),
                                    n = !0
                                } else
                                    e.code != qr.b.BWDS_ERROR_UNKNOWN && (console.log("Error " + e.code + " occurred while loading data: " + e.message),
                                    window.criticalAlert("Storing answers not supported on this platform.", "Storage error"),
                                    n = !0);
                            o.reject({})
                        }
                    }
                    )),
                    o
                }
                function i(e) {
                    var n = he().Deferred();
                    return t.stat(e, (function(e) {
                        null == e ? n.resolve(!0) : n.resolve(!1)
                    }
                    )),
                    n
                }
                return {
                    createWidgetStorage: function(e, n, s, u, c, l, d, f) {
                        var p = {};
                        function h() {
                            return ("" == c ? "" : c + "/") + "books/" + e + "/" + n + "/" + s
                        }
                        var m = {}
                          , g = null;
                        function v() {
                            return w.apply(this, arguments)
                        }
                        function w() {
                            return (w = zr(Wr().mark((function e() {
                                var t;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            if (null == g) {
                                                e.next = 2;
                                                break
                                            }
                                            return e.abrupt("return", g);
                                        case 2:
                                            if (null != l) {
                                                e.next = 5;
                                                break
                                            }
                                            return g = h(),
                                            e.abrupt("return", g);
                                        case 5:
                                            return e.next = 7,
                                            i(h());
                                        case 7:
                                            return t = e.sent,
                                            g = t ? h() : ("" == c ? "" : c + "/") + l,
                                            e.abrupt("return", g);
                                        case 10:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e)
                            }
                            )))).apply(this, arguments)
                        }
                        function b(e, t) {
                            return e + "/img/" + t
                        }
                        return p.getWidgetTag = v,
                        p.loadAll = function() {
                            var e = zr(Wr().mark((function e(t) {
                                var n;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            n = e.sent,
                                            this.loadAllForWidgetTag(n, t);
                                        case 4:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.loadAllForWidgetTag = function(e, n) {
                            var r, o;
                            u ? a(e + d, f).done(n).fail((function() {
                                n(null)
                            }
                            )) : "" !== c ? a(e, f).always((function(e) {
                                try {
                                    var t = JSON.parse(e);
                                    m = t,
                                    n(t)
                                } catch (e) {
                                    console.log("Can't parse bwds user data"),
                                    console.log(e),
                                    n(m)
                                }
                            }
                            )) : (r = e,
                            o = he().Deferred(),
                            t.dir(r, (function(e, t) {
                                null === e ? o.resolve(t) : o.reject(e)
                            }
                            )),
                            o).done((function(r) {
                                var o = {}
                                  , a = [];
                                function i(e, n, r) {
                                    t.read(e + "/" + n, (function(e, t) {
                                        null === e ? o[n] = t : console.log("Received error reading: " + n),
                                        r.resolve()
                                    }
                                    ))
                                }
                                for (var s = 0; s < r.length; ++s) {
                                    var u = he().Deferred();
                                    a.push(u),
                                    i(e, r[s], u)
                                }
                                he().when.apply(null, a).done((function() {
                                    n(o)
                                }
                                ))
                            }
                            )).fail((function(e) {
                                n({})
                            }
                            ))
                        }
                        ,
                        p.writeForWidgetTag = function(e, t, n) {
                            if (u)
                                null === t ? r(e + d).always(n) : o(e + d, t, f).always(n);
                            else if ("" !== c)
                                m = Lr(m, t),
                                o(e, JSON.stringify(m), f).always(n);
                            else {
                                var a = [];
                                for (var i in t) {
                                    var s = t[i];
                                    null === s ? a.push(r(e + "/" + i)) : a.push(o(e + "/" + i, s, f))
                                }
                                he().when.apply(null, a).always(n)
                            }
                        }
                        ,
                        p.write = function() {
                            var e = zr(Wr().mark((function e(t, n) {
                                var r;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            r = e.sent,
                                            this.writeForWidgetTag(r, t, n);
                                        case 4:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t, n) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.overwriteAndSetVersion = function() {
                            var e = zr(Wr().mark((function e(t, n) {
                                var r;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            return r = e.sent,
                                            e.next = 5,
                                            this.overwriteAndSetVersionForWidgetTag(r, t, n);
                                        case 5:
                                            return e.abrupt("return", e.sent);
                                        case 6:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t, n) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.overwriteAndSetVersionForWidgetTag = function(e, t, n) {
                            var a = he().Deferred();
                            if (u)
                                null === t ? r(e + d).always((function() {
                                    a.resolve()
                                }
                                )) : o(e + d, t, f).always((function() {
                                    p.setVersion(n).finally((function() {
                                        a.resolve()
                                    }
                                    ))
                                }
                                ));
                            else if ("" !== c) {
                                var i = JSON.stringify(t);
                                m = JSON.parse(i),
                                o(e, i, f).always((function() {
                                    p.setVersion(n).finally((function() {
                                        a.resolve()
                                    }
                                    ))
                                }
                                ))
                            } else
                                console.error("bwds_storage_if.overwriteAndSetVersion not implemented for this storage mode... only intended for local caching"),
                                a.reject();
                            return a
                        }
                        ,
                        p.setVersionForWidgetTag = function(e, n) {
                            var r = he().Deferred()
                              , o = e;
                            return u && (o += d),
                            t.stat(o, (function(e, a, i) {
                                null === e ? t.setStat(o, {
                                    backup_date: a.modified,
                                    backup_version: n
                                }, (function(e) {
                                    null === e ? r.resolve() : (console.log("Problem writing stat: " + JSON.stringify(e)),
                                    r.reject())
                                }
                                )) : (console.log("Got error reading stat for " + o + ": means offline mode won't work"),
                                r.reject())
                            }
                            )),
                            r
                        }
                        ,
                        p.setVersion = function() {
                            var e = zr(Wr().mark((function e(t) {
                                var n;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            return n = e.sent,
                                            e.next = 5,
                                            this.setVersionForWidgetTag(n, t);
                                        case 5:
                                            return e.abrupt("return", e.sent);
                                        case 6:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.getVersionForWidgetTag = function(e, n) {
                            var r = e;
                            u && (r += d),
                            t.stat(r, (function(e, t, r) {
                                null === e ? n({
                                    version: t.backup_version,
                                    offlinedata: t.backup_date != t.modified,
                                    hasdata: !0
                                }) : (console.log("Error reading stat... assume there is no data"),
                                n({
                                    version: 0,
                                    offlinedata: !1,
                                    hasdata: !1
                                }))
                            }
                            ))
                        }
                        ,
                        p.getVersion = function() {
                            var e = zr(Wr().mark((function e(t) {
                                var n;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            return n = e.sent,
                                            e.next = 5,
                                            this.getVersionForWidgetTag(n, t);
                                        case 5:
                                            return e.abrupt("return", e.sent);
                                        case 6:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.writeImage = function(e, t) {
                            var n = he().Deferred();
                            return v().then((function(r) {
                                o(b(r, e), t, f).then(n.resolve.bind(n), n.reject.bind(n))
                            }
                            )),
                            n
                        }
                        ,
                        p.clearImage = function(e) {
                            var t = he().Deferred();
                            return v().then((function(n) {
                                r(b(n, e)).then(t.resolve.bind(t), t.reject.bind(t))
                            }
                            )),
                            t
                        }
                        ,
                        p.isImageBackedUpForWidgetTag = function() {
                            var e = zr(Wr().mark((function e(n, r) {
                                var o;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return o = he().Deferred(),
                                            t.stat(b(n, r), (function(e, t) {
                                                null === e ? o.resolve(t.backup_date == t.modified) : o.reject()
                                            }
                                            )),
                                            e.abrupt("return", o);
                                        case 3:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e)
                            }
                            )));
                            return function(t, n) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.isImageBackedUp = function() {
                            var e = zr(Wr().mark((function e(t) {
                                var n;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            return n = e.sent,
                                            e.next = 5,
                                            this.isImageBackedUpForWidgetTag(n, t);
                                        case 5:
                                            return e.abrupt("return", e.sent);
                                        case 6:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.listImagesAndBackupStatusForWidgetTag = function(e) {
                            var n = he().Deferred();
                            return t.stat(e + "/img", (function(e, t, r) {
                                if (null === e) {
                                    for (var o = [], a = 0; a < r.length; ++a) {
                                        var i = r[a].name;
                                        !0 !== r[a].removed && o.push({
                                            id: i.substring(i.lastIndexOf("/") + 1),
                                            backed_up: r[a].backup_date === r[a].modified
                                        })
                                    }
                                    n.resolve(o)
                                } else
                                    n.resolve([])
                            }
                            )),
                            n
                        }
                        ,
                        p.listImagesAndBackupStatus = zr(Wr().mark((function e() {
                            var t;
                            return Wr().wrap((function(e) {
                                for (; ; )
                                    switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2,
                                        v();
                                    case 2:
                                        return t = e.sent,
                                        e.next = 5,
                                        this.listImagesAndBackupStatusForWidgetTag(t);
                                    case 5:
                                        return e.abrupt("return", e.sent);
                                    case 6:
                                    case "end":
                                        return e.stop()
                                    }
                            }
                            ), e, this)
                        }
                        ))),
                        p.setImageBackedUpForWidgetTag = function(e, n) {
                            var r = he().Deferred();
                            return t.stat(b(e, n), (function(o, a, i) {
                                null === o ? t.setStat(b(e, n), {
                                    backup_date: a.modified
                                }, (function(e) {
                                    null === e ? r.resolve() : r.reject()
                                }
                                )) : r.reject()
                            }
                            )),
                            r
                        }
                        ,
                        p.setImageBackedUp = function() {
                            var e = zr(Wr().mark((function e(t) {
                                var n;
                                return Wr().wrap((function(e) {
                                    for (; ; )
                                        switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2,
                                            v();
                                        case 2:
                                            return n = e.sent,
                                            e.abrupt("return", this.setImageBackedUpForWidgetTag(n, t));
                                        case 4:
                                        case "end":
                                            return e.stop()
                                        }
                                }
                                ), e, this)
                            }
                            )));
                            return function(t) {
                                return e.apply(this, arguments)
                            }
                        }(),
                        p.readImage = function(e) {
                            var t = he().Deferred();
                            return v().then((function(n) {
                                a(b(n, e), f).then(t.resolve.bind(t), t.reject.bind(t))
                            }
                            )),
                            t
                        }
                        ,
                        p.sync = function(e) {
                            t.executeSync(e)
                        }
                        ,
                        p
                    },
                    createInfoStorage: function(e, t, n) {
                        var r = {}
                          , i = {}
                          , s = {};
                        function u(e) {
                            return ("" == t ? "" : t + "/") + "info/" + e
                        }
                        return a(u("BWCommon"), n).always((function(e) {
                            try {
                                i = JSON.parse(e)
                            } catch (e) {
                                i = {}
                            }
                        }
                        )),
                        a(u(e), n).always((function(e) {
                            try {
                                s = JSON.parse(e)
                            } catch (e) {
                                s = {}
                            }
                        }
                        )),
                        r.getCommonProperties = function(e) {
                            e(i)
                        }
                        ,
                        r.getGroupProperties = function(e) {
                            e(s)
                        }
                        ,
                        r.setCommonProperties = function(e) {
                            i = Lr(i, e),
                            o(u("BWCommon"), JSON.stringify(i), n)
                        }
                        ,
                        r.setGroupProperties = function(t) {
                            s = Lr(s, t),
                            o(u(e), JSON.stringify(s), n)
                        }
                        ,
                        r
                    }
                }
            }
              , Qr = (0,
            Kt.createLogger)("WriteCachingOnlineStorage")
              , Vr = function(e) {
                var t = e.studentaccount
                  , n = e.onlinestorage
                  , r = e.bwdsstorage;
                return {
                    createWidgetStorage: function(e, o, a, i, s, u, c, l, d, f, p, h, m) {
                        var g = {};
                        return g.os = n.createWidgetStorage(o, a, i, s, d, f, p, h, m),
                        g.bs = r.createWidgetStorage(e, o, i, s, t.getUserId(), c, l, !1),
                        g.loadAll = function(e) {
                            var t = this;
                            Qr.debug("loadAll");
                            var n = he().Deferred()
                              , r = he().Deferred();
                            this.os.loadAll((function(e, t) {
                                Qr.debug("loadAll OS", t, e),
                                n.resolve(e, t)
                            }
                            )),
                            this.bs.getVersion((function(e) {
                                Qr.debug("loadAll BS", e),
                                r.resolve(e)
                            }
                            )),
                            he().when(n, r).done((function(n, r) {
                                var o = n[0]
                                  , a = n[1];
                                -1 == a ? (console.log("error accessing online data, return local data or null"),
                                r.hasdata ? (Qr.debug("load BS data"),
                                t.bs.loadAll(e)) : (Qr.debug("empty data"),
                                e(s ? null : {}))) : r.version <= a && !1 === r.offlinedata ? (Qr.debug("loadall no offline BS data, use OS data"),
                                t.bs.overwriteAndSetVersion(o, a).finally((function() {
                                    Qr.debug("overwriteAndSetVersion done", o, a),
                                    e(o)
                                }
                                ))) : (Qr.debug("have BS offline data"),
                                t.os.setNextUploadVersion(r.version),
                                t.bs.loadAll((function(n) {
                                    Qr.debug("BS data loaded", n),
                                    t.os.overwrite(n, (function(r) {
                                        "OFFLINE" === r.status ? (console.log("error when flushing local data"),
                                        e(n)) : "CONFLICT" === r.status ? (Qr.debug("goneOnlineSync online data conflict", r.version),
                                        t.bs.overwriteAndSetVersion(r.data, r.version).finally((function() {
                                            e(r.data)
                                        }
                                        ))) : (Qr.debug("loadAll online data written to version", r.version),
                                        t.bs.setVersion(r.version).finally((function() {
                                            Qr.debug("loadAll bs version set"),
                                            e(n)
                                        }
                                        )))
                                    }
                                    ), !0)
                                }
                                )))
                            }
                            ))
                        }
                        ,
                        g.goneOnlineSync = function(e) {
                            var t = this;
                            Qr.debug("goneOnlineSync");
                            var n = he().Deferred()
                              , r = he().Deferred();
                            this.os.loadAll((function(e, t) {
                                Qr.debug("goneOnlineSync OS", t, e),
                                n.resolve(e, t)
                            }
                            )),
                            this.bs.getVersion((function(e) {
                                Qr.debug("goneOnlineSync BS", e),
                                r.resolve(e)
                            }
                            )),
                            he().when(n, r).done((function(n, r) {
                                var o = n[0]
                                  , a = n[1];
                                -1 == a ? (console.log("goneOnlineSync: Can't find online version"),
                                e({
                                    status: "OFFLINE"
                                })) : r.version < a && !1 === r.offlinedata ? (console.log("goneOnlineSync: local version out of date, need to use online version"),
                                t.bs.overwriteAndSetVersion(o, a).finally((function() {
                                    Qr.debug("goneOnlineSync returning conflict"),
                                    e({
                                        status: "CONFLICT",
                                        data: o
                                    })
                                }
                                ))) : !0 === r.offlinedata ? (console.log("goneOnlineSync: latest version is local, pushing state online"),
                                t.os.setNextUploadVersion(r.version),
                                t.bs.loadAll((function(n) {
                                    Qr.debug("goneOnlineSync: latest version loaded", n),
                                    t.os.overwrite(n, (function(n) {
                                        "OFFLINE" === n.status ? (Qr.debug("goneOnlineSync data error when flushing local data"),
                                        e({
                                            status: "OFFLINE"
                                        })) : "CONFLICT" == n.status ? (Qr.debug("goneOnlineSync online data conflict", n.version),
                                        t.bs.overwriteAndSetVersion(n.data, n.version).finally((function() {
                                            e(n)
                                        }
                                        ))) : (Qr.debug("goneOnlineSync online data written to version", n.version),
                                        t.bs.setVersion(n.version).finally((function() {
                                            Qr.debug("WriteCachingOnlineStorage goneOnlineSync bs version set"),
                                            e({
                                                status: "OK"
                                            })
                                        }
                                        )))
                                    }
                                    ), !0)
                                }
                                ))) : e({
                                    status: "OK"
                                })
                            }
                            ))
                        }
                        ,
                        g.write = function(e, t) {
                            var n = this;
                            this.bs.write(e, (function() {
                                n.os.write(e, (function(e) {
                                    void 0 !== e && e.hasOwnProperty("data") ? n.bs.overwriteAndSetVersion(e.data, e.version).finally((function() {
                                        t(e)
                                    }
                                    )) : t(e)
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        g.writeImage = function(e, t) {
                            var n = this
                              , r = he().Deferred();
                            return this.bs.writeImage(e, t).done((function() {
                                r.resolve(),
                                n.os.writeImage(e, t).done((function() {
                                    n.bs.setImageBackedUp(e)
                                }
                                )).fail((function() {}
                                ))
                            }
                            )).fail((function() {
                                n.os.writeImage(e, t).done((function() {
                                    r.resolve()
                                }
                                )).fail((function() {
                                    r.reject()
                                }
                                ))
                            }
                            )),
                            r
                        }
                        ,
                        g.clearImage = function(e) {
                            var t = he().Deferred();
                            return he().when(this.bs.clearImage(e), this.os.clearImage(e)).done((function() {
                                t.resolve()
                            }
                            )).fail((function() {
                                t.reject()
                            }
                            )),
                            t
                        }
                        ,
                        g.readImage = function(e) {
                            var t = this;
                            Qr.debug("WriteCachingOnlineStorage readImage", e);
                            var n = he().Deferred();
                            return this.bs.readImage(e).done((function(e) {
                                n.resolve(e)
                            }
                            )).fail((function() {
                                t.os.readImage(e).done((function(e) {
                                    n.resolve(e)
                                }
                                )).fail((function() {
                                    n.reject()
                                }
                                ))
                            }
                            )),
                            n
                        }
                        ,
                        g.moveImageOnline = function(e) {
                            var t = this;
                            Qr.debug("WriteCachingOnlineStorage moveImageOnline", e);
                            var n = he().Deferred();
                            return this.bs.readImage(e).done((function(r) {
                                Qr.debug("Read image data and moving it online"),
                                t.os.writeImage(e, r).done((function() {
                                    Qr.debug("image written online, setting backed up tag"),
                                    t.bs.setImageBackedUp(e).finally((function() {
                                        n.resolve()
                                    }
                                    ))
                                }
                                )).fail((function() {
                                    Qr.debug("moving image online failed"),
                                    n.reject()
                                }
                                ))
                            }
                            )).fail((function() {
                                Qr.debug("error reading image"),
                                n.reject()
                            }
                            )),
                            n
                        }
                        ,
                        g.moveImageOnlineIfRequired = function() {
                            var e = this;
                            Qr.debug("WriteCachingOnlineStorage moveImageOnlineIfRequired");
                            var t = he().Deferred();
                            return this.bs.listImagesAndBackupStatus().then((function(n) {
                                Qr.debug("WriteCachingOnlineStorage moveImageOnlineIfRequired image list:", n);
                                for (var r = 0; r < n.length; ++r)
                                    if (!1 === n[r].backed_up)
                                        return void e.moveImageOnline(n[r].id).then((function() {
                                            Qr.debug("moveImageOnline succeeded"),
                                            t.resolve(!0)
                                        }
                                        ), (function() {
                                            Qr.debug("moveImageOnline failed"),
                                            t.reject()
                                        }
                                        ));
                                t.resolve(!1)
                            }
                            )),
                            t
                        }
                        ,
                        g
                    },
                    createInfoStorage: function(e) {
                        var n = {};
                        return n.bs = r.createInfoStorage(e, t.getUserId(), !1),
                        n.getCommonProperties = function(e) {
                            this.bs.getCommonProperties((function(t) {
                                e(t)
                            }
                            ))
                        }
                        ,
                        n.getGroupProperties = function(e) {
                            this.bs.getGroupProperties((function(t) {
                                e(t)
                            }
                            ))
                        }
                        ,
                        n.setCommonProperties = function(e) {
                            this.bs.setCommonProperties(e)
                        }
                        ,
                        n.setGroupProperties = function(e) {
                            this.bs.setGroupProperties(e)
                        }
                        ,
                        n
                    }
                }
            }
              , Yr = n(45878)
              , Kr = n.n(Yr)
              , Gr = n(42207)
              , $r = n.n(Gr)
              , Jr = n(80105)
              , Xr = n.n(Jr)
              , Zr = n(75857)
              , eo = n.n(Zr)
              , to = n(82438)
              , no = n.n(to)
              , ro = n(16735)
              , oo = n.n(ro)
              , ao = n(81211)
              , io = n.n(ao)
              , so = {
                ExtraKeyboardButton: "MHvf80XWVG_OFYjoE2AX",
                SubSup: "OO8fb1Vnh19or6RgCAut",
                ExtraKeyboard: "ZShmftHLFH2PBcIo9pU2",
                ExtraKeyboardDragSection: "m92GQMxYa_cdZLC3oRTo",
                ExtraKeyboardDragHandle: "WKz7pk5szc74eeEz0sUg",
                ExtraKeyboardKeySection: "bLheVibJOHokEcAmWJDT",
                disabled: "MDm2HSltnQMFFK1zlQmz"
            };
            function uo(e, t) {
                return function(e) {
                    if (Array.isArray(e))
                        return e
                }(e) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(e, t) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return co(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? co(e, t) : void 0
                    }
                }(e, t) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function co(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function lo(e, t) {
                var n = e.value;
                e.value = t;
                var r = e._valueTracker;
                r && r.setValue(n),
                e.dispatchEvent(new Event("change",{
                    bubbles: !0
                }))
            }
            function fo(e) {
                var t = e.char
                  , n = e.subsup
                  , r = e.disabled
                  , o = a.useCallback((function(e) {
                    var n, r, o;
                    e.preventDefault(),
                    e.stopPropagation(),
                    document.activeElement && (n = document.activeElement,
                    r = t,
                    "INPUT" === (o = n.tagName) || "TEXTAREA" === o ? function(e, t) {
                        if (null != e.selectionStart) {
                            var n = e.selectionStart
                              , r = e.selectionEnd
                              , o = null != e.value ? e.value.substring(0, n) + t + e.value.substring(r, e.value.length) : t;
                            return lo(e, o),
                            e.selectionStart = n + t.length,
                            e.selectionEnd = n + t.length,
                            o
                        }
                        lo(e, e.value + t)
                    }(n, r) : "DIV" === o && n.isContentEditable ? function(e) {
                        if (window.getSelection) {
                            var t = window.getSelection();
                            if (t && t.getRangeAt && t.rangeCount) {
                                var n = t.getRangeAt(0);
                                n.deleteContents();
                                var r = document.createTextNode(e);
                                n.insertNode(r),
                                n.setStart(r, r.length),
                                n.setEnd(r, r.length),
                                t.removeAllRanges(),
                                t.addRange(n)
                            }
                        }
                    }(r) : console.log("Can't insert"))
                }
                ), [t]);
                return a.createElement("div", {
                    className: s()(so.ExtraKeyboardButton, n && so.SubSup, r && so.disabled),
                    onMouseDown: r ? void 0 : o,
                    role: "button",
                    "aria-disabled": r
                }, t)
            }
            var po = {
                french: {
                    merge: !0,
                    symbols: "ÙùÛûÜüŸÿÀàÂâÆæÇçÉéÈèÊêËëÏïÎîÔôŒœ"
                },
                german: {
                    merge: !0,
                    symbols: "ÄÖÜäöüßÄÖÜäöüß"
                },
                spanish: {
                    merge: !0,
                    symbols: "¿¡ÁáÉéÍíÓóÚúüÑñ"
                },
                dutch: {
                    merge: !0,
                    symbols: "ÙùÛûÜüŸÿÀàÂâÆæÇçÉéÈèÊêËëÏïÎîÔôŒœÄÖÜäöüßÄÖÜäöüßÁáÉéÍíÓóÚúüÑñ"
                },
                greek: {
                    merge: !0,
                    symbols: "αβΓγΔδεζηΘθικΛλμνΞξΠπρΣσςτυΦφχΨψΩω"
                },
                subscript_numbers: {
                    merge: !1,
                    symbols: "₀₁₂₃₄₅₆₇₈₉"
                },
                subscript_symbols: {
                    merge: !1,
                    symbols: "₊₋₌₍₎"
                },
                subscript_lowercase: {
                    merge: !1,
                    symbols: "ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥ"
                },
                superscript_numbers: {
                    merge: !1,
                    symbols: "⁰¹²³⁴⁵⁶⁷⁸⁹"
                },
                superscript_symbols: {
                    merge: !1,
                    symbols: "⁺⁻⁼⸍⁽⁾"
                },
                superscript_uppercase: {
                    merge: !1,
                    symbols: "ᴬᴮᴰᴱᴳᴴᴵᴶᴷᴸᴹᴺᴼᴾᴿᵀᵁᵂ"
                },
                superscript_lowercase: {
                    merge: !1,
                    symbols: "ᵃᵇᶜᵈᵉᶠᵍʰⁱʲᵏˡᵐⁿᵒᵖʳˢᵗᵘᵛʷˣʸᶻ"
                }
            };
            function ho(e) {
                var t = function(e, t) {
                    return a.useMemo((function() {
                        var n = io()(oo()(e, (function(e) {
                            return "1" === e
                        }
                        )))
                          , r = fe()(n.map((function(e) {
                            return po[e]
                        }
                        )), {
                            merge: !0
                        }).map((function(e) {
                            return e.symbols
                        }
                        )).join("") + t;
                        return [{
                            symbols: no()(r.split("")).sort(),
                            subsup: !1
                        }, {
                            symbols: fe()(n.map((function(e) {
                                return po[e]
                            }
                            )), {
                                merge: !1
                            }).map((function(e) {
                                return e.symbols
                            }
                            )).join("").split(""),
                            subsup: !0
                        }]
                    }
                    ), [e, t])
                }(e.languages, e.symbols)
                  , n = function() {
                    var e = a.useRef(null)
                      , t = a.useRef(null)
                      , n = uo(a.useState({
                        top: 20,
                        right: 20
                    }), 2)
                      , r = n[0]
                      , o = n[1]
                      , i = uo(a.useState(!1), 2)
                      , s = i[0]
                      , u = i[1]
                      , c = a.useCallback((function(t) {
                        o({
                            right: r.right - t.x + e.current.x,
                            top: r.top + t.y - e.current.y
                        }),
                        e.current = t
                    }
                    ), [r])
                      , l = a.useCallback((function(n) {
                        null != e.current && (c(n),
                        t.current = e.current = null,
                        u(!1))
                    }
                    ), [c])
                      , d = a.useCallback((function(t) {
                        return "touchstart" === t.type || "touchmove" === t.type ? {
                            x: t.touches[0].pageX,
                            y: t.touches[0].pageY
                        } : "touchend" === t.type ? e.current : {
                            x: t.pageX,
                            y: t.pageY
                        }
                    }
                    ), [e])
                      , f = a.useCallback((function(n) {
                        n.preventDefault(),
                        n.stopPropagation(),
                        null == t.current ? (t.current = e.current = d(n),
                        u(!0)) : l(d(n))
                    }
                    ), [l, d])
                      , p = a.useCallback((function(t) {
                        t.preventDefault(),
                        t.stopPropagation(),
                        null != e.current && c(d(t))
                    }
                    ), [c, d])
                      , h = a.useCallback((function(n) {
                        n.preventDefault(),
                        n.stopPropagation();
                        var r = d(n);
                        null != r && (e.current && Math.abs(r.x - t.current.x) < 10 && Math.abs(r.y - t.current.y) < 10 || l(r))
                    }
                    ), [l, d])
                      , m = a.useCallback((function(e) {
                        e.preventDefault(),
                        e.stopPropagation(),
                        l(d(e))
                    }
                    ), [l, d])
                      , g = a.useCallback((function(t) {
                        t.preventDefault(),
                        t.stopPropagation(),
                        null != e && c(d(t))
                    }
                    ), [c, d])
                      , v = a.useMemo((function() {
                        return s ? a.createElement("div", {
                            style: {
                                position: "absolute",
                                background: "rgba(0, 0, 0, 0.3)",
                                width: "100%",
                                height: "100%",
                                left: "0px",
                                top: "0px",
                                zIndex: 101
                            }
                        }) : null
                    }
                    ), [s])
                      , w = a.useMemo((function() {
                        return s ? a.createElement("div", {
                            style: {
                                position: "absolute",
                                width: "100%",
                                height: "100%",
                                left: "0px",
                                top: "0px",
                                zIndex: 103
                            },
                            onMouseDown: m,
                            onMouseUp: m,
                            onMouseMove: g
                        }) : null
                    }
                    ), [s, m, g]);
                    return {
                        pos: r,
                        cover: w,
                        coverBelow: v,
                        mouseDown: f,
                        mouseMove: p,
                        mouseUp: h,
                        touchStart: f,
                        touchEnd: h,
                        touchMove: p
                    }
                }()
                  , r = n.pos
                  , o = n.cover
                  , i = n.coverBelow
                  , u = n.mouseDown
                  , c = n.mouseMove
                  , l = n.mouseUp
                  , d = n.touchStart
                  , f = n.touchEnd
                  , p = n.touchMove;
                return a.createElement(a.Fragment, null, i, a.createElement("div", {
                    className: s()(so.ExtraKeyboard, "bw-column-container"),
                    style: r
                }, a.createElement("div", {
                    className: s()(so.ExtraKeyboardDragSection, "bw-column-fixed")
                }, a.createElement("div", {
                    className: s()(so.ExtraKeyboardDragHandle, "bw-icon-small", "bw-icon-draghandle"),
                    onMouseDown: u,
                    onMouseUp: l,
                    onMouseMove: c,
                    onTouchStart: d,
                    onTouchEnd: f,
                    onTouchMove: p
                })), a.createElement("div", {
                    className: s()(so.ExtraKeyboardKeySection, "bw-column-resizing")
                }, a.createElement("div", null, eo()(t.map((function(e) {
                    return e.symbols.map((function(t, n) {
                        return a.createElement(fo, {
                            key: n,
                            char: t,
                            subsup: e.subsup
                        })
                    }
                    ))
                }
                )))))), o)
            }
            function mo(e) {
                return mo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                mo(e)
            }
            function go() {
                go = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , o = "function" == typeof Symbol ? Symbol : {}
                  , a = o.iterator || "@@iterator"
                  , i = o.asyncIterator || "@@asyncIterator"
                  , s = o.toStringTag || "@@toStringTag";
                function u(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    u({}, "")
                } catch (e) {
                    u = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function c(e, t, n, o) {
                    var a = t && t.prototype instanceof f ? t : f
                      , i = Object.create(a.prototype)
                      , s = new S(o || []);
                    return r(i, "_invoke", {
                        value: C(e, n, s)
                    }),
                    i
                }
                function l(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = c;
                var d = {};
                function f() {}
                function p() {}
                function h() {}
                var m = {};
                u(m, a, (function() {
                    return this
                }
                ));
                var g = Object.getPrototypeOf
                  , v = g && g(g(T([])));
                v && v !== t && n.call(v, a) && (m = v);
                var w = h.prototype = f.prototype = Object.create(m);
                function b(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        u(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function y(e, t) {
                    function o(r, a, i, s) {
                        var u = l(e[r], e, a);
                        if ("throw" !== u.type) {
                            var c = u.arg
                              , d = c.value;
                            return d && "object" == mo(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                o("next", e, i, s)
                            }
                            ), (function(e) {
                                o("throw", e, i, s)
                            }
                            )) : t.resolve(d).then((function(e) {
                                c.value = e,
                                i(c)
                            }
                            ), (function(e) {
                                return o("throw", e, i, s)
                            }
                            ))
                        }
                        s(u.arg)
                    }
                    var a;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    o(e, n, t, r)
                                }
                                ))
                            }
                            return a = a ? a.then(r, r) : r()
                        }
                    })
                }
                function C(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = x(i, n);
                                if (s) {
                                    if (s === d)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = l(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === d)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function x(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        x(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        d;
                    var o = l(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        d;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    d) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    d)
                }
                function E(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function k(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function S(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(E, this),
                    this.reset(!0)
                }
                function T(e) {
                    if (e) {
                        var t = e[a];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: _
                    }
                }
                function _() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return p.prototype = h,
                r(w, "constructor", {
                    value: h,
                    configurable: !0
                }),
                r(h, "constructor", {
                    value: p,
                    configurable: !0
                }),
                p.displayName = u(h, s, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === p || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h,
                    u(e, s, "GeneratorFunction")),
                    e.prototype = Object.create(w),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                b(y.prototype),
                u(y.prototype, i, (function() {
                    return this
                }
                )),
                e.AsyncIterator = y,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new y(c(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                b(w),
                u(w, s, "Generator"),
                u(w, a, (function() {
                    return this
                }
                )),
                u(w, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = T,
                S.prototype = {
                    constructor: S,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(k),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        d) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        d
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                k(n),
                                d
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    k(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: T(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        d
                    }
                },
                e
            }
            function vo(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function wo(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function i(e) {
                            vo(a, r, o, i, s, "next", e)
                        }
                        function s(e) {
                            vo(a, r, o, i, s, "throw", e)
                        }
                        i(void 0)
                    }
                    ))
                }
            }
            n(78908);
            var bo = new Zt;
            function yo(e) {
                return Co.apply(this, arguments)
            }
            function Co() {
                return (Co = wo(go().mark((function e(t) {
                    var n;
                    return go().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (!t.show_password || "" === t.show_password.h) {
                                    e.next = 5;
                                    break
                                }
                                return n = (0,
                                ur.HX)((0,
                                v.wk)(), t.show_password, !1, (0,
                                qe.needToShowSebQuitLink)(t) ? (0,
                                qe.getSebQuitMessage)() : null),
                                (0,
                                v.$j)(n),
                                e.next = 5,
                                n.lock;
                            case 5:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function xo(e) {
                var t = (0,
                v.wk)().lock;
                (0,
                v.$j)((0,
                ur.U7)((0,
                v.wk)())),
                t.resolve(e)
            }
            function Eo() {
                var e = (0,
                v.wk)().lock;
                (0,
                v.$j)((0,
                ur.U7)((0,
                v.wk)())),
                e.reject()
            }
            function ko() {
                var e = !0 === (0,
                v.wk)().showCalculator;
                !e ? (he()("#calcdiv").show(),
                he()("#calcdiv").draggable(),
                he()("#simpleCalculatorContainer").focus()) : he()("#calcdiv").hide(),
                (0,
                v.$j)((0,
                ur.i3)((0,
                v.wk)(), !e))
            }
            function So() {
                var e = !0 === (0,
                v.wk)().showExtraKeyboard;
                (0,
                v.$j)((0,
                ur.d4)((0,
                v.wk)(), !e))
            }
            var To = {
                update: function(e) {
                    (0,
                    v.$j)((0,
                    ur.XW)((0,
                    v.wk)(), e))
                },
                show: function() {},
                hide: function() {}
            };
            var _o = n(46338)
              , Ao = function(e) {
                e = e || {};
                var t = {
                    bwConfig: Ce,
                    dialog: Sn,
                    throbber: vr.createThrobber
                };
                return t.tr = _(),
                t.credentialstorage = hr()(),
                t.studentaccount = Ar(t),
                t.studentaccountbutton = I(t),
                t.bwds = Kr(),
                t.blob = $r(),
                t.bwdsstorage = Hr(t),
                t.onlinestorage = jr(t),
                t.writecachingonlinestorage = Vr(t),
                t.studentinfo = gr(t),
                e.nostorage || (t.widgetstorage = Ir(t)),
                e.nosubmitter || (t.StudentWorkSubmitter = Xr().bindToContext(t)),
                t
            }({})
              , Oo = (0,
            qe.bindToContext)(Ao)
              , Do = Oo.continueEditing
              , Io = Oo.questionDone
              , Po = Oo.goToNextQuestionSave
              , Ro = Oo.goToPrevQuestionSave
              , Lo = Oo.starQuestionToggle
              , No = Oo.setCurrentAudioPlays
              , Fo = function(e) {
                var t = (0,
                qe.bindToContext)(e)
                  , n = t.prepareQuestionCreation
                  , r = t.clearAndRestart
                  , i = (t.getQuestionAnswerState,
                t.confirmCheckAndGotoCheckMode)
                  , s = t.loadAnswersAndStateIfRequired
                  , u = t.submitToServer
                  , c = t.sharePressed
                  , l = t.downloadPressed
                  , d = t.initializeCountdownTimer
                  , f = t.startOrRestartCountdownTimerIfRequired
                  , p = t.restartCountdownTimerIfRequired
                  , h = t.showAnswerKeys
                  , m = t.getAnswers;
                function g(e, t) {
                    p(e, bo, t)
                }
                function w(e, t, n) {
                    return b.apply(this, arguments)
                }
                function b() {
                    return b = wo(go().mark((function e(t, n, r) {
                        var o, a;
                        return go().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != n.startup_password && "" !== n.startup_password.s) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return");
                                case 2:
                                    if ("Always" === n.require_password || !G(r["startup_password_entered.text"], n.startup_password)) {
                                        e.next = 5;
                                        break
                                    }
                                    return (0,
                                    qe.decryptEncryptedConfigParts)(r["startup_password_entered.text"], n.startup_password.s),
                                    e.abrupt("return");
                                case 5:
                                    return o = (0,
                                    ur.HX)((0,
                                    v.wk)(), n.startup_password, !1),
                                    (0,
                                    v.$j)(o),
                                    e.next = 9,
                                    o.lock;
                                case 9:
                                    a = e.sent,
                                    (0,
                                    qe.decryptEncryptedConfigParts)(a, n.startup_password.s),
                                    t.widgetstorage.write({
                                        "startup_password_entered.text": a
                                    }),
                                    f(n, bo);
                                case 13:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    b.apply(this, arguments)
                }
                return {
                    useStoredQuizData: function(e, t) {
                        function r(e) {
                            return i.apply(this, arguments)
                        }
                        function i() {
                            return (i = wo(go().mark((function r(a) {
                                return go().wrap((function(r) {
                                    for (; ; )
                                        switch (r.prev = r.next) {
                                        case 0:
                                            return r.next = 2,
                                            w(e, t, a);
                                        case 2:
                                            return t = (0,
                                            v.wk)().config,
                                            (0,
                                            v.$j)(Object.assign((0,
                                            v.wk)(), {
                                                questions: o()((0,
                                                j.safeArray)(t.questions), ut.er)
                                            })),
                                            r.next = 6,
                                            (0,
                                            qe.prepareQuestionDependencies)(t);
                                        case 6:
                                            return n(a),
                                            r.next = 9,
                                            s(bo, d.bind(null, bo, yo.bind(null, t), g.bind(null, t, !0), To, !1), yo.bind(null, t), a);
                                        case 9:
                                            setTimeout((function() {
                                                window.BWINITIALIZED = !0
                                            }
                                            ), 1e3);
                                        case 10:
                                        case "end":
                                            return r.stop()
                                        }
                                }
                                ), r)
                            }
                            )))).apply(this, arguments)
                        }
                        (0,
                        a.useEffect)((function() {
                            wn.isPreview() && (window.createPostMessage = function(e) {
                                e && (window.bwshortcode = "ABC123");
                                var t = JSON.stringify({
                                    answers: m(!0)
                                });
                                return e && delete window.bwshortcode,
                                t
                            }
                            ),
                            e.widgetstorage.init({
                                type: function() {
                                    return "quiz"
                                },
                                group: "" === t.book_title ? "-" : t.book_title,
                                name: t.id,
                                id: t.uuid2,
                                updateCallback: r,
                                singleKey: !1
                            })
                        }
                        ), [])
                    },
                    useClearAll: function(e, t) {
                        return (0,
                        a.useCallback)((function() {
                            r(e, g.bind(null, e, (0,
                            v.wk)().readOnly), !1).then((function() {
                                t && t();
                                var e = new Event("clearReset");
                                window.dispatchEvent(e)
                            }
                            ))
                        }
                        ), [e, t])
                    },
                    useSubmitAnswers: function(e) {
                        return (0,
                        a.useCallback)((function() {
                            u(bo, yo.bind(null, e), g.bind(null, e, !1), !1, !1)
                        }
                        ), [e])
                    },
                    useCheckAnswers: function(e) {
                        return (0,
                        a.useCallback)(wo(go().mark((function t() {
                            return go().wrap((function(t) {
                                for (; ; )
                                    switch (t.prev = t.next) {
                                    case 0:
                                        if (!e.show_password || "" === e.show_password.h) {
                                            t.next = 3;
                                            break
                                        }
                                        return t.next = 3,
                                        yo(e);
                                    case 3:
                                        i(bo, yo.bind(null, e));
                                    case 4:
                                    case "end":
                                        return t.stop()
                                    }
                            }
                            ), t)
                        }
                        ))), [e])
                    },
                    useDownloadAnswers: function() {
                        return (0,
                        a.useCallback)((function() {
                            l()
                        }
                        ), [])
                    },
                    useShareAnswers: function() {
                        return (0,
                        a.useCallback)((function() {
                            c()
                        }
                        ), [])
                    },
                    useShowAnswerKeys: function(e) {
                        return (0,
                        a.useCallback)((function() {
                            if (null != e.answer_keys_password && "" !== e.answer_keys_password.h) {
                                var t = (0,
                                ur.HX)((0,
                                v.wk)(), e.answer_keys_password, !0);
                                (0,
                                v.$j)(t),
                                t.lock.then(h)
                            }
                        }
                        ), [e])
                    },
                    saveCurrentPosition: function(e) {
                        if (wn.isPreview()) {
                            var t = (0,
                            v.wk)().config;
                            dn.SetItem("worksheet_current_position" + t.uuid2, e)
                        }
                    }
                }
            }(Ao)
              , Mo = Fo.useStoredQuizData
              , jo = Fo.useClearAll
              , qo = Fo.useSubmitAnswers
              , Bo = Fo.useCheckAnswers
              , Wo = Fo.useDownloadAnswers
              , Uo = Fo.useShareAnswers
              , zo = Fo.useShowAnswerKeys;
            function Ho(e) {
                var t = e.state
                  , n = t.config;
                Mo(Ao, n);
                var r = jo(n)
                  , o = qo(n)
                  , i = Bo(n)
                  , u = Wo()
                  , l = Uo()
                  , d = zo(n)
                  , f = function(e) {
                    if (!(0,
                    g.instructionsAreEmpty)(e.instructions))
                        return (0,
                        a.useEffect)((function() {
                            (0,
                            g.haveShownPopupInSessionBefore)(e.uuid2) || setTimeout((function() {
                                var e = (0,
                                v.XG)((0,
                                v.wk)(), !0);
                                (0,
                                v.$j)(e)
                            }
                            ))
                        }
                        ), [e.uuid2]),
                        (0,
                        a.useCallback)((function() {
                            var e = (0,
                            v.XG)((0,
                            v.wk)(), !0);
                            (0,
                            v.$j)(e)
                        }
                        ), [])
                }(n)
                  , h = (0,
                a.useMemo)((function() {
                    return "1" === (0,
                    mr.getParameters)().lsb
                }
                ), [])
                  , m = function(e) {
                    return (0,
                    a.useMemo)((function() {
                        var t = 0
                          , n = (0,
                        j.safeArray)(e.questions).map((function(n, r) {
                            if ("true" !== n.noquestion)
                                ++t;
                            else if ("yes" !== e.info_numbering)
                                return "i";
                            var o = "yes" === e.info_numbering ? r + 1 : t;
                            return (0,
                            qe.getNumbering)(e, n, o)
                        }
                        ));
                        return (0,
                        qe.hasSubmitCheckPage)(e) && n.push("i"),
                        n
                    }
                    ), [e])
                }(n)
                  , w = function(e, t) {
                    var n, r, o = t && t.questionOrder, i = null != o ? (0,
                    j.safeArray)(e.questions).map((function(n, r) {
                        var a = o[r]
                          , i = e.questions[a]
                          , s = t.questions[a].answerstate;
                        if (null == s)
                            return "true" === i.noquestion ? {
                                progress: "done"
                            } : {
                                progress: ""
                            };
                        var u = "no" === i.needs_correction ? null : s.correct ? "correct" : s.wrong ? s.score > 0 ? "partial" : "wrong" : s.manual ? "manual" : null;
                        return !0 === s.answered ? {
                            progress: "done",
                            correctness: u
                        } : !1 === s.allunanswered ? {
                            progress: "half",
                            correctness: u
                        } : {
                            progress: ""
                        }
                    }
                    )) : (0,
                    j.safeArray)(e.questions).map((function() {
                        return {
                            progress: ""
                        }
                    }
                    ));
                    return (0,
                    qe.hasSubmitCheckPage)(e) && i.push({
                        progress: "done"
                    }),
                    (n = i) === (r = a.useRef(n)).current || ve()(n, r.current) || (r.current = n),
                    r.current
                }(n, t)
                  , b = function(e, t) {
                    return (0,
                    a.useMemo)((function() {
                        return (0,
                        qe.getNavController)(e, t)
                    }
                    ), [e, t])
                }(n, !0)
                  , y = function(e) {
                    c()(e.target).is("input, textarea, select, [contenteditable=true]") || (k ? ("ArrowRight" === e.code && x && Ro(),
                    "ArrowLeft" === e.code && E && Po()) : ("ArrowRight" === e.code && E && Po(),
                    "ArrowLeft" === e.code && x && Ro())),
                    34 === e.keyCode && E ? Po() : 33 === e.keyCode && x && Ro()
                };
                if ((0,
                a.useEffect)((function() {
                    return window.addEventListener("keyup", y),
                    function() {
                        window.removeEventListener("keyup", y)
                    }
                }
                )),
                null == t)
                    return null;
                var C = t.currentQuestion
                  , x = b.needToShowPrevQuestionButton(t)
                  , E = b.needToShowNextQuestionButton(t);
                if (null == t.questions)
                    return null;
                if (null != t.lockPassword)
                    return a.createElement(re, {
                        password: t.lockPassword,
                        onOk: xo,
                        onCancel: t.lockAllowCancel ? Eo : null,
                        show_typed_text: !1,
                        extraMessage: t.lockExtraMessage
                    });
                var k = (0,
                we.isRtlOrRtlMixed)(n && n.direction)
                  , S = a.createElement("div", {
                    className: s()("navbutton bw-button bw-icon-large bw-row-fixed ", k ? "bw-icon-angle-right nextarrow" : "bw-icon-angle-left prevarrow", !x && "bw-icon-hidden"),
                    onClick: Ro,
                    onKeyDown: function(e) {
                        var t = e.key;
                        "Enter" !== t && " " !== t || (e.preventDefault(),
                        e.stopPropagation(),
                        Ro())
                    },
                    role: "button",
                    tabIndex: 0,
                    "aria-label": (0,
                    p.Tl)("Previous question")
                })
                  , T = a.createElement("div", {
                    className: s()("navbutton bw-button move-forward bw-icon-large bw-row-fixed", k ? "bw-icon-angle-left prevarrow" : "bw-icon-angle-right nextarrow", !E && "bw-icon-hidden"),
                    onClick: Po,
                    onKeyDown: function(e) {
                        var t = e.key;
                        "Enter" !== t && " " !== t || (e.preventDefault(),
                        e.stopPropagation(),
                        Po())
                    },
                    role: "button",
                    tabIndex: 0,
                    "aria-label": (0,
                    p.Tl)("Next question")
                });
                return a.createElement(a.Fragment, null, a.createElement(H, {
                    title: n.id || "Quiz",
                    bottomcontainerclassnames: "quizwidget bw-column-container",
                    buttons: a.createElement(xn, {
                        config: n,
                        state: t,
                        clearAll: r,
                        submitAnswers: o,
                        checkAnswers: i,
                        shareAnswers: l,
                        downloadAnswers: u,
                        switchToEditMode: Do,
                        onCalculatorClicked: ko,
                        onExtraKeyboardClicked: So,
                        showAnswerKeys: d,
                        showInstructions: f,
                        largeSubmitButton: h
                    }),
                    alwaysVisibleButtons: a.createElement("div", {
                        className: "progress-container outside-popup",
                        onClick: b.canShowQuestionList(t) ? qe.toggleShowQuestionList : void 0
                    }, a.createElement(le, {
                        id: "progress",
                        config: m,
                        state: w,
                        current: C
                    })),
                    widgetState: t,
                    instructions: n.instructions
                }, n.questions ? a.createElement(En, {
                    config: n,
                    state: t,
                    submitAnswers: o,
                    checkAnswers: i,
                    currentQuestion: C,
                    progressConfig: m,
                    progressState: w,
                    questionDone: Io,
                    starQuestionToggle: Lo,
                    setCurrentAudioPlays: No,
                    getCurrentAudioPlaysDetail: qe.getCurrentAudioPlaysDetail,
                    navController: b,
                    context: Ao,
                    gotoNextQuestion: Po,
                    gotoPrevQuestion: Ro
                }) : a.createElement("div", null), t.showExtraKeyboard && a.createElement(ho, {
                    languages: n["extra-keyboard-languages"],
                    symbols: n["extra-keyboard-symbols"]
                })), a.createElement("div", {
                    id: "mobile-navcontainer"
                }, k ? T : S, k ? S : T))
            }
            Ce.getConfig().then((function(e) {
                (0,
                p.ks)(e.LocalizationMap),
                (0,
                _o.setPreparePrint)(F);
                var t = Ce.extractOnlineResources(e);
                new dr(o()(t, (function(e) {
                    return e.resource
                }
                )),{
                    pipeline: !0
                }),
                function(e) {
                    "yes" === e.allow_text_selection && "browser" === e.text_to_speech && sr(e.t2s_language_1, e.t2s_language_2, "yes" === e.t2s_prefer_online_voices)
                }(e);
                var n = new Q(Ho,e,{
                    useBorderWhenWide: !0,
                    allowTextSelection: "yes" === e.allow_text_selection,
                    rightToLeft: (0,
                    we.isRtlOrRtlMixed)(e.direction)
                });
                (0,
                v.So)((function(e) {
                    n.updateState(e)
                }
                )),
                (0,
                v.$j)((0,
                ur.Xd)(e))
            }
            ))
        },
        50466: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                addElement: function() {
                    return y
                },
                createElement: function() {
                    return g
                },
                createPlayer: function() {
                    return w
                },
                createPlayerLimited: function() {
                    return v
                },
                pauseAll: function() {
                    return h
                },
                process: function() {
                    return m
                },
                processAudioTags: function() {
                    return b
                }
            });
            var r = n(58065)
              , o = n.n(r)
              , a = n(34534)
              , i = n.n(a)
              , s = n(78514)
              , u = n.n(s)
              , c = "<polygon points='10,10 40,25 10,40'/>"
              , l = "<rect x='13' y='13' width='24' height='24'/>"
              , d = "<rect x='10' y='10' width='11' height='30'/><rect x='29' y='10' width='11' height='30'/>"
              , f = function(e) {
                return '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" version="1.1">' + e + "</svg>"
            };
            function p(e, t, n, r, a, s) {
                var p = 1
                  , h = !1
                  , m = !1
                  , g = Number(r);
                function v() {
                    return u()("plays left: %d").replace("%d", p > g ? "0" : g - p + 1)
                }
                (!g || g < 0 || Number.isNaN(g)) && (g = 0);
                var w = o()(document.createElement("div")).addClass("bw-audio-player").attr({
                    state: "stopped",
                    "data-plays": "enabled",
                    role: "group",
                    "aria-label": u()("Audio player")
                });
                n ? o()(e).replaceWith(w) : w.appendTo(e);
                var b, y = o()(document.createElement("div")).appendTo(w), C = o()(document.createElement("div")).addClass("bw-audio-player-button bw-audio-play").append(f(c)).makeButton(u()("play")).appendTo(y), x = o()(document.createElement("div")).addClass("bw-audio-player-button bw-audio-pause").append(f(d)).makeButton(u()("pause")).appendTo(y), E = o()(document.createElement("div")).addClass("bw-audio-player-button bw-audio-stop").append(f(l)).makeButton(u()("stop")).appendTo(y), k = o()(document.createElement("div")).addClass("bw-audio-player-time bw-audio-player-playtime").safeHtml("__:__").appendTo(y);
                o()(document.createElement("span")).text(" / ").addClass("bw-audio-player-time  bw-audio-player-slash").appendTo(y);
                var S = o()(document.createElement("div")).addClass("bw-audio-player-time bw-audio-player-totaltime").safeHtml("__:__").appendTo(y)
                  , T = o()(document.createElement("div")).addClass("bw-audio-progress-container").appendTo(w)
                  , _ = o()(document.createElement("input")).attr("type", "range").addClass("bw-audio-progress").attr("min", "0").attr("max", "0").val(0).appendTo(T);
                if (g) {
                    var A = o()(document.createElement("div")).addClass("bw-audio-player-playcount").appendTo(w);
                    b = o()(document.createElement("span")).addClass("bw-audio-player-plays").safeHtml(v()).appendTo(A),
                    w.attr("data-plays", "limited")
                }
                g && _.attr("disabled", !0);
                var O, D, I = i()({
                    parent: w
                });
                function P(e) {
                    var t = Math.floor(e)
                      , n = t % 60 + ""
                      , r = Math.trunc(t / 60) + "";
                    n.length < 2 && (n = "0" + n),
                    r.length < 2 && (r = "0" + r),
                    _ && _.val(t),
                    k.safeHtml(r + ":" + n)
                }
                function R() {
                    p && b && b.safeHtml(v())
                }
                function L() {
                    O && clearInterval(O),
                    O = setInterval((function() {
                        P(I.getCurrentTime())
                    }
                    ), 500),
                    g && (D && clearInterval(D),
                    D = setInterval((function() {
                        a(p, Math.floor(I.getCurrentTime()))
                    }
                    ), 1e4))
                }
                function N() {
                    clearInterval(O),
                    g && (clearInterval(D),
                    a(p, Math.floor(I.getCurrentTime())))
                }
                return I.setAudioData(t),
                g && function e() {
                    var t = s();
                    !t || h || m ? setTimeout(e, 100) : (p = t.numberOfPlays,
                    I.goToTime(t.numberOfSeconds),
                    P(I.getCurrentTime()),
                    R(),
                    m = !0,
                    p > g && w.attr("data-plays", "disabled"))
                }(),
                window.addEventListener("clearReset", (function(e) {
                    I.pause(),
                    p = 1,
                    I.goToTime(0),
                    P(I.getCurrentTime()),
                    g ? (R(),
                    w.attr("data-plays", "limited")) : w.attr("data-plays", "enabled")
                }
                ), !1),
                C.tapOrClick((function(e) {
                    e.stopPropagation();
                    var t = w.attr("state");
                    if (!g || p <= g) {
                        if ("playing" === t)
                            return;
                        "playing_paused" === t ? I.resume() : I.play()
                    }
                }
                )),
                x.tapOrClick((function(e) {
                    e.stopPropagation();
                    var t = w.attr("state");
                    "inactive" !== t && "playing" === t && I.pause()
                }
                )),
                E.tapOrClick((function(e) {
                    e.stopPropagation();
                    var t = w.attr("state");
                    if (g) {
                        if ("inactive" === t)
                            return;
                        "playing" === t && I.pause()
                    } else {
                        if ("inactive" === t)
                            return;
                        "playing" !== t && "playing_paused" !== t || (I.pause(),
                        I.goToTime(0),
                        w.attr("state", "stopped"),
                        w.removeClass("active"),
                        P(I.getCurrentTime()))
                    }
                }
                )),
                _.tapOrClick((function(e) {
                    e.stopPropagation()
                }
                )),
                _.on("input", (function(e) {
                    if (e.stopPropagation(),
                    !g) {
                        var t = w.attr("state");
                        e.target.value !== Math.floor(I.getCurrentTime()) && ("playing_paused" === t && (I.goToTime(e.target.value),
                        P(I.getCurrentTime())),
                        "playing" === t && (I.pause(),
                        I.goToTime(e.target.value),
                        P(I.getCurrentTime()),
                        I.resume()),
                        "stopped" === t && (I.goToTime(e.target.value),
                        P(I.getCurrentTime()),
                        w.attr("state", "playing_paused")))
                    }
                }
                )),
                I.addEventListener("play", (function() {
                    w.attr("state", "playing"),
                    h = !0,
                    L()
                }
                )),
                I.addEventListener("durationchange", (function() {
                    var e, t, n;
                    t = (e = Math.floor(I.getDuration())) % 60 + "",
                    n = Math.trunc(e / 60) + "",
                    t.length < 2 && (t = "0" + t),
                    n.length < 2 && (n = "0" + n),
                    _ && _.attr("max", e),
                    S.safeHtml(n + ":" + t)
                }
                )),
                I.addEventListener("ended", (function() {
                    w.attr("state", "stopped"),
                    P(0),
                    N(),
                    g && (p += 1,
                    R(),
                    a(p, 0),
                    p > g && w.attr("data-plays", "disabled"))
                }
                )),
                I.addEventListener("pause", (function() {
                    w.attr("state", "playing_paused"),
                    P(I.getCurrentTime()),
                    N()
                }
                )),
                I.addEventListener("playing", (function() {
                    w.attr("state", "playing"),
                    L()
                }
                )),
                {
                    player: I
                }
            }
            function h() {
                o()("audio").each((function() {
                    this.duration > 0 && !this.paused && this.pause()
                }
                ))
            }
            function m(e) {
                0 === e.find(".bw-audio-player").length && e.each((function(e) {
                    p(o()(this), o()(this).attr("src") || o()(this).find("source").attr("src"), !0, 0, (function() {}
                    ), (function() {}
                    ))
                }
                ))
            }
            function g(e, t) {
                var n = {
                    play: function(e) {
                        if (void 0 === this.element)
                            return !1;
                        var t;
                        try {
                            return e && (t = this.element,
                            this.element.addEventListener("playing", (function n() {
                                t.removeEventListener("playing", n),
                                e()
                            }
                            ))),
                            this.element.play()
                        } catch (e) {
                            return null
                        }
                    },
                    pause: function() {
                        if (void 0 === this.element)
                            return !1;
                        try {
                            return this.element.pause(),
                            !0
                        } catch (e) {
                            return !1
                        }
                    },
                    paused: function() {
                        return void 0 !== this.element && this.element.paused()
                    },
                    toggle: function() {
                        void 0 !== this.paused() && !0 === this.paused() ? (h(),
                        this.play()) : this.pause()
                    },
                    rewind: function() {
                        if (void 0 === this.element)
                            return !1;
                        try {
                            return this.element.goToTime(0),
                            !0
                        } catch (e) {
                            return !1
                        }
                    },
                    setVolume: function(e) {
                        if (void 0 === this.element)
                            return !1;
                        try {
                            return this.element.setVolume(e),
                            !0
                        } catch (e) {
                            return !1
                        }
                    },
                    on: function(e, t) {
                        if (void 0 === this.element)
                            return !1;
                        try {
                            return this.element.addEventListener(e, t),
                            !0
                        } catch (e) {
                            return !1
                        }
                    },
                    onLoaded: function(e) {
                        this.element ? e() : this.onLoadedCB = e
                    }
                };
                return n.element = i()({
                    parent: t
                }),
                n.obj = n.element.player[0],
                n.element.setAudioData(e),
                n
            }
            function v(e, t, n, r, a) {
                if (t) {
                    var i = o()(document.createElement("div")).addClass("audiowrapper");
                    return o()(document.createElement("div")).addClass("audio-placeholder").attr("data-src", e).appendTo(i),
                    i
                }
                return {
                    control: i = o()(document.createElement("div")).addClass("audiowrapper"),
                    player: p(i, e, !1, n, r, a)
                }
            }
            function w(e, t) {
                if (t) {
                    var n = o()(document.createElement("div")).addClass("audiowrapper");
                    return o()(document.createElement("div")).addClass("audio-placeholder").attr("data-src", e).appendTo(n),
                    n
                }
                return p(n = o()(document.createElement("div")).addClass("audiowrapper"), e, !1, 0, (function() {}
                ), (function() {}
                )),
                n
            }
            function b(e) {
                e instanceof o() ? m(e.find("audio:not(.no-audio-wrap)")) : m(o()(e + " audio"))
            }
            function y(e, t) {
                return g(e, t)
            }
            var C = {
                pauseAll: h,
                process: m,
                createElement: g,
                createPlayerLimited: v,
                createPlayer: w,
                processAudioTags: b,
                addElement: y
            };
            window.BWAUDIO = C
        },
        39429: function(e, t, n) {
            var r = n(14337).isLTI
              , o = n(4296).getParameters;
            e.exports = function(e, t) {
                var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : n(61743)
                  , i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : n(85119)
                  , s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : n(11697)
                  , u = r() || o().sso;
                return u && console.log("Using session storage for credentials"),
                "ibw-platform-ipad-bookwidgets" === a.getPlatform() ? new function(t) {
                    this._storage = t,
                    this.setCredentials = function(t) {
                        var n = this;
                        return e.Deferred((function(e) {
                            n._storage.setItemsAsync([{
                                key: "BwCredentials",
                                value: JSON.stringify(t),
                                attribs: ""
                            }], (function() {
                                e.resolve()
                            }
                            ), (function() {
                                e.reject()
                            }
                            ))
                        }
                        ))
                    }
                    ,
                    this.getCredentials = function() {
                        var t = this;
                        return e.Deferred((function(e) {
                            t._storage.getItemsAsync(["BwCredentials"], (function(t) {
                                try {
                                    var n = JSON.parse(t.BwCredentials.value);
                                    e.resolve(n)
                                } catch (t) {
                                    e.reject()
                                }
                            }
                            ), (function() {
                                e.reject()
                            }
                            ))
                        }
                        ))
                    }
                }
                (new s) : new function(t) {
                    this.setCredentials = function(n) {
                        return e.Deferred((function(e) {
                            try {
                                t.SetItem("BwCredentials", JSON.stringify(n)),
                                e.resolve()
                            } catch (t) {
                                e.reject()
                            }
                        }
                        ))
                    }
                    ,
                    this.getCredentials = function() {
                        return e.Deferred((function(e) {
                            try {
                                var n = JSON.parse(t.GetItem("BwCredentials"));
                                e.resolve(n)
                            } catch (t) {
                                e.reject()
                            }
                        }
                        ))
                    }
                }
                (u ? t : i)
            }
            .bind(null, n(58065), n(36878))
        },
        45878: function(e, t, n) {
            var r, o, a, i, s, u, c, l, d, f, p, h, m, g, v;
            e.exports = (r = n(61743),
            o = n(21854).f(),
            a = n(95450),
            i = n(42287),
            s = n(11697),
            n(49632).A,
            u = n(5400),
            l = new (n(55927))(o),
            f = new u(d = new a),
            h = new u(p = new i),
            g = new u(m = new s),
            "ibw-platform-ipad-bookwidgets" === (v = r.getPlatform()) ? (c = g,
            window.BWKSNativeSQL = m,
            console.log("BWDS: Native")) : "ibw-platform-ipad-other" !== v && "ibw-platform-osx-chrome" !== v && "ibw-platform-win32-chrome" !== v && "ibw-platform-chromebook-chrome" !== v && "ibw-platform-android-chrome" !== v && "kotobee:" !== window.location.protocol || !window.indexedDB ? "ibw-platform-osx-preview" !== v && "ibw-platform-win32-preview" !== v || !window.openDatabase ? (c = l,
            console.log("BWDS: Local")) : (console.log("BWDS: WebSQL"),
            c = f) : (console.log("BWDS: IndexedDB"),
            c = h),
            c.test = {
                BWKSIDB: p,
                BWKSWebSQL: d,
                BWDSLocal: l,
                BWDSWebSQL: f
            },
            -1 !== navigator.userAgent.indexOf("ibookwidgets") && (window.BWDS = c),
            c)
        },
        69050: function(e, t, n) {
            e.exports = function(e) {
                var t = {}
                  , n = function(e) {
                    return e < 10 ? "0" + e : "" + e
                };
                function r(e) {
                    var t = Array.prototype.slice.call(arguments, 1);
                    try {
                        e && e.apply(null, t)
                    } catch (e) {
                        console.log("Received error when executing callback: " + e)
                    }
                }
                return t.getDateTime = function() {
                    var e = new Date;
                    return n(e.getFullYear()) + "-" + n(1 + e.getMonth()) + "-" + n(e.getDate()) + " " + n(e.getHours()) + ":" + n(e.getMinutes()) + ":" + n(e.getSeconds())
                }
                ,
                t.error = function(e, t) {
                    return {
                        code: e,
                        message: t
                    }
                }
                ,
                t.trimLeadingSlash = function(e) {
                    return e.length > 0 && "/" == e[0] ? e.substr(1) : e
                }
                ,
                t.newCallbackQueue = function() {
                    var e = {
                        executeList: [],
                        executing: !1,
                        executeNext: function() {
                            e.executeList.length > 0 ? (e.executing = !0,
                            e.executeList.shift().cb(e.executeNext)) : e.executing = !1
                        },
                        executeSequential: function(t, n) {
                            if (null != n && !1 !== n && null != n && e.executeList.length > 0)
                                for (var r = 0; r < e.executeList.length; ++r)
                                    e.executeList[r].tag == n && e.executeList.splice(r, 1);
                            e.executeList.push({
                                cb: t,
                                tag: n
                            }),
                            e.executing || e.executeNext()
                        }
                    };
                    return e
                }
                ,
                t.callSafe = r,
                t.handleException = function(n, o, a) {
                    18 == n.code ? r(o, t.error(e.BWDS_ERROR_SECURITY, "AsyncBWDS Security Error: problem when accessing: " + JSON.stringify(n))) : r(o, t.error(e.BWDS_ERROR_INTERNAL, "AsyncBWDS Error: problem when accessing: " + JSON.stringify(n))),
                    a && a()
                }
                ,
                t
            }(n(49632).A)
        },
        21854: function(e, t, n) {
            var r = function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : n(85119);
                function r(e) {
                    return "iBookWidgets/" + e
                }
                var o = e.createLogger("BWKSLocal");
                return {
                    getItem: function(e) {
                        return o.debug("getItem " + r(e)),
                        t.GetItem(r(e))
                    },
                    setItem: function(e, n) {
                        o.debug("setItem " + r(e));
                        try {
                            return t.SetItem(r(e), n),
                            !0
                        } catch (e) {
                            return !1
                        }
                    },
                    removeItem: function(e) {
                        o.debug("removeItem " + r(e)),
                        t.RemoveItem(r(e))
                    },
                    clear: function() {
                        o.debug("clear"),
                        t.Clear()
                    }
                }
            }
            .bind(null, n(26598));
            e.exports = {
                f: r
            }
        },
        85119: function(e) {
            e.exports = {
                GetItem: function(e) {
                    return window.localStorage.getItem(e)
                },
                RemoveItem: function(e) {
                    window.localStorage.removeItem(e)
                },
                SetItem: function(e, t) {
                    window.localStorage.setItem(e, t)
                },
                Clear: function() {
                    window.localStorage.clear()
                }
            }
        },
        78073: function(e, t, n) {
            var r, o, a, i, s, u = n(24507).loadJS;
            e.exports = (r = n(17496),
            o = n(61743),
            a = n(58065),
            i = n(5562),
            s = {},
            window.BWMATH = s,
            s.disabled = !1,
            s.nextUniqueId = 1,
            s.queue = [],
            s.customCssClasses = [],
            s.initialized = !1,
            s.initialize = function() {
                if (!1 === this.initialized && -1 !== o.getPlatform().indexOf("chrome")) {
                    var e = a(document.createElement("div")).attr("id", "chromemathjaxhack").css({
                        position: "absolute",
                        "pointer-events": "none"
                    }).prependTo(a("body"))
                      , t = a(document.createElement("canvas")).attr({
                        width: 300,
                        height: 300
                    }).appendTo(e)[0];
                    t.getContext("2d").clearRect(0, 0, t.width, t.height),
                    this.initialized = !0
                }
            }
            ,
            s.prepare = function(e) {
                if (this.disabled)
                    return e;
                var t = ""
                  , n = 0
                  , r = e.indexOf("$$")
                  , o = 0;
                for (r >= 0 && this.initialize(); r >= 0 && !(++o > 1e4); ) {
                    t += e.substring(n, r);
                    var a = e.indexOf("$$", r + 2);
                    if (a < 0) {
                        n = r;
                        break
                    }
                    t += '<span class="bwmathquill" style="direction:ltr; visibility: hidden">\\(' + e.substring(r + 2, a) + "\\)</span>",
                    n = a + 2,
                    r = e.indexOf("$$", n)
                }
                return t + e.substring(n)
            }
            ,
            s._createCssClass = function(e, t) {
                var n = document.createElement("style");
                n.type = "text/css",
                document.getElementsByTagName("head")[0].appendChild(n),
                (n.sheet || {}).insertRule ? n.sheet.insertRule("." + e + "{" + t + "}", 0) : (n.styleSheet || n.sheet).addRule(e, t),
                s.customCssClasses.push(e)
            }
            ,
            s._copyColorToStrokeAndFill = function(e) {
                var t = e.css("color");
                e.find("g[stroke]").attr("stroke", null).attr("fill", null);
                var n = "bw-math-jax-expression-" + s.nextUniqueId++
                  , r = "stroke: " + t + "; fill: " + t + ";";
                s._createCssClass(n, r),
                e.addClass(n)
            }
            ,
            s.schedule = function(e) {
                void 0 !== window.MathJax && window.MathJax.hasOwnProperty("Hub") && window.MathJax.Hub.hasOwnProperty("Queue") ? window.MathJax.Hub.Queue(e) : s.queue.push({
                    cb: e
                })
            }
            ,
            s.findMathElems = function(e) {
                return e.find(".bwmathquill")
            }
            ,
            s.allMathElems = function() {
                return a(".bwmathquill")
            }
            ,
            s.processMathElems = function(e) {
                var t = this.findMathElems(e);
                return t.length > 0 && (this.process(t),
                !0)
            }
            ,
            s.redrawMathElems = function(e) {
                this.redraw(this.findMathElems(e))
            }
            ,
            s.processAll = function() {
                this.process(this.allMathElems())
            }
            ,
            s.redrawAll = function() {
                this.redraw(this.allMathElems())
            }
            ,
            s.process = function(e) {
                this.disabled || e.each((function() {
                    if (void 0 !== window.MathJax && window.MathJax.hasOwnProperty("Hub") && window.MathJax.Hub.hasOwnProperty("Queue")) {
                        var e = this;
                        window.MathJax.Hub.Queue(["Typeset", window.MathJax.Hub, e], (function() {
                            s._copyColorToStrokeAndFill(a(e)),
                            a(e).css("visibility", "")
                        }
                        ))
                    } else
                        s.queue.push({
                            obj: a(this)
                        })
                }
                ))
            }
            ,
            s.processqueue = function() {
                for (; s.queue.length > 0; ) {
                    var e = s.queue.shift();
                    e.obj && s.process(e.obj),
                    e.cb && s.schedule(e.cb)
                }
            }
            ,
            window.MathJax = {
                showMathMenu: !1,
                skipStartupTypeset: !0
            },
            "ibw-platform-win32-preview" == o.getPlatform() && (window.MathJax.SVG = {
                scale: 200
            }),
            s.loadMathJax = function() {
                u("../external/MathJax24/MathJax.js?config=TeX-AMS-MML_SVG").then(s.processqueue.bind(s))
            }
            ,
            s.widgetUsesLatex = function(e) {
                return e.hasOwnProperty("modules") && -1 !== e.modules.indexOf("MathJax24")
            }
            ,
            s.scheduleOrExecuteIfNoLatex = function(e) {
                r.getConfig().then((function(t) {
                    s.widgetUsesLatex(t) ? s.schedule(e) : e()
                }
                ))
            }
            ,
            r.getConfig().then((function(e) {
                s.widgetUsesLatex(e) ? s.loadMathJax() : s.disabled = !0
            }
            )),
            s.redraw = function(e) {}
            ,
            i.CssUpdateCallbacks && i.CssUpdateCallbacks.push((function() {
                var e = s.customCssClasses;
                s.customCssClasses = [];
                for (var t = 0; t < e.length; ++t) {
                    var n = e[t]
                      , r = a("." + n);
                    r.removeClass(n),
                    s._copyColorToStrokeAndFill(r)
                }
            }
            )),
            s.isOnlyMath = function(e) {
                var t = e.trim();
                return t.startsWith("$$") && t.endsWith("$$") && -1 === t.substring(2, e.length - 4).indexOf("$$")
            }
            ,
            s)
        },
        36878: function(e) {
            e.exports = {
                GetItem: function(e) {
                    return sessionStorage.getItem(e)
                },
                RemoveItem: function(e) {
                    sessionStorage.removeItem(e)
                },
                SetItem: function(e, t) {
                    sessionStorage.setItem(e, t)
                },
                Clear: function() {
                    sessionStorage.clear()
                }
            }
        },
        35606: function(e, t, n) {
            n(73196);
            var r = n(50421).sanitizeNode;
            e.exports = function(e, t, o, a) {
                window.jQuery || (window.jQuery = t);
                try {
                    n(46910)
                } catch (e) {}
                function i(e) {
                    r(e[0])
                }
                return n(77262),
                {
                    createEditor: function(n, r) {
                        var s = t(document.createElement("div")).addClass("rteditor-toolbar-wrapper").appendTo(r)
                          , u = t(document.createElement("div")).addClass("bw-toolbar").attr({
                            id: n + "_toolbar",
                            "data-role": "editor-toolbar",
                            "data-target": "#" + n
                        }).appendTo(s)
                          , c = t(document.createElement("div")).addClass("rtwrapper").appendTo(r)
                          , l = t(document.createElement("div")).attr("id", n + "").addClass("rteditor").appendTo(c);
                        function d(e, n) {
                            var r;
                            n.hasOwnProperty("color") ? (r = t(document.createElement("a")).addClass("btn bw-toolbutton btn-color").append(t(document.createElement("div")).addClass("bw-icon bw-icon-fill-drop")).appendTo(e),
                            t(document.createElement("div")).addClass("bw-icon bw-icon-fill-drop-small").appendTo(r).css("color", n.color)) : r = t(document.createElement("a")).addClass("btn bw-toolbutton").append(t(document.createElement("div")).addClass(n.iconclass)).appendTo(e),
                            n.hasOwnProperty("id") && r.attr("id", n.id),
                            n.hasOwnProperty("data-edit") && r.attr("data-edit", n["data-edit"])
                        }
                        function f(e, n) {
                            for (var r = t(document.createElement("div")).addClass("bw-button-group").appendTo(e), o = 0; o < n.length; ++o)
                                d(r, n[o])
                        }
                        return l.on("paste", (function() {
                            setTimeout((function() {
                                i(l)
                            }
                            ))
                        }
                        )),
                        f(u, [{
                            id: "btn-clear",
                            title: "Clear",
                            iconclass: "bw-icon bw-icon-trash"
                        }]),
                        document.queryCommandSupported("undo") && -1 == e.getPlatform().indexOf("ipad") && f(u, [{
                            "data-edit": "undo",
                            title: "Undo",
                            iconclass: "bw-icon bw-icon-undo"
                        }, {
                            "data-edit": "redo",
                            title: "Redo",
                            iconclass: "bw-icon bw-icon-redo"
                        }]),
                        f(u, [{
                            "data-edit": "bold",
                            title: "Bold",
                            iconclass: "bw-icon bw-icon-bold"
                        }, {
                            "data-edit": "italic",
                            title: "Italic",
                            iconclass: "bw-icon bw-icon-italic"
                        }, {
                            "data-edit": "strikethrough",
                            title: "Strikethrough",
                            iconclass: "bw-icon bw-icon-strikethrough"
                        }, {
                            "data-edit": "underline",
                            title: "Underline)",
                            iconclass: "bw-icon bw-icon-underline"
                        }]),
                        f(u, [{
                            "data-edit": "insertunorderedlist",
                            title: "Bullet list",
                            iconclass: "bw-icon bw-icon-list-ul"
                        }, {
                            "data-edit": "insertorderedlist",
                            title: "Number list",
                            iconclass: "bw-icon bw-icon-list-ol"
                        }, {
                            "data-edit": "outdent",
                            title: "Reduce indent",
                            iconclass: "bw-icon bw-icon-outdent"
                        }, {
                            "data-edit": "indent",
                            title: "Indent",
                            iconclass: "bw-icon bw-icon-indent"
                        }]),
                        f(u, [{
                            "data-edit": "justifyleft",
                            title: "Align Left",
                            iconclass: "bw-icon bw-icon-align-left"
                        }, {
                            "data-edit": "justifycenter",
                            title: "Center)",
                            iconclass: "bw-icon bw-icon-align-center"
                        }, {
                            "data-edit": "justifyright",
                            title: "Align Right)",
                            iconclass: "bw-icon bw-icon-align-right"
                        }, {
                            "data-edit": "justifyfull",
                            title: "Justify",
                            iconclass: "bw-icon bw-icon-align-justify"
                        }]),
                        f(u, [{
                            "data-edit": "foreColor black",
                            title: "Color black",
                            color: "black"
                        }, {
                            "data-edit": "foreColor red",
                            title: "Color red",
                            color: "red"
                        }, {
                            "data-edit": "foreColor blue",
                            title: "Color blue",
                            color: "blue"
                        }, {
                            "data-edit": "foreColor green",
                            title: "Color green",
                            color: "green"
                        }]),
                        u.find("#btn-clear").click((function() {
                            a.showConfirmationDialog(o("Clear the text and start over?"), o("Are you sure?"), (function() {
                                t("#" + n).safeHtml("")
                            }
                            ), null, o("Yes, clear"), o("No, keep"))
                        }
                        )),
                        t("#" + n).wysiwyg({
                            toolbarSelector: "#" + n + "_toolbar[data-role=editor-toolbar]"
                        }),
                        l
                    },
                    sanitizeEditor: i
                }
            }(n(61743), n(58065), n(78514), n(77752))
        },
        84966: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                addYoutubePlayerIFrame: function() {
                    return c
                },
                adjustRichTextVideoSize: function() {
                    return w
                },
                createHtml5VideoPlayer: function() {
                    return v
                },
                getVimeoId: function() {
                    return o.oT
                },
                isVimeo: function() {
                    return o.PK
                },
                isYoutubeUrl: function() {
                    return o.Ty
                },
                loadYouTubePlayer: function() {
                    return h
                },
                playYouTube: function() {
                    return g
                },
                pollStartVideos: function() {
                    return m
                },
                resolveYoutubePlaceholders: function() {
                    return b
                },
                resolveYoutubePlaceholdersNew: function() {
                    return d
                }
            });
            var r = n(45027)
              , o = n(99588)
              , a = n(61743)
              , i = n(58065)
              , s = n.n(i)
              , u = n(120);
            function c(e, t) {
                var n = s()(e);
                if ("ibw-platform-win32-preview" === a.getPlatform() || "ibw-platform-osx-preview" === a.getPlatform())
                    return n.safeHtml("<br>Youtube videos are not supported in preview mode."),
                    void n.css({
                        "background-color": "black",
                        color: "white",
                        "text-weight": "bold",
                        "text-align": "center"
                    });
                var r = (0,
                u.A)("http://www.youtube.com/embed/") + (0,
                o.b3)(t) + (0,
                o.Ep)(t);
                s()(document.createElement("iframe")).attr({
                    seamless: "",
                    id: "playeriframe",
                    src: r
                }).appendTo(n)
            }
            var l = 0;
            function d(e) {
                e.find(".youtubeplaceholder").each((function() {
                    var e = s()(this);
                    if (void 0 === e.attr("id")) {
                        var t = "YTP_" + l++;
                        e.attr("id", t),
                        c("#" + t, e.attr("src"))
                    }
                }
                ))
            }
            var f = !1
              , p = [];
            function h(e, t, n) {
                var r = document.createElement("script");
                r.setAttribute("type", "text/javascript"),
                r.setAttribute("src", (0,
                u.A)("http://www.youtube.com/player_api")),
                document.getElementsByTagName("body")[0].appendChild(r)
            }
            function m() {
                if (void 0 !== window.YT && void 0 !== window.YT.Player)
                    for (var e = 0; e < p.length; ++e)
                        p[e]();
                else
                    setTimeout(m, 100)
            }
            function g(e, t) {
                var n = s()(e)
                  , i = n.attr("id");
                if (null == i && (i = (0,
                r.randomId)(20),
                n.attr("id", i)),
                "ibw-platform-win32-preview" === a.getPlatform() || "ibw-platform-osx-preview" === a.getPlatform())
                    return n.safeHtml("<br>Youtube videos are not supported in preview mode."),
                    void n.css({
                        "background-color": "black",
                        color: "white",
                        "text-weight": "bold",
                        "text-align": "center"
                    });
                function u() {
                    var n = s()(e)
                      , r = {
                        rel: 0
                    }
                      , a = (0,
                    o.I5)(t);
                    0 !== a && (r.start = a);
                    var u = (0,
                    o.fP)(t);
                    0 !== u && (r.end = u);
                    var c = (0,
                    o.Me)(t);
                    null != c && (r.cc_lang_pref = c);
                    var l = (0,
                    o.vB)(t);
                    null != l && (r.cc_load_policy = l);
                    var d = (0,
                    o.b3)(t);
                    new window.YT.Player(i,{
                        height: n.height(),
                        width: n.width(),
                        videoId: d,
                        playerVars: r
                    })
                }
                void 0 !== window.YT && void 0 !== window.YT.Player ? u() : (p.push(u),
                f || (f = "true",
                h(),
                setTimeout(m, 100)))
            }
            function v(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null
                  , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null
                  , r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "video/mp4"
                  , o = s()(document.createElement("video")).attr({
                    controls: "",
                    preload: "auto",
                    poster: ""
                });
                return null != t && o.attr("width", t),
                null != n && o.attr("height", n),
                s()(document.createElement("source")).attr({
                    src: e,
                    type: r
                }).appendTo(o),
                o
            }
            function w(e) {
                "0px" === e.css("width") && null == e.css("float") || "none" === e.css("float") ? e.css({
                    width: "640px",
                    height: "400px",
                    "max-width": "90%"
                }) : e.css({
                    width: "320px",
                    height: "240px"
                })
            }
            function b(e) {
                function t(e, t) {
                    var n = t.width()
                      , r = t.height()
                      , o = s()(document.createElement("div")).addClass("videodiv").css({
                        width: n,
                        height: r
                    }).appendTo(t);
                    return s()(document.createElement("iframe")).attr({
                        frameborder: "0",
                        webkitAllowFullScreen: "",
                        mozallowfullscreen: "",
                        allowFullScreen: ""
                    }).css({
                        width: n,
                        height: r
                    }).appendTo(o).attr("src", e.trim()),
                    o
                }
                e.find(".youtubeplaceholder").each((function() {
                    var e = s()(this);
                    if (void 0 === e.attr("id")) {
                        var n = "YTP_" + l++;
                        e.attr("id", n);
                        var r = e.attr("src");
                        w(e),
                        (0,
                        o.oc)(r) ? g("#" + n, r) : (0,
                        o.PK)(r) ? function(e, n) {
                            t((0,
                            u.A)("http://player.vimeo.com/video") + "/" + (0,
                            o.oT)(e), n).addClass("bw-vimeo-wrapper")
                        }(r, s()("#" + n)) : (0,
                        o.a_)(r) ? function(e, n) {
                            t((0,
                            u.A)("http://giphy.com/embed") + "/" + (0,
                            o.XW)(e), n).addClass("bw-giphy-wrapper")
                        }(r, s()("#" + n)) : console.error("Unsupported video URL: " + r)
                    }
                }
                ))
            }
        },
        10910: function(e, t, n) {
            function r(e) {
                return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                r(e)
            }
            var o, a, i, s;
            e.exports = (o = n(26598),
            a = o.createLogger("CallbackBridge"),
            i = 1,
            (s = function() {
                this.id = i++,
                this.listening = !1,
                this.nextCallbackID = 1,
                this.callbacks = {},
                this.handleMessage = this._handleMessage.bind(this)
            }
            ).prototype.getMessagePrefix = function() {
                return "bw-CBBridge-" + this.id + "-"
            }
            ,
            s.prototype.startListening = function() {
                window.addEventListener("message", this.handleMessage)
            }
            ,
            s.prototype.stopListening = function() {
                window.removeEventListener("message", this.handleMessage)
            }
            ,
            s.prototype._handleMessage = function(e) {
                var t = this.getMessagePrefix();
                "object" === r(e.data) && "string" == typeof e.data.command && e.data.command.substr(0, t.length) === t && (e.data.hasOwnProperty("err") ? this.processCallback(e.data.command, e.data.err, e.data.data) : this.processCallback(e.data.command, e.data.arg))
            }
            ,
            s.prototype.registerCallbacks = function(e, t) {
                var n = "" + this.nextCallbackID++;
                return this.callbacks[n] = {
                    ok: e,
                    error: t
                },
                {
                    ok: this.getMessagePrefix() + n + "-ok",
                    error: this.getMessagePrefix() + n + "-error"
                }
            }
            ,
            s.prototype.registerCallback = function(e, t) {
                var n = "" + this.nextCallbackID++;
                return this.callbacks[n] = {
                    cb: e,
                    singleshot: !t
                },
                this.getMessagePrefix() + n + "-cb"
            }
            ,
            s.prototype.processCallback = function(e, t, n) {
                try {
                    var r = e.match(/bw-CBBridge-.*-(.*)-(ok|error|cb)$/);
                    if (r) {
                        var o, i = r[1], s = this.callbacks[i];
                        return s ? "cb" === r[2] ? ((o = s.cb)(t, n),
                        void (s.singleshot && delete this.callbacks[i])) : (o = "ok" === r[2] ? s.ok : s.error,
                        delete this.callbacks[i],
                        void o(t)) : void a.error("Cannot find callback with ID " + i + " Bridge " + this.id + this.callbacks)
                    }
                    a.error("Malformed callback: " + e)
                } catch (e) {
                    a.error(e)
                }
            }
            ,
            s)
        },
        33015: function(e, t, n) {
            var r = n(45250).map;
            e.exports = {
                url: function(e, t) {
                    var n = "js2objc://" + e;
                    return t && (n += "?" + r(t, (function(e, t) {
                        return encodeURIComponent(t) + "=" + encodeURIComponent(e)
                    }
                    )).join("&")),
                    n
                }
            }
        },
        33293: function(e, t, n) {
            e.exports = function(e, t, n) {
                "use strict";
                return function(e) {
                    return function(r, o, a, i) {
                        var s = e.QuestionTypeBase(r, o, a, i);
                        return s.isResource = !0,
                        s.check = function() {}
                        ,
                        s.renderTypeSpecificPart = function() {
                            var e = this;
                            this.div.addClass("audiorecorder").attr("aria-label", n("Audio recorder")),
                            this.recorder = t(this.div, (function(t) {
                                e.recorded = t.uri,
                                e.mimetype = t.mimetype,
                                e.updateState()
                            }
                            ))
                        }
                        ,
                        s.save = function() {
                            return this.recorded ? {
                                url: this.recorded,
                                mimetype: this.mimetype
                            } : null
                        }
                        ,
                        s.load = function(e) {
                            try {
                                this.recorder.setDataURIToLoad(e.url, e.mimetype),
                                this.recorded = e.url,
                                this.mimetype = e.mimetype
                            } catch (t) {
                                return console.error("Could not load audiorecording question data", e),
                                void console.error(t)
                            }
                        }
                        ,
                        s.clear = function() {
                            this.recorder.clear(),
                            this.recorded = null,
                            this.mimetype = ""
                        }
                        ,
                        s.cleanup = function() {
                            console.log("audiorecording cleanup"),
                            this.recorder.cleanup(),
                            this.recorder = null
                        }
                        ,
                        s.setReadOnly = function(e) {
                            this.recorder.setReadOnly(e)
                        }
                        ,
                        s.name = n("Audio recording question"),
                        s
                    }
                }
            }(n(58065), n(89195), n(78514), n(77752))
        },
        27761: function(e, t, n) {
            var r, o, a = n(78514);
            e.exports = (r = n(58065),
            o = n(98274),
            function(e) {
                return function(t, n, i, s, u) {
                    var c = e.QuestionTypeBase(t, n, i, s, u);
                    return c.getCheckInput = function() {
                        var e = [];
                        return this.div.find(".cs-input").each((function() {
                            e.push(r(this).val().trim())
                        }
                        )),
                        e
                    }
                    ,
                    c.setCorrection = function(n) {
                        var a = this.div.find(".cs-input")
                          , i = 0
                          , s = [];
                        "yes" === t["all-words-editable"] && o.processCorrectSentence(t.Sentence, !1, (function() {}
                        ), (function() {
                            s.push(!1)
                        }
                        ), (function() {
                            s.push(!0)
                        }
                        )),
                        a.each((function() {
                            var o = r(this).parent()
                              , a = n ? n.correctness[i] : null;
                            e.setTagValue(o, "cs-correct", ("yes" !== t["all-words-editable"] || s[i]) && 1 === a),
                            e.setTagValue(o, "cs-wrong", 0 === a || -1 === a),
                            ++i
                        }
                        ))
                    }
                    ,
                    c.processInputSentence = function(n) {
                        var a = r(document.createElement("div")).addClass("cs-sentence")
                          , i = this;
                        return o.processCorrectSentence(n, "yes" === t["all-words-editable"], (function(e) {
                            "\n" === e ? a.append("<br>") : a.append(e)
                        }
                        ), (function(e) {
                            return r(document.createElement("span")).addClass("cs-word").text(e).appendTo(a)
                        }
                        ), (function(t, n) {
                            var o = r(document.createElement("span")).append(r(document.createElement("span")).addClass("text").text(t)).addClass("cs-word").attr("original", t).appendTo(a)
                              , s = r(document.createElement("input")).attr("tabindex", "-1").addClass("cs-input").val(t).appendTo(o);
                            e.addSpellCheckAttrib(s),
                            e.createCorrectWrongMarker().appendTo(o),
                            e.data(o, "cs-correct-val", "true"),
                            s.bind("keyup", (function(e) {
                                13 === (void 0 !== e ? e : event).keyCode && r(this).blur()
                            }
                            )),
                            s.focus((function() {
                                s.parent().addClass("editing")
                            }
                            )),
                            s.blur((function() {
                                var e = r(this)
                                  , t = r(this).parent()
                                  , n = e.val().trim();
                                "" === n ? (t.addClass("empty"),
                                t.find(".text").text(t.attr("original"))) : (t.removeClass("empty"),
                                t.find(".text").text(n)),
                                t.addClass("cs-changed"),
                                i.updateState(),
                                t.removeClass("editing")
                            }
                            ))
                        }
                        )),
                        a
                    }
                    ,
                    c.renderTypeSpecificPart = function() {
                        this.processInputSentence(t.Sentence).appendTo(this.div);
                        var n = this;
                        "yes" !== t["all-words-editable"] && this.div.find(".cs-word").click((function() {
                            var t = r(this);
                            e.data(t, "cs-correct-val") || function(e, t, n) {
                                var o = e.offset();
                                o.top -= 30,
                                t.find(".cs-hint").remove();
                                var a = r(document.createElement("div")).addClass("cs-hint").text(n).appendTo(t).offset(o);
                                setTimeout(a.remove.bind(a), 2e3)
                            }(t, n.div, e.translate("This word is correct."))
                        }
                        ))
                    }
                    ,
                    c.save = function() {
                        var e = this.div.find(".cs-input")
                          , t = [];
                        return e.each((function() {
                            var e = r(this);
                            if (e.parent().hasClass("cs-changed")) {
                                var n = e.val();
                                t.push("" === n ? " " : n)
                            } else
                                t.push("")
                        }
                        )),
                        {
                            answers: t
                        }
                    }
                    ,
                    c.load = function(e) {
                        var n;
                        try {
                            n = e.answers;
                            var o = this.div.find(".cs-input")
                              , a = 0;
                            o.each((function() {
                                var e = r(this)
                                  , t = e.parent();
                                if ("" !== n[a]) {
                                    var o = t.find(".text");
                                    " " === n[a] ? (e.val(""),
                                    o.text(t.attr("original")),
                                    t.addClass("empty")) : (e.val(n[a]),
                                    o.text(n[a])),
                                    t.addClass("cs-changed")
                                }
                                ++a
                            }
                            ))
                        } catch (e) {
                            return void console.error("Could not load correct sentence question data", t)
                        }
                    }
                    ,
                    c.clear = function() {
                        var e = this.div.find(".cs-input")
                          , n = 0
                          , a = t;
                        o.processCorrectSentence(a.Sentence, "yes" === a["all-words-editable"], (function() {}
                        ), (function() {}
                        ), (function(t, o) {
                            var a = r(e[n++])
                              , i = a.parent();
                            a.val(t),
                            i.find(".text").text(t),
                            i.removeClass("cs-changed"),
                            i.removeClass("empty")
                        }
                        ))
                    }
                    ,
                    c.getCorrectAnswerString = function(t) {
                        var n = [];
                        return o.processCorrectSentence(t.Sentence, "yes" === t["all-words-editable"], (function(e) {
                            n.push(e)
                        }
                        ), (function(e) {
                            n.push(e)
                        }
                        ), (function(t, r) {
                            n.push('<span class="answer answer-in-text">' + e.textAnswerToDisplayString(r) + "</span>")
                        }
                        )),
                        n.join("")
                    }
                    ,
                    c.createExtraRationale = function(t) {
                        return e.translate("The answer:") + '<br><br><div class="the-answer-text">' + this.getCorrectAnswerString(t) + "</div>"
                    }
                    ,
                    c.name = a("Correct words in sentence"),
                    c
                }
            }
            )
        },
        5263: function(e, t, n) {
            var r = n(6322).setAutoDirectionIfRequired
              , o = n(45250)
              , a = n(62375)
              , i = n(1309).richTextAsHtml
              , s = n(84966)
              , u = n(50466)
              , c = n(17496);
            n(1420);
            var l, d, f, p, h = n(78514);
            e.exports = (l = n(58065),
            d = n(78073),
            f = n(98274),
            p = n(45027),
            function(e) {
                return function(t, n, m, g, v) {
                    var w = e.QuestionTypeBase(t, n, m, g, v);
                    return w.getCheckInput = function() {
                        var e = [];
                        return this.div.find(".dwis-box").each((function() {
                            var t = l(this).find(".dwis-word");
                            e.push(t.length > 0 ? t.attr("save").trim() : "")
                        }
                        )),
                        e
                    }
                    ,
                    w.setCorrection = function(t) {
                        var n = this.div.find(".dwis-box")
                          , r = 0;
                        n.each((function() {
                            var n = l(this)
                              , o = t ? t.correctness[r++] : null;
                            e.setTagValue(n, "dwis-correct", 1 === o),
                            e.setTagValue(n, "dwis-wrong", 0 === o || -1 === o)
                        }
                        ))
                    }
                    ,
                    w.createTextStr = function(t) {
                        var n = "";
                        return f.processDragWordsInSentence(i(t), (function(t, r, o) {
                            if (n += t,
                            r && "" !== r) {
                                var a = l(document.createElement("span")).addClass("dwis-box");
                                e.createCorrectWrongMarker().appendTo(a),
                                n += l("<div>").append(a).html()
                            }
                        }
                        )),
                        n
                    }
                    ,
                    w.createTextDiv = function(e) {
                        return l(document.createElement("div")).addClass("dwis-text").safeHtml(d.prepare(this.createTextStr(e)))
                    }
                    ,
                    w.getWords = function(e) {
                        var t = [];
                        return f.processDragWordsInSentence(i(e), (function(e, n, r) {
                            n && "" !== n && t.push(n)
                        }
                        )),
                        t
                    }
                    ,
                    w.createWordsDiv = function(e, t, n) {
                        var r = this.getWords(e);
                        if (t)
                            for (var o = 0; o < t.length; ++o)
                                r.push(t[o]);
                        r = p.shuffleArray(r, n);
                        var a = l(document.createElement("div")).addClass("dwis-words");
                        for (o = 0; o < r.length; ++o)
                            l(document.createElement("div")).safeHtml(d.prepare(r[o])).attr("save", r[o]).addClass("dwis-word").appendTo(a);
                        return a
                    }
                    ,
                    w.renderTypeSpecificPart = function(n) {
                        this.div.addClass("dwis-cover"),
                        this.createWordsDiv(i(t.Sentence), t.distractors, n).appendTo(this.div);
                        var o = c.getConfigSync()
                          , d = this.createTextDiv(i(this.data.Sentence)).appendTo(this.div);
                        u.processAudioTags(d),
                        s.resolveYoutubePlaceholders(d),
                        a.process(d);
                        var f = d.clone();
                        f.find(".dwis-box").remove(),
                        r(d, o.direction, f.text());
                        var p = this
                          , h = this.questionid;
                        this.div.find(".dwis-words, .dwis-box").droppable({
                            drop: function(e, t) {
                                var n = l(t.draggable)
                                  , r = l(this);
                                r.find(".dwis-word").appendTo(p.div.find(".dwis-words")),
                                n.prependTo(r)
                            },
                            tolerance: "intersect",
                            scope: h,
                            hoverClass: "dwis-hover"
                        });
                        var m, v, w = {}, b = {};
                        function y(e) {
                            var t = g.getScrollObject()
                              , n = g.getScrollObject();
                            b.down > 0 && (n.scrollTop = n.scrollTop + (b.down >> 1)),
                            b.up > 0 && (n.scrollTop = n.scrollTop - (b.up >> 1)),
                            b.left > 0 && (t.scrollLeft = t.scrollLeft - (b.left >> 1)),
                            b.right > 0 && (t.scrollLeft = t.scrollLeft + (b.right >> 1)),
                            (b.up > 0 || b.down > 0 || b.left > 0 || b.right > 0) && e() && setTimeout(y.bind(null, e), 100)
                        }
                        this.div.find(".dwis-word").draggable({
                            scope: h,
                            helper: "clone",
                            appendTo: p.div,
                            start: function(t, n) {
                                e.blurFocused();
                                var r = g.getScrollObject()
                                  , o = g.getScrollObject();
                                l(this).addClass("drag_placeholder"),
                                w = {
                                    top: l(o).offset().top + 50,
                                    bottom: l(o).offset().top + l(o).height() - 50,
                                    left: l(r).offset().left + 50,
                                    right: l(r).offset().left + l(r).width() - 50,
                                    scrollTop: o.scrollTop
                                },
                                m = !1,
                                v = !0
                            },
                            drag: function(e, t) {
                                var n = l(".ui-draggable-dragging");
                                function r() {
                                    var e = g.getScrollObject();
                                    n.setTranslate(0, e.scrollTop - w.scrollTop)
                                }
                                b.up = w.top - e.clientY,
                                b.down = e.clientY - w.bottom,
                                b.left = w.left - e.clientX,
                                b.right = e.clientX - w.right,
                                (b.up > 0 || b.down > 0 || b.left > 0 || b.right > 0) && !m ? (y((function() {
                                    return r(),
                                    v
                                }
                                )),
                                m = !0) : (r(),
                                m = !1)
                            },
                            stop: function(e, t) {
                                m = !1,
                                v = !1;
                                var n = l(this);
                                n.removeClass("drag_placeholder"),
                                n.css("position", "relative"),
                                n.offset(l(t.helper).offset()),
                                n.animate({
                                    top: 0,
                                    left: 0
                                }, p.updateState.bind(p))
                            }
                        })
                    }
                    ,
                    w.save = function() {
                        return {
                            answers: this.getCheckInput()
                        }
                    }
                    ,
                    w.load = function(e) {
                        this.clear();
                        try {
                            var t = e.answers
                              , n = 0
                              , r = this.div.find(".dwis-box")
                              , o = this.div.find(".dwis-words .dwis-word");
                            r.each((function() {
                                var e = l(this);
                                if ("" !== t[n])
                                    for (var r = 0; r < o.length; ++r) {
                                        var a = l(o[r]);
                                        if (a.attr("save").trim() === t[n].trim()) {
                                            a.prependTo(e),
                                            o.splice(r, 1);
                                            break
                                        }
                                    }
                                ++n
                            }
                            ))
                        } catch (e) {
                            console.error("Could not load drag words in sentence data")
                        }
                    }
                    ,
                    w.clear = function() {
                        var e = this
                          , t = o.map(this.div.find(".dwis-box .dwis-word"), (function(e) {
                            return e
                        }
                        ));
                        p.shuffleArray(t),
                        o.each(t, (function(t) {
                            l(t).appendTo(e.div.find(".dwis-words"))
                        }
                        ))
                    }
                    ,
                    w.getCorrectAnswerString = function(e) {
                        var t = [];
                        return f.processDragWordsInSentence(i(e.Sentence), (function(e, n, r) {
                            t.push(d.prepare(e)),
                            n && "" !== n && t.push("<span class='answer answer-in-text'>" + d.prepare(n) + "</span>")
                        }
                        )),
                        t.join("")
                    }
                    ,
                    w.setReadOnly = function(e) {
                        this.div.find(".dwis-word").draggable(e ? "disable" : "enable")
                    }
                    ,
                    w.createExtraRationale = function(t) {
                        return e.translate("The answer:") + '<br><br><div class="the-answer-text">' + this.getCorrectAnswerString(t) + "<br><br></div>"
                    }
                    ,
                    w.name = h("Drag words in sentence"),
                    w
                }
            }
            )
        },
        77585: function(e, t, n) {
            var r, o, a, i, s, u = n(45250), c = u.map, l = u.isEqual, d = n(78193), f = n(78514), p = n(84966), h = n(50466), m = n(1309).richTextAsHtml;
            e.exports = (r = n(17496),
            o = n(62375),
            a = n(58065),
            i = n(78073),
            s = n(98274),
            function(e) {
                return function(t, n, u, g, v) {
                    var w = e.QuestionTypeBase(t, n, u, g, v)
                      , b = r.getConfigSync();
                    return w.getCheckInput = function() {
                        return c(this.div.find(".eq-field .flex-math"), (function(e) {
                            return d.latex(a(e))
                        }
                        ))
                    }
                    ,
                    w.setCorrection = function(t) {
                        var n = this.div.find(".eq-field")
                          , r = 0;
                        n.each((function() {
                            var n = a(this)
                              , o = t ? t.correctness[r++] : null;
                            e.setTagValue(n, "eq-correct", 1 === o),
                            e.setTagValue(n, "eq-wrong", 0 === o || -1 === o),
                            e.setTagValue(n, "eq-open", -2 === o)
                        }
                        ))
                    }
                    ,
                    w.renderTypeSpecificPart = function() {
                        var n = this;
                        this.div.addClass("eq-cover");
                        var r = g.widgetstorage.createThrottler(this.updateState.bind(this))
                          , u = [];
                        s.processEquations(m(t.Sentence), (function(e, t, n) {
                            u.push(i.prepare(e)),
                            null != t && u.push('<span class="eq-field"></span>')
                        }
                        ));
                        var c = a(document.createElement("div")).addClass("eq-text").safeHtml(u.join("")).appendTo(this.div);
                        h.processAudioTags(c),
                        p.resolveYoutubePlaceholders(c),
                        o.process(c),
                        c.find(".eq-field").each((function(o, i) {
                            var s = a(i);
                            d.create(s, d.fromConfig(t.latexeditor, b.equation_editor), (function() {
                                l(n.state.answer, n.save()) || r.trigger()
                            }
                            )),
                            e.createCorrectWrongMarker().appendTo(s)
                        }
                        ))
                    }
                    ,
                    w.save = function() {
                        return {
                            answers: this.getCheckInput()
                        }
                    }
                    ,
                    w.load = function(e) {
                        this.clear();
                        try {
                            var t = e.answers
                              , n = 0;
                            this.div.find(".eq-field .flex-math").each((function() {
                                d.latex(a(this), t.length > 0 ? t[n] : ""),
                                ++n
                            }
                            ))
                        } catch (e) {
                            console.error("Could not load equations")
                        }
                    }
                    ,
                    w.getEquations = function(e) {
                        var t = [];
                        return s.processEquations(m(e), (function(e, n, r) {
                            null != n && (n.startsWith("$$") && (n = n.substring(2)),
                            n.endsWith("$$") && (n = n.substring(0, n.length - 2)),
                            t.push(n))
                        }
                        )),
                        t
                    }
                    ,
                    w.clear = function() {
                        this.div.find(".eq-field .flex-math").each((function() {
                            d.clear(a(this))
                        }
                        ))
                    }
                    ,
                    w.getCorrectAnswerString = function(e) {
                        var t = [];
                        return s.processEquations(m(e.Sentence), (function(e, n, r) {
                            t.push(i.prepare(e)),
                            null != n && t.push("<span class='eq-inserted'>" + ("" === n ? "_____" : i.prepare(c(n.split("##"), (function(e) {
                                return function(e) {
                                    return (e.startsWith("$$") ? "" : "$$") + e + (e.endsWith("$$") ? "" : "$$")
                                }(e.trim())
                            }
                            )).join(" / "))) + "</span>")
                        }
                        )),
                        t.join("")
                    }
                    ,
                    w.createExtraRationale = function(t) {
                        return e.translate("The answer:") + "<br><br>" + this.getCorrectAnswerString(t) + "<br><br>"
                    }
                    ,
                    w.repaint = function() {
                        this.div.find(".eq-field .flex-math").each((function() {
                            d.redraw(a(this))
                        }
                        ))
                    }
                    ,
                    w.onResize = w.repaint,
                    w.name = f("Equations"),
                    w
                }
            }
            )
        },
        79085: function(e, t, n) {
            var r, o, a, i, s, u, c = n(45250), l = c.map, d = c.each, f = c.filter, p = c.findIndex, h = n(78514), m = n(89088);
            n(1420),
            e.exports = (r = n(58065),
            o = n(98274),
            a = n(45027),
            i = n(16806),
            s = n(50466),
            u = n(78073),
            function(e) {
                return function(t, n, c, g, v) {
                    var w = e.QuestionTypeBase(t, n, c, g, v);
                    function b(e) {
                        return l(e.groups || [], (function(e) {
                            return e.elements || []
                        }
                        ))
                    }
                    function y(e) {
                        return [].concat.apply([], b(e))
                    }
                    function C(e) {
                        return l(y(e), (function(e) {
                            return [e]
                        }
                        ))
                    }
                    return w.getCheckInput = function() {
                        var t = this.div;
                        return l(t.find(".ge-box"), (function(t) {
                            return l(r(t).find(".ge-element"), (function(t) {
                                return JSON.parse(e.data(r(t), "element"))
                            }
                            ))
                        }
                        ))
                    }
                    ,
                    w.audioelements = {},
                    w.getAudioElement = function(e) {
                        if (this.audioelements.hasOwnProperty(e))
                            return this.audioelements[e];
                        var t = s.addElement(e, "body");
                        return w.audioelements[e] = t,
                        t
                    }
                    ,
                    w.setCorrection = function(n) {
                        if ("each" === t.policy) {
                            if (n) {
                                var o = this.div.find(".ge-box")
                                  , a = 0;
                                o.each((function() {
                                    var t = r(this).find(".ge-element")
                                      , o = n.answerItemCorrectness[a++]
                                      , i = 0;
                                    t.each((function() {
                                        var t = r(this)
                                          , n = o[i++];
                                        e.setTagValue(t, "cs-correct", 1 === n),
                                        e.setTagValue(t, "ge-correct", 1 === n),
                                        e.setTagValue(t, "cs-wrong", 0 === n || -1 === n),
                                        e.setTagValue(t, "ge-wrong", 0 === n || -1 === n)
                                    }
                                    ))
                                }
                                ))
                            }
                        } else
                            o = this.div.find(".ge-box"),
                            a = 0,
                            o.each((function() {
                                var t = r(this)
                                  , o = n ? n.answerCorrectness[a++] : null;
                                e.setTagValue(t, "ge-correct", 1 === o),
                                e.setTagValue(t, "ge-wrong", 0 === o || -1 === o)
                            }
                            )),
                            this.div.find(".ge-element .cr-marker").each((function() {
                                r(this).hide()
                            }
                            ))
                    }
                    ,
                    w.makeElementsDraggable = function() {
                        var t, n, o = this, a = this.questionid, i = {}, s = {};
                        function u(e) {
                            var t = g.getScrollObject()
                              , n = g.getScrollObject();
                            s.down > 0 && (n.scrollTop = n.scrollTop + (s.down >> 1)),
                            s.up > 0 && (n.scrollTop = n.scrollTop - (s.up >> 1)),
                            s.left > 0 && (t.scrollLeft = t.scrollLeft - (s.left >> 1)),
                            s.right > 0 && (t.scrollLeft = t.scrollLeft + (s.right >> 1)),
                            (s.up > 0 || s.down > 0 || s.left > 0 || s.right > 0) && e() && setTimeout(u.bind(null, e), 100)
                        }
                        var c = this.div;
                        c.find(".ge-element").draggable({
                            scope: a,
                            helper: "clone",
                            appendTo: o.div,
                            delay: 300,
                            start: function(o, a) {
                                e.blurFocused();
                                var s = g.getScrollObject()
                                  , u = g.getScrollObject();
                                r(this).addClass("drag_placeholder"),
                                i = {
                                    top: r(u).offset().top + 50,
                                    bottom: r(u).offset().top + r(u).height() - 50,
                                    left: r(s).offset().left + 50,
                                    right: r(s).offset().left + r(s).width() - 50,
                                    scrollTop: u.scrollTop
                                },
                                t = !1,
                                n = !0
                            },
                            drag: function(e, o) {
                                var a = r(".ui-draggable-dragging");
                                function c() {
                                    var e = g.getScrollObject();
                                    a.setTranslate(0, e.scrollTop - i.scrollTop)
                                }
                                s.up = i.top - e.clientY,
                                s.down = e.clientY - i.bottom,
                                s.left = i.left - e.clientX,
                                s.right = e.clientX - i.right,
                                (s.up > 0 || s.down > 0 || s.left > 0 || s.right > 0) && !t ? (u((function() {
                                    return c(),
                                    n
                                }
                                )),
                                t = !0) : (c(),
                                t = !1)
                            },
                            stop: function(e, a) {
                                var i = r(a.helper.context);
                                i.parent().find(".ge-element").length > 1 && !a.helper.data("dropped") && o.makeBox().append(i).appendTo(c);
                                var s = r(this);
                                t = !1,
                                n = !1,
                                s.removeClass("drag_placeholder"),
                                s.css("position", "relative"),
                                s.offset(r(a.helper).offset()),
                                s.animate({
                                    top: 0,
                                    left: 0
                                }, o.updateState.bind(o))
                            }
                        })
                    }
                    ,
                    w.makeBox = function() {
                        var t = this.questionid;
                        return r(document.createElement("div")).addClass("ge-box").append(e.createCorrectWrongMarker()).droppable({
                            drop: function(e, t) {
                                t.helper.data("dropped", !0);
                                var n = r(t.draggable)
                                  , o = n.parent()
                                  , a = r(this);
                                n.appendTo(a),
                                0 === o.find(".ge-element").length && o.remove()
                            },
                            tolerance: "intersect",
                            scope: t,
                            hoverClass: "ge-hover"
                        })
                    }
                    ,
                    w.makeElement = function(e) {
                        if ("Word" === e.Type)
                            return r(document.createElement("div")).html(u.prepare(e.word));
                        if ("Image" === e.Type) {
                            var t = r(document.createElement("div")).addClass("ge-element-img")
                              , n = i.create({
                                img: e.image,
                                disable_press: !0,
                                loadcb: function(e) {
                                    var t = e.target;
                                    t.naturalWidth > t.naturalHeight ? n.css("width", Math.min(t.naturalWidth, 100) + "px") : n.css("width", t.naturalWidth / t.naturalHeight * 100 + "px")
                                }
                            });
                            return t.append(n),
                            t
                        }
                        if ("Audio" === e.Type) {
                            var o = r(document.createElement("div")).addClass("bw-button audiobutton toolbutton").append(r(document.createElement("div")).addClass("bw-icon-large bw-icon-music-play-2"));
                            if (e.audio) {
                                var a = this.getAudioElement(e.audio);
                                return o.clickOnDraggable(a.toggle.bind(a))
                            }
                            return r(document.createElement("div")).addClass("bw-icon-large noAudio-icon")
                        }
                        return r()
                    }
                    ,
                    w.setGroups = function(t) {
                        var n = this
                          , r = this.div;
                        r.empty(),
                        d(t, (function(t) {
                            var a = n.makeBox().appendTo(r);
                            d(t, (function(t) {
                                var r = n.makeElement(t).append(e.createCorrectWrongMarker()).addClass("ge-element").appendTo(a);
                                return e.data(r, "element", JSON.stringify(o.cleanGroupElemPaths(t))),
                                r
                            }
                            ))
                        }
                        )),
                        this.makeElementsDraggable(r),
                        u.processMathElems(r)
                    }
                    ,
                    w.renderTypeSpecificPart = function(e) {
                        this.setGroups(a.shuffleArray(C(t), e))
                    }
                    ,
                    w.save = function() {
                        return {
                            answers: this.getCheckInput()
                        }
                    }
                    ,
                    w.sanitizeAndMapToConfigurationElements = function(e) {
                        var n = l(y(t), (function(e) {
                            return {
                                elem: e,
                                key: m(o.cleanGroupElemPaths(e))
                            }
                        }
                        ))
                          , r = f(l(e, (function(e) {
                            return f(l(e, (function(e) {
                                var t = p(n, {
                                    key: m(o.cleanGroupElemPaths(e))
                                });
                                return -1 === t ? null : n.splice(t, 1)[0].elem
                            }
                            )), (function(e) {
                                return null != e
                            }
                            ))
                        }
                        )), (function(e) {
                            return e.length > 0
                        }
                        ));
                        return d(n, (function(e) {
                            r.push([e.elem])
                        }
                        )),
                        r
                    }
                    ,
                    w.load = function(e) {
                        this.clear();
                        try {
                            var t = e.answers;
                            this.setGroups(this.sanitizeAndMapToConfigurationElements(t))
                        } catch (e) {
                            console.error("Could not load groups", e)
                        }
                    }
                    ,
                    w.clear = function(e) {
                        this.setGroups(a.shuffleArray(C(t)))
                    }
                    ,
                    w.setReadOnly = function(e) {
                        this.div.find(".ge-element").draggable(e ? "disable" : "enable")
                    }
                    ,
                    w.getCorrectGroups = function(e) {
                        var t = this
                          , n = r(document.createElement("div")).addClass("the-answer-text");
                        return d(b(e), (function(e) {
                            var o = r(document.createElement("div")).addClass("ge-box").appendTo(n);
                            d(e, (function(e) {
                                t.makeElement(e).addClass("ge-element").appendTo(o)
                            }
                            ))
                        }
                        )),
                        n
                    }
                    ,
                    w.createExtraRationaleJQuery = function(t) {
                        return r(document.createElement("div")).text(e.translate("The answer:")).append(document.createElement("br")).append(document.createElement("br")).append(this.getCorrectGroups(t)).append(document.createElement("br")).append(document.createElement("br"))
                    }
                    ,
                    w.name = h("Group items"),
                    w
                }
            }
            )
        },
        10304: function(e, t, n) {
            var r, o, a, i = n(51958).appSafeUnescape;
            e.exports = (r = n(58065),
            o = n(98274),
            a = n(78514),
            function(e) {
                return function(t, n, s, u, c) {
                    var l = e.QuestionTypeBase(t, n, s, u, c);
                    function d(e, n) {
                        return 0 === e ? n ? "" : "rgb(0, 0, 0, 0.08)" : "#" + (t.colors["c_" + ((e - 1) % 18 + 1)].substring(1) + Math.round(255 * Math.min(Math.max(.5, 0), 1)).toString(16).toUpperCase())
                    }
                    return l.getCheckInput = function() {
                        var e = this
                          , t = [];
                        return this.div.find(".mas-word").each((function() {
                            t.push(e.categories[parseInt(r(this).attr("data-marker") || "0")].id)
                        }
                        )),
                        t
                    }
                    ,
                    l.setCorrection = function(t, n) {
                        var a = this.getCheckInput()
                          , i = 0;
                        function s(t, n, r) {
                            var o = a[i];
                            1 === n && "" !== o || 0 === n || -1 === n && r ? 0 === t.find(".cr-marker").length && e.createCorrectWrongMarker().appendTo(t) : t.find(".cr-marker").remove(),
                            e.setTagValue(t, "mas-correct", 1 === n),
                            e.setTagValue(t, "mas-wrong", 0 === n || -1 === n)
                        }
                        var u = this.div.find(".mas-word")
                          , c = t ? "yes" === n.mark_individual_words ? t.wordcorrectness : t.correctness : null;
                        function l() {}
                        null != n ? o.processMarkSentence(n.Sentence, l, (function() {
                            s(r(u[i]), t ? c[i] : null, !1),
                            ++i
                        }
                        ), (function(e) {
                            "yes" === n.mark_individual_words ? o.processText(e.word, (function() {
                                s(r(u[i]), t ? c[i] : null, !0),
                                ++i
                            }
                            ), l) : (s(r(u[i]), t ? c[i] : null, !0),
                            ++i)
                        }
                        )) : (e.clearTag(u, "mas-correct"),
                        e.clearTag(u, "mas-wrong"))
                    }
                    ,
                    l.processInputSentence = function(e) {
                        var t = this
                          , n = 0
                          , a = r(document.createElement("div")).addClass("mas-sentence");
                        function i(e) {
                            return r(document.createElement("span")).attr("nr", ++n).addClass("mas-word").text(e).appendTo(a)
                        }
                        function s(e) {
                            a.append("\n" === e ? "<br>" : e)
                        }
                        return o.processMarkSentence(e, s, i, (function(e) {
                            if ("yes" !== t.data.mark_individual_words)
                                return i(e.word);
                            o.processText(e.word, i, s)
                        }
                        )),
                        a
                    }
                    ,
                    l.parseCategories = function(e, t) {
                        this.categorymap = {},
                        this.categorymap[""] = 0,
                        this.categories = [{
                            name: a("CLEAR"),
                            id: ""
                        }];
                        var n = 0;
                        if (e)
                            for (n = 0; n < e.length; ++n) {
                                var r = e[n].split("##")
                                  , s = i(r[0].trim())
                                  , u = i(r.length > 1 ? r[1].trim() : r[0].trim());
                                this.categories.push({
                                    name: s,
                                    id: u
                                }),
                                this.categorymap[u] = n + 1
                            }
                        var c = this;
                        o.processMarkSentence(t, (function() {}
                        ), (function() {}
                        ), (function(e) {
                            var t = e.type.trim();
                            c.categorymap.hasOwnProperty(t) || (c.categories.push({
                                name: t,
                                id: t
                            }),
                            c.categorymap[t] = ++n)
                        }
                        ))
                    }
                    ,
                    l.renderTypeSpecificPart = function() {
                        this.parseCategories(t.categories, t.Sentence);
                        for (var e = r(document.createElement("div")).addClass("mas-categories").appendTo(this.div), n = 0; n < this.categories.length; ++n) {
                            var o = r(document.createElement("div")).addClass("mas-category-wrapper").attr("data-marker", n).css("background-color", d(n, !1)).appendTo(e);
                            r(document.createElement("div")).addClass("mas-category").text(this.categories[n].name).appendTo(o)
                        }
                        this.processInputSentence(t.Sentence).appendTo(this.div);
                        var a = this;
                        function i(t) {
                            e.find(".selected").removeClass("selected"),
                            r(e.find(".mas-category-wrapper")[t]).addClass("selected"),
                            a.div.attr("data-mas-selected", t)
                        }
                        function s(e, t) {
                            if (e > t) {
                                var n = e;
                                e = t,
                                t = n
                            }
                            a.div.find(".mas-word").each((function() {
                                var n = r(this)
                                  , o = parseInt(n.attr("nr"));
                                r(this).toggleClass("selected", o >= e && o <= t)
                            }
                            ))
                        }
                        function u() {
                            a.div.find(".mas-word").removeClass("selected")
                        }
                        i(this.categories.length > 1 ? 1 : 0),
                        e.find(".mas-category-wrapper").tapOrClick((function() {
                            i(r(this).attr("data-marker"))
                        }
                        ));
                        var c = null;
                        function l() {
                            a.div.find(".mas-word.selection-start").removeClass("selection-start"),
                            c = null
                        }
                        function f() {
                            u(),
                            l(),
                            r("body").off("mouseup", f)
                        }
                        this.div.find(".mas-word").on("mousedown", (function() {
                            var e = r(this);
                            c = parseInt(e.attr("nr")),
                            e.addClass("selection-start"),
                            s(c, c),
                            r("body").on("mouseup", f)
                        }
                        )).on("mouseenter", (function() {
                            if (null !== c) {
                                var e = r(this);
                                s(c, parseInt(e.attr("nr")))
                            }
                        }
                        )).on("mouseleave", (function() {
                            null !== c && u()
                        }
                        )).on("mouseup", (function(t) {
                            if (t.stopPropagation(),
                            null !== c) {
                                var n = r(this);
                                !function(e, t, n) {
                                    if (e > t) {
                                        var o = e;
                                        e = t,
                                        t = o
                                    }
                                    a.div.find(".mas-word").each((function() {
                                        var o = r(this)
                                          , a = parseInt(o.attr("nr"));
                                        a >= e && a <= t && r(this).attr("data-marker", 0 === n ? null : n).css("background-color", d(n, !0))
                                    }
                                    ))
                                }(c, parseInt(n.attr("nr")), parseInt(e.find(".mas-category-wrapper.selected").attr("data-marker"))),
                                a.updateState(),
                                u(),
                                l()
                            }
                        }
                        ))
                    }
                    ,
                    l.save = function() {
                        return {
                            answers: this.getCheckInput()
                        }
                    }
                    ,
                    l.load = function(e) {
                        this.clear();
                        var n = this.div.find(".mas-word");
                        try {
                            var o = e.answers;
                            if (o.length === n.length)
                                for (var a = 0; a < o.length; ++a) {
                                    var i = this.categorymap[o[a]] || 0;
                                    r(n[a]).attr("data-marker", 0 === i ? null : i).css("background-color", d(i, !0))
                                }
                            else
                                console.error("Could not load mark sentence question data, wrong count")
                        } catch (e) {
                            console.error("Could not load mark sentence question data", t)
                        }
                    }
                    ,
                    l.clear = function() {
                        var e = this.div.find(".mas-word");
                        e.attr("data-marker", null),
                        e.css("background-color", "")
                    }
                    ,
                    l.getCorrectAnswerString = function(e) {
                        this.parseCategories(t.categories, t.Sentence);
                        var n = r(document.createElement("div")).addClass("mas-sentence")
                          , a = this;
                        return o.processMarkSentence(e.Sentence, (function(e) {
                            "\n" === e ? n.append("<br>") : n.append(e)
                        }
                        ), (function(e) {
                            n.append(e)
                        }
                        ), (function(e) {
                            r(document.createElement("span")).addClass("mas-word").text(e.word).attr("data-marker", a.categorymap[e.type]).css("background-color", d(a.categorymap[e.type], !0)).appendTo(n),
                            n.append(" ")
                        }
                        )),
                        n.append("<br><br>"),
                        n.html()
                    }
                    ,
                    l.createExtraRationale = function(t) {
                        return "<div class='the-answer' >" + e.translate("The answer:") + '<br><br><div class="the-answer-text">' + this.getCorrectAnswerString(t) + "</div></div>"
                    }
                    ,
                    l
                }
            }
            )
        },
        80105: function(e, t, n) {
            var r = n(51958).getDateString
              , o = n(45250).pick
              , a = n(14337).isLTI
              , i = n(4296).getParameters
              , s = function(e, t, n, s) {
                var u = s.bwConfig
                  , c = s.studentinfo
                  , l = s.tr
                  , d = u.getConfigSync()
                  , f = i();
                function p(e) {
                    return !e || 0 === e.length
                }
                function h(t) {
                    return t.indexOf("bookwidgets.com") >= 0 || t.indexOf("localhost") >= 0 ? {
                        "Bookwidgets-Platform": e.getPlatform()
                    } : {}
                }
                function m() {
                    return f.teacher_id
                }
                function g() {
                    return f.school_id
                }
                function v() {
                    return f.hasOwnProperty("wv")
                }
                return {
                    createStudentWorkSubmitter: function(s, w, b, y) {
                        var C = {
                            FLD_STUDENT_NAME: "#student",
                            FLD_STUDENT_ACCOUNT: "#student_account",
                            FLD_STUDENT_EMAIL: "#student_email",
                            FLD_STUDENT_ID: "#student_id",
                            FLD_STUDENT_CLASS_ID: "#student_class_id",
                            FLD_TEACHER_EMAIL: "#email",
                            FLD_YOUR_NAME: "#you",
                            FLD_YOUR_EMAIL: "#your_email",
                            FLD_TO_EMAIL: "#to_email"
                        }
                          , x = {};
                        x[C.FLD_STUDENT_NAME] = "student_name",
                        x[C.FLD_STUDENT_EMAIL] = "student_email",
                        x[C.FLD_STUDENT_ID] = "student_id",
                        x[C.FLD_STUDENT_CLASS_ID] = "student_class_id",
                        x[C.FLD_TEACHER_EMAIL] = "teacher_email",
                        x[C.FLD_YOUR_NAME] = "student_name",
                        x[C.FLD_YOUR_EMAIL] = "student_email",
                        x[C.FLD_TO_EMAIL] = "to_email";
                        var E = m()
                          , k = g();
                        C._postdata = {
                            test_name: s,
                            uuid2: b,
                            WA: y,
                            book_title: w,
                            submit_timestamp: (new Date).toISOString(),
                            submit_date: r(),
                            tzoffset: (new Date).getTimezoneOffset() / 60 * -1,
                            include_grading: !0,
                            submitted_via_shortcode: window.bwshortcode,
                            answers: []
                        },
                        "wv"in f && (C._postdata.wv = f.wv),
                        C._extradata = {},
                        C._answersComposer = void 0,
                        C._assetUploadAgenda = [],
                        C._eventCallbacks = {},
                        C._lastServerResponse = "",
                        C._lastServerData = null,
                        C._leftButtons = [],
                        C._rightButtons = [],
                        C._dialogOptions = {},
                        C._endpoint = "",
                        C._fieldSettings = {},
                        C.setCompanyInfo = function(e, t, n, r) {
                            C._postdata.company_name = e,
                            C._postdata.company_address = t,
                            C._postdata.company_phone = n,
                            C._postdata.company_website = r
                        }
                        ,
                        C.setIncludeGrading = function(e) {
                            C._postdata.include_grading = e ? "yes" : "no"
                        }
                        ,
                        C.setElapsedTime = function(e) {
                            C._postdata.time = e
                        }
                        ,
                        C.setEndpoint = function(e) {
                            C._endpoint = e
                        }
                        ,
                        C._storeField = function(e, t) {
                            var n = C._fieldSettings[e].isVisible
                              , r = C._fieldSettings[e].isEditable;
                            if (n && r) {
                                var o = x[e];
                                c.set(o, t)
                            }
                        }
                        ,
                        C._setStudentInfo = function(e, t, n, r) {
                            C._postdata.student_name = e,
                            C._postdata.student_id = t,
                            C._postdata.student_email = n,
                            C._postdata.student_class_id = r,
                            c.hasStudentAccount() && (C._postdata.student_userid = c.getStudentAccountUserId(),
                            C._postdata.student_name = c.getStudentAccountUserName(),
                            C._postdata.student_email = c.getStudentAccountEmail(),
                            C._postdata.student_id = c.getStudentAccountProviderHumanId(),
                            C._postdata.student_token = c.getStudentAccountToken());
                            var o = f.context_id;
                            o && (C._postdata.context_id = o),
                            E && (C._postdata.teacher_id = E),
                            f.course_id && (C._postdata.course_id = f.course_id),
                            k && (C._postdata.school_id = k),
                            C._storeField(C.FLD_STUDENT_NAME, e),
                            C._storeField(C.FLD_STUDENT_ID, t),
                            C._storeField(C.FLD_STUDENT_EMAIL, n),
                            C._storeField(C.FLD_STUDENT_CLASS_ID, r)
                        }
                        ,
                        C._setTeacherEmail = function(e) {
                            C._postdata.teacher_email = e,
                            C._storeField(C.FLD_TEACHER_EMAIL, e)
                        }
                        ,
                        C._setShareInfo = function(e, t, n, r) {
                            C._postdata.student_name = e,
                            C._postdata.student_email = t,
                            C._postdata.to_email = n,
                            C._postdata.message = r,
                            C._storeField(C.FLD_YOUR_NAME, e),
                            C._storeField(C.FLD_YOUR_EMAIL, t),
                            C._storeField(C.FLD_TO_EMAIL, n)
                        }
                        ,
                        C._setDownloadInfo = function(e, t, n, r) {
                            C._postdata.student_name = e,
                            C._storeField(C.FLD_YOUR_NAME, e)
                        }
                        ,
                        C.setAnswersComposer = function(e) {
                            C._answersComposer = e
                        }
                        ,
                        C.addExtraData = function(e) {
                            for (var t in e)
                                C._extradata[t] = e[t]
                        }
                        ,
                        C.scheduleAssetUpload = function(e, t, n) {
                            C._assetUploadAgenda.push({
                                assetFetcherCB: e,
                                assetUploadCompleteCB: t,
                                userdata: n
                            })
                        }
                        ,
                        C.configureFormField = function(e, t, n, r) {
                            C._fieldSettings[e] = {
                                isVisible: t,
                                isEditable: n,
                                defaultValue: r
                            }
                        }
                        ,
                        C.configureFormField(C.FLD_STUDENT_ACCOUNT, !0 === c.hasStudentAccount(), !1, c.getStudentAccountUserName() || ""),
                        C.configureFormField(C.FLD_STUDENT_NAME, !1 === c.hasStudentAccount() && "yes" == d.student_name_isVisible, "yes" == d.student_name_isEditable, p(d.student_name_defaultValue) && !p(f.default_student_name) ? f.default_student_name : d.student_name_defaultValue),
                        C.configureFormField(C.FLD_STUDENT_EMAIL, !1 === c.hasStudentAccount() && "yes" == d.student_email_isVisible, "yes" == d.student_email_isEditable, d.student_email_defaultValue),
                        C.configureFormField(C.FLD_STUDENT_ID, !1 === c.hasStudentAccount() && "yes" == d.student_id_isVisible, "yes" == d.student_id_isEditable, d.student_id_defaultValue);
                        var S = p(f.student_class_id) ? p(c.getStudentAccountClassName()) ? void 0 : c.getStudentAccountClassName() : f.student_class_id
                          , T = "yes" == d.student_class_id_isEditable && !S;
                        function _(e, n, r, o) {
                            var a, i = t(document.createElement("label"));
                            i.attr("for", n),
                            i.attr("id", n + "_label"),
                            i.text(e),
                            o.append(i),
                            "textarea" == r ? (a = t(document.createElement("textarea"))).attr("rows", 5) : ((a = t(document.createElement("input"))).attr("type", r),
                            a.on("focus", (function() {
                                this.value = this.value
                            }
                            ))),
                            a.attr("name", n),
                            a.attr("id", n),
                            a.attr("value", ""),
                            o.append(a)
                        }
                        function A(e) {
                            return e.split(",").length > 1
                        }
                        function O(t, n) {
                            var r = {
                                content: "",
                                ibw_platform: e.getPlatform()
                            };
                            for (var o in C._extradata)
                                r[o] = C._extradata[o];
                            void 0 === C._submitPreparer && (C._submitPreparer = function(e) {
                                e()
                            }
                            ),
                            C.showProgressDialog(n),
                            setTimeout((function() {
                                C._submitPreparer((function() {
                                    C.uploadAssets((function() {
                                        console.log("All assets uploaded, now sending answers"),
                                        C.composeAllAnswers(),
                                        r.content = JSON.stringify(C._postdata),
                                        t(r),
                                        C.trigger(C.EVT_AFTER_SEND),
                                        console.log("Submit complete")
                                    }
                                    ), (function() {
                                        console.log("Asset upload failed, aborting"),
                                        C.closeProgressDialog(),
                                        C.trigger(C.EVT_SUBMIT_FAILED),
                                        C.trigger(C.EVT_AFTER_SEND)
                                    }
                                    ))
                                }
                                ), (function(e) {
                                    console.log("Aborted by client: " + e),
                                    C.closeProgressDialog(),
                                    C._lastServerResponse = void 0,
                                    C.trigger(C.EVT_SUBMIT_FAILED),
                                    C.trigger(C.EVT_AFTER_SEND)
                                }
                                ))
                            }
                            ), 100)
                        }
                        function D() {
                            O(C.sendResults.bind(C), l("Sending, please wait..."))
                        }
                        function I() {
                            var e = t(this)
                              , r = e.find("#student").val()
                              , o = e.find("#student_id").val()
                              , a = e.find("#student_email").val()
                              , i = e.find("#student_class_id").val()
                              , s = e.find("#email").val();
                            if (!1 !== c.hasStudentAccount() || "" !== r) {
                                if (!E) {
                                    if (!(null != s && "" !== s || "yes" === d.teacher_email_isVisible && "yes" === d.teacher_email_isEditable || !1 !== v()))
                                        return void n.showAlert(l("This field is required:") + " " + l("Teacher Email"), l("Send Failed"));
                                    if (A(s))
                                        return void n.showAlert(l("You can't specify multiple addresses for field:") + " " + l("Teacher Email"), l("Send Failed"))
                                }
                                e.dialog("close"),
                                e.remove(),
                                C.trigger(C.EVT_BEFORE_SEND),
                                C._setStudentInfo(r, o, a, i),
                                C._setTeacherEmail(s),
                                D()
                            } else
                                n.showAlert(l("This field is required:") + " " + l("Student Name"), l("Send Failed"))
                        }
                        function P() {
                            var e = t(this)
                              , r = e.find("#you").val()
                              , o = e.find("#your_email").val()
                              , a = e.find("#to_email").val()
                              , i = e.find("#message").val();
                            "" !== r ? "" !== a ? (e.dialog("close"),
                            e.remove(),
                            C.trigger(C.EVT_BEFORE_SEND),
                            C._setShareInfo(r, o, a, i),
                            D()) : n.showAlert(l("This field is required:") + " " + l("To Email"), l("Send Failed")) : n.showAlert(l("This field is required:") + " " + l("Your Name"), l("Send Failed"))
                        }
                        function R() {
                            var e = t(this)
                              , r = e.find("#you").val();
                            "" !== r ? (e.dialog("close"),
                            e.remove(),
                            C.trigger(C.EVT_BEFORE_SEND),
                            C._setDownloadInfo(r),
                            O(C.generate.bind(C), l("Generating PDF, please wait..."))) : n.showAlert(l("This field is required:") + " " + l("Your Name"), l("Download Failed"))
                        }
                        return C.configureFormField(C.FLD_STUDENT_CLASS_ID, "yes" == d.student_class_id_isVisible, T, p(S) ? p(d.student_class_id_defaultValue) ? "" : d.student_class_id_defaultValue : S),
                        C.configureFormField(C.FLD_TEACHER_EMAIL, "yes" == d.teacher_email_isVisible && !E && !k, "yes" == d.teacher_email_isEditable, E || d.teacher_email_defaultValue),
                        C.configureFormField(C.FLD_YOUR_NAME, !0, !0, ""),
                        C.configureFormField(C.FLD_YOUR_EMAIL, !0, !0, ""),
                        C.configureFormField(C.FLD_TO_EMAIL, !0, !0, ""),
                        C.addButtonBeforeDefaultButtons = function(e, t) {
                            C._leftButtons.push({
                                text: e,
                                click: t
                            })
                        }
                        ,
                        C.addButtonAfterDefaultButtons = function(e, t) {
                            C._rightButtons.push({
                                text: e,
                                click: t
                            })
                        }
                        ,
                        C.addDialogOptions = function(e) {
                            for (var t in e)
                                C._dialogOptions[t] = e[t]
                        }
                        ,
                        C.setAsyncSubmitPreparer = function(e) {
                            C._submitPreparer = e
                        }
                        ,
                        C.EVT_BEFORE_SHOW = "beforeShow",
                        C.EVT_BEFORE_SEND = "beforeSend",
                        C.EVT_AFTER_SEND = "afterSend",
                        C.EVT_SUBMIT_SUCCEEDED = "submitSucceeded",
                        C.EVT_SUBMIT_FAILED = "submitFailed",
                        C.on = function(e, t) {
                            C._eventCallbacks[e] || (C._eventCallbacks[e] = []),
                            C._eventCallbacks[e].push(t)
                        }
                        ,
                        C.trigger = function(e) {
                            if (C._eventCallbacks[e])
                                for (var t = 0; t < C._eventCallbacks[e].length; ++t)
                                    C._eventCallbacks[e][t]()
                        }
                        ,
                        C._applyFormFieldSettings = function(e) {
                            if (0 != (i = t(e)).length) {
                                var n = t(e + "_label")
                                  , r = C._fieldSettings[e].isVisible
                                  , o = C._fieldSettings[e].isEditable
                                  , a = C._fieldSettings[e].defaultValue;
                                A(a) && (r && o ? function(e, n) {
                                    for (var r = t(e), o = t(document.createElement("select")).attr({
                                        id: r.attr("id"),
                                        name: r.attr("name")
                                    }), a = 0; a < n.length; ++a)
                                        t(document.createElement("option")).safeHtml(n[a]).appendTo(o);
                                    r.replaceWith(o),
                                    r.remove()
                                }(e, function(e) {
                                    for (var t = e.split(","), n = [], r = 0; r < t.length; ++r)
                                        n.push(t[r].trim());
                                    return n
                                }(a)) : a = a.split(",")[0]);
                                var i = t(e);
                                if (n = t(e + "_label"),
                                !1 === r && (i.hide(),
                                n.hide()),
                                !1 === o && i.attr("disabled", "true"),
                                i.val(a),
                                r && o) {
                                    var s = x[e];
                                    c.get(s, (function(e) {
                                        null != e && "" !== e && i.val(e)
                                    }
                                    ))
                                }
                            }
                        }
                        ,
                        C.showSendDialog = function(e, r) {
                            c.initialized().done((function() {
                                if (c.isCoAccount())
                                    n.showAlert(l("Submit is disabled because you're not logged in with a student account. e.g. a parent account."), l("Can't submit"));
                                else {
                                    var o = function() {
                                        t("#student-work-submitter-dialog").remove();
                                        var e = t(document.createElement("div"));
                                        e.attr("id", "student-work-submitter-dialog"),
                                        e.css("display", "none");
                                        var n = t(document.createElement("div"));
                                        return n.attr("id", "student-work-submitter-dialog-info"),
                                        e.append(n),
                                        _("", "student_account", "text", e),
                                        _(l("Student Name"), "student", "text", e),
                                        _(l("Student ID"), "student_id", "text", e),
                                        _(l("Student Email"), "student_email", "email", e),
                                        _(l("Class ID"), "student_class_id", "text", e),
                                        _(l("Teacher Email"), "email", "email", e),
                                        t("body").append(e),
                                        e
                                    }()
                                      , s = !1;
                                    for (var u in C._fieldSettings)
                                        C._applyFormFieldSettings(u),
                                        s = s || C._fieldSettings[u].isVisible && C._fieldSettings[u].isEditable && t(u).length > 0;
                                    e ? t("#student-work-submitter-dialog-info").safeHtml(e).removeClass("hidden").addClass("dialog-warning") : t("#student-work-submitter-dialog-info").addClass("hidden").removeClass("dialog-warning");
                                    for (var d = [], f = 0; f < C._leftButtons.length; ++f)
                                        d.push(C._leftButtons[f]);
                                    for (d.push({
                                        text: l("Send"),
                                        click: I
                                    }),
                                    f = 0; f < C._rightButtons.length; ++f)
                                        d.push(C._rightButtons[f]);
                                    var p = {
                                        dialogClass: "bw-dialog bw-student-work-submitter",
                                        modal: !0,
                                        title: l("Send Answer"),
                                        width: Math.min(450, .9 * t(window).width()) + "px",
                                        buttons: d
                                    };
                                    for (var h in C._dialogOptions)
                                        p[h] = C._dialogOptions[h];
                                    o.dialog(p);
                                    var m = i(!1).toplevel;
                                    s || 1 !== d.length || !r || !a() || m || I.call(o)
                                }
                            }
                            ))
                        }
                        ,
                        C.showShareDialog = function(e) {
                            console.log("showShare"),
                            c.initialized().done((function() {
                                var n = function() {
                                    t("#student-work-share-dialog").remove();
                                    var e = t(document.createElement("div"));
                                    e.attr("id", "student-work-share-dialog"),
                                    e.css("display", "none");
                                    var n = t(document.createElement("div"));
                                    return n.attr("id", "student-work-share-dialog-info"),
                                    e.append(n),
                                    _(l("Your Name"), "you", "text", e),
                                    _(l("Your Email"), "your_email", "email", e),
                                    _(l("To Email"), "to_email", "email", e),
                                    _(l("Optional Message"), "message", "textarea", e),
                                    t("body").append(e),
                                    e
                                }();
                                for (var r in C._fieldSettings)
                                    C._applyFormFieldSettings(r);
                                e ? (t("#student-work-share-dialog-info").safeHtml(e),
                                t("#student-work-share-dialog-info").removeClass("hidden")) : t("#student-work-share-dialog-info").addClass("hidden");
                                for (var o = [], a = 0; a < C._leftButtons.length; ++a)
                                    o.push(C._leftButtons[a]);
                                for (o.push({
                                    text: l("Send"),
                                    click: P
                                }),
                                a = 0; a < C._rightButtons.length; ++a)
                                    o.push(C._rightButtons[a]);
                                var i = {
                                    dialogClass: "bw-dialog bw-student-work-submitter",
                                    modal: !0,
                                    title: l("Share"),
                                    width: Math.min(450, .9 * t(window).width()) + "px",
                                    buttons: o
                                };
                                for (var s in C._dialogOptions)
                                    i[s] = C._dialogOptions[s];
                                n.dialog(i)
                            }
                            ))
                        }
                        ,
                        C.showDownloadDialog = function(e) {
                            console.log("showDownload"),
                            c.initialized().done((function() {
                                var n = function() {
                                    t("#student-work-download-dialog").remove();
                                    var e = t(document.createElement("div"));
                                    e.attr("id", "student-work-download-dialog"),
                                    e.css("display", "none");
                                    var n = t(document.createElement("div"));
                                    return n.attr("id", "student-work-download-dialog-info"),
                                    e.append(n),
                                    _(l("Your Name"), "you", "text", e),
                                    t("body").append(e),
                                    e
                                }();
                                for (var r in C._fieldSettings)
                                    C._applyFormFieldSettings(r);
                                e ? (t("#student-work-download-dialog-info").safeHtml(e + "<br>"),
                                t("#student-work-download-dialog-info").removeClass("hidden")) : t("#student-work-download-dialog-info").addClass("hidden");
                                for (var o = [], a = 0; a < C._leftButtons.length; ++a)
                                    o.push(C._leftButtons[a]);
                                for (o.push({
                                    text: l("Generate"),
                                    click: R
                                }),
                                a = 0; a < C._rightButtons.length; ++a)
                                    o.push(C._rightButtons[a]);
                                var i = {
                                    dialogClass: "bw-student-work-submitter",
                                    modal: !0,
                                    title: l("Download as PDF"),
                                    width: Math.min(450, .9 * t(window).width()) + "px",
                                    buttons: o
                                };
                                for (var s in C._dialogOptions)
                                    i[s] = C._dialogOptions[s];
                                n.dialog(i)
                            }
                            ))
                        }
                        ,
                        C.showProgressDialog = function(e) {
                            (function() {
                                var e = "student-work-submitter-progress-dialog";
                                t("#" + e).remove();
                                var n = t(document.createElement("div"));
                                n.attr("id", e),
                                n.css("display", "none");
                                var r = t(document.createElement("div"));
                                r.addClass("spinner"),
                                n.append(r);
                                var o = t(document.createElement("div"));
                                return o.addClass("progress-message"),
                                o.text(l("Uploading your answers...")),
                                n.append(o),
                                t("body").append(n),
                                n
                            }
                            )().dialog({
                                modal: !0,
                                dialogClass: "no-close bw-dialog",
                                title: e
                            })
                        }
                        ,
                        C.updateProgressMessage = function(e) {
                            t(".progress-message").text(e)
                        }
                        ,
                        C.closeProgressDialog = function() {
                            var e = "student-work-submitter-progress-dialog";
                            t("#" + e).dialog("close"),
                            t("#" + e).remove()
                        }
                        ,
                        C.uploadAssets = function(e, t) {
                            var n = C._assetUploadAgenda
                              , r = null
                              , o = 0
                              , a = n.length;
                            (r = function() {
                                if (n.length > 0) {
                                    var i = n.shift()
                                      , s = i.assetFetcherCB(i.userdata);
                                    console.log("Uploading", s),
                                    ++o,
                                    s ? (C.updateProgressMessage(("audio/mpeg" === s.mimetype ? l("Uploading audio") : l("Uploading image")) + " " + o + " / " + a),
                                    C.sendAsset(s, (function(e) {
                                        i.assetUploadCompleteCB(e, i.userdata),
                                        r()
                                    }
                                    ), (function() {
                                        C._lastServerResponse = void 0,
                                        t()
                                    }
                                    ))) : r()
                                } else
                                    C.updateProgressMessage(l("Uploading your answers...")),
                                    e()
                            }
                            )()
                        }
                        ,
                        C.sendAssetAjax = function(e, n, r) {
                            var o = {
                                content: JSON.stringify({
                                    is_asset: !0,
                                    asset_data: e.data,
                                    asset_mimetype: e.mimetype
                                })
                            };
                            for (var a in C._extradata)
                                o[a] = C._extradata[a];
                            t.ajax({
                                type: "POST",
                                headers: h(C._endpoint),
                                url: C._endpoint,
                                data: o,
                                success: function(e) {
                                    n(e)
                                },
                                error: function() {
                                    r()
                                }
                            })
                        }
                        ,
                        C.genRandomString = function(e) {
                            for (var t = "", n = 0; n < e; n++)
                                t += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62 * Math.random()));
                            return t
                        }
                        ,
                        C.sendAsset = C.sendAssetAjax,
                        C.composeAllAnswers = function() {
                            C._postdata.answers = u.inverseFixResourcePaths(C._answersComposer())
                        }
                        ,
                        C.sendAudioPacket = function(e, n, r, o, a) {
                            var i = C._endpoint + ".m4a?t=" + e + "&d=" + n + "&p=" + r
                              , s = new Audio;
                            t(s).on("loadedmetadata", (function() {
                                var e = Math.floor(10 * t(this)[0].duration);
                                o(e)
                            }
                            )),
                            t(s).on("error", (function() {
                                console.log("Audio package load failure: " + s.error.code),
                                a("Network or server problem")
                            }
                            )),
                            s.src = i
                        }
                        ,
                        C.getPacket = function(e) {
                            for (var t = 0, n = e.length, r = 0, o = "", a = ""; ; ) {
                                var i = n - t;
                                if (0 === i)
                                    break;
                                var s = e.substr(t, 100)
                                  , u = encodeURIComponent(s)
                                  , c = u.length;
                                if (r + c > 1900) {
                                    a = e.substr(t);
                                    break
                                }
                                t += i < 100 ? i : 100,
                                o += u,
                                r += c
                            }
                            return {
                                packet: o,
                                remaining: a
                            }
                        }
                        ,
                        C.sendAudio = function(e, t, n, r, o) {
                            void 0 === r && (r = C.genRandomString(20)),
                            void 0 === o && (o = 1);
                            var a, i = C.getPacket(e);
                            "" === i.remaining ? (a = t,
                            o = 0) : a = function(e, t, n) {
                                return function(a) {
                                    0 === a ? C.sendAudio(e, t, n, r, o + 1) : n("Wrong server response")
                                }
                            }(i.remaining, t, n),
                            C.sendAudioPacket(r, i.packet, o, a, n)
                        }
                        ,
                        C.sendResultsAudio = function(e) {
                            C.sendAudio(JSON.stringify(e), (function(e) {
                                switch (console.log("sendAudio success handler called"),
                                C.closeProgressDialog(),
                                e) {
                                case 0:
                                    console.error("Oops, server expected another packet..."),
                                    C._lastServerResponse = void 0,
                                    C.trigger(C.EVT_SUBMIT_FAILED);
                                    break;
                                case 1:
                                    console.log("That's a success!"),
                                    C.trigger(C.EVT_SUBMIT_SUCCEEDED);
                                    break;
                                case 2:
                                    console.error("Network or server error"),
                                    C._lastServerResponse = "NEWUSER",
                                    C.trigger(C.EVT_SUBMIT_FAILED);
                                    break;
                                case 3:
                                    console.error("Network or server error"),
                                    C._lastServerResponse = "USERNOTACTIVE",
                                    C.trigger(C.EVT_SUBMIT_FAILED);
                                    break;
                                case 4:
                                    console.error("Network or server error"),
                                    C._lastServerResponse = "INVALIDUSER",
                                    C.trigger(C.EVT_SUBMIT_FAILED);
                                    break;
                                case 5:
                                    console.error("Network or server error"),
                                    C._lastServerResponse = "STUDENTNOTAUTHORIZED",
                                    C.trigger(C.EVT_SUBMIT_FAILED);
                                    break;
                                default:
                                    console.error("Unexpected server return value"),
                                    C._lastServerResponse = void 0,
                                    C.trigger(C.EVT_SUBMIT_FAILED)
                                }
                            }
                            ), (function(e) {
                                console.error("sendAudio error handler called: " + e),
                                C.closeProgressDialog(),
                                C._lastServerResponse = void 0,
                                C.trigger(C.EVT_SUBMIT_FAILED)
                            }
                            ))
                        }
                        ,
                        C.sendResultsAjax = function(e) {
                            e.accept_json_response = !0,
                            d.hasOwnProperty("widget_language") && "" != d.widget_language && (e.lang = d.widget_language),
                            t.ajax({
                                type: "POST",
                                headers: h(C._endpoint),
                                url: C._endpoint,
                                data: e,
                                success: function(e, t, n) {
                                    console.log("Submit OK"),
                                    C.closeProgressDialog();
                                    var r = n.getResponseHeader("Content-Type");
                                    switch (C._lastServerResponse = e,
                                    C._lastServerMessage = null,
                                    C._lastServerData = null,
                                    r) {
                                    case "application/json":
                                        e.hasOwnProperty("status") && "OK" === e.status ? (console.log("That's a success!"),
                                        C._lastServerData = o(e, ["data", "messages"]),
                                        C.trigger(C.EVT_SUBMIT_SUCCEEDED)) : e.hasOwnProperty("code") ? (console.log("That's a failure!", e),
                                        C._lastServerResponse = e.code,
                                        C._lastServerMessage = e.message,
                                        C.trigger(C.EVT_SUBMIT_FAILED)) : (console.log("That's a success!"),
                                        C.trigger(C.EVT_SUBMIT_SUCCEEDED));
                                        break;
                                    case "text/html":
                                        console.log("That's a success!"),
                                        C.trigger(C.EVT_SUBMIT_SUCCEEDED);
                                        break;
                                    default:
                                        "OK" == e ? (console.log("That's a success!"),
                                        C.trigger(C.EVT_SUBMIT_SUCCEEDED)) : (console.log("That's a failure!"),
                                        C.trigger(C.EVT_SUBMIT_FAILED))
                                    }
                                },
                                error: function(e) {
                                    console.error("AJAX error handler called");
                                    try {
                                        var t = JSON.parse(e.responseText);
                                        C._lastServerResponse = null,
                                        C._lastServerData = null,
                                        C._lastServerMessage = t.message
                                    } catch (e) {
                                        console.error("Error msg not json"),
                                        C._lastServerResponse = void 0
                                    }
                                    C.closeProgressDialog(),
                                    C.trigger(C.EVT_SUBMIT_FAILED)
                                }
                            })
                        }
                        ,
                        C.generate = function(e) {
                            t.ajax({
                                type: "POST",
                                headers: h(C._endpoint),
                                url: C._endpoint,
                                data: e,
                                success: function(e, r, o) {
                                    var a, i, s;
                                    console.log("AJAX success handler called"),
                                    C.closeProgressDialog(),
                                    "application/json" == o.getResponseHeader("Content-Type") ? (console.log("That's a success!"),
                                    C._lastServerResponse = e,
                                    a = e.url,
                                    i = e.filename,
                                    s = t(document.createElement("div")).append(t(document.createElement("a")).attr({
                                        href: a,
                                        download: i
                                    }).safeHtml(l("Click here to download your PDF"))),
                                    n.showAlert(s.html(), l("PDF generated"))) : (console.log("That's a failure!"),
                                    C._lastServerResponse = e,
                                    n.showAlert(l("Could not generate PDF.  Please try again later."), l("Generate PDF failed")))
                                },
                                error: function() {
                                    console.log("AJAX error handler called"),
                                    C.closeProgressDialog(),
                                    C._lastServerResponse = void 0,
                                    n.showAlert(l("Could not generate PDF.  Please try again later."), l("Generate PDF failed"))
                                }
                            })
                        }
                        ,
                        C.sendResults = "ibw-platform-ipad-ibooks-epub" == e.getPlatform() ? C.sendResultsAudio : C.sendResultsAjax,
                        C.getLastServerResponse = function() {
                            return C._lastServerResponse
                        }
                        ,
                        C.getLastServerMessage = function() {
                            return C._lastServerMessage
                        }
                        ,
                        C.getLastServerData = function() {
                            return C._lastServerData
                        }
                        ,
                        C.afterSubmitFailed = function(e, t, r) {
                            var o = ""
                              , a = this.getLastServerResponse();
                            if (a)
                                if (o = e + "<br><br>",
                                "NEWUSER" === a)
                                    o += l("The email address you provided has not been registered.") + "<br><br>",
                                    o += l("To prevent abuse, results can only be sent to registered email addresses.") + " ",
                                    o += l("Activate by clicking on the link in the email which was sent to the address provided.") + " ",
                                    o += l("You can also register at www.bookwidgets.com.") + "<br>";
                                else if ("USERNOTACTIVE" === a)
                                    o += l("The email address you provided has not been activated.") + "<br><br>",
                                    o += l("To prevent abuse, results can only be sent to registered email addresses.") + " ",
                                    o += l("Activate by clicking on the link in the email which was sent to the address provided.") + " ",
                                    o += l("You can also register at www.bookwidgets.com.") + "<br>";
                                else if ("INVALIDUSER" === a)
                                    o += l("Invalid user name") + "<br>";
                                else {
                                    var i;
                                    o += (i = this.getLastServerMessage()) ? i + "<br>" : l("Unknown error") + "<br>"
                                }
                            else
                                (i = this.getLastServerMessage()) ? o += i + "<br>" : o = t;
                            n.showAlert(o, l("Send Failed"), null, r)
                        }
                        ,
                        C
                    },
                    isTeacherEmailRequired: function() {
                        return !m() && !g() && !v()
                    }
                }
            }
            .bind(null, n(61743), n(58065), n(77752));
            e.exports = {
                bindToContext: s
            }
        },
        120: function(e, t, n) {
            "use strict";
            function r(e) {
                var t = "file:";
                window && window.location && window.location.protocol && (t = window.location.protocol);
                var n = "";
                return 0 === e.indexOf("http://") ? n = "http://" : 0 === e.indexOf("https://") ? n = "https://" : 0 === e.indexOf("//") && (n = "//"),
                "" !== n ? "file:" === t || "http:" === t ? "//" === n ? "http:" + e : e : "https:" === t && "http://" === n ? e.replace("http://", "https://") : "//" === n ? "https:" + e : e : e
            }
            n.d(t, {
                A: function() {
                    return r
                }
            })
        },
        1420: function(e, t, n) {
            "use strict";
            n.r(t);
            var r = n(58065)
              , o = n.n(r)
              , a = [];
            function i(e) {
                for (var t = 0; t < a.length; ++t) {
                    0 === (r = a[t]).starttime && (r.starttime = e);
                    var n = e - r.starttime;
                    if (n >= r.duration) {
                        r.obj.setTranslate(r.to_x, r.to_y);
                        var r = a.splice(t, 1);
                        --t,
                        null != r[0].callback && r[0].callback()
                    } else {
                        var o = n / r.duration
                          , s = r.easingfunc(o, n, 0, 1, r.duration);
                        r.obj.setTranslate(r.from_x + r.delta_x * s, r.from_y + r.delta_y * s)
                    }
                }
                a.length > 0 && requestAnimationFrame(i)
            }
            o().fn.extend({
                setTranslate: function(e, t) {
                    var n = "translate(" + e + "px ," + t + "px)";
                    this.css({
                        transform: n,
                        "-webkit-transform": n,
                        "-moz-transform": n,
                        "-ms-transform": n
                    })
                },
                getTranslate: function() {
                    var e = this.css("transform");
                    if (!(e || (e = this.css("-webkit-transform")) || (e = this.css("-ms-transform")) || (e = this.css("-moz-transform"))))
                        return {
                            x: 0,
                            y: 0
                        };
                    var t = e.indexOf("matrix(");
                    if (-1 === t)
                        return {
                            x: 0,
                            y: 0
                        };
                    var n = e.indexOf(")", t + 1);
                    if (-1 === n)
                        return {
                            x: 0,
                            y: 0
                        };
                    var r = e.substring(t + 7, n).split(",");
                    return {
                        x: parseInt(r[4]),
                        y: parseInt(r[5])
                    }
                },
                animateTranslate: function(e, t, n, r, s) {
                    var u = this.getTranslate();
                    a.push({
                        obj: this,
                        duration: n,
                        starttime: 0,
                        from_x: u.x,
                        from_y: u.y,
                        to_x: e,
                        to_y: t,
                        delta_x: e - u.x,
                        delta_y: t - u.y,
                        easingfunc: o().easing[r],
                        callback: s
                    }),
                    1 === a.length && requestAnimationFrame(i)
                }
            })
        },
        16454: function(e, t, n) {
            "use strict";
            n.r(t);
            var r = n(58065)
              , o = n.n(r);
            o().fn.autoGrowInput = function(e) {
                return e = o().extend({
                    maxWidth: 1500,
                    minWidth: 0,
                    comfortZone: 40
                }, e),
                this.filter("input:text").each((function() {
                    var t = e.minWidth || o()(this).width()
                      , n = ""
                      , r = o()(this)
                      , a = o()(document.createElement("tester")).css({
                        position: "absolute",
                        top: -9999,
                        left: 0,
                        width: "auto",
                        fontSize: r.css("fontSize"),
                        fontFamily: r.css("fontFamily"),
                        fontWeight: r.css("fontWeight"),
                        letterSpacing: r.css("letterSpacing"),
                        whiteSpace: "nowrap",
                        opacity: .01
                    }).attr("aria-hidden", "true");
                    a.insertAfter(r),
                    o()(this).bind("keyup keydown blur update", (function() {
                        if (!r.is(":hidden") && n !== (n = r.val())) {
                            var o = (n = r.val()).replace(/&/g, "&amp;").replace(/\s/g, "&nbsp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
                            a.safeHtml(o);
                            var i = a.width()
                              , s = Math.min(Math.max(i + e.comfortZone, t), e.maxWidth);
                            r.width(s)
                        }
                    }
                    ))
                }
                )),
                this
            }
        },
        42207: function(e) {
            e.exports = window.Blob
        },
        21876: function(e, t, n) {
            var r = 0
              , o = n(58065)
              , a = n(45250).remove;
            e.exports = function(e) {
                var t = {
                    play: [],
                    durationchange: [],
                    ended: [],
                    pause: [],
                    playing: []
                }
                  , n = null
                  , i = 0
                  , s = null;
                function u() {
                    for (var e = arguments[0], n = [], r = 1; r < arguments.length; ++r)
                        n.push(arguments[r]);
                    for (var o = 0; o < t[e].length; ++o)
                        t[e][o].apply(null, n)
                }
                function c(t, r) {
                    var a, i, s = o.Deferred();
                    return a = function(e) {
                        null != r && u(r),
                        s.resolve(e)
                    }
                    ,
                    i = function() {
                        console.error("Error player command ", t, n),
                        s.reject()
                    }
                    ,
                    e("player/" + [t, n].join("/"), a, i),
                    s
                }
                function l() {
                    s = null,
                    c("playing", null).then((function(e) {
                        "true" !== e.playing ? u("ended") : s = setTimeout(l, 1e3)
                    }
                    ))
                }
                function d() {
                    s = setTimeout(l, 1e3)
                }
                function f() {
                    s && (clearTimeout(s),
                    s = 0)
                }
                return n = ++r + "",
                {
                    setAudioData: function(e, t) {
                        null != n && setPlayerData(n, e)
                    },
                    pause: function() {
                        c("pause", "pause").then(f)
                    },
                    resume: function() {
                        c("resume", "playing").then(d)
                    },
                    play: function() {
                        c("play", "play").then((function(e) {
                            d(),
                            i = parseInt(e.duration),
                            u("durationChanged")
                        }
                        ))
                    },
                    stop: function() {
                        c("stop", "ended").then(f)
                    },
                    clear: function() {
                        i = 0,
                        f(),
                        c("clear")
                    },
                    getDuration: function() {
                        return i
                    },
                    addEventListener: function(e, n) {
                        t[e].push(n)
                    },
                    removeEventListener: function(e, n) {
                        a(t[e], {
                            cb: n
                        })
                    }
                }
            }
        },
        17431: function(e, t, n) {
            var r;
            function o(e) {
                return o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                o(e)
            }
            !function(n) {
                "use strict";
                var o = function(e, t) {
                    this.state = "inactive",
                    this.eventTarget = n.document.createDocumentFragment(),
                    this.sendBridgeCommand = t,
                    this.config = e = e || {},
                    this.config.command = "init"
                };
                o.prototype.addEventListener = function(e, t, n) {
                    this.eventTarget.addEventListener(e, t, n)
                }
                ,
                o.prototype.initStream = function() {
                    var e = this;
                    this.sendBridgeCommand("init", (function() {
                        e.state = "initialized",
                        e.eventTarget.dispatchEvent(new n.Event("streamReady"))
                    }
                    ), (function(t) {
                        e.eventTarget.dispatchEvent(new n.ErrorEvent("streamError",{
                            error: t
                        }))
                    }
                    ))
                }
                ,
                o.prototype.pause = function() {
                    var e = this;
                    "recording" === this.state && (this.state = "paused",
                    this.sendBridgeCommand("pause", (function() {
                        e.eventTarget.dispatchEvent(new n.Event("pause"))
                    }
                    )))
                }
                ,
                o.prototype.removeEventListener = function(e, t, n) {
                    this.eventTarget.removeEventListener(e, t, n)
                }
                ,
                o.prototype.resume = function() {
                    var e = this;
                    "paused" === this.state && (this.state = "recording",
                    this.sendBridgeCommand("resume", (function() {
                        e.eventTarget.dispatchEvent(new n.Event("pause"))
                    }
                    )))
                }
                ,
                o.prototype.start = function() {
                    if ("initialized" === this.state) {
                        var e = this;
                        this.state = "recording",
                        this.sendBridgeCommand("start", (function() {
                            e.eventTarget.dispatchEvent(new n.Event("start"))
                        }
                        ), (function(t) {
                            e.eventTarget.dispatchEvent(new n.Event("streamError"), {
                                error: t
                            })
                        }
                        ))
                    }
                }
                ,
                o.prototype.stop = function() {
                    if ("inactive" !== this.state && "encoding" !== this.state) {
                        var e = this;
                        this.state = "encoding",
                        this.sendBridgeCommand("stop", (function(t) {
                            e.eventTarget.dispatchEvent(new n.Event("stop"));
                            var r = function(e) {
                                for (var t = atob(e), n = new Uint8Array(t.length), r = 0; r < t.length; r++)
                                    n[r] = t.charCodeAt(r);
                                return new Blob([n],{
                                    type: "audio/mp4"
                                })
                            }(getRecordedAudio())
                              , o = new FileReader;
                            o.onload = function() {
                                e.state = "inactive",
                                e.eventTarget.dispatchEvent(new n.CustomEvent("dataAvailable",{
                                    detail: {
                                        uri: o.result,
                                        mimetype: "audio/mp4"
                                    }
                                }))
                            }
                            ,
                            o.onerror = function(t) {
                                console.log("An error occured while reading datablob"),
                                e.state = "inactive",
                                e.eventTarget.dispatchEvent(new n.ErrorEvent("streamError",{
                                    error: t
                                }))
                            }
                            ,
                            o.readAsDataURL(r)
                        }
                        ))
                    }
                }
                ,
                n.BridgeRecorder = o,
                void 0 === (r = function() {
                    return o
                }
                .apply(t, [])) || (e.exports = r)
            }("object" === ("undefined" == typeof self ? "undefined" : o(self)) && self.self === self && self || "object" === (void 0 === n.g ? "undefined" : o(n.g)) && n.g.global === n.g && n.g || this)
        },
        93640: function(e, t, n) {
            var r = n(33015);
            e.exports = function(e) {
                "use strict";
                var t = new e;
                return t.startListening(),
                function(e) {
                    e = e || function(e) {
                        var t = document.createElement("IFRAME");
                        t.setAttribute("src", e),
                        t.setAttribute("height", "1px"),
                        t.setAttribute("width", "1px"),
                        document.documentElement.appendChild(t),
                        t.parentNode.removeChild(t)
                    }
                    ;
                    var n = {
                        resultForCallback: function(e, n) {
                            t.processCallback(e, n)
                        },
                        runningInIframe: function() {
                            try {
                                return window.self !== window.top
                            } catch (e) {
                                return !0
                            }
                        },
                        callObjC: function(o, a, i, s) {
                            var u = r.url(o, a)
                              , c = t.registerCallbacks(i, s)
                              , l = "'" + c.ok + "'"
                              , d = "'" + c.error + "'"
                              , f = "AudioBridge.resultForCallback";
                            n.runningInIframe() && (f = "function AudioBridge_callback_wrapper(callbackID, arg) { window.postMessage({ 'command': callbackID, 'arg': arg, 'to': '_widget' }, '*'); }; AudioBridge_callback_wrapper"),
                            e(u + "&okCallbackId=" + l + "&errorCallbackId=" + d + "&callbackFunc=" + f)
                        },
                        execute: function(e, t, r) {
                            n.callObjC("audioRecording", {
                                command: e
                            }, t, r)
                        },
                        initialize: function() {
                            console.log("Initializing AudioBridge"),
                            this.execute("initBridge", (function() {
                                console.log("AudioBridge initialized")
                            }
                            ), (function() {
                                console.log("AudioBridge initialization failed")
                            }
                            ))
                        }
                    };
                    return n.initialize(),
                    window.AudioBridge = n,
                    n
                }
            }(n(10910))
        },
        89195: function(e, t, n) {
            n(60359);
            var r = n(17431)
              , o = n(31004).createThrobber
              , a = n(15570)
              , i = n(24507).adaptWidgetLoadPath;
            function s(e) {
                return '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" version="1.1">' + e + "</svg>"
            }
            e.exports = function(e, t, n, u, c, l, d, f) {
                "use strict";
                var p, h, m, g = null;
                return "ibw-platform-ipad-bookwidgets" === n.getPlatform() && n.supportsAppFeature("audiorecording") ? (p = !0,
                m = !1) : (console.log("Using native recording"),
                p = !1,
                m = !0),
                function(n, v) {
                    console.log("Initialising bwAudioRecorder "),
                    p && null == h && (console.log("Using audio bridge"),
                    h = u(),
                    console.log("creating bridge")),
                    p && f(n).addClass("audio_bridge");
                    var w = f(document.createElement("div")).addClass("bw-audio-recorder").attr("state", "stopped").appendTo(n)
                      , b = f(document.createElement("div")).appendTo(w)
                      , y = f(document.createElement("div")).addClass("bw-audio-recorder-button bw-audio-record").append(s("<circle cx='25' cy='25' r='15' />")).makeButton(t("record")).appendTo(b)
                      , C = f(document.createElement("div")).addClass("bw-audio-record-not-supported").append(s("<line x1='13' y1='13' x2='37' y2='37' /><line x1='13' y1='37' x2='37' y2='13' />")).appendTo(y)
                      , x = f(document.createElement("div")).addClass("bw-audio-recorder-button bw-audio-play").append(s("<polygon points='10,10 40,25 10,40'/>")).makeButton(t("play")).appendTo(b)
                      , E = f(document.createElement("div")).addClass("bw-audio-recorder-button bw-audio-pause").append(s("<rect x='10' y='10' width='11' height='30'/><rect x='29' y='10' width='11' height='30'/>")).makeButton(t("pause")).appendTo(b)
                      , k = f(document.createElement("div")).addClass("bw-audio-recorder-button bw-audio-stop").append(s("<rect x='13' y='13' width='24' height='24'/>")).makeButton(t("stop")).appendTo(b)
                      , S = f(document.createElement("div")).addClass("bw-audio-recorder-time bw-audio-recorder-playtime").safeHtml("__:__").appendTo(b);
                    f(document.createElement("span")).text(" / ").addClass("bw-audio-recorder-time  bw-audio-recorder-slash").appendTo(b);
                    var T, _, A = f(document.createElement("div")).addClass("bw-audio-recorder-time bw-audio-recorder-recordedtime").safeHtml("__:__").appendTo(b);
                    if (f(document.createElement("div")).addClass("bw-encoding-msg").appendTo(b),
                    m) {
                        var O = f(document.createElement("div")).addClass("bw-audio-progress-container").appendTo(w);
                        (T = f(document.createElement("input")).attr("type", "range").addClass("bw-audio-progress").attr("min", "0").attr("max", "0").val(0).appendTo(O)).on("input", (function(e) {
                            var t = w.attr("state");
                            e.target.value !== H && ("playing_paused" === t && (H = e.target.value,
                            Y(),
                            I.goToTime(H)),
                            "playing" === t && (I.stop(),
                            H = e.target.value,
                            Y(),
                            I.goToTime(e.target.value),
                            I.play()),
                            "stopped" === t && (H = e.target.value,
                            Y(),
                            I.goToTime(H),
                            w.attr("state", "playing_paused")))
                        }
                        ));
                        var D = f(document.createElement("div")).addClass("bw-audio-volume").appendTo(O);
                        _ = f(document.createElement("div")).addClass("bw-audio-volume-bar").appendTo(D)
                    }
                    C.tapOrClick((function() {
                        var n = t("This environment does not support audio recording. To record use a browser with audio recording support (e.g. Chrome, Firefox).")
                          , r = w.attr("errormsg");
                        r && (n = t("Could not start audio recording. ") + r),
                        e.showAlert(n, t("Recording not supported"))
                    }
                    )),
                    console.log("Creating player");
                    var I = p ? d(h.execute.bind(h)) : l({
                        parent: n
                    });
                    function P(e, t) {
                        I.setAudioData(e, t),
                        e && w.addClass("play-initialized")
                    }
                    var R, L = 0, N = null, F = null, M = null, j = "";
                    function q() {
                        var e = L % 60
                          , t = parseInt(L / 60);
                        (e += "").length < 2 && (e = "0" + e),
                        (t += "").length < 2 && (t = "0" + t),
                        m && T && T.attr("max", L),
                        A.safeHtml(t + ":" + e)
                    }
                    function B() {
                        ++L,
                        q()
                    }
                    function W() {
                        if (null != g && g.getAverageVolume) {
                            var e = Math.max(Math.min(g.getAverageVolume(), 10), 0);
                            R = (R + 9 * e) / 10,
                            _.css("width", 10 * R + "%")
                        }
                        F = window.requestAnimationFrame(W)
                    }
                    function U() {
                        N = setInterval(B, 1e3),
                        R = 0,
                        F = window.requestAnimationFrame(W)
                    }
                    function z() {
                        clearInterval(N),
                        N = null,
                        cancelAnimationFrame(F),
                        F = null
                    }
                    var H = 0
                      , Q = null
                      , V = null;
                    function Y() {
                        var e = H % 60
                          , t = parseInt(H / 60);
                        (e += "").length < 2 && (e = "0" + e),
                        (t += "").length < 2 && (t = "0" + t),
                        m && T && T.val(H),
                        S.safeHtml(t + ":" + e)
                    }
                    function K() {
                        ++H,
                        Y()
                    }
                    function G() {
                        Q || (Q = setInterval(K, 1e3))
                    }
                    function $() {
                        clearInterval(Q),
                        Q = null
                    }
                    function J(e) {
                        w.hasClass("active") ? (L = 0,
                        q(),
                        w.attr("state", "recording"),
                        a.start("recording"),
                        U(),
                        null != V && (V.close(),
                        V = null)) : w.attr("state", "inactive")
                    }
                    function X(e) {
                        if (w.hasClass("active")) {
                            var t = e.detail;
                            null != t && w.find(".bw-encoding-msg").text(t.msg),
                            w.attr("state", "encoding"),
                            a.stop("recording"),
                            a.start("encoding"),
                            z()
                        }
                    }
                    function Z(e) {
                        w.hasClass("active") && (w.attr("state", "recording_paused"),
                        z())
                    }
                    function ee(e) {
                        w.hasClass("active") && (w.attr("state", "recording"),
                        U())
                    }
                    function te(e) {
                        console.error("Error encountered: "),
                        console.error(e),
                        w.addClass("recording-not-supported"),
                        e && e.error && (e.error.message || e.error.name) && w.attr("errormsg", e.error.message || e.error.name),
                        a.stopAll(),
                        null != V && (V.close(),
                        V = null)
                    }
                    function ne(e) {
                        if ("inactive" !== w.attr("state")) {
                            var t = e.detail;
                            if (a.stop("encoding"),
                            w.attr("state", "stopped"),
                            t.hasOwnProperty("blob")) {
                                console.log("Audio recording: " + t.blob.size + " bytes"),
                                P((window.URL || window.webkitURL).createObjectURL(t.blob), t.mimetype);
                                var n = new FileReader;
                                n.onload = function() {
                                    v({
                                        uri: n.result,
                                        mimetype: t.mimetype
                                    })
                                }
                                ,
                                n.onerror = function() {
                                    console.log("An error occured while reading datablob")
                                }
                                ,
                                v && n.readAsDataURL(t.blob)
                            } else
                                t.hasOwnProperty("uri") && (P(t.uri, t.mimetype),
                                v({
                                    uri: t.uri,
                                    mimetype: t.mimetype
                                }));
                            w.removeClass("active"),
                            setTimeout((function() {
                                g.initStream()
                            }
                            ))
                        }
                    }
                    function re(e) {
                        console.log("streamReady received"),
                        w.addClass("recorder-initialized"),
                        "inactive" === w.attr("state") && w.attr("state", "stopped")
                    }
                    y.tapOrClick((function() {
                        var e = w.attr("state");
                        "inactive" !== e && (w.addClass("active"),
                        "stopped" === e ? (null == V && (V = o("body")),
                        g.start()) : "recording_paused" === e && g.resume())
                    }
                    )),
                    E.tapOrClick((function() {
                        var e = w.attr("state");
                        "inactive" !== e && ("recording" === e ? g.pause() : "playing" === e && I.pause())
                    }
                    )),
                    x.click((function() {
                        var e = w.attr("state");
                        "inactive" !== e && ("stopped" === e && w.hasClass("play-initialized") ? (H = 0,
                        Y(),
                        I.play()) : "playing_paused" === e && I.resume())
                    }
                    )),
                    k.tapOrClick((function() {
                        var e = w.attr("state");
                        "inactive" !== e && ("recording" === e || "recording_paused" === e ? g.stop() : "playing" !== e && "playing_paused" !== e || (I.stop(),
                        w.attr("state", "stopped"),
                        w.removeClass("active"),
                        $(),
                        H = 0,
                        Y()))
                    }
                    ));
                    try {
                        if (!g) {
                            var oe = {
                                monitorGain: 0,
                                numberOfChannels: 1,
                                bitRate: 16e3,
                                encoderSampleRate: 48e3,
                                workerDir: i("../external/web-audio-recorder/WebAudioRecorderMp3.min.js", !0)
                            };
                            p ? (console.log("Using bridge recorder"),
                            g = new r(oe,h.execute.bind(h))) : (console.log("Using normal recorder"),
                            g = c(oe))
                        }
                        M && P(M, j),
                        g.addEventListener("start", J),
                        g.addEventListener("stop", X),
                        g.addEventListener("pause", Z),
                        g.addEventListener("resume", ee),
                        g.addEventListener("streamError", te),
                        g.addEventListener("dataAvailable", ne),
                        g.addEventListener("streamReady", re),
                        g.initStream()
                    } catch (e) {
                        console.error("Got error initializing recorder... recording not supported"),
                        console.error(e),
                        w.addClass("recording-not-supported")
                    }
                    function ae(e) {
                        w.attr("state", "playing"),
                        G()
                    }
                    function ie(e) {
                        "stopped" === w.attr("state") && (L = I.getDuration(),
                        q())
                    }
                    function se(e) {
                        w.attr("state", "stopped"),
                        $(),
                        H = 0,
                        Y(),
                        w.removeClass("active")
                    }
                    function ue(e) {
                        w.attr("state", "playing_paused"),
                        $()
                    }
                    function ce(e) {
                        w.attr("state", "playing"),
                        isNaN(I.getDuration()) || (L = I.getDuration() || 0,
                        q()),
                        G()
                    }
                    return I.addEventListener("play", ae),
                    I.addEventListener("durationchange", ie),
                    I.addEventListener("ended", se),
                    I.addEventListener("pause", ue),
                    I.addEventListener("playing", ce),
                    {
                        setDataURIToLoad: function(e, t) {
                            console.log("setDataURIToLoad"),
                            e && (j = t,
                            P(M = e, t))
                        },
                        clear: function() {
                            w.removeClass("play-initialized"),
                            "recording" === w.attr("state") && g.stop(),
                            I.clear(),
                            A.safeHtml("__:__"),
                            S.safeHtml("__:__"),
                            m && T && T.attr("max", 0).val(0)
                        },
                        cleanup: function() {
                            g.removeEventListener("start", J),
                            g.removeEventListener("stop", X),
                            g.removeEventListener("pause", Z),
                            g.removeEventListener("resume", ee),
                            g.removeEventListener("streamError", te),
                            g.removeEventListener("dataAvailable", ne),
                            g.removeEventListener("streamReady", re),
                            I.removeEventListener("play", ae),
                            I.removeEventListener("durationchange", ie),
                            I.removeEventListener("ended", se),
                            I.removeEventListener("pause", ue),
                            I.removeEventListener("playing", ce)
                        },
                        setReadOnly: function(e) {
                            w.toggleClass("readonly", e)
                        }
                    }
                }
            }(n(77752), n(78514), n(61743), n(93640), n(15541), n(34534), n(21876), n(58065))
        },
        34534: function(e, t, n) {
            var r = n(58065);
            e.exports = function(e) {
                var t = r(document.createElement("audio")).addClass("bw-audio-recorder-player no-audio-wrap bw-audio-player-audio").attr("controls", "false").appendTo(e.parent);
                return {
                    player: t,
                    setAudioData: function(e, n) {
                        e && t.attr({
                            url: e,
                            type: n,
                            src: null
                        })
                    },
                    pause: function() {
                        t[0].pause()
                    },
                    paused: function() {
                        return t[0].paused
                    },
                    resume: function() {
                        t[0].play()
                    },
                    play: function() {
                        t.attr("src", t.attr("url")),
                        t[0].play()
                    },
                    stop: function() {
                        t.attr("src", null)
                    },
                    getDuration: function() {
                        return parseInt(t[0].duration)
                    },
                    clear: function() {
                        t.attr({
                            url: "",
                            src: "",
                            type: ""
                        })
                    },
                    addEventListener: function(e, n) {
                        t[0].addEventListener(e, n)
                    },
                    removeEventListener: function(e, n) {
                        t[0].removeEventListener(e, n)
                    },
                    goToTime: function(e) {
                        null == t.attr("src") && t.attr("src", t.attr("url")),
                        t[0].currentTime = e
                    },
                    setVolume: function(e) {
                        t[0].volume = e
                    },
                    getCurrentTime: function() {
                        return t[0].currentTime
                    }
                }
            }
        },
        1723: function(e, t, n) {
            "use strict";
            n.r(t);
            var r = n(40105)
              , o = n.n(r)
              , a = n(3222)
              , i = n(49161)
              , s = n(58065)
              , u = n.n(s);
            function c(e) {
                return c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                c(e)
            }
            function l(e, t) {
                var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (!n) {
                    if (Array.isArray(e) || (n = function(e, t) {
                        if (e) {
                            if ("string" == typeof e)
                                return d(e, t);
                            var n = Object.prototype.toString.call(e).slice(8, -1);
                            return "Object" === n && e.constructor && (n = e.constructor.name),
                            "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? d(e, t) : void 0
                        }
                    }(e)) || t && e && "number" == typeof e.length) {
                        n && (e = n);
                        var r = 0
                          , o = function() {};
                        return {
                            s: o,
                            n: function() {
                                return r >= e.length ? {
                                    done: !0
                                } : {
                                    done: !1,
                                    value: e[r++]
                                }
                            },
                            e: function(e) {
                                throw e
                            },
                            f: o
                        }
                    }
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                var a, i = !0, s = !1;
                return {
                    s: function() {
                        n = n.call(e)
                    },
                    n: function() {
                        var e = n.next();
                        return i = e.done,
                        e
                    },
                    e: function(e) {
                        s = !0,
                        a = e
                    },
                    f: function() {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (s)
                                throw a
                        }
                    }
                }
            }
            function d(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            u().fn.extend({
                bwtable: function(e, t) {
                    function n(e, t) {
                        var n = e.data("config");
                        if (n) {
                            var r = e.find("tr");
                            e.toggleClass("readonly", !0 === n.readOnly);
                            for (var o = 0; o < r.length; ++o)
                                for (var a = u()(r[o]), i = n.data[o], s = a.find("td"), c = 0; c < s.length; ++c) {
                                    var l = i[c]
                                      , d = u()(s[c]);
                                    if (t || l !== d.attr("value")) {
                                        var f = n.cells(o, c)
                                          , p = u()(document.createElement("div")).addClass("bw-table-cell-contents").text(l);
                                        d.find(".bw-table-cell-contents").replaceWith(p),
                                        f.hasOwnProperty("renderer") && f.renderer(e, d[0], o, c, null, l, f),
                                        d.attr("value", l),
                                        d.find("textarea").val(l)
                                    }
                                }
                        }
                    }
                    function r(e) {
                        e.css({
                            height: "100%",
                            "min-height": e.parent().innerHeight()
                        })
                    }
                    if ("string" == typeof e)
                        return s = this,
                        f = t,
                        void ("render" === (d = e) ? (n(s, !0),
                        s.find("textarea, select").each((function() {
                            r(u()(this))
                        }
                        ))) : "loaddata" === d ? (p = s,
                        h = f,
                        p.data("config").data = h,
                        n(s, !1)) : "updateSettings" === d ? (function(e, t) {
                            var n = e.data("config");
                            for (var r in t)
                                n[r] = t[r]
                        }(s, f),
                        n(s, !0)) : console.error("Unknown bwtable command: ", d));
                    var s, d, f, p, h;
                    "object" === c(e) && function(e, t) {
                        e.empty();
                        for (var s = u()(document.createElement("table")).addClass("bw-table"), c = u()(document.createElement("tbody")).appendTo(s), d = 0; d < t.data.length; ++d)
                            for (var f, p, h, m = t.data[d], g = u()(document.createElement("tr")).appendTo(c), v = function() {
                                function s(e, t) {
                                    return function() {
                                        var e = u()(this);
                                        e.parent().addClass("editing"),
                                        r(e)
                                    }
                                }
                                function c(t, r) {
                                    return function() {
                                        var o = u()(this)
                                          , a = o.parent().parent().parent().parent().parent().data("config");
                                        o.parent().removeClass("editing");
                                        var i = o.val();
                                        o.parent().attr("value") !== i && (a.data[t][r] = i,
                                        a.onChange([[t, r]]),
                                        n(e))
                                    }
                                }
                                if (f = m[w],
                                p = u()(document.createElement("td")).attr("value", f).appendTo(g),
                                (h = t.cells(d, w)).isSelect && p.addClass("bw-table-select"),
                                t.hasOwnProperty("colWidths") && p.css({
                                    width: t.colWidths[w]
                                }),
                                u()(document.createElement("div")).addClass("bw-table-cell-contents").text(f).appendTo(p),
                                h.hasOwnProperty("renderer") && h.renderer(e, p[0], d, w, null, f, h),
                                !0 !== h.readOnly) {
                                    var v;
                                    if (f.startsWith("select:") && h.isSelect) {
                                        v = u()(document.createElement("select")).addClass("bw-table-cell-input").val(f).appendTo(p).on("focus", s()).on("blur", c(d, w));
                                        var b = f.split(":");
                                        b.shift();
                                        var y = o()(b.join(":").split("##"), (function(e) {
                                            return e.trim()
                                        }
                                        ));
                                        y.sort(),
                                        u()(document.createElement("option")).attr("value", "").text("").appendTo(v);
                                        var C, x = l(y);
                                        try {
                                            for (x.s(); !(C = x.n()).done; ) {
                                                var E = C.value;
                                                u()(document.createElement("option")).attr("value", E).text(E).appendTo(v)
                                            }
                                        } catch (e) {
                                            x.e(e)
                                        } finally {
                                            x.f()
                                        }
                                        u()(document.createElement("div")).addClass("print-only-inline").text("(" + y.join(" / ") + ")").appendTo(p)
                                    } else
                                        v = u()(document.createElement("textarea")).addClass("bw-table-cell-input").val(f).appendTo(p).attr((0,
                                        a.spellCheckAttribs)(t.spellcheck)).attr((0,
                                        i.keyboardAttribs)(t.keyboard)).on("focus", s()).on("blur", c(d, w));
                                    r(v)
                                }
                            }, w = 0; w < m.length; ++w)
                                v();
                        s.appendTo(e),
                        e.data("config", t)
                    }(this, e)
                }
            })
        },
        78908: function(e, t, n) {
            var r = n(58065)
              , o = n(24507)
              , a = o.loadJS
              , i = o.loadCSS
              , s = n(36382).createSimpleCalculator;
            function u() {
                return r.when(a("../external/scientific/js/license.js", "html"), a("../external/scientific/js/help.js", "html"))
            }
            function c() {
                return a("../211029/calc.ca904ab9f9f81183bd8e71df20f0bf27.js", "html")
            }
            function l() {
                for (var e, t = [{
                    id: "closehistorybutton",
                    onclick: (e = window.Calculator).closeHistory.bind(e)
                }, {
                    id: "buttonclosecurrentformula",
                    onclick: e.setCurrentFormula.bind(e, "")
                }, {
                    id: "buttonclosemainentry",
                    onclick: e.setMainEntry.bind(e, "")
                }, {
                    id: "openhistorybutton",
                    onclick: e.openHistory.bind(e)
                }, {
                    id: "buttondeg",
                    onclick: e.transitionToDegrees.bind(e)
                }, {
                    id: "buttonrad",
                    onclick: e.transitionToRadians.bind(e)
                }, {
                    id: "buttontrig",
                    onclick: e.transitionToTrigonometricFunctions.bind(e)
                }, {
                    id: "buttonhyp",
                    onclick: e.transitionToHyperbolicFunctions.bind(e)
                }, {
                    id: "buttonmemorylist",
                    onclick: e.onButtonMemoryListClick.bind(e)
                }, {
                    id: "buttonmemorize",
                    onclick: e.onButtonMainEntryToMemoryClick.bind(e)
                }, {
                    id: "mplcdbuttonclose",
                    onclick: e.setMainEntry.bind(e, "")
                }, {
                    id: "mpopenhistorybutton",
                    onclick: e.openHistory.bind(e)
                }, {
                    id: "buttonM1",
                    onclick: e.onButtonMemoryClick.bind(e, "M1")
                }, {
                    id: "buttonM1edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M1")
                }, {
                    id: "buttonM1close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M1")
                }, {
                    id: "buttonM2",
                    onclick: e.onButtonMemoryClick.bind(e, "M2")
                }, {
                    id: "buttonM2edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M2")
                }, {
                    id: "buttonM2close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M2")
                }, {
                    id: "buttonM3",
                    onclick: e.onButtonMemoryClick.bind(e, "M3")
                }, {
                    id: "buttonM3edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M3")
                }, {
                    id: "buttonM3close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M3")
                }, {
                    id: "buttonM4",
                    onclick: e.onButtonMemoryClick.bind(e, "M4")
                }, {
                    id: "buttonM4edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M4")
                }, {
                    id: "buttonM4close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M4")
                }, {
                    id: "buttonM5",
                    onclick: e.onButtonMemoryClick.bind(e, "M5")
                }, {
                    id: "buttonM5edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M5")
                }, {
                    id: "buttonM5close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M5")
                }, {
                    id: "buttonM6",
                    onclick: e.onButtonMemoryClick.bind(e, "M6")
                }, {
                    id: "buttonM6edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M6")
                }, {
                    id: "buttonM6close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M6")
                }, {
                    id: "buttonM7",
                    onclick: e.onButtonMemoryClick.bind(e, "M7")
                }, {
                    id: "buttonM7edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M7")
                }, {
                    id: "buttonM7close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M7")
                }, {
                    id: "buttonM8",
                    onclick: e.onButtonMemoryClick.bind(e, "M8")
                }, {
                    id: "buttonM8edit",
                    onclick: e.onButtonMemoryEditClick.bind(e, "M8")
                }, {
                    id: "buttonM8close",
                    onclick: e.onButtonMemoryCloseClick.bind(e, "M8")
                }, {
                    id: "memoryclearall",
                    onclick: e.clearAllMemorySlots.bind(e)
                }, {
                    id: "memoryClose",
                    onclick: e.onButtonMemoryClose.bind(e)
                }, {
                    id: "dialogokbutton",
                    onclick: e.clearAllMemorySlots.bind(e)
                }, {
                    id: "dialogcancelbutton",
                    onclick: e.cancelClearAllDialog.bind(e)
                }], n = 0; n < t.length; ++n) {
                    var o = t[n];
                    r("#" + o.id).attr("onclick", null).click(o.onclick)
                }
                var a = {
                    play: function() {}
                };
                window.Calculator.buttonClickAudio = a,
                window.Calculator.equalClickAudio = a,
                r("#mainentry").css("user-select", "text").on("mousedown", (function(e) {
                    e.stopPropagation()
                }
                )).on("touchstart", (function(e) {
                    e.stopPropagation()
                }
                ))
            }
            function d(e) {
                e.hasOwnProperty("modules") && -1 !== e.modules.indexOf("scientific") ? r.when(i("../external/scientific/css/calc_portrait.css", "head"), a("../external/scientific/js/localizer.js", "head"), a("../external/scientific/js/iscroll.js", "head"), a("../external/scientific/js/peg-0.6.2.min.js", "head"), a("../211028/scientific.c3dd854537ef2257397f027b0bfdac2c.js", "body")).then(u).then(c).then(l) : "Simple" === e.provide_calculator && s()
            }
            e.exports = void n(17496).getConfig().then((function(e) {
                (function(e) {
                    return e.hasOwnProperty("modules") && -1 !== e.modules.indexOf("MathJs") ? a("../180713/math.min.94231578c7e09c627107a5ea71b807c3.js", "head") : r.when()
                }
                )(e).then(d.bind(null, e))
            }
            ))
        },
        17496: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                extractOnlineResources: function() {
                    return Y
                },
                fixResourcePaths: function() {
                    return Q
                },
                getConfig: function() {
                    return K
                },
                getConfigSync: function() {
                    return G
                },
                inverseFixResourcePaths: function() {
                    return V
                },
                inverseReplaceResourceDir: function() {
                    return U
                },
                replaceResourceDir: function() {
                    return W
                }
            });
            var r = n(40105)
              , o = n.n(r)
              , a = n(58065)
              , i = n(4296).getParameters
              , s = n(24507)
              , u = s.loadJS
              , c = s.loadCSS
              , l = !1
              , d = !1
              , f = new RegExp("https://www.bookwidgets.com/create/api/widgets/[0-9]+/preview/config.(css||js)?")
              , p = new RegExp("http://localhost(:[0-9]+)?/create/api/widgets/[0-9]+/preview/config.(css||js)?");
            function h(e) {
                return window.WidgetParams ? e : 0 === window.location.pathname.indexOf("/_ah/gcs/bookwidgets-eu--widgets/") ? 0 === e.search(p) ? e : window.location.origin + "/_ah/gcs/bookwidgets-eu--widget-assets" + e : window.location.host.startsWith("widgets-eu.") ? 0 === e.search(f) ? e : window.location.host.replace("widgets-eu.", "//widget-assets-eu.") + e : e
            }
            var m = n(58065)
              , g = n.n(m)
              , v = n(4642)
              , w = n.n(v)
              , b = n(82438)
              , y = n.n(b);
            function C(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var x = []
              , E = 0
              , k = 0
              , S = null;
            function T(e) {
                console.log("Select design element", e),
                void 0 !== window.previewsidebar ? window.previewsidebar.setSelectedItem(e) : window.parent.postMessage({
                    command: "select-design-element",
                    element: e
                })
            }
            function _(e) {
                k = 0;
                var t = !1
                  , n = g()(e)
                  , r = function() {
                    var e = {};
                    g().each(x, (function(r, o) {
                        var a, i, s = (i = 2,
                        function(e) {
                            if (Array.isArray(e))
                                return e
                        }(a = o) || function(e, t) {
                            var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                            if (null != n) {
                                var r, o, a, i, s = [], u = !0, c = !1;
                                try {
                                    if (a = (n = n.call(e)).next,
                                    0 === t) {
                                        if (Object(n) !== n)
                                            return;
                                        u = !1
                                    } else
                                        for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                        s.length !== t); u = !0)
                                            ;
                                } catch (e) {
                                    c = !0,
                                    o = e
                                } finally {
                                    try {
                                        if (!u && null != n.return && (i = n.return(),
                                        Object(i) !== i))
                                            return
                                    } finally {
                                        if (c)
                                            throw o
                                    }
                                }
                                return s
                            }
                        }(a, i) || function(e, t) {
                            if (e) {
                                if ("string" == typeof e)
                                    return C(e, t);
                                var n = Object.prototype.toString.call(e).slice(8, -1);
                                return "Object" === n && e.constructor && (n = e.constructor.name),
                                "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? C(e, t) : void 0
                            }
                        }(a, i) || function() {
                            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                        }()), u = s[0], c = s[1];
                        try {
                            if (n.is(u)) {
                                var l = n.offset().top + "_" + n.offset().left;
                                e[l] ? e[l].elements.push(c) : e[l] = {
                                    offset: n.offset(),
                                    elements: [c]
                                },
                                t = !0
                            }
                        } catch (e) {}
                    }
                    )),
                    g().each(e, (function(e, t) {
                        var n = g()(document.createElement("div")).addClass("bw-design-tooltip").attr("data-design-element", t.elements[0]).css({
                            position: "absolute",
                            top: t.offset.top,
                            left: t.offset.left
                        }).appendTo("body");
                        g().each(y()(t.elements), (function(e, t) {
                            g()(document.createElement("a")).text(S && S[t] ? S[t] : t).attr("href", "#").click((function(e) {
                                T(t),
                                e.stopPropagation(),
                                e.preventDefault()
                            }
                            )).appendTo(n)
                        }
                        ))
                    }
                    )),
                    n = n.parent()
                };
                do {
                    r()
                } while (!1 === t && n.length > 0)
            }
            function A() {
                g()(".bw-design-tooltip").remove()
            }
            function O(e) {
                var t = e.target;
                g()(t).is(".bw-design-tooltip") || g()(t).is(".bw-design-tooltip a") || E !== t && (0 === k && A(),
                clearTimeout(k),
                E = t,
                k = setTimeout(_.bind(null, t), 400))
            }
            function D() {
                var e = g()(".bw-design-tooltip");
                0 !== e.length && T(e.attr("data-design-element"))
            }
            window.activateDesignInfoTooltips = function(e) {
                S = e,
                window.addEventListener("mousemove", O),
                window.addEventListener("click", D)
            }
            ,
            window.disableDesignInfoTooltips = function() {
                A(),
                window.removeEventListener("mousemove", O),
                window.removeEventListener("click", D)
            }
            ;
            var I = []
              , P = !1;
            window.BwNotifyWidgetLoaded = function() {
                P || (P = !0,
                window.parent.postMessage("BwWidgetLoaded", "*"),
                window.clientApp && window.clientApp.widgetLoaded && window.clientApp.widgetLoaded())
            }
            ;
            var R = !0;
            function L() {
                for (; I.length > 0; )
                    I.shift()();
                R && window.BwNotifyWidgetLoaded()
            }
            function N(e) {
                return function(e) {
                    if (Array.isArray(e))
                        return F(e)
                }(e) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(e) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return F(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? F(e, t) : void 0
                    }
                }(e) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function F(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function M(e) {
                return M = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                M(e)
            }
            window.BwUseManualWidgetLoadedNotification = function() {
                R = !1
            }
            ;
            var j = {}
              , q = g().Deferred();
            function B(e, t, n) {
                if (null == e)
                    return e;
                if ("string" == typeof e)
                    return e.replace(t, n);
                if (g().isArray(e)) {
                    for (var r = [], o = 0; o < e.length; ++o)
                        r.push(B(e[o], t, n));
                    return r
                }
                if ("object" === M(e)) {
                    var a = {};
                    for (var i in e)
                        e.hasOwnProperty(i) && (a[i] = B(e[i], t, n));
                    return a
                }
                return e
            }
            function W(e, t) {
                return t ? B(e, /\$RESOURCEDIR/g, t) : e
            }
            function U(e, t) {
                return t && "." !== t ? B(e, new RegExp(t,"g"), "$RESOURCEDIR") : e
            }
            function z(e, t, n) {
                var r = [];
                if ("string" == typeof e)
                    e.startsWith(t) ? r.push({
                        resource: e,
                        type: "full",
                        path: n
                    }) : (r.push.apply(r, N(o()(N(e.matchAll(new RegExp("(')(" + t + "[^']+)'","g"))), (function(e) {
                        return {
                            resource: e[2],
                            type: e[1],
                            path: n
                        }
                    }
                    )))),
                    r.push.apply(r, N(o()(N(e.matchAll(new RegExp('(")(' + t + '[^"]+)"',"g"))), (function(e) {
                        return {
                            resource: e[2],
                            type: e[1],
                            path: n
                        }
                    }
                    )))));
                else if (g().isArray(e))
                    for (var a = 0; a < e.length; ++a)
                        r.push.apply(r, N(z(e[a], t, n + "/" + a)));
                else if ("object" === M(e))
                    for (var i in e)
                        e.hasOwnProperty(i) && r.push.apply(r, N(z(e[i], t, n + "/" + i)));
                return r
            }
            function H() {
                var e = ".";
                return window.WidgetResourceBase ? window.WidgetResourceBase : (0 === window.location.pathname.indexOf("/_ah/gcs/bookwidgets-eu--widgets/") ? e = window.location.origin + "/_ah/gcs/bookwidgets-eu--widget-assets" : window.location.host.startsWith("widgets-eu.") && (e = window.location.host.replace("widgets-eu.", "https://widget-assets-eu.")),
                e)
            }
            function Q(e) {
                return W(e, H())
            }
            function V(e) {
                return U(e, H())
            }
            function Y(e) {
                if ("." === H())
                    return [];
                try {
                    return z(e, H(), "")
                } catch (e) {
                    return console.error("Could not extract resources: ", e),
                    []
                }
            }
            function K() {
                return q
            }
            function G() {
                return j
            }
            (function() {
                var e = i(!1);
                e.dbg5 && n(90234)({
                    apiKey: e.dbg5,
                    autoCaptureSessions: !1,
                    notifyReleaseStages: ["production"],
                    releaseStage: "production",
                    beforeSend: function(e) {
                        return 1 !== e.stacktrace.length || 1 !== e.stacktrace[0].lineNumber
                    }
                });
                var t = a.Deferred();
                if (!1 === d && !1 === l) {
                    l = !0;
                    var r = h(e.content) || "config.js"
                      , o = h(e.design) || "config.css";
                    a.when(u(r), c(o)).fail((function() {
                        t.reject(new Error("Unable to load config file"))
                    }
                    )).always((function(e, n) {
                        n && a(n).attr("id", "designconfig"),
                        l = !1,
                        d = !1;
                        var r = window.widgetconfig;
                        t.resolve(r),
                        -1 === navigator.userAgent.indexOf("ibookwidgets") && (window.widgetconfig = void 0)
                    }
                    ))
                }
                return t
            }
            )().then((function(e) {
                var t = function(e) {
                    return Q(function e(t) {
                        if ("string" == typeof t)
                            return function(e) {
                                for (var t = "", n = 0; n < e.length; ++n)
                                    2 * n < e.length ? t += e.charAt(2 * n) : t += e.charAt(2 * (e.length - n) - 1);
                                return t
                            }(t);
                        if (g().isArray(t)) {
                            for (var n = [], r = 0; r < t.length; ++r)
                                n.push(e(t[r]));
                            return n
                        }
                        if ("object" === M(t)) {
                            var o = {};
                            for (var a in t)
                                t.hasOwnProperty(a) && (o[a] = e(t[a]));
                            return o
                        }
                        return t
                    }(e))
                }(e);
                for (var n in t)
                    j[n] = t[n];
                (function(e) {
                    var t, n;
                    if (w()({
                        LocalizationMap: "bwlocalizationmap",
                        bwshortcode: "bwshortcode",
                        play_base_url: "playBaseURL"
                    }, (function(t, n) {
                        e.hasOwnProperty(n) && (window[t] = e[n])
                    }
                    )),
                    "pre"in e && (console.log("Preview"),
                    "designinfo"in e)) {
                        for (var r = 0; r < e.designinfo.length; ++r)
                            t = e.designinfo[r].s,
                            n = e.designinfo[r].d,
                            x.push([t, n]);
                        "undefined" != typeof previewsidebar ? (console.log("Previewsidebar is defined, immediately set design config"),
                        g()((function() {
                            var e;
                            e = function() {
                                window.CssUpdateCounter && (console.log("has CssUpdateCounter -> updating configCss"),
                                window.updateConfigCSS(window.CssUpdateCounter)),
                                setTimeout((function() {
                                    window.activateDesignInfoTooltips()
                                }
                                ), 3e3)
                            }
                            ,
                            I.push(e)
                        }
                        ))) : (window.parent.postMessage({
                            command: "enable-design-config-support"
                        }, "*"),
                        window.addEventListener("beforeunload", (function() {
                            window.parent.postMessage({
                                command: "disable-design-config-support"
                            })
                        }
                        )))
                    }
                    if ("bra"in e && g()((function() {
                        "iPad" === navigator.platform && -1 !== navigator.userAgent.indexOf("BookWidgets") || g()(document.createElement("div")).addClass("branding").appendTo("body")
                    }
                    )),
                    "tri"in e && g()((function() {
                        if ("iPad" === navigator.platform || -1 === navigator.userAgent.indexOf("BookWidgets") && -1 === navigator.userAgent.indexOf("ibookwidgets")) {
                            g()(document.createElement("div")).addClass("dialog-sheet").attr("id", "preview_alert").css({
                                color: "red",
                                "text-shadow": "none"
                            }).append(g()(document.createElement("p")).safeHtml("This is a free preview widget, created using a trial version of BookWidgets. <b>This widget may only be used for demonstration and evaluation purposes!</b>")).append(g()(document.createElement("p")).text("Please purchase a license key for the BookWidgets tool to remove this message.")).appendTo("body");
                            var e = g()(document.createElement("div")).addClass("dialog-sheet-shadow");
                            g()(document.body).append(e),
                            window.CreateDialogSheetFor("#preview_alert"),
                            setTimeout((function() {
                                g()("#preview_alert").data("dialogSheet").show()
                            }
                            ), 2e3),
                            setTimeout((function() {
                                g()("#preview_alert").data("dialogSheet").hide()
                            }
                            ), 6e3),
                            setTimeout((function() {
                                g()("#preview_alert").data("dialogSheet").show()
                            }
                            ), 3e4),
                            setTimeout((function() {
                                g()("#preview_alert").data("dialogSheet").hide()
                            }
                            ), 34e3)
                        }
                    }
                    )),
                    void 0 === String.prototype.trim && (String.prototype.trim = function() {
                        return String(this).replace(/^\s+|\s+$/g, "")
                    }
                    ),
                    window.getWidgetUrl = function() {
                        return window.location.href
                    }
                    ,
                    window.bwbackbuttonlabel = null,
                    "performance"in window == 0 && (window.performance = {}),
                    "now"in window.performance == 0) {
                        var o = Date.now();
                        window.performance.timing && window.performance.timing.navigationStart && (o = window.performance.timing.navigationStart),
                        window.performance.now = function() {
                            return Date.now() - o
                        }
                    }
                    e.hasOwnProperty("backbutton_label") && "" !== e.backbutton_label && (window.bwbackbuttonlabel = e.backbutton_label),
                    "Vertical" === e.widget_orientation ? g()("html").addClass("vertical") : g()("html").addClass("horizontal"),
                    null != e.widget_language && "" !== e.widget_language && g()("html").attr("lang", e.widget_language),
                    "no" === e.allow_browser_translation && g()("html").attr("translate", "no"),
                    setTimeout(L, 0)
                }
                )(j),
                q.resolve(j)
            }
            ))
        },
        43541: function(e, t, n) {
            "use strict";
            n.r(t);
            var r = n(5562)
              , o = n(58065)
              , a = n.n(o);
            window.addEventListener("message", (function(e) {
                var t = e.data;
                "set-css" === t.command ? (function(e) {
                    a()("style[id='designconfig'], link[id='designconfig']").remove();
                    var t = document.createElement("style");
                    t.id = "designconfig",
                    t.type = "text/css",
                    t.appendChild(document.createTextNode(e)),
                    document.head.appendChild(t)
                }(t.css),
                r.executeCssUpdateCallbacks()) : "show-css-config-elements" === t.command ? window.activateDesignInfoTooltips(t.translations) : "hide-css-config-elements" === t.command && window.disableDesignInfoTooltips()
            }
            ))
        },
        77752: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                navigateAlert: function() {
                    return s
                },
                showAlert: function() {
                    return i
                },
                showConfirmationDialog: function() {
                    return u
                },
                showCriticalAlert: function() {
                    return c
                },
                showFatalAlert: function() {
                    return l
                },
                showInfoMessage: function() {
                    return d
                }
            });
            var r = n(99870)
              , o = n(78514)
              , a = n(58065);
            function i(e, t, n, r, i) {
                i = i || i + " custom_alert",
                n = n || o("Ok"),
                t = t || "Alert",
                e = e || "No Message to Display";
                var s = a(document.createElement("div"))
                  , u = {};
                return u[n] = function() {
                    a(this).dialog("close"),
                    a(this).remove(),
                    r && r()
                }
                ,
                s.safeHtml(e).dialog({
                    title: t,
                    dialogClass: "bw-dialog no-close " + i,
                    resizable: !1,
                    modal: !0,
                    width: "auto",
                    buttons: u
                }),
                s
            }
            function s(e, t, n, r) {
                var o = i(e, t, n, (function() {}
                ));
                return o.parent().find("button").replaceWith(a(document.createElement("a")).safeHtml(n).attr({
                    href: r,
                    target: "_top"
                }).addClass("ui-button")),
                o
            }
            function u(e, t, n, o, i, s, u) {
                t || (t = "Please confirm"),
                e || (e = ""),
                i || (i = "OK"),
                s || (s = "Cancel"),
                a("#BwConfirmationDalog").remove();
                var c = a(document.createElement("div")).attr("id", "BwConfirmationDialog")
                  , l = {};
                return l[i] = function() {
                    a(this).dialog("close"),
                    a(this).remove(),
                    n && n()
                }
                ,
                l[s] = function() {
                    a(this).dialog("close"),
                    a(this).remove(),
                    o && o()
                }
                ,
                c.safeHtml(e).dialog({
                    title: t,
                    dialogClass: r("bw-dialog BwConfirmationDialog no-close", u && "bw-confirmation-warning"),
                    open: function() {
                        a(this).parent().find(".ui-dialog-buttonpane button:eq(1)").focus()
                    },
                    resizable: !1,
                    modal: !0,
                    width: 500,
                    buttons: l
                }),
                c
            }
            function c(e, t) {
                var n = {
                    message: e,
                    title: t
                };
                0 === a("#critical-alert-button").length && a(document.createElement("div")).attr("id", "critical-alert-button").addClass("bw-toolbutton").append(a(document.createElement("div")).addClass("bw-icon bw-icon-critical-error")).prependTo(a("#title-toolbar")).click(i),
                i(n.message, n.title)
            }
            function l(e, t) {
                a(document.createElement("div")).safeHtml(e).dialog({
                    title: t,
                    dialogClass: "bw-dialog no-close",
                    resizable: !1,
                    modal: !0,
                    width: "auto"
                })
            }
            function d(e) {
                console.log("ShowInfoMessage");
                var t = a(document.createElement("div"));
                function n() {
                    t.removeClass("bw-dialog-animate-in").addClass("bw-dialog-animate-out"),
                    setTimeout((function() {
                        t.remove()
                    }
                    ), 500)
                }
                t.safeHtml(e).addClass("bw-dialog bw-info-dialog bw-dialog-animate-in").click((function(e) {
                    e.stopPropagation(),
                    n()
                }
                )).appendTo(a("body")),
                setTimeout(n, 1e4)
            }
        },
        70269: function(e, t, n) {
            var r, o, a;
            e.exports = (r = n(58065),
            o = n(41222),
            a = n(61743),
            {
                bwMakeDragAndResizable: function(e, t, n, i, s) {
                    var u = -1 !== a.getPlatform().indexOf("ibooks")
                      , c = new o.Manager(e.get(0));
                    c.add(new o.Pan({
                        threshold: 0,
                        pointers: 0
                    })),
                    u || c.add(new o.Pinch({
                        threshold: 0
                    })).recognizeWith([c.get("pan")]);
                    var l = null;
                    function d(t) {
                        null === l && (l = {
                            pos: e.offset(),
                            width: e.width(),
                            height: e.height(),
                            center: {
                                x: e.offset().left,
                                y: e.offset().top
                            }
                        }),
                        t && !l.hasOwnProperty("last_rotation") && (l.center = t.center)
                    }
                    function f(t) {
                        var n = t.scale;
                        e.offset({
                            top: l.pos.top + t.deltaY + (l.center.y - l.pos.top) * (1 - n),
                            left: l.pos.left + t.deltaX + (l.center.x - l.pos.left) * (1 - n)
                        }),
                        u || (e.width(l.width * n),
                        e.height(l.height * n))
                    }
                    function p(t) {
                        var n = e.width()
                          , o = e.height()
                          , a = e.position()
                          , i = r(window).width()
                          , u = r(window).height();
                        e.width(n * t),
                        e.height(o * t),
                        e.css("left", (a.left - i / 2) * t + i / 2),
                        e.css("top", (a.top - u / 2) * t + u / 2),
                        s && s()
                    }
                    c.on("hammer.input", (function(e) {
                        e.isFinal && (l = null)
                    }
                    )),
                    c.on("panstart panmove", (function(e) {
                        "panstart" === e.type ? d() : (f(e),
                        i && i())
                    }
                    )),
                    u || (c.on("pinchstart pinchmove", (function(e) {
                        "pinchstart" === e.type ? d(e) : (f(e),
                        s && s())
                    }
                    )),
                    c.on("pinchend pinchcancel", (function() {
                        l && (l = null,
                        d())
                    }
                    ))),
                    t.tapOrClick((function() {
                        p(1.25)
                    }
                    )),
                    n.tapOrClick((function() {
                        p(.8)
                    }
                    ))
                }
            })
        },
        78193: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                clear: function() {
                    return D
                },
                create: function() {
                    return R
                },
                fromConfig: function() {
                    return O
                },
                latex: function() {
                    return P
                },
                redraw: function() {
                    return I
                }
            });
            var r = n(39817)
              , o = n.n(r)
              , a = n(55009)
              , i = n.n(a)
              , s = n(57581)
              , u = n.n(s)
              , c = n(53142)
              , l = n.n(c)
              , d = n(75857)
              , f = n.n(d)
              , p = n(40105)
              , h = n.n(p)
              , m = n(4642)
              , g = n.n(m)
              , v = n(58065)
              , w = n.n(v)
              , b = n(45250)
              , y = b.map
              , C = b.mapValues
              , x = b.flatten
              , E = n(12662);
            function k() {
                return C(E, (function(e) {
                    return x(y(e, (function(e) {
                        return y(e.buttons, (function(e) {
                            return e.name
                        }
                        ))
                    }
                    )))
                }
                ))
            }
            function S(e) {
                return function(e) {
                    if (Array.isArray(e))
                        return T(e)
                }(e) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(e) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return T(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? T(e, t) : void 0
                    }
                }(e) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function T(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var _ = null
              , A = !1;
            function O(e, t) {
                var n = {};
                if (null != e) {
                    try {
                        var r = JSON.parse(e);
                        if (0 === r.length && "" === t)
                            return k();
                        g()(E, (function(e, t) {
                            g()(e, (function(e, o) {
                                -1 !== r.indexOf(o) && (n.hasOwnProperty(t) || (n[t] = []),
                                g()(e.buttons, (function(e) {
                                    n[t].push(e.name)
                                }
                                )))
                            }
                            ))
                        }
                        ))
                    } catch (t) {
                        console.error("Could not parse local config", e, t)
                    }
                    if (null == t || "" === t)
                        return n
                } else if (null == t || "" === t)
                    return k();
                try {
                    var a = JSON.parse(t);
                    if (g()(a, (function(e, t) {
                        n.hasOwnProperty(t) ? n[t] = u()(n[t], (function(t) {
                            return -1 === e.off.indexOf(t) && -1 === e.on.indexOf(t)
                        }
                        )) : n[t] = [],
                        n[t] = [].concat(S(n[t]), S(e.on))
                    }
                    )),
                    f()(o()(n)).length > 0)
                        return n;
                    var i = k();
                    if (g()(a, (function(e, t) {
                        i[t] = u()(i[t], (function(t) {
                            return -1 === e.off.indexOf(t)
                        }
                        ))
                    }
                    )),
                    f()(o()(i)).length > 0)
                        return i
                } catch (t) {
                    console.error("Could not parse global config", e, t)
                }
                return k()
            }
            function D(e) {
                var t = _(e.find(".math-field")[0]);
                null != t && (A = !0,
                t.latex(""),
                A = !1)
            }
            function I(e) {
                var t = _(e.find(".math-field")[0]);
                null != t && t.reflow()
            }
            function P(e, t) {
                var n = _(e.find(".math-field")[0]);
                if (null == n)
                    return console.error("No math field"),
                    null;
                if (null == t)
                    return n.latex();
                A = !0;
                var r = n.latex(function(e) {
                    return e.replace(/\\not\\subset/g, "\\notsubset").replace(/\\not\\supset/g, "\\notsupset")
                }(t));
                return A = !1,
                r
            }
            function R(e, t, n) {
                null == _ && (_ = window.MathQuill.getInterface(2));
                var r, o = w()(document.createElement("span")).addClass("flex-math").appendTo(e), a = w()(document.createElement("span")).addClass("math-field").appendTo(o), s = _.MathField(a[0], {
                    spaceBehavesLikeTab: !0,
                    handlers: {
                        edit: function() {
                            !1 === A && n && n()
                        }
                    }
                });
                function c(e, t) {
                    e.hasOwnProperty("write") ? s.write(e.write) : e.hasOwnProperty("type") ? s.typedText(e.type) : e.hasOwnProperty("key") ? s.keystroke(e.key) : e.hasOwnProperty("cmd") ? s.cmd(e.cmd) : e.hasOwnProperty("matrix") ? function(e) {
                        var t = w()(document.createElement("div")).css({
                            position: "absolute",
                            width: "100%",
                            height: "100%",
                            left: "0px",
                            top: "0px",
                            "z-index": 10
                        }).appendTo("body")
                          , n = w()(document.createElement("table")).css({
                            position: "absolute",
                            left: Math.min(e.clientX, w()(window).width() - 160),
                            top: e.clientY,
                            background: "white"
                        }).appendTo(t);
                        i()(5, (function(e) {
                            var t = w()(document.createElement("tr")).appendTo(n);
                            i()(5, (function(n) {
                                w()(document.createElement("td")).attr({
                                    i: e,
                                    j: n
                                }).css({
                                    padding: "2px",
                                    width: "28px",
                                    height: "28px",
                                    background: "lightgray"
                                }).appendTo(t)
                            }
                            ))
                        }
                        ));
                        var r = w().Deferred();
                        return n.find("td").on("mousemove", (function() {
                            var e, t, r = w()(this);
                            e = r.attr("i"),
                            t = r.attr("j"),
                            n.find("td").each((function() {
                                var n = w()(this)
                                  , r = n.attr("i")
                                  , o = n.attr("j");
                                n.css("background", r <= e && o <= t ? "darkgray" : "lightgray")
                            }
                            ))
                        }
                        )).on("mouseup", (function(e) {
                            e.preventDefault(),
                            e.stopPropagation();
                            var n = w()(this)
                              , o = parseInt(n.attr("i")) + 1
                              , a = parseInt(n.attr("j")) + 1;
                            t.remove(),
                            r.resolve(o, a)
                        }
                        )).on("mousedown", (function(e) {
                            e.preventDefault(),
                            e.stopPropagation();
                            var n = w()(this)
                              , o = parseInt(n.attr("i")) + 1
                              , a = parseInt(n.attr("j")) + 1;
                            t.remove(),
                            r.resolve(o, a)
                        }
                        )),
                        r
                    }(t).then((function(t, n) {
                        s.write(function(e, t, n) {
                            return "\\begin{" + e + "}" + i()(t, (function() {
                                return i()(n, (function() {
                                    return "{}"
                                }
                                )).join("&")
                            }
                            )).join("\\\\") + "\\end{" + e + "}"
                        }(e.matrix, t, n))
                    }
                    )) : console.error("Unknnown command: ", e)
                }
                function d(e, t, n, r) {
                    n = n || "button";
                    var o = w()(document.createElement(n)).addClass("math-button").makeButton(e.name).on("mousedown", (function(n) {
                        n.preventDefault(),
                        n.stopPropagation(),
                        c(e, n),
                        t || (s.clearSelection(),
                        s.__controller.textarea.val(""))
                    }
                    ));
                    return r && !e.symbol ? o.append(function(e) {
                        var t = w()(document.createElement("span")).addClass("latex").safeHtml(e.latex || e.write);
                        return e.size && t.css("font-size", e.size),
                        e.offset && t.css({
                            top: e.offset,
                            position: "relative"
                        }),
                        t
                    }(e)) : o.safeHtml(e.symbol),
                    o
                }
                return a.on("focusin", (function(e) {
                    e.stopPropagation(),
                    function(e) {
                        if (!r) {
                            r = w()(document.createElement("div")).addClass("math-buttons bw-column-container").appendTo("body");
                            var t = w()(document.createElement("div")).addClass("math-buttons-left bw-column-fixed").appendTo(r)
                              , n = w()(document.createElement("div")).addClass("math-set-scroll-wrapper bw-column-resizing").appendTo(r)
                              , o = w()(document.createElement("div")).addClass("math-set active").appendTo(n);
                            d({
                                name: "Shift Left",
                                symbol: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2 4v10h2l8-6v4h8v4h-8v4l-8-6h-2v10h20v-20z"/></svg>',
                                key: "Shift-Left"
                            }, !0, "div").appendTo(t),
                            d({
                                name: "Shift Right",
                                symbol: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20 4v10h-2l-8-6v4h-8v4h8v4l8-6h2v10h-20v-20z"/></svg>',
                                key: "Shift-Right"
                            }, !0, "div").appendTo(t),
                            d({
                                name: "Left",
                                symbol: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M4 14l8-6v4h8v4h-8v4z"/></svg>',
                                key: "Left"
                            }, !1, "div").appendTo(t),
                            d({
                                name: "Right",
                                symbol: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18 14l-8-6v4h-8v4h8v4z"/></svg>',
                                key: "Right"
                            }, !1, "div").appendTo(t),
                            function(e) {
                                var t = null
                                  , n = null
                                  , r = null
                                  , o = null;
                                function a(n) {
                                    var r = e.offset()
                                      , o = n;
                                    e.offset({
                                        left: r.left + o.x - t.x,
                                        top: r.top + o.y - t.y
                                    }),
                                    t = o
                                }
                                function i(e) {
                                    null != t && (a(e),
                                    n = t = null,
                                    o.remove(),
                                    o = null,
                                    r.remove(),
                                    r = null)
                                }
                                function s(e) {
                                    return "touchstart" === e.type || "touchmove" === e.type ? {
                                        x: e.originalEvent.touches[0].pageX,
                                        y: e.originalEvent.touches[0].pageY
                                    } : "touchend" === e.typ ? t : {
                                        x: e.pageX,
                                        y: e.pageY
                                    }
                                }
                                w()(document.createElement("div")).css({
                                    left: "0px",
                                    bottom: "0px",
                                    width: "32px",
                                    height: "32px",
                                    position: "absolute",
                                    cursor: "move"
                                }).addClass("bw-icon-small bw-icon-draghandle").appendTo(e).on("mousedown touchstart", (function(u) {
                                    u.preventDefault(),
                                    u.stopPropagation(),
                                    null == n ? w()(u.target).hasClass("math-set-scroll-wrapper") && u.offsetX > w()(u.target).width() - 20 || (n = t = s(u),
                                    null == r && (r = w()(document.createElement("div")).css({
                                        position: "absolute",
                                        background: "rgba(0, 0, 0, 0.3)",
                                        left: "0px",
                                        top: "0px",
                                        width: "100%",
                                        height: "100%"
                                    }).insertBefore(e)),
                                    null == o && (o = w()(document.createElement("div")).css({
                                        position: "absolute",
                                        left: "0px",
                                        top: "0px",
                                        width: "100%",
                                        height: "100%"
                                    }).on("mousedown", (function(e) {
                                        e.preventDefault(),
                                        e.stopPropagation(),
                                        i(s(e))
                                    }
                                    )).on("mousemove", (function(e) {
                                        e.preventDefault(),
                                        e.stopPropagation(),
                                        null != t && a(s(e))
                                    }
                                    )).on("mouseup", (function(e) {
                                        e.preventDefault(),
                                        e.stopPropagation(),
                                        i(s(e))
                                    }
                                    )).insertAfter(e))) : i(s(u))
                                }
                                )).on("mousemove touchmove", (function(e) {
                                    e.preventDefault(),
                                    e.stopPropagation(),
                                    null != t && a(s(e))
                                }
                                )).on("mouseup touchend", (function(e) {
                                    e.preventDefault(),
                                    e.stopPropagation();
                                    var r = s(e);
                                    t && Math.abs(r.x - n.x) < 10 && Math.abs(r.y - n.y) < 10 || i(r)
                                }
                                ))
                            }(r);
                            var i = function(e) {
                                return f()(u()(h()(e, (function(e, t) {
                                    if (!E.hasOwnProperty(t))
                                        return console.error("no set: ", t),
                                        null;
                                    var n = E[t]
                                      , r = f()(h()(n, (function(e) {
                                        return e.buttons
                                    }
                                    )));
                                    return l()(e) ? u()(r, (function(t) {
                                        return -1 !== e.indexOf(t.name)
                                    }
                                    )) : r
                                }
                                )), (function(e) {
                                    return null != e
                                }
                                )))
                            }(e);
                            g()(i, (function(e) {
                                o.append(d(e, !1, "div", !0))
                            }
                            ));
                            var s = w()(window).width()
                              , c = Math.min(s - 95, 450) / 32
                              , p = Math.ceil(i.length / c)
                              , m = 32 * (c = Math.ceil(i.length / p)) + 12 + 64
                              , v = 32 * p
                              , b = a.offset()
                              , y = Math.min(s - m - 11, Math.max(67, b.left + a.width() / 2 - m / 2));
                            (v = Math.min(Math.max(v, 88), 160, b.top - 15 - 3)) < 95 && (v = 88),
                            r.css({
                                width: m,
                                height: v,
                                top: b.top - 15 - v,
                                left: y
                            }),
                            t.css({
                                height: v
                            }),
                            r.find(".latex").each((function() {
                                _.StaticMath(this)
                            }
                            ))
                        }
                    }(t)
                }
                )),
                o.on("focusout", (function() {
                    null != r && r.remove(),
                    r = null
                }
                )),
                o
            }
        },
        53126: function(e) {
            e.exports = function(e) {
                return String(e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            }
        },
        69049: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                createIframe: function() {
                    return f
                },
                hasIframeConfiguration: function() {
                    return d
                },
                processEmbeddedIframes: function() {
                    return l
                }
            });
            var r = n(84966)
              , o = n(58065)
              , a = n.n(o)
              , i = n(120)
              , s = n(51958)
              , u = n(65585);
            function c(e) {
                var t = ["allow-downloads", "allow-forms", "allow-modals", "allow-pointer-lock", "allow-popups", "allow-popups-to-escape-sandbox", "allow-same-origin", "allow-scripts", "allow-top-navigation-by-user-activation"];
                null != document.hasStorageAccess && t.push("allow-storage-access-by-user-activation");
                try {
                    e.attr({
                        allow: "microphone; camera",
                        sandbox: t.join(" "),
                        allowfullscreen: ""
                    })
                } catch (e) {
                    console.log()
                }
            }
            function l(e) {
                e.each((function() {
                    var e;
                    (e = a()(this)).attr("src").toLowerCase().endsWith("mp4") ? function(e) {
                        e.replaceWith(r.createHtml5VideoPlayer(e.attr("src")))
                    }(e) : (c(e),
                    e.attr("src", e.attr("src")))
                }
                ))
            }
            function d(e) {
                return null != e.url && "" !== e.url && "I have a URL" === e.linktype || null != e.iframe_embed_code && "" !== e.iframe_embed_code && "I have an iframe embed code" === e.linktype
            }
            function f(e, t) {
                var n;
                if (null == (n = "I have a URL" === e.linktype ? e.url : (0,
                u.A)((0,
                s.appSafeUnescape)(e.iframe_embed_code))) || "" === n)
                    return null;
                var r = {};
                null != e.width && "" !== e.width && (r.width = e.width),
                null != e.height && "" !== e.height && (r.height = e.height);
                var o = a()(document.createElement("iframe")).attr(r).appendTo(t);
                return c(o),
                o.safeAttr("src", (0,
                i.A)(n)),
                l(o),
                o
            }
        },
        55286: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                addBackgroundImageAltText: function() {
                    return u
                },
                calculateScaleAndOffset: function() {
                    return d
                },
                getImageSize: function() {
                    return c
                },
                imageSource: function() {
                    return s
                },
                processRichTextImages: function() {
                    return l
                }
            });
            var r = n(8138)
              , o = n.n(r)
              , a = n(58065)
              , i = n.n(a);
            function s(e) {
                return e ? o()(e) ? e : e.filename ? e.filename : e.sources ? e.sources[0].src : "" : e
            }
            function u(e, t) {
                null != e && e.alttext ? t.attr({
                    role: "img",
                    alt: e.alttext
                }) : t.attr({
                    alt: null
                })
            }
            function c(e, t) {
                var n = new window.Image;
                n.onload = function() {
                    var e = this.width
                      , n = this.height;
                    t(e, n)
                }
                ,
                n.onerror = function() {
                    t()
                }
                ,
                n.src = e
            }
            function l(e) {
                e.find("img").attr({
                    height: "",
                    draggable: "false"
                }).css("max-width", "100%").each((function() {
                    var e = i()(this)
                      , t = e.css("float");
                    "left" === t ? e.css({
                        "margin-right": "10px",
                        "margin-bottom": "10px"
                    }) : "right" === t && e.css({
                        "margin-left": "10px",
                        "margin-bottom": "10px"
                    })
                }
                ))
            }
            function d(e, t, n, r, o) {
                var a, i, s, u, c, l;
                return "Cover entire area, keep aspect ratio" === e ? ((c = t / r) < (l = n / o) ? (a = l,
                i = l) : (a = c,
                i = c),
                s = (t - r * a) / 2,
                u = (n - o * i) / 2) : "Contain entire picture, keep aspect ratio" === e ? ((c = t / r) > (l = n / o) ? (a = l,
                i = l) : (a = c,
                i = c),
                s = (t - r * a) / 2,
                u = (n - o * i) / 2) : "Cover entire area with entire picture" === e ? (s = 0,
                u = 0,
                a = t / r,
                i = n / o) : (a = 1,
                i = 1,
                s = (t - r) / 2,
                u = (n - o) / 2),
                {
                    scale_x: a,
                    scale_y: i,
                    offset_x: s,
                    offset_y: u
                }
            }
        },
        49161: function(e, t, n) {
            "use strict";
            function r(e) {
                return "Numerical" !== e ? {} : {
                    pattern: "[0-9]*",
                    inputmode: "numeric"
                }
            }
            n.r(t),
            n.d(t, {
                keyboardAttribs: function() {
                    return r
                }
            })
        },
        24507: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                adaptWidgetLoadPath: function() {
                    return s
                },
                loadCSS: function() {
                    return c
                },
                loadJS: function() {
                    return u
                }
            });
            var r = n(58065)
              , o = n.n(r)
              , a = n(61743);
            function i(e) {
                if (window.WidgetParams) {
                    if (e && window.WidgetParams.externalRootURL)
                        return window.WidgetParams.externalRootURL;
                    if (window.WidgetParams.rootURL)
                        return window.WidgetParams.rootURL
                }
                return (0,
                a.isWebPreview)() || window.location.protocol.startsWith("http") && null != window.bwshortcode ? window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/", window.location.pathname.lastIndexOf("/") - 1)) : window.location.protocol.startsWith("http") && null == window.bwshortcode ? window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/")) : ""
            }
            function s(e, t) {
                return e.startsWith("../") ? i(t) + e.substring(2) : e.startsWith("http://") || e.startsWith("https://") ? e : window.WidgetParams && window.WidgetParams.rootURL ? i(t) + "/" + e : e
            }
            function u(e, t, n) {
                e = s(e);
                var r = o().Deferred()
                  , a = document.createElement("script");
                if (a.setAttribute("type", "text/javascript"),
                n)
                    for (var i in n)
                        n.hasOwnProperty(i) && a.setAttribute(i, n[i]);
                return a.onload = function() {
                    r.resolve()
                }
                ,
                a.onerror = function() {
                    window.navigator && window.navigator.userAgent && -1 === window.navigator.userAgent.indexOf("PhantomJS") && -1 === window.navigator.userAgent.indexOf("HeadlessChrome") && console.error("Could not load: " + e),
                    r.reject()
                }
                ,
                a.setAttribute("src", e),
                document.getElementsByTagName(t || "head")[0].appendChild(a),
                r
            }
            function c(e, t) {
                e = s(e);
                var n = o().Deferred()
                  , r = document.createElement("link");
                return r.setAttribute("rel", "stylesheet"),
                r.setAttribute("type", "text/css"),
                r.onload = function() {
                    n.resolve(r)
                }
                ,
                r.onerror = function() {
                    window.navigator && window.navigator.userAgent && -1 === window.navigator.userAgent.indexOf("PhantomJS") && -1 === window.navigator.userAgent.indexOf("HeadlessChrome") && console.error("Could not load: " + e),
                    n.reject()
                }
                ,
                r.setAttribute("href", e),
                document.getElementsByTagName(t || "head")[0].appendChild(r),
                n
            }
            window.adaptWidgetLoadPath = s
        },
        62946: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                create: function() {
                    return s
                }
            });
            var r = n(58065)
              , o = n.n(r)
              , a = n(23558)
              , i = n.n(a);
            function s(e, t, n, r, a, s) {
                var u, c = i().getInstance();
                c.setRenderMode(c.SVG),
                c.importDefaults({
                    DragOptions: {
                        cursor: "pointer",
                        zIndex: 2e3
                    },
                    PaintStyle: {
                        strokeStyle: "#666"
                    },
                    EndpointStyle: {
                        width: 20,
                        height: 16,
                        strokeStyle: "#666"
                    },
                    Endpoint: "Rectangle",
                    Anchors: ["TopCenter", "TopCenter"]
                });
                var l = []
                  , d = !1
                  , f = !1;
                function p(t) {
                    for (var r = 0; r < u.pairs.length; ++r) {
                        var a = u.pairs[r];
                        if ((s ? t.targetId : t.sourceId) === a.sourceId)
                            if ((s ? t.sourceId : t.targetId) === a.targetId)
                                if (!0 === t.getParameter("correction"))
                                    n.setTag(o()(t.canvas), "wm-missing-answer");
                                else {
                                    n.setTag(o()(t.canvas), "wm-correct-answer");
                                    var i = o()(e).find("#" + t.sourceId)
                                      , c = o()(e).find("#" + t.targetId);
                                    n.setTag(i, "wm-correct-answer"),
                                    n.setTag(c, "wm-correct-answer"),
                                    n.clearTag(i, "wm-wrong-answer"),
                                    n.clearTag(c, "wm-wrong-answer")
                                }
                            else
                                n.setTag(o()(t.canvas), "wm-wrong-answer"),
                                i = o()(e).find("#" + t.sourceId),
                                c = o()(e).find("#" + t.targetId),
                                n.clearTag(i, "wm-correct-answer"),
                                n.clearTag(c, "wm-correct-answer"),
                                n.setTag(i, "wm-wrong-answer"),
                                n.setTag(c, "wm-wrong-answer")
                    }
                }
                function h(t, r) {
                    if (r) {
                        for (var i = -1, s = 0; s < l.length; s++)
                            if (l[s] === t) {
                                i = s;
                                break
                            }
                        -1 !== i && (l.splice(i, 1),
                        !1 === d && null != a && a());
                        var h = o()(e).find("#" + t.sourceId)
                          , m = o()(e).find("#" + t.targetId);
                        n.clearTag(h, "wm-correct-answer"),
                        n.clearTag(m, "wm-correct-answer"),
                        n.clearTag(h, "wm-wrong-answer"),
                        n.clearTag(m, "wm-wrong-answer")
                    } else
                        l.push(t),
                        u.hasOwnProperty("pairs") && p(t),
                        o()(t.canvas).attr("source", t.sourceId),
                        o()(t.canvas).attr("target", t.targetId),
                        !1 === d && null != a && a();
                    f || c.repaintEverything()
                }
                c.bind("connection", (function(e, t) {
                    h(e.connection, !1)
                }
                )),
                c.bind("connectionDetached", (function(e, t) {
                    h(e.connection, !0)
                }
                )),
                c.bind("click", (function(e, t) {
                    c.detach(e)
                }
                ));
                var m = []
                  , g = {
                    tolerance: "touch",
                    hoverClass: "dropHover",
                    activeClass: "dragActive"
                }
                  , v = {
                    endpoint: ["Dot", {
                        radius: 15
                    }],
                    anchor: [1, .5, 1, 0],
                    paintStyle: {
                        width: 25,
                        height: 21
                    },
                    isSource: !s,
                    isTarget: s,
                    connectorStyle: {
                        lineWidth: 4
                    },
                    connector: r,
                    maxConnections: 2,
                    dropOptions: g,
                    beforeDrop: function(e) {
                        return w(e),
                        b(e),
                        !0
                    },
                    detachable: !1,
                    reattach: !1
                }
                  , w = function(e) {
                    for (var t = -1, n = 0; n < l.length; n++)
                        if (l[n].targetId === e.targetId) {
                            t = n;
                            break
                        }
                    -1 !== t && c.detachAllConnections(e.targetId)
                }
                  , b = function(e) {
                    for (var t = -1, n = 0; n < l.length; n++)
                        if (l[n].sourceId === e.sourceId) {
                            t = n;
                            break
                        }
                    -1 !== t && c.detachAllConnections(l[t].targetId)
                }
                  , y = {
                    endpoint: ["Dot", {
                        radius: 15
                    }],
                    anchor: [0, .5, 0, 0],
                    paintStyle: {
                        opacity: .5
                    },
                    isTarget: !s,
                    isSource: s,
                    connectorStyle: {
                        lineWidth: 4
                    },
                    connector: r,
                    dropOptions: g,
                    maxConnections: 2,
                    beforeDrop: function(e) {
                        return w(e),
                        b(e),
                        !0
                    },
                    detachable: !1,
                    reattach: !1
                };
                function C(r) {
                    var a = !0
                      , i = null;
                    function s(e) {
                        var n = o()(t());
                        null != i && (clearTimeout(i),
                        i = null);
                        var r = n.scrollTop();
                        n.scrollTop(r + e),
                        a || (i = setTimeout((function() {
                            i = null,
                            s(e)
                        }
                        ), 50))
                    }
                    r.bind("mousedown", (function(r) {
                        function i(n) {
                            !function(n) {
                                var r = o()(t());
                                a = !0,
                                n < 0 && (a = !1,
                                s(-5));
                                var i, u = r.height();
                                n > u && u < (i = o()(e),
                                Math.max(0, i.offset().top) + i.height()) && (a = !1,
                                s(5))
                            }(n.originalEvent.clientY)
                        }
                        n.blurFocused(),
                        o()("html").on("mouseup", (function e() {
                            a = !0,
                            o()("html").off("mouseup", e),
                            o()("html").off("mousemove", i)
                        }
                        )),
                        o()("html").on("mousemove", i)
                    }
                    ))
                }
                return u = {
                    repaint: function() {
                        try {
                            c.repaintEverything(c)
                        } catch (e) {}
                    },
                    addSource: function(t) {
                        m[t] = c.addEndpoint(t, {
                            scope: e,
                            container: o()(e)
                        }, v),
                        o()(m[t].endpoint.svg.parentNode).attr({
                            source: t,
                            "aria-labelledby": t
                        }),
                        C(o()(m[t].endpoint.svg.parentNode))
                    },
                    addTarget: function(t) {
                        m[t] = c.addEndpoint(t, {
                            scope: e,
                            container: o()(e)
                        }, y),
                        o()(m[t].endpoint.svg.parentNode).attr({
                            target: t,
                            "aria-labelledby": t
                        })
                    },
                    clearConnections: function() {
                        for (f = !0; l.length > 0; ) {
                            var e = l[0];
                            c.detachAllConnections(e.sourceId),
                            c.detachAllConnections(e.targetId)
                        }
                        f = !1,
                        this.repaint()
                    },
                    connect: function(e, t, n, r) {
                        var o = f;
                        r && (f = !0);
                        var a = m[e]
                          , i = m[t];
                        a && i && (n ? c.connect({
                            source: s ? i : a,
                            target: s ? a : i,
                            parameters: {
                                correction: !0
                            }
                        }) : c.connect({
                            source: s ? i : a,
                            target: s ? a : i
                        })),
                        r && (f = o)
                    },
                    getConnections: function() {
                        for (var e = [], t = 0; t < l.length; ++t)
                            !0 !== l[t].getParameter("correction") && e.push({
                                sourceId: s ? l[t].targetId : l[t].sourceId,
                                targetId: s ? l[t].sourceId : l[t].targetId
                            });
                        return e
                    },
                    setCorrectPairs: function(e) {
                        this.pairs = e;
                        for (var t = 0; t < l.length; ++t)
                            p(l[t])
                    },
                    setLoading: function(e) {
                        d = e
                    }
                }
            }
        },
        24321: function() {
            Object.assign || Object.defineProperty(Object, "assign", {
                enumerable: !1,
                configurable: !0,
                writable: !0,
                value: function(e) {
                    "use strict";
                    if (null == e)
                        throw new TypeError("Cannot convert first argument to object");
                    for (var t = Object(e), n = 1; n < arguments.length; n++) {
                        var r = arguments[n];
                        if (null != r) {
                            r = Object(r);
                            for (var o = Object.keys(Object(r)), a = 0, i = o.length; a < i; a++) {
                                var s = o[a]
                                  , u = Object.getOwnPropertyDescriptor(r, s);
                                void 0 !== u && u.enumerable && (t[s] = r[s])
                            }
                        }
                    }
                    return t
                }
            })
        },
        38885: function(e, t, n) {
            var r = n(58065)
              , o = n(61743)
              , a = n(24507)
              , i = a.loadJS
              , s = a.adaptWidgetLoadPath
              , u = n(31004).createThrobber;
            function c(e) {
                var t = r.Deferred();
                return window.pdfjsLib.getDocument({
                    url: e,
                    isEvalSupported: !1
                }).promise.then((function(e) {
                    console.log("PDF loaded"),
                    t.resolve(e)
                }
                ), (function(e) {
                    console.error("PDF load failure: ", e),
                    t.reject(e)
                }
                )),
                t
            }
            function l(e, t, n, o, a) {
                var i = function(e, t, n, o) {
                    var a, i, s = r(document.createElement("div")).addClass("pdf-viewer").appendTo(e), c = r(document.createElement("div")).addClass("pdf-navbar").hide().appendTo(s), l = 1, d = [], f = [];
                    function p() {
                        return "fullwidth" === a ? (e.width() - 20) / i.width : "fullheight" === a ? e.height() / i.height : l
                    }
                    function h(e) {
                        var n = r.Deferred()
                          , o = p();
                        if (o === f[e])
                            return n.resolve(),
                            n;
                        f[e] = o;
                        var a = s.find(".pdf-canvas")
                          , i = r(a[e]);
                        if (i.hasClass("drawing"))
                            return n.resolve(),
                            n;
                        i.addClass("drawing");
                        var u = i.find("canvas")[0]
                          , c = d[e]
                          , l = c.getViewport({
                            scale: o
                        });
                        u.height = l.height,
                        u.width = l.width,
                        i.css({
                            width: null,
                            height: null
                        }),
                        r(u).css({
                            transform: ""
                        });
                        var h = {
                            canvasContext: u.getContext("2d"),
                            viewport: l
                        };
                        return c.render(h).promise.then((function() {
                            n.resolve(),
                            i.removeClass("drawing")
                        }
                        )),
                        t && function(e, t, n) {
                            n.find(".textLayer").remove();
                            var o = r(document.createElement("div")).addClass("textLayer").appendTo(n)[0];
                            e.getTextContent().then((function(e) {
                                var n = window.pdfjsLib;
                                try {
                                    new n.TextLayer({
                                        textContentSource: e,
                                        container: o,
                                        viewport: t
                                    }).render()
                                } catch (t) {
                                    console.error("Error creating text layer", t, e)
                                }
                            }
                            ))
                        }(c, l, i),
                        function(e, t, n, o) {
                            var a = n.height
                              , i = n.width;
                            o.find(".annotationsLayer").remove();
                            var s = r(document.createElement("div")).addClass("annotationsLayer").css({
                                left: "0px",
                                top: "0px",
                                height: a + "px",
                                width: i + "px"
                            }).appendTo(o[0]);
                            e.getAnnotations().then((function(n) {
                                new window.pdfjsLib.AnnotationLayer({
                                    viewport: t,
                                    div: s[0],
                                    page: e
                                }).render({
                                    viewport: t.clone({
                                        dontFlip: !0
                                    }),
                                    div: s[0],
                                    annotations: n,
                                    linkService: {
                                        externalLinkTarget: 2,
                                        getDestinationHash: function() {
                                            return ""
                                        },
                                        getAnchorUrl: function() {
                                            return ""
                                        },
                                        addLinkAttributes: function(e, t) {
                                            r(e).attr("href", t),
                                            r(e).attr("target", "_blank")
                                        }
                                    }
                                })
                            }
                            ))
                        }(c, l, u, i),
                        n
                    }
                    var m = !1
                      , g = !1;
                    function v(e) {
                        !function(e) {
                            var t = 0
                              , n = s.find(".pdf-canvas")
                              , o = p();
                            n.each((function() {
                                var n = r(this)
                                  , a = r(this).find("canvas")
                                  , i = a.attr("width")
                                  , s = a.attr("height");
                                if (e)
                                    n.css({
                                        width: null,
                                        height: null
                                    }),
                                    r(a).css({
                                        transform: ""
                                    }),
                                    l = o;
                                else {
                                    var u = f[t];
                                    n.css({
                                        width: i * o / u,
                                        height: s * o / u
                                    }),
                                    a.css({
                                        transform: "scale(" + o / u + ")"
                                    })
                                }
                                ++t
                            }
                            ))
                        }(e),
                        g ? m = !0 : (g = !0,
                        function() {
                            for (var e = r.Deferred(), t = [], n = 0; n < d.length; ++n)
                                t.push(n);
                            return t.reduce((function(e, t) {
                                return e.then((function() {
                                    return m ? Promise.resolve() : h(t)
                                }
                                ))
                            }
                            ), Promise.resolve()).then((function() {
                                e.resolve()
                            }
                            )),
                            e
                        }().then((function() {
                            g = !1,
                            m && (m = !1,
                            v())
                        }
                        )))
                    }
                    function w(e) {
                        l !== e && (l = e,
                        a = "zoomed",
                        v())
                    }
                    function b() {
                        "fullwidth" === a ? (a = "fullheight",
                        l = e.height() / i.height) : (a = "fullwidth",
                        l = (e.width() - 20) / i.width),
                        v()
                    }
                    r(document.createElement("div")).addClass("pdf-navbutton pdf-zoomin").append(r(document.createElement("span")).addClass("bw-icon bw-icon-zoom-in")).tapOrClick((function(e) {
                        e.preventDefault(),
                        e.stopPropagation(),
                        w(1.2 * l)
                    }
                    )).appendTo(c),
                    r(document.createElement("div")).addClass("pdf-navbutton pdf-zoomout").append(r(document.createElement("span")).addClass("bw-icon bw-icon-zoom-out")).tapOrClick((function(e) {
                        e.preventDefault(),
                        e.stopPropagation(),
                        w(l / 1.2)
                    }
                    )).appendTo(c),
                    r(document.createElement("div")).addClass("pdf-navbutton pdf-zoomfit").append(r(document.createElement("span")).addClass("bw-icon bw-icon-grow")).tapOrClick((function(e) {
                        e.preventDefault(),
                        e.stopPropagation(),
                        b()
                    }
                    )).appendTo(c),
                    n && fetch(o).then((function(e) {
                        return e.blob()
                    }
                    )).then((function(e) {
                        var t = URL.createObjectURL(e);
                        r(document.createElement("a")).attr({
                            href: t,
                            download: o.substring(o.lastIndexOf("/") + 1)
                        }).append(r(document.createElement("div")).addClass("pdf-navbutton pdf-download").append(r(document.createElement("span")).addClass("bw-icon bw-icon-download"))).appendTo(c)
                    }
                    )),
                    e.on("resized", v),
                    e.on("redraw", v.bind(null, !0)),
                    e.tapOrClick((function(e) {
                        c.toggle()
                    }
                    ));
                    var y = !1;
                    return {
                        addPage: function(e) {
                            y || (i = e.getViewport({
                                scale: 1
                            }),
                            y = !0,
                            b());
                            var t = r(document.createElement("div")).addClass("pdf-page-loading").appendTo(s)
                              , n = u(t, 50, !0);
                            r(document.createElement("div")).addClass("pdf-canvas").append(r(document.createElement("canvas"))).appendTo(s),
                            d.push(e),
                            f.push(0),
                            h(d.length - 1).then((function() {
                                n.close(),
                                t.remove()
                            }
                            ), (function() {
                                n.close(),
                                t.remove()
                            }
                            ))
                        }
                    }
                }(e, t, n, o);
                !function e(t) {
                    a.getPage(t).then((function(n) {
                        i.addPage(n),
                        e(t + 1)
                    }
                    ), (function() {}
                    ))
                }(1)
            }
            n(55697),
            e.exports = {
                showPdf: function(e, t) {
                    var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]
                      , a = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                    "ibw-platform-win32-preview" !== o.getPlatform() && "ibw-platform-osx-preview" !== o.getPlatform() ? function(e) {
                        var t = r.Deferred()
                          , n = u(e, 100, !0);
                        return i("../external/pdfjs3/js/pdf.min.js").then((function() {
                            window.pdfjsLib.GlobalWorkerOptions.workerSrc = s("../external/pdfjs3/js/pdf.worker.min.js", !0),
                            n.close(),
                            t.resolve()
                        }
                        ), (function() {
                            n.close(),
                            t.reject()
                        }
                        )),
                        t
                    }(e).then(c.bind(null, t)).then(l.bind(null, e, n, a, t)) : e.html("<br><br><b></i>PDF's can't be displayed in preview mode.</i></b>")
                }
            }
        },
        82065: function(e, t, n) {
            var r, o, a, i, s;
            e.exports = (r = n(61743),
            o = n(58065),
            a = n(77752),
            i = n(78514),
            s = n(69225),
            {
                createPictureIcon: function(e) {
                    o(document.createElement("div")).addClass("icon").safeHtml('<svg xmlns="http://www.w3.org/2000/svg" width="70%" height="70%" fill="currentColor" class="bi bi-file-earmark-image" viewBox="0 0 16 16"> <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>  <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5V14zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4z"/></svg>').appendTo(e)
                },
                createCameraIcon: function(e) {
                    o(document.createElement("div")).addClass("icon").safeHtml('<svg xmlns="http://www.w3.org/2000/svg" width="70%" height="70%" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16"><path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/><path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/></svg>').appendTo(e)
                },
                createPhotoQuestion: function(e, t) {
                    !("url"in window) && "webkitURL"in window && (window.URL = window.webkitURL),
                    e.find(".take-picture-field").on("change", (function(e) {
                        if (1 == e.target.files.length && 0 == e.target.files[0].type.indexOf("image/")) {
                            var n = URL.createObjectURL(e.target.files[0])
                              , r = o(this).parent().find(".photo-actual img");
                            r.off("load"),
                            r.load((function() {
                                var e = r[0].naturalWidth
                                  , n = r[0].naturalHeight;
                                if (e > 0 && n > 0) {
                                    var o = Math.max(e / 1024, n / 1024, 1);
                                    e /= o,
                                    n /= o
                                }
                                r.attr("data-width", e),
                                r.attr("data-height", n),
                                null !== t && t()
                            }
                            )),
                            r.attr("src", n),
                            o(this).parent().addClass("photo-set")
                        }
                        o(this).replaceWith(o(this).clone(!0))
                    }
                    )),
                    e.find(".photo-upload-inner").click((function() {
                        -1 == r.getPlatform().indexOf("preview") ? o(this).parent().parent().parent().find(".take-picture-field").click() : a.showAlert(i("Accessing the camera and photo library does not work on this platform."), i("Camera not supported"))
                    }
                    )),
                    e.find(".photo-camera-inner").click((function() {
                        s.takePictureOrShowError().then((function(n) {
                            var r = n.url
                              , o = n.height
                              , a = n.width
                              , i = e.find(".photo-actual img");
                            i.off("load"),
                            i.load((function() {
                                i.attr("data-width", a),
                                i.attr("data-height", o),
                                null !== t && t()
                            }
                            )),
                            i.attr("src", r),
                            e.addClass("photo-set")
                        }
                        ))
                    }
                    )),
                    e.find(".photo-delete-button").tapOrClick((function() {
                        var e = o(this).parent().parent();
                        e.find(".photo-actual img").attr("src", ""),
                        e.removeClass("photo-set"),
                        null !== t && t()
                    }
                    ))
                }
            })
        },
        61743: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                getIOSIBooksRestartInfo: function() {
                    return m
                },
                getPlatform: function() {
                    return a
                },
                inIframe: function() {
                    return g
                },
                isAndroidIosDevice: function() {
                    return u
                },
                isIOS: function() {
                    return p
                },
                isInternetExplorer: function() {
                    return h
                },
                isPreview: function() {
                    return l
                },
                isToolPreview: function() {
                    return i
                },
                isTopLevelPlay: function() {
                    return d
                },
                isTouchDevice: function() {
                    return f
                },
                isWebPreview: function() {
                    return s
                },
                supportsAppFeature: function() {
                    return c
                }
            });
            var r = n(4296);
            function o() {
                var e = window.navigator.userAgent
                  , t = e.indexOf("OS ");
                return (e.indexOf("iPhone") > -1 || e.indexOf("iPad") > -1) && t > -1 ? window.Number(e.substr(t + 3, 3).replace("_", ".")) : 0
            }
            function a() {
                return window.BW_PLATFORM_HACK ? window.BW_PLATFORM_HACK : "iPad" === navigator.platform || "iPhone" === navigator.platform ? void 0 !== navigator.epubReadingSystem && "iBooks" === navigator.epubReadingSystem.name ? "ibw-platform-ipad-ibooks-epub" : -1 !== navigator.userAgent.indexOf("SEB") ? "ibw-platform-ipad-seb" : -1 !== navigator.userAgent.indexOf("Safari") ? "ibw-platform-ipad-safari" : -1 !== navigator.userAgent.indexOf("BookWidgets") ? "ibw-platform-ipad-bookwidgets" : "http:" !== window.location.protocol && "https:" !== window.location.protocol ? "ibw-platform-ipad-other" : "ibw-platform-ipad" : "MacIntel" === navigator.platform ? void 0 !== navigator.epubReadingSystem && "iBooks" === navigator.epubReadingSystem.name ? "ibw-platform-osx-ibooks-epub" : -1 !== navigator.userAgent.indexOf("PhantomJS") ? "ibw-platform-osx-phantomjs" : -1 !== navigator.userAgent.indexOf("HeadlessChrome") ? "ibw-platform-osx-headlesschrome" : -1 !== navigator.userAgent.indexOf("ibookwidgets") ? "ibw-platform-osx-preview" : -1 !== navigator.userAgent.indexOf("Chrome") ? "ibw-platform-osx-chrome" : -1 !== navigator.userAgent.indexOf("Safari") ? "ibw-platform-osx-safari" : -1 !== navigator.userAgent.indexOf("Firefox") ? "ibw-platform-osx-firefox" : "http:" !== window.location.protocol && "https:" !== window.location.protocol ? "ibw-platform-osx-other" : "ibw-platform-osx" : "Win32" === navigator.platform ? -1 !== navigator.userAgent.indexOf("BookWidgets") ? "ibw-platform-win32-preview" : "Microsoft Internet Explorer" === navigator.appName || "Netscape" === navigator.appName && -1 !== navigator.userAgent.indexOf("Trident") || "Netscape" === navigator.appName && -1 !== navigator.userAgent.indexOf("Edge") ? "ibw-platform-win32-ie" : -1 !== navigator.userAgent.indexOf("Chrome") ? "ibw-platform-win32-chrome" : -1 !== navigator.userAgent.indexOf("Firefox") ? "ibw-platform-win32-firefox" : "ibw-platform-win32" : "iPad Simulator" === navigator.platform || "iPhone Simulator" === navigator.platform ? "ibw-platform-ipad-bookwidgets" : -1 !== navigator.userAgent.indexOf("Android") ? -1 !== navigator.userAgent.indexOf("Chrome") ? "ibw-platform-android-chrome" : "ibw-platform-android" : -1 !== navigator.userAgent.indexOf("CrOS") ? -1 !== navigator.userAgent.indexOf("Chrome") ? "ibw-platform-chromebook-chrome" : "ibw-platform-chromebook" : "ibw-platform-unknown"
            }
            function i() {
                return -1 !== a().indexOf("preview")
            }
            function s() {
                return window.WidgetParams && window.WidgetParams.preview
            }
            function u() {
                var e = a();
                return 0 === e.indexOf("ibw-platform-ipad") || 0 === e.indexOf("ibw-platform-android")
            }
            function c(e) {
                var t = /BookWidgets\/([0-9]+)\.([0-9]+)\.([0-9]+)/g.exec(navigator.userAgent)
                  , n = t && 4 === t.length ? 1e4 * parseInt(t[1]) + 100 * parseInt(t[2]) + parseInt(t[3]) : 0;
                return console.log(e + " " + n),
                "audiorecording" === e && n >= 20800
            }
            function l() {
                return l.val
            }
            function d() {
                return "1" === (0,
                r.getUrlParams)(window.location.href).toplevel
            }
            function f() {
                return u() || (t = " -webkit- -moz- -o- -ms- ".split(" "),
                "ontouchstart"in window || (e = ["(", t.join("touch-enabled),("), "heartz", ")"].join(""),
                window.matchMedia(e).matches));
                var e, t
            }
            function p() {
                return !!/iPad|iPhone|iPod/.test(navigator.platform) || navigator.maxTouchPoints && navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform)
            }
            function h() {
                return -1 !== window.navigator.userAgent.indexOf("MSIE ") || /rv:11.0/i.test(window.navigator.userAgent)
            }
            function m() {
                return o() >= 7 ? 'To close iBooks:<ol style="text-align: left;"><li>Double-click the Home button.</li><li>Swipe left or right until you have located iBooks.</li><li>Swipe the app\'s preview up to close it.</li></ol>' : o() >= 5 ? "To close iBooks:<ol style=\"text-align: left;\"><li>Double-click the Home button.</li><li>Touch-and-hold the iBooks icon to put it into 'jiggly mode'.</li><li>Tap the red minus-sign icon that appears at the top left corner of iBooks.</li><li>Click the Home button to exit 'jiggly mode'.</li></ol>" : ""
            }
            function g() {
                try {
                    return window.self !== window.top
                } catch (e) {
                    return !0
                }
            }
            l.val = s() || i()
        },
        46338: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                setPreparePrint: function() {
                    return c
                }
            });
            var r = n(61743);
            function o(e) {
                return o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                o(e)
            }
            function a() {
                a = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , i = "function" == typeof Symbol ? Symbol : {}
                  , s = i.iterator || "@@iterator"
                  , u = i.asyncIterator || "@@asyncIterator"
                  , c = i.toStringTag || "@@toStringTag";
                function l(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    l({}, "")
                } catch (e) {
                    l = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function d(e, t, n, o) {
                    var a = t && t.prototype instanceof h ? t : h
                      , i = Object.create(a.prototype)
                      , s = new _(o || []);
                    return r(i, "_invoke", {
                        value: E(e, n, s)
                    }),
                    i
                }
                function f(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = d;
                var p = {};
                function h() {}
                function m() {}
                function g() {}
                var v = {};
                l(v, s, (function() {
                    return this
                }
                ));
                var w = Object.getPrototypeOf
                  , b = w && w(w(A([])));
                b && b !== t && n.call(b, s) && (v = b);
                var y = g.prototype = h.prototype = Object.create(v);
                function C(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        l(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function x(e, t) {
                    function a(r, i, s, u) {
                        var c = f(e[r], e, i);
                        if ("throw" !== c.type) {
                            var l = c.arg
                              , d = l.value;
                            return d && "object" == o(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                a("next", e, s, u)
                            }
                            ), (function(e) {
                                a("throw", e, s, u)
                            }
                            )) : t.resolve(d).then((function(e) {
                                l.value = e,
                                s(l)
                            }
                            ), (function(e) {
                                return a("throw", e, s, u)
                            }
                            ))
                        }
                        u(c.arg)
                    }
                    var i;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    a(e, n, t, r)
                                }
                                ))
                            }
                            return i = i ? i.then(r, r) : r()
                        }
                    })
                }
                function E(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = k(i, n);
                                if (s) {
                                    if (s === p)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = f(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === p)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function k(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        k(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        p;
                    var o = f(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        p;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    p) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    p)
                }
                function S(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function T(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function _(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(S, this),
                    this.reset(!0)
                }
                function A(e) {
                    if (e) {
                        var t = e[s];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: O
                    }
                }
                function O() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return m.prototype = g,
                r(y, "constructor", {
                    value: g,
                    configurable: !0
                }),
                r(g, "constructor", {
                    value: m,
                    configurable: !0
                }),
                m.displayName = l(g, c, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === m || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, g) : (e.__proto__ = g,
                    l(e, c, "GeneratorFunction")),
                    e.prototype = Object.create(y),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                C(x.prototype),
                l(x.prototype, u, (function() {
                    return this
                }
                )),
                e.AsyncIterator = x,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new x(d(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                C(y),
                l(y, c, "Generator"),
                l(y, s, (function() {
                    return this
                }
                )),
                l(y, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = A,
                _.prototype = {
                    constructor: _,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(T),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        p) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        p
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                T(n),
                                p
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    T(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: A(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        p
                    }
                },
                e
            }
            function i(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function s(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function s(e) {
                            i(a, r, o, s, u, "next", e)
                        }
                        function u(e) {
                            i(a, r, o, s, u, "throw", e)
                        }
                        s(void 0)
                    }
                    ))
                }
            }
            var u = function() {
                var e = s(a().mark((function e() {
                    return a().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                return e.abrupt("return", !0);
                            case 1:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )));
                return function() {
                    return e.apply(this, arguments)
                }
            }();
            function c(e) {
                u = e
            }
            function l() {
                return d.apply(this, arguments)
            }
            function d() {
                return (d = s(a().mark((function e() {
                    return a().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                return e.prev = 0,
                                e.next = 3,
                                u();
                            case 3:
                                window.print(),
                                e.next = 8;
                                break;
                            case 6:
                                e.prev = 6,
                                e.t0 = e.catch(0);
                            case 8:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, null, [[0, 6]])
                }
                )))).apply(this, arguments)
            }
            window.addEventListener("message", function() {
                var e = s(a().mark((function e(t) {
                    return a().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                "print" === t.data.command && l();
                            case 1:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )));
                return function(t) {
                    return e.apply(this, arguments)
                }
            }()),
            (0,
            r.isToolPreview)() && (window.doPrint = s(a().mark((function e() {
                return a().wrap((function(e) {
                    for (; ; )
                        switch (e.prev = e.next) {
                        case 0:
                            return e.next = 2,
                            u();
                        case 2:
                            window.clientApp && window.clientApp.doPrint && window.clientApp.doPrint();
                        case 3:
                        case "end":
                            return e.stop()
                        }
                }
                ), e)
            }
            ))))
        },
        15570: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                start: function() {
                    return o
                },
                stop: function() {
                    return a
                },
                stopAll: function() {
                    return i
                }
            });
            var r = n(58065);
            function o(e) {
                console.log("start ", e),
                r("html").addClass("processing-in-progress")
            }
            function a(e) {
                console.log("stop ", e),
                r("html").removeClass("processing-in-progress")
            }
            function i() {
                console.log("stopall"),
                r("html").removeClass("processing-in-progress")
            }
        },
        33796: function(e, t, n) {
            function r(e) {
                return function(e) {
                    if (Array.isArray(e))
                        return i(e)
                }(e) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(e) || a(e) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function o(e, t) {
                var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (!n) {
                    if (Array.isArray(e) || (n = a(e)) || t && e && "number" == typeof e.length) {
                        n && (e = n);
                        var r = 0
                          , o = function() {};
                        return {
                            s: o,
                            n: function() {
                                return r >= e.length ? {
                                    done: !0
                                } : {
                                    done: !1,
                                    value: e[r++]
                                }
                            },
                            e: function(e) {
                                throw e
                            },
                            f: o
                        }
                    }
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                var i, s = !0, u = !1;
                return {
                    s: function() {
                        n = n.call(e)
                    },
                    n: function() {
                        var e = n.next();
                        return s = e.done,
                        e
                    },
                    e: function(e) {
                        u = !0,
                        i = e
                    },
                    f: function() {
                        try {
                            s || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw i
                        }
                    }
                }
            }
            function a(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return i(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? i(e, t) : void 0
                }
            }
            function i(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var s = n(45250)
              , u = s.map
              , c = s.each
              , l = n(61743)
              , d = n(58065)
              , f = n(92789)
              , p = n(55286)
              , h = n(78514)
              , m = 15;
            function g(e) {
                if (null == e || "" === e.trim())
                    return !1;
                var t = parseInt(e);
                return !isNaN(t)
            }
            function v(e) {
                return g(e) ? parseInt(e) : 0
            }
            e.exports = {
                AnnotatePicture: function(e) {
                    return function(t, n, a, i, s) {
                        var w = e.QuestionTypeBase(t, n, a, i, s);
                        return w.getCheckInput = function() {
                            var e = [];
                            return this.div.find(".edit").each((function(t) {
                                var n = d(this).val().trim();
                                e.push(n)
                            }
                            )),
                            e
                        }
                        ,
                        w.renderTypeSpecificPart = function() {
                            var n = this
                              , r = this.div.addClass("ap-cover");
                            "yes" === t["cover-fields"] && r.addClass("cover-fields");
                            var a = d(document.createElement("div")).addClass("ap-picwrapper").appendTo(r)
                              , s = d(document.createElement("div")).addClass("ap-picture").appendTo(a);
                            t.background_picture && (s.css("background-image", "url(" + f(p.imageSource(t.background_picture)) + ")"),
                            p.addBackgroundImageAltText(t.background_picture, s)),
                            d(document.createElement("div")).addClass("ap-svg-wrapper").css("direction", "ltr").appendTo(s);
                            var c = i.widgetstorage.createThrottler(this.updateState.bind(this));
                            this.EditFields = t.EditFields ? t.EditFields : [];
                            for (var l = 0; l < this.EditFields.length; ++l) {
                                var h = this.EditFields[l]
                                  , m = this.questionid + "_ap_" + l
                                  , g = this.questionid + "_ap_" + l + "_picwrapper"
                                  , v = "Numerical" == t.keyboard ? "input" : "textarea"
                                  , w = d(document.createElement("div")).addClass("ap-field").attr("id", g);
                                d(document.createElement("div")).addClass("ap-field-bg").appendTo(w),
                                d(document.createElement("div")).addClass("ap-field-number").text(l + 1).appendTo(w);
                                var b = void 0;
                                if (h.Valid && h.Valid.startsWith("select:")) {
                                    var y = d(document.createElement("div")).addClass("select-wrapper").attr({
                                        id: m,
                                        nr: l
                                    }).css("border-color", t["field-border-color"]).appendTo(w);
                                    b = d(document.createElement("select")).addClass("edit").appendTo(y);
                                    var C = h.Valid.split(":");
                                    C.shift();
                                    var x = u(C.join(":").split("##"), (function(e) {
                                        return e.trim()
                                    }
                                    ));
                                    x.sort(),
                                    d(document.createElement("option")).attr("value", "").text("").appendTo(b);
                                    var E, k = o(x);
                                    try {
                                        for (k.s(); !(E = k.n()).done; ) {
                                            var S = E.value;
                                            d(document.createElement("option")).attr("value", S).text(S).appendTo(b)
                                        }
                                    } catch (e) {
                                        k.e(e)
                                    } finally {
                                        k.f()
                                    }
                                    d(document.createElement("div")).addClass("print-only-inline").text("(" + x.join(" / ") + ")").appendTo(y)
                                } else
                                    b = d(document.createElement(v)).addClass("edit").attr({
                                        id: m,
                                        nr: l
                                    }).css("border-color", t["field-border-color"]),
                                    "input" === v && b.attr("type", "text"),
                                    b.appendTo(w),
                                    e.addSpellCheckAttrib(b),
                                    e.addInputModeAttrib(b, t.keyboard);
                                e.data(b, "name", h.name),
                                d(document.createElement("div")).addClass("ap-field-correction").append(document.createElement("span")).append(e.createCorrectWrongMarker({
                                    elementType: "span"
                                })).css("border-color", t["field-border-color"]).appendTo(w),
                                w.appendTo(s),
                                w.css({
                                    left: h.position.X + "px",
                                    top: h.position.Y + "px",
                                    width: h.position.Width + "px",
                                    height: h.position.Height + "px",
                                    "max-width": h.position.Width + "px",
                                    "max-height": h.position.Height + "px"
                                }),
                                "Dotted" == t["field-border"] ? w.addClass("ap_border_dotted") : "None" == t["field-border"] && w.addClass("ap_border_none"),
                                "Transparent" == t["field-background"] ? w.addClass("ap_background_transparent") : "Semi-transparent" == t["field-background"] && w.addClass("ap_background_semitransparent"),
                                b.bind("keyup change", c.trigger.bind(c))
                            }
                            var T = d(document.createElement("table")).addClass("ap-table");
                            for (l = 0; l < this.EditFields.length; ++l) {
                                h = this.EditFields[l],
                                g = this.questionid + "_ap_" + l + "_tablewrapper";
                                var _ = d(document.createElement("tr")).attr("id", g).appendTo(T);
                                d(document.createElement("td")).text(l + 1).appendTo(_),
                                d(document.createElement("td")).addClass("fieldwrapper").appendTo(_),
                                e.createCorrectWrongMarker({
                                    elementType: "td"
                                }).appendTo(_)
                            }
                            T.appendTo(r),
                            p.getImageSize(p.imageSource(t.background_picture), (function(e, t) {
                                n.picturewidth = e,
                                n.pictureheight = t,
                                n.onResize()
                            }
                            ))
                        }
                        ,
                        w.drawLinesAndMarkers = function(e, n) {
                            for (var r = this.div.find(".ap-svg-wrapper"), o = this.div.find(".ap-picture"), a = [], i = 0, s = 0, u = 0, c = 0, l = 0; l < this.EditFields.length; ++l) {
                                var d = this.EditFields[l];
                                if (g(d.position.MarkerX) && g(d.position.MarkerY)) {
                                    var f, p, h = v(d.position.MarkerX) * e, w = v(d.position.MarkerY) * e, b = Math.max(n, v(d.position.Height)), y = v(d.position.Width), C = (v(d.position.X) + y / 2) * e, x = (v(d.position.Y) + b / 2) * e;
                                    if (b > 0 && y > 0)
                                        if (h < C) {
                                            if (w < x)
                                                if ((C - h) / (x - w) > y / b) {
                                                    var E = x - y / 2 * (x - w) / (C - h);
                                                    C -= y / 2,
                                                    x = E
                                                } else
                                                    C -= b / 2 * (C - h) / (x - w),
                                                    x = E = x - b / 2;
                                            else
                                                w > x ? (C - h) / (w - x) > y / b ? (E = x - y / 2 * (x - w) / (C - h),
                                                C -= y / 2,
                                                x = E) : (C -= b / 2 * (C - h) / (w - x),
                                                x = E = x + b / 2) : C -= y / 2;
                                            var k = Math.atan2(x - w, C - h);
                                            f = h + Math.cos(k) * m,
                                            p = w + Math.sin(k) * m
                                        } else
                                            h > C ? (w < x ? (h - C) / (x - w) > y / b ? (E = x - y / 2 * (x - w) / (h - C),
                                            C += y / 2,
                                            x = E) : (C -= b / 2 * (C - h) / (x - w),
                                            x = E = x - b / 2) : w > x ? (h - C) / (w - x) > y / b ? (E = x - y / 2 * (x - w) / (h - C),
                                            C += y / 2,
                                            x = E) : (C -= b / 2 * (C - h) / (w - x),
                                            x = E = x + b / 2) : C += y / 2,
                                            k = Math.atan2(x - w, C - h),
                                            f = h + Math.cos(k) * m,
                                            p = w + Math.sin(k) * m) : (f = h,
                                            w < x ? (x -= b / 2,
                                            p = w + m) : w > x && (x += b / 2,
                                            p = w - m));
                                    i = Math.max(i, f),
                                    i = Math.max(i, C),
                                    i = Math.max(i, h + m),
                                    u = Math.min(u, f),
                                    u = Math.min(u, C),
                                    u = Math.min(u, h - m),
                                    s = Math.max(s, p),
                                    s = Math.max(s, x),
                                    s = Math.max(s, w + m),
                                    c = Math.min(c, p),
                                    c = Math.min(c, x),
                                    c = Math.min(c, w - m),
                                    a.push('<line x1="X1" y1="Y1" x2="X2" y2="Y2" CLASS COLOR/>'.replace("X1", f).replace("X2", C).replace("Y1", p).replace("Y2", x).replace("CLASS", "Dotted" == t["field-border"] ? 'class="line-dashed"' : "").replace("COLOR", 'style="stroke:' + t["field-marker-color"] + '"'));
                                    var S = '<circle cx="X1" cy="Y1" r="15" COLOR/>'.replace("X1", h).replace("Y1", w).replace("COLOR", 'style="stroke:' + t["field-marker-color"] + '"');
                                    a.push(S)
                                }
                            }
                            a.length ? r.safeHtml('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="' + Math.max(o.width(), i - u) + 'px" height="' + Math.max(o.height(), s - c) + 'px"><g transform="translate(' + -u + " " + -c + ')">' + a.join("") + "</g></svg>").css({
                                left: u,
                                top: c
                            }) : r.safeHtml("")
                        }
                        ,
                        w.numberPosition = function(e) {
                            return {
                                centerx: g(e.position.MarkerX) ? v(e.position.MarkerX) : v(e.position.X) + v(e.position.Width) / 2,
                                centery: g(e.position.MarkerY) ? v(e.position.MarkerY) : v(e.position.Y) + v(e.position.Height) / 2
                            }
                        }
                        ,
                        w.drawNumberedMarkers = function(e, n, r, o, a, i) {
                            for (var s = this.div.find(".ap-svg-wrapper"), u = this.div.find(".ap-picture"), c = [], l = 0; l < this.EditFields.length; ++l) {
                                var d = this.EditFields[l]
                                  , f = this.numberPosition(d)
                                  , p = f.centerx * e
                                  , h = f.centery * e
                                  , m = '<circle cx="X1" cy="Y1" r="15" COLOR/>'.replace("X1", p - n).replace("Y1", h - r).replace("COLOR", 'style="stroke:' + t["field-marker-color"] + '"');
                                c.push(m);
                                var g = '<text x="X1" y="Y1" class="ap-marker-text" fill="COLOR">NR</text>'.replace("X1", p - n).replace("Y1", h - r).replace("NR", l + 1).replace("COLOR", t["field-marker-color"]);
                                c.push(g)
                            }
                            c.length ? s.safeHtml('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="' + Math.max(u.width(), o - n) + 'px" height="' + Math.max(u.height(), a - r) + 'px">' + c.join("") + "</svg>").css({
                                left: n,
                                top: r
                            }) : s.safeHtml("")
                        }
                        ,
                        w.onResize = w.repaint = function() {
                            var e = this;
                            if (null != this.picturewidth) {
                                var n = this.div
                                  , o = n.find(".ap-picwrapper")
                                  , a = n.find(".ap-picture")
                                  , i = n.width()
                                  , s = v(o.css("margin"))
                                  , l = v(o.css("margin"));
                                isNaN(s) && (s = v(o.css("margin-left")) + v(o.css("margin-right")) / 2),
                                isNaN(l) && (s = v(o.css("margin-top")) + v(o.css("margin-bottom")) / 2);
                                var f = 1
                                  , p = (N = i - 2 * s) / this.picturewidth;
                                if (N > 720) {
                                    n.removeClass("narrow-mode");
                                    var h = function(e) {
                                        var t = 0
                                          , n = 0
                                          , r = 0
                                          , o = 0;
                                        return c(e, (function(e) {
                                            var a = v(e.position.X)
                                              , i = v(e.position.Width)
                                              , s = v(e.position.Y)
                                              , u = v(e.position.Height);
                                            r = Math.max(a + i + 16, r),
                                            o = Math.max(s + u + 16, o),
                                            t = Math.min(a - 16, t),
                                            n = Math.min(s - 16, n),
                                            g(e.position.MarkerX) && g(e.position.MarkerY) && (a = v(e.position.MarkerX),
                                            s = v(e.position.MarkerY),
                                            isNaN(a) || isNaN(s) || (r = Math.max(a + m, r),
                                            o = Math.max(s + m, o),
                                            t = Math.min(a - m, t),
                                            n = Math.min(s - m, n)))
                                        }
                                        )),
                                        {
                                            minx: t,
                                            miny: n,
                                            maxx: r,
                                            maxy: o
                                        }
                                    }(this.EditFields)
                                      , w = h.minx
                                      , b = h.miny
                                      , y = h.maxx
                                      , C = h.maxy;
                                    f = Math.min(N / (Math.max(y, this.picturewidth) - w), f),
                                    f = Math.min(p, f);
                                    for (var x = 0; x < this.EditFields.length; ++x) {
                                        var E = v((R = this.EditFields[x]).position.Width) + 20
                                          , k = v(R.position.X) + E / 2;
                                        if (k > 0) {
                                            var S = (N - E / 2) / k;
                                            f = Math.min(S, f)
                                        }
                                    }
                                    var T = d(n.find("textarea, input")[0])
                                      , _ = v(T.css("padding") || T.css("padding-top"))
                                      , A = v(T.css("border-top-width")) + v(T.css("border-top-width")) + 2 * _ + 1.5 * v(T.css("font-size"));
                                    for (x = 0; x < this.EditFields.length; ++x) {
                                        var O = this.questionid + "_ap_" + x
                                          , D = d("#" + O)
                                          , I = this.questionid + "_ap_" + x + "_picwrapper"
                                          , P = d("#" + I);
                                        D.parent().attr("id") !== I && (D.prependTo(P),
                                        D.css("border-color", t["field-border-color"]));
                                        var R = this.EditFields[x]
                                          , L = Math.max(A, v(R.position.Height))
                                          , N = v(R.position.Width)
                                          , F = (v(R.position.X) + N / 2) * f
                                          , M = (v(R.position.Y) + L / 2) * f;
                                        P.css({
                                            left: F - N / 2,
                                            top: M - L / 2,
                                            height: L,
                                            "max-height": L
                                        })
                                    }
                                    this.drawLinesAndMarkers(f, A),
                                    a.css({
                                        left: -w * f + "px",
                                        top: -b * f + "px"
                                    }),
                                    o.css({
                                        "min-height": (Math.max(C, this.pictureheight) - Math.min(0, b)) * f + l + "px"
                                    })
                                } else {
                                    n.addClass("narrow-mode");
                                    var j = u(this.EditFields, (function(t) {
                                        return e.numberPosition(t)
                                    }
                                    ))
                                      , q = u(j, "centerx")
                                      , B = u(j, "centery")
                                      , W = Math.min.apply(Math, r(q))
                                      , U = Math.min.apply(Math, r(B))
                                      , z = Math.max.apply(Math, r(q))
                                      , H = Math.max.apply(Math, r(B))
                                      , Q = 15 / ((N - 30) / (Math.max(this.picturewidth, z) - Math.min(W, 0))) + 2
                                      , V = Math.min(W - Q, 0)
                                      , Y = Math.min(U - Q, 0)
                                      , K = Math.max(z + Q, this.picturewidth)
                                      , G = Math.max(H + Q, this.pictureheight);
                                    for (f = Math.min(f, N / (K - V)),
                                    this.drawNumberedMarkers(f, V * f, Y, K, G, A),
                                    x = 0; x < this.EditFields.length; ++x) {
                                        O = this.questionid + "_ap_" + x,
                                        D = this.div.find("#" + O);
                                        var $ = this.questionid + "_ap_" + x + "_tablewrapper"
                                          , J = this.div.find("#" + $ + " .fieldwrapper");
                                        D.parent().parent().attr("id") !== $ && (D.prependTo(J),
                                        D.css("border-color", ""));
                                        var X = this.questionid + "_ap_" + x + "_picwrapper"
                                          , Z = this.div.find("#" + X);
                                        L = v((R = this.EditFields[x]).position.Height) * f,
                                        N = v(R.position.Width) * f,
                                        F = v(R.position.X) * f + N / 2,
                                        M = v(R.position.Y) * f + L / 2,
                                        Z.css({
                                            left: Math.max(0, F - N / 2),
                                            top: Math.max(0, M - L / 2),
                                            height: L,
                                            "max-height": L
                                        })
                                    }
                                    a.css({
                                        left: -V * f + "px",
                                        top: -Y * f + "px"
                                    }),
                                    o.css({
                                        "min-height": (G - Y) * f + "px"
                                    })
                                }
                                a.css({
                                    width: this.picturewidth * f,
                                    height: this.pictureheight * f
                                })
                            }
                        }
                        ,
                        w.setCorrection = function(t) {
                            var n = this
                              , r = this.div.find(".ap-field-correction > span:first-child");
                            this.div.find(".edit").each((function(o, a) {
                                d(r[o]).text(d(a).val());
                                var i = n.questionid + "_ap_" + o
                                  , s = n.questionid + "_ap_" + o + "_tablewrapper"
                                  , u = n.questionid + "_ap_" + o + "_picwrapper"
                                  , c = n.div.find("#" + i + ", #" + u + ", #" + s).add(r[o].parent)
                                  , l = t ? t.correctness[o] : 0;
                                e.setTagValue(c, "ap-wrong", t && 0 === l),
                                e.setTagValue(c, "ap-open", t && -2 === l),
                                e.setTagValue(c, "ap-answer", t && 1 === l)
                            }
                            ))
                        }
                        ,
                        w.save = function() {
                            return this.getCheckInput()
                        }
                        ,
                        w.load = function(e) {
                            var t = 0;
                            this.div.find(".edit").each((function(n) {
                                d(this).val(e[t++])
                            }
                            ))
                        }
                        ,
                        w.clear = function() {
                            this.div.find(".edit").val("")
                        }
                        ,
                        w.setReadOnly = function(e) {
                            -1 === l.getPlatform().indexOf("ipad") && this.div.find("input, textarea, select").prop("disabled", e)
                        }
                        ,
                        w.createExtraRationale = function(t) {
                            for (var n, r = t.EditFields || [], o = [], a = 0; a < r.length; ++a) {
                                var i = r[a];
                                if (null != i.Valid && "" !== i.Valid) {
                                    var s;
                                    s = i.Valid.startsWith("select:") ? e.textSelectAnswerToDisplayString(i.Valid) : e.textAnswerToDisplayString(i.Valid),
                                    o.push({
                                        i: a,
                                        correctanswer: s
                                    })
                                }
                            }
                            return 0 != o.length && (n = e.translate("The answers:") + '</br><div class="answer">' + u(o, (function(e) {
                                return e.i + 1 + ". " + e.correctanswer
                            }
                            )).join(", ") + "</div>"),
                            n
                        }
                        ,
                        w.name = h("Annotate picture"),
                        w
                    }
                }
            }
        },
        64193: function(e, t, n) {
            var r = n(33293);
            e.exports = {
                AudioRecording: r
            }
        },
        39340: function(e, t, n) {
            var r = n(17496)
              , o = n(95079)
              , a = n(17902)
              , i = n(78073)
              , s = n(58065)
              , u = n(36565)
              , c = n(98274)
              , l = n(78514)
              , d = n(51958)
              , f = d.BCE_YES_LABEL
              , p = d.BCE_NO_LABEL
              , h = d.bceCreateTableData
              , m = d.bceReactantsEditableFields
              , g = d.bceProductsEditableFields
              , v = d.bceFormatQuestion;
            function w(e) {
                return "type1" === e || "type2" === e
            }
            function b(e) {
                return "type1" === e || "type2" === e
            }
            e.exports = {
                BalanceChemicalEquation: function(e) {
                    return function(t, n, d, y, C) {
                        var x = e.QuestionTypeBase(t, n, d, y, C);
                        return x.getCheckInput = function() {
                            var e;
                            switch (t.SubType) {
                            case "type1":
                            case "type2":
                                return {
                                    balanced: (e = this.div.find("[checked='checked']"),
                                    0 === e.length ? "" : e.attr("check_input")),
                                    reactantsTable: this.reactantsTable.getCheckInput(),
                                    productsTable: this.productsTable.getCheckInput()
                                };
                            case "type3":
                                var n = [];
                                return this.div.find("input").each((function(e, t) {
                                    var r = s(t);
                                    n.push(r.val() || "1")
                                }
                                )),
                                n
                            }
                            return null
                        }
                        ,
                        x.setCorrection = function(n) {
                            if ("type3" === t.SubType) {
                                var r = 0;
                                this.div.find("input").each((function(t, o) {
                                    var a = s(o)
                                      , i = n ? n.correctness[r++] : 0;
                                    e.setTagValue(a.parent(), "wrong", n && 1 !== i),
                                    e.setTagValue(a.parent(), "empty", n && "" === a.val())
                                }
                                ))
                            }
                        }
                        ,
                        x.renderTypeSpecificPart = function() {
                            var r = this;
                            s(document.createElement("div")).addClass("question-style bce-formula").append(i.prepare(v(t))).appendTo(this.div),
                            e.createCorrectWrongMarker().appendTo(this.div.find(".bce-field"));
                            var c = s(document.createElement("div")).addClass("bce-cover").appendTo(this.div);
                            function l(n, r, a, i, u) {
                                s(document.createElement("div")).attr("id", n).appendTo(a);
                                var c = h(r, i)
                                  , l = o({
                                    tablediv: "#" + n,
                                    tabledata: c,
                                    compare_casesensitive: !1,
                                    support_correction_colors: e.questionSupportsCorrection(t)
                                });
                                return l.setChangeCallBack((function() {
                                    u && u()
                                }
                                )),
                                s("#" + n).find("tr").each((function(t, n) {
                                    e.data(s(n).find("td:nth-of-type(2)"), "bce-answer", c.answers[t])
                                }
                                )),
                                l
                            }
                            if (c.attr("data-subtype", t.SubType),
                            "type3" !== t.SubType) {
                                var d = s(document.createElement("div")).addClass("tablewrapper").appendTo(c);
                                s(document.createElement("div")).addClass("tabletitle").text(e.translate("Reactants")).appendTo(d);
                                var b = s(document.createElement("div")).addClass("tablewrapper").appendTo(c);
                                s(document.createElement("div")).addClass("tabletitle").text(e.translate("Products")).appendTo(b);
                                var y = a.parseEquation(t.Equation)
                                  , C = a.reduceReactantsAndProducts(y)
                                  , x = l("reactantstable_" + n, C.reactants, d, m(t.SubType), this.updateState.bind(this))
                                  , E = l("productstable_" + n, C.products, b, g(t.SubType), this.updateState.bind(this));
                                this.reactantsTable = x,
                                this.productsTable = E,
                                this.formattedEquation = v(t)
                            }
                            if (w(t.SubType)) {
                                var k = s(document.createElement("div")).addClass("balanced-or-not-control").appendTo(c)
                                  , S = e.translate(f)
                                  , T = this
                                  , _ = u.createLabeledRadiobutton(k, S, (function() {
                                    T.readOnly || (s(this).parent().find(".bw-radiobutton").trigger("clear"),
                                    s(this).trigger("check"),
                                    T.updateState())
                                }
                                ));
                                _.attr("answer", S).attr("check_input", "yes"),
                                _.find(".bw-button-label").append(e.createCorrectWrongMarker());
                                var A = e.translate(p)
                                  , O = u.createLabeledRadiobutton(k, A, (function() {
                                    T.readOnly || (s(this).parent().find(".bw-radiobutton").trigger("clear"),
                                    s(this).trigger("check"),
                                    T.updateState())
                                }
                                ));
                                O.attr("answer", A).attr("check_input", "no"),
                                O.find(".bw-button-label").append(e.createCorrectWrongMarker())
                            }
                            "type3" === t.SubType && (this.reportQuestion = t.Question + "<br>" + v(t, !0)),
                            this.div.find("input").each((function(e, t) {
                                s(t).bind("keyup change", (function() {
                                    r.updateState()
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        x.repaint = function() {
                            "type3" !== t.SubType && (this.reactantsTable.render(),
                            this.productsTable.render())
                        }
                        ,
                        x.save = function() {
                            var e = "";
                            w(t.SubType) && (e = this.div.find("[checked='checked']").attr("check_input") || "");
                            var n = []
                              , r = [];
                            b(t.SubType) && (n = this.reactantsTable.getData(),
                            r = this.productsTable.getData());
                            var o = [];
                            return "type3" === t.SubType && this.div.find("input").each((function(e, t) {
                                var n = s(t);
                                o.push(n.val())
                            }
                            )),
                            {
                                checkedAnswer: e,
                                enteredReactantsTableValues: n,
                                enteredProductsTableValues: r,
                                enteredCoefficients: o
                            }
                        }
                        ,
                        x.load = function(e) {
                            w(t.SubType) && e.checkedAnswer && (this.div.find("[checked='checked']").trigger("clear"),
                            this.question.find(".bw-radiobutton[check_input='" + e.checkedAnswer + "']").trigger("check")),
                            b(t.SubType) && (this.reactantsTable.setData(e.enteredReactantsTableValues),
                            this.productsTable.setData(e.enteredProductsTableValues)),
                            "type3" === t.SubType && this.div.find("input").each((function(t, n) {
                                var r = s(n);
                                t < e.enteredCoefficients.length && r.val(e.enteredCoefficients[t])
                            }
                            ))
                        }
                        ,
                        x.setReadOnly = function(n) {
                            if ("type3" !== t.SubType) {
                                var o = r.getConfigSync();
                                !1 !== n || "no" !== o.color_correct_answers || e.needToColorCorrectAnswersForQuestion(o, t) || (this.reactantsTable.setCorrectionCallback(null),
                                this.productsTable.setCorrectionCallback(null)),
                                this.reactantsTable.setReadOnly(n),
                                this.reactantsTable.render(),
                                this.productsTable.setReadOnly(n),
                                this.productsTable.render()
                            }
                        }
                        ,
                        x.clear = function() {
                            w(t.SubType) && this.div.find("[checked='checked']").trigger("clear"),
                            b(t.SubType) && (this.reactantsTable.clear(),
                            this.productsTable.clear()),
                            "type3" === t.SubType && this.div.find("input").each((function() {
                                var t = s(this);
                                t.val(""),
                                e.clearTag(t, "wrong")
                            }
                            ))
                        }
                        ,
                        x.prepareCorrection = function(t) {
                            var n = this
                              , r = a.parseEquation(t.Equation)
                              , o = a.reduceReactantsAndProducts(r);
                            if (w(t.SubType)) {
                                var i = a.isBalanced(t.Equation)
                                  , s = this.div.find("[check_input=yes]")
                                  , u = this.div.find("[check_input=no]");
                                e.setTagValue(s, "bce-answer", i),
                                e.setTagValue(u, "bce-answer", !i)
                            }
                            if (this.reactantsTable) {
                                var l = {
                                    "case-sensitive": "no",
                                    tabledata: h(o.reactants, m(t.SubType)),
                                    "scoring-weight": "1"
                                };
                                this.reactantsTable.setCorrectionCallback((function() {
                                    return c.check.FillInTable(l, n.reactantsTable.getCheckInput())
                                }
                                ))
                            }
                            if (this.productsTable) {
                                var d = {
                                    "case-sensitive": "no",
                                    tabledata: h(o.products, g(t.SubType)),
                                    "scoring-weight": "1"
                                };
                                this.productsTable.setCorrectionCallback((function() {
                                    return c.check.FillInTable(d, n.productsTable.getCheckInput())
                                }
                                ))
                            }
                        }
                        ,
                        x.createExtraRationale = function(t) {
                            var n;
                            return n = w(t.SubType) ? a.isBalanced(t.Equation) ? e.translate(f) : e.translate(p) : i.prepare(v({
                                Equation: t.Equation,
                                SubType: "type1"
                            })),
                            e.translate("The answer:") + '</br><div class="answer">' + n + "</div>"
                        }
                        ,
                        x.name = l("Balance chemical equation"),
                        x
                    }
                }
            }
        },
        75730: function(e, t, n) {
            var r = n(27761);
            e.exports = {
                CorrectSentence: r
            }
        },
        5931: function(e, t, n) {
            var r = n(78073)
              , o = n(58065)
              , a = n(92789)
              , i = n(16806)
              , s = n(45027);
            n(1420);
            var u = n(78514)
              , c = n(55286).imageSource;
            function l(e, t, n) {
                var r = o(document.createElement("div"))
                  , a = i.create({
                    img: e,
                    disable_press: !0,
                    loadcb: function(e) {
                        var r = e.target;
                        "Fixed" === t ? a.css("width", n * r.naturalWidth / r.naturalHeight + "px") : a.css("width", Math.min(r.naturalWidth, 300) + "px")
                    }
                }).appendTo(r);
                return "Fixed" === t && r.addClass("fixed-size"),
                r
            }
            function d(e, t, n, r) {
                var o = e.offset()
                  , a = t.top + r
                  , i = t.left + n;
                return i >= o.left && a >= o.top && i <= o.left + e.outerWidth() && a <= o.top + e.outerHeight()
            }
            function f(e, t) {
                return function(n, i, f, p, h) {
                    var m = t.QuestionTypeBase(n, i, f, p, h);
                    return m.getCheckInput = function() {
                        var e = [];
                        return this.div.find(".dd-cover .ddbox").each((function() {
                            var n = o(this)
                              , r = t.data(n, "name");
                            n.find(".dditem").each((function() {
                                var t = o(this).attr("save");
                                e.push([t, r])
                            }
                            ))
                        }
                        )),
                        e
                    }
                    ,
                    m.setCorrection = function(e) {
                        if (null !== e)
                            for (var r = n.Boxes ? n.Boxes : [], a = 0; a < r.length; ++a) {
                                var i = this.div.find("#" + this.questionid + "ddbox_" + a);
                                "yes" !== n["show-box-header"] && o(document.createElement("div")).addClass("ap-field-number dd-field-number ").text(a + 1).appendTo(i)
                            }
                        else
                            this.div.find(".ap-field-number").remove();
                        var s = e ? e.items : [];
                        for (a = 0; a < s.length; ++a)
                            s[a].used = !1;
                        this.div.find(".dd-cover .ddbox, .dd-cover .words").each((function() {
                            var n = o(this)
                              , r = t.data(n, "name") || "";
                            n.find(".dditem").each((function() {
                                for (var n = o(this), a = n.attr("save"), i = !1, u = 0; u < s.length; ++u) {
                                    var c = s[u];
                                    if (!c.used && c.pair[0] === a && c.pair[1] === r) {
                                        i = !0,
                                        c.used = !0;
                                        break
                                    }
                                }
                                t.setTagValue(n, "dd-correct", e && i),
                                t.setTagValue(n, "dd-wrong", e && !i)
                            }
                            ))
                        }
                        )),
                        this.div.find(".dd-boxes > .dditem").each((function() {
                            var e = o(this);
                            t.setTagValue(e, "dd-correct", !1),
                            t.setTagValue(e, "dd-wrong", !0)
                        }
                        ))
                    }
                    ,
                    m.renderTypeSpecificPart = function(i) {
                        m.scale = 1,
                        "yes" === n["only-drop-on-boxes"] ? this.onlydroponboxes = !0 : this.onlydroponboxes = !1;
                        var u = o(document.createElement("div")).addClass("dd-cover").appendTo(this.div)
                          , f = o(document.createElement("div")).addClass("words").appendTo(u)
                          , h = o(document.createElement("div")).addClass("dd-boxes-scrolling-wrapper").css({
                            width: "100%",
                            "overflow-x": "auto"
                        }).appendTo(u)
                          , g = o(document.createElement("div")).addClass("dd-boxes");
                        g.appendTo(h);
                        var v = 0
                          , w = 0
                          , b = 0
                          , y = 0
                          , C = 0
                          , x = 0;
                        function E() {
                            if ("zoom" !== n["resize-policy"])
                                return 1;
                            if (0 === w || 0 === y)
                                return 1;
                            var e = g.css("margin-left")
                              , t = h.width() - 2 * parseInt(e)
                              , r = w - v;
                            return r < t ? 1 : t / r
                        }
                        function k(e, t, n) {
                            1 == t ? e.css({
                                transform: "",
                                margin: ""
                            }) : e.each((function() {
                                var e = o(this)
                                  , n = -e.width() * (1 - t) / 2
                                  , r = -e.height() * (1 - t) / 2;
                                e.css({
                                    transform: "scale(" + t + ")",
                                    margin: r + "px " + n + "px"
                                })
                            }
                            ))
                        }
                        var S = function(e, t) {
                            var n = o(e).offset();
                            o(e).appendTo(t),
                            o(e).offset(n)
                        };
                        f.droppable({
                            drop: function(e, t) {
                                S(t.draggable, this)
                            },
                            tolerance: "intersect",
                            scope: this.questionid
                        }),
                        f.addClass("animatedrop");
                        for (var T = [], _ = n.Boxes ? n.Boxes : [], A = 0; A < _.length; ++A)
                            if ((H = _[A]).Items)
                                for (var O = 0; O < H.Items.length; ++O)
                                    T.push(H.Items[O]);
                        T = s.shuffleArray(T, i);
                        var D, I, P, R = {}, L = {}, N = h[0], F = this;
                        function M(e) {
                            var t = p.getScrollObject();
                            L.down > 0 && (t.scrollTop = t.scrollTop + (L.down >> 1)),
                            L.up > 0 && (t.scrollTop = t.scrollTop - (L.up >> 1)),
                            L.left > 0 && (N.scrollLeft = N.scrollLeft - (L.left >> 1)),
                            L.right > 0 && (N.scrollLeft = N.scrollLeft + (L.right >> 1)),
                            (L.up > 0 || L.down > 0 || L.left > 0 || L.right > 0) && e() && setTimeout(M.bind(null, e), 100)
                        }
                        for (A = 0; A < T.length; ++A) {
                            var j = T[A]
                              , q = o(document.createElement("div")).addClass("dditem");
                            if (t.setTag(q, "dd-wrong"),
                            e) {
                                var B = T[A].origbase;
                                q.attr({
                                    save: B,
                                    pic: j.sources[0].src
                                }).addClass("dditem-img"),
                                l(j, n.img_resize_mode, n.img_resize_height).addClass("imgwrapper").appendTo(q),
                                t.createCorrectWrongMarker().appendTo(q)
                            } else
                                q.attr("save", T[A]),
                                q.safeHtml(r.prepare(T[A])),
                                t.createCorrectWrongMarker().appendTo(q);
                            "None" === n["item-frame"] && q.addClass("dditem-noframe"),
                            q.appendTo(f),
                            q.draggable({
                                scope: this.questionid,
                                helper: function(e) {
                                    var t = o(e.currentTarget)
                                      , n = t.clone().addClass("dragging-clone").appendTo(u)
                                      , r = E();
                                    return n.css({
                                        position: "absolute",
                                        width: t.width() * r,
                                        height: t.height() * r
                                    }),
                                    k(n.find(".imgwrapper"), r),
                                    this.offsetX = t.width() * r / 2,
                                    this.offsetY = t.height() * r / 2,
                                    this.ddboxesOffset = g.offset(),
                                    n.get(0)
                                },
                                appendTo: u,
                                start: function(e, n) {
                                    t.blurFocused();
                                    var r = p.getScrollObject();
                                    o(this).addClass("drag_placeholder"),
                                    R = {
                                        top: o(r).offset().top + 50,
                                        bottom: o(r).offset().top + o(r).height() - 50,
                                        left: o(N).offset().left + 50,
                                        right: o(N).offset().left + o(N).width() - 50,
                                        scrollTop: r.scrollTop
                                    },
                                    D = !1,
                                    I = !0,
                                    this.targetBoxes = u.find(".words, .ddbox")
                                },
                                drag: function(e, t) {
                                    if ("yes" === n["only-drop-on-boxes"]) {
                                        var r = this.targetBoxes.find(".current-drop-target");
                                        if (0 === r.length || !d(r, t.offset, this.offsetX, this.offsetY)) {
                                            this.targetBoxes.removeClass("current-drop-target");
                                            for (var a = 0; a < this.targetBoxes.length; ++a)
                                                if (d(r = o(this.targetBoxes[a]), t.offset, this.offsetX, this.offsetY)) {
                                                    r.addClass("current-drop-target");
                                                    break
                                                }
                                        }
                                    }
                                    this.ddboxesOffset = g.offset();
                                    var i = o(".ui-draggable-dragging");
                                    function s() {
                                        var e = p.getScrollObject();
                                        i.setTranslate(0, e.scrollTop - R.scrollTop)
                                    }
                                    L.up = R.top - e.clientY,
                                    L.down = e.clientY - R.bottom,
                                    L.left = R.left - e.clientX,
                                    L.right = e.clientX - R.right,
                                    (L.up > 0 || L.down > 0 || L.left > 0 || L.right > 0) && !D ? (M((function() {
                                        return s(),
                                        I
                                    }
                                    )),
                                    D = !0) : (s(),
                                    D = !1)
                                },
                                stop: function(e, t) {
                                    this.targetBoxes.removeClass("current-drop-target"),
                                    D = !1,
                                    I = !1;
                                    var n = o(this);
                                    if (n.removeClass("drag_placeholder"),
                                    n.parent().hasClass("animatedrop"))
                                        n.css("position", "relative"),
                                        n.offset(o(t.helper).offset()),
                                        n.animate({
                                            top: 0,
                                            left: 0
                                        }, F.updateState.bind(F));
                                    else {
                                        var r = g.offset();
                                        n.css("position", "absolute");
                                        var a = o(t.helper).offset();
                                        n.offset({
                                            left: a.left + r.left - this.ddboxesOffset.left,
                                            top: a.top + r.top - this.ddboxesOffset.top
                                        }),
                                        F.updateState()
                                    }
                                }
                            })
                        }
                        function W(e, t, n) {
                            e.css({
                                left: parseInt(t.position.X - v) * n + "px",
                                top: parseInt(t.position.Y - b) * n + "px",
                                width: parseInt(t.position.Width) * n + "px",
                                height: parseInt(t.position.Height) * n + "px"
                            })
                        }
                        function U() {
                            if (0 !== w && 0 !== y) {
                                var e, t, r = E();
                                !function(e) {
                                    1 === e ? g.css({
                                        width: w - v + "px",
                                        height: y - b + "px",
                                        "background-size": "auto"
                                    }) : g.css({
                                        width: (w - v) * e + "px",
                                        height: (y - b) * e + "px",
                                        "background-size": C * e + "px " + x * e + "px",
                                        "background-position": -v * e + "px " + -b * e + "px"
                                    })
                                }(r),
                                e = m.scale,
                                t = r,
                                "yes" !== n["only-drop-on-boxes"] && g.find(".ddbox").each((function() {
                                    o(this).find(".dditem").each((function() {
                                        var n = o(this);
                                        n.css({
                                            left: parseFloat(n.css("left")) * t / e,
                                            top: parseFloat(n.css("top")) * t / e
                                        })
                                    }
                                    )),
                                    g.find("> .dditem").each((function() {
                                        var n = o(this);
                                        n.css({
                                            left: parseFloat(n.css("left")) * t / e,
                                            top: parseFloat(n.css("top")) * t / e
                                        })
                                    }
                                    ))
                                }
                                )),
                                function(e) {
                                    for (var t = u.find(".ddbox"), n = 0; n < t.length; ++n) {
                                        var r = o(t[n]);
                                        W(r, _[r.data("inx")], e)
                                    }
                                }(r),
                                function(e) {
                                    k(u.find(".dditem"), e)
                                }(r),
                                m.scale = r
                            }
                        }
                        if ("yes" !== n["auto-position"]) {
                            var z = n.Boxes ? n.Boxes : [];
                            for (A = 0; A < z.length; ++A) {
                                var H;
                                if (null != (H = z[A]).name)
                                    try {
                                        var Q = parseFloat(H.position.X)
                                          , V = Q + parseFloat(H.position.Width);
                                        isNaN(Q) || (v = Math.min(v, Q)),
                                        isNaN(V) || (w = Math.max(w, V));
                                        var Y = parseFloat(H.position.Y)
                                          , K = Y + parseFloat(H.position.Height);
                                        isNaN(Y) || (b = Math.min(b, Y)),
                                        isNaN(K) || (y = Math.max(y, K))
                                    } catch (e) {
                                        console.log("Wrong dragdrop box position configuration: no number")
                                    }
                            }
                        }
                        if (n.background_picture) {
                            g.css({
                                "background-image": "url(" + a(c(n.background_picture)) + ")",
                                "background-repeat": "no-repeat",
                                "background-position": -v + "px " + -b + "px"
                            });
                            var G = new Image;
                            G.onload = function() {
                                C = this.width,
                                x = this.height,
                                w = Math.max(w, this.width),
                                y = Math.max(y, this.height),
                                g.css("width", w - v + "px").css("height", y - b + "px"),
                                U()
                            }
                            ,
                            G.src = c(n.background_picture)
                        }
                        for ("no" === n["only-drop-on-boxes"] && g.droppable({
                            drop: function(e, t) {
                                S(t.draggable, this)
                            },
                            scope: this.questionid
                        }),
                        A = 0; A < _.length; ++A) {
                            var $ = _[A];
                            if ("" !== $.name) {
                                var J = o(document.createElement("div")).attr("id", this.questionid + "ddbox_" + A).data("inx", A).addClass("ddbox");
                                t.data(J, "name", (P = $.name,
                                o(document.createElement("div")).safeHtml(P).text())),
                                o(document.createElement("div")).addClass("ddboxbg").appendTo(J),
                                J.droppable({
                                    drop: function(e, t) {
                                        S(t.draggable, this)
                                    },
                                    tolerance: "intersect",
                                    scope: this.questionid
                                }),
                                "yes" === n["only-drop-on-boxes"] ? J.addClass("animatedrop") : J.css("overflow", "visible"),
                                J.appendTo(g),
                                "yes" !== n["auto-position"] ? (W(J, $, 1),
                                J.addClass("positioned")) : ("" != $.position.Width && J.css("width", $.position.Width + "px"),
                                "" != $.position.Height && J.css("min-height", $.position.Height + "px")),
                                "yes" === n["show-box-header"] && o(document.createElement("div")).addClass("ddbox_box_header").safeHtml(r.prepare($.name)).appendTo(J),
                                "Dotted" === n["box-border"] ? J.addClass("ddbox_border_dotted") : "None" === n["box-border"] && J.addClass("ddbox_border_none"),
                                "Transparent" === n["box-background"] ? J.addClass("ddbox_background_transparent") : "Semi-transparent" === n["box-background"] && J.addClass("ddbox_background_semitransparent"),
                                J.bind("touchend", (function() {
                                    S(F.dragItem, this)
                                }
                                ))
                            }
                        }
                        "yes" === n["auto-position"] && g.addClass("auto-position"),
                        U(),
                        this.onResize = U
                    }
                    ,
                    m.save = function() {
                        var e = [];
                        if (this.onlydroponboxes)
                            this.div.find(".dd-cover .ddbox").each((function() {
                                var n = {};
                                n.name = t.data(o(this), "name"),
                                n.words = [],
                                o(this).find(".dditem").each((function() {
                                    n.words.push(o(this).attr("save"))
                                }
                                )),
                                e.push(n)
                            }
                            ));
                        else {
                            var n = this.scale;
                            this.div.find(".dd-cover .ddbox").each((function() {
                                var r = o(this)
                                  , a = {};
                                a.name = t.data(r, "name"),
                                a.words = [],
                                r.find(".dditem").each((function() {
                                    var e = o(this)
                                      , t = {};
                                    t.name = e.attr("save"),
                                    t.left = parseFloat(e.css("left")) / n,
                                    t.top = parseFloat(e.css("top")) / n,
                                    a.words.push(t)
                                }
                                )),
                                e.push(a)
                            }
                            ));
                            var r = {
                                name: "DD_BOXES",
                                words: []
                            };
                            this.div.find(".dd-boxes > .dditem").each((function() {
                                var e = o(this)
                                  , t = {};
                                t.name = e.attr("save"),
                                t.left = parseFloat(e.css("left")) / n,
                                t.top = parseFloat(e.css("top")) / n,
                                r.words.push(t)
                            }
                            )),
                            e.push(r)
                        }
                        return e
                    }
                    ,
                    m.load = function(e) {
                        var n = [];
                        this.div.find(".dd-cover .dditem").each((function() {
                            n.push(o(this))
                        }
                        ));
                        var r = {};
                        if (this.div.find(".dd-cover .ddbox").each((function() {
                            r[t.data(o(this), "name")] = o(this)
                        }
                        )),
                        this.onlydroponboxes) {
                            for (var a = 0; a < e.length; ++a)
                                for (var i = e[a], s = 0; s < i.words.length; ++s)
                                    if (null != (l = r[i.name]))
                                        for (var u = 0; u < n.length; ++u)
                                            if (n[u].attr("save") === i.words[s]) {
                                                n[u].appendTo(l),
                                                n.splice(u, 1);
                                                break
                                            }
                        } else {
                            var c = this.scale;
                            for (r.DD_BOXES = this.div.find(".dd-boxes"),
                            a = 0; a < e.length; ++a)
                                for (i = e[a],
                                s = 0; s < i.words.length; ++s) {
                                    var l;
                                    if (null != (l = r[i.name]))
                                        for (u = 0; u < n.length; ++u)
                                            if (n[u].attr("save") === i.words[s].name) {
                                                n[u].appendTo(l);
                                                var d = {
                                                    position: "absolute",
                                                    left: i.words[s].left * c,
                                                    top: i.words[s].top * c
                                                };
                                                n[u].css(d),
                                                n.splice(u, 1);
                                                break
                                            }
                                }
                        }
                    }
                    ,
                    m.setReadOnly = function(e) {
                        this.div.find(".dditem").draggable(e ? "disable" : "enable")
                    }
                    ,
                    m.clear = function() {
                        this.div.find(".dd-cover .dditem").appendTo(this.div.find(".dd-cover .words")),
                        this.div.find(".dd-cover .dditem").css({
                            position: "relative",
                            left: "",
                            top: ""
                        })
                    }
                    ,
                    m.createExtraRationaleJQuery = function(a) {
                        var i = o(document.createElement("div"));
                        o(document.createElement("div")).safeHtml(t.translate("The answers:")).appendTo(i);
                        for (var s = a.Boxes ? a.Boxes : [], u = 0; u < s.length; u++) {
                            var c = s[u];
                            if (c.name) {
                                var d = o(document.createElement("div")).css("margin", "5px 0px").appendTo(i)
                                  , f = ("yes" !== n["show-box-header"] ? u + 1 + " - " : "") + (c.name ? r.prepare(c.name) + ": " : "");
                                e ? o(document.createElement("div")).text(f).css("margin-bottom", "10px").appendTo(d) : o(document.createElement("span")).append(f).appendTo(d);
                                for (var p = c.Items ? c.Items : [], h = 0; h < p.length; h++) {
                                    var m = p[h];
                                    if (e)
                                        l(m, "Fixed", 100).addClass("imgwrapper").addClass("ddration").css({
                                            "margin-bottom": "5px",
                                            "margin-right": "30px",
                                            display: "inline-block"
                                        }).appendTo(d);
                                    else {
                                        var g = o(document.createElement("span")).safeHtml(r.prepare(m)).appendTo(d);
                                        h !== p.length - 1 && g.append(", ")
                                    }
                                }
                            }
                        }
                        return i
                    }
                    ,
                    m.name = u(e ? "Picture Drag & Drop" : "Text Drag & Drop"),
                    m
                }
            }
            e.exports = {
                TextDragDrop: f.bind(null, !1),
                PictureDragDrop: f.bind(null, !0)
            }
        },
        50907: function(e, t, n) {
            var r = n(5263);
            e.exports = {
                DragWordsInSentence: r
            }
        },
        54389: function(e, t, n) {
            var r = n(77585);
            e.exports = {
                Equations: r
            }
        },
        13709: function(e, t, n) {
            var r = n(58065)
              , o = n(36565);
            e.exports = {
                ExtraCheckbox: function(e) {
                    return function(t, n, a, i, s) {
                        var u = e.QuestionTypeBase(t, n, a, i, s);
                        return u.renderTitle = function() {}
                        ,
                        u.renderTypeSpecificPart = function() {
                            var e = this
                              , n = r(document.createElement("div")).addClass("ecb-cover").appendTo(this.div);
                            o.createLabeledCheckbox(n, t.label, (function() {
                                e.updateState(),
                                n.find(".mandatory-field-reminder").hide()
                            }
                            )),
                            r(document.createElement("div")).addClass("mandatory-field-reminder").safeHtml(t.mandatory_reminder).appendTo(n)
                        }
                        ,
                        "yes" === t.mandatory && (u.showMandatoryFieldReminder = function(e) {
                            "checked" !== this.div.find(".bw-checkbox").attr("checked") && (e ? this.div.find(".mandatory-field-reminder").show() : this.div.find(".mandatory-field-reminder").hide())
                        }
                        ),
                        u.save = function() {
                            return "checked" === this.div.find(".bw-checkbox").attr("checked") ? "yes" : "no"
                        }
                        ,
                        u.load = function(e) {
                            this.div.find(".bw-checkbox").trigger("yes" === e ? "check" : "clear")
                        }
                        ,
                        u.clear = function() {
                            this.div.find(".bw-checkbox").trigger("clear")
                        }
                        ,
                        u
                    }
                }
            }
        },
        68217: function(e, t, n) {
            var r = n(58065);
            e.exports = {
                ExtraMultiLine: function(e) {
                    return function(t, n, o, a, i) {
                        var s = e.QuestionTypeBase(t, n, o, a, i);
                        return s.renderTitle = function() {}
                        ,
                        s.renderTypeSpecificPart = function() {
                            var n = r(document.createElement("div")).addClass("eml-cover").appendTo(this.div);
                            r(document.createElement("div")).addClass("eml-question").safeHtml(t.label).appendTo(n);
                            var o = r(document.createElement("textarea")).addClass("edit");
                            e.addSpellCheckAttrib(o),
                            o.appendTo(n);
                            try {
                                o.xarea(),
                                o.next().attr("aria-hidden", "true")
                            } catch (e) {}
                            var i = a.widgetstorage.createThrottler(this.updateState.bind(this));
                            o.bind("keyup change", (function() {
                                i.trigger()
                            }
                            ))
                        }
                        ,
                        s.save = function() {
                            return this.div.find(".edit").val()
                        }
                        ,
                        s.load = function(e) {
                            this.div.find(".edit").val(e)
                        }
                        ,
                        s.clear = function() {
                            this.div.find(".edit").val("")
                        }
                        ,
                        s
                    }
                }
            }
        },
        48232: function(e, t, n) {
            var r = n(17496)
              , o = n(95079)
              , a = n(58065)
              , i = n(98274)
              , s = n(78514);
            e.exports = {
                FillInTable: function(e) {
                    return function(t, n, u, c, l) {
                        var d = e.QuestionTypeBase(t, n, u, c, l);
                        return d.getCheckInput = function() {
                            return this.table.getCheckInput()
                        }
                        ,
                        d.renderTypeSpecificPart = function() {
                            var i = r.getConfigSync()
                              , s = "table_" + n;
                            a(document.createElement("div")).addClass("table-cover").attr("id", s).appendTo(this.div),
                            this.div.addClass("table-scroll-wrapper"),
                            this.table = o({
                                tablediv: "#" + s,
                                tabledata: t.tabledata,
                                support_correction_colors: e.questionSupportsCorrection(t),
                                spellcheck: "yes" === i.spellcheck,
                                keyboard: t.keyboard
                            }),
                            this.table.setChangeCallBack(this.updateState.bind(this))
                        }
                        ,
                        d.repaint = function() {
                            this.table.render()
                        }
                        ,
                        d.save = function() {
                            return this.table.getData()
                        }
                        ,
                        d.load = function(e) {
                            this.table.setData(e)
                        }
                        ,
                        d.setReadOnly = function(n) {
                            var o = r.getConfigSync();
                            !1 !== n || "no" !== o.color_correct_answers || e.needToColorCorrectAnswersForQuestion(o, t) || this.table.setCorrectionCallback(null),
                            this.table.setReadOnly(n),
                            setTimeout(this.table.render.bind(this.table))
                        }
                        ,
                        d.clear = function() {
                            this.table.clear()
                        }
                        ,
                        d.prepareCorrection = function(e) {
                            var t = this;
                            this.table.setCorrectionCallback((function() {
                                return i.check.FillInTable(e, t.table.getCheckInput())
                            }
                            ))
                        }
                        ,
                        d.name = s("Fill-in-the-table question"),
                        d
                    }
                }
            }
        },
        20117: function(e, t, n) {
            var r = n(99870)
              , o = n(62375)
              , a = n(1309).richTextAsHtml
              , i = n(84966)
              , s = n(50466)
              , u = n(78073)
              , c = n(61743)
              , l = n(58065)
              , d = n(98274);
            n(16454);
            var f = n(78514);
            e.exports = {
                FillInText: function(e) {
                    return function(t, n, p, h, m) {
                        var g = e.QuestionTypeBase(t, n, p, h, m);
                        return g.getCheckInput = function() {
                            var e = [];
                            return this.div.find(".edit").each((function(t) {
                                if (l(this).is("input")) {
                                    var n = l(this).val().trim();
                                    e.push(n)
                                } else if (l(this).is("select")) {
                                    var r;
                                    n = null !== (r = l(this).val()) && void 0 !== r ? r : "",
                                    e.push("-" === n ? "" : n)
                                }
                            }
                            )),
                            e
                        }
                        ,
                        g.setCorrection = function(t) {
                            var n = 0;
                            this.div.find(".edit").each((function(r) {
                                var o = t ? t.correctness[n++] : 0
                                  , a = l(this);
                                a.is("input") ? (e.setTagValue(a.parent(), "fit-open", t && -2 === o),
                                e.setTagValue(a.parent(), "fit-wrong", t && 0 === o),
                                e.setTagValue(a.parent(), "fit-answer", t && 1 === o)) : a.is("select") && (e.setTagValue(a.parent(), "fit-empty", t && -1 === o),
                                e.setTagValue(a.parent(), "fit-wrong", t && 0 === o),
                                e.setTagValue(a.parent(), "fit-answer", t && 1 === o))
                            }
                            ))
                        }
                        ,
                        g.getQuestionHtml = function() {
                            return d.isLegacyFITStyle(t) ? "" : a(t.Question)
                        }
                        ,
                        g.renderTypeSpecificPart = function() {
                            this.div.addClass("fillintext");
                            var a = function(r) {
                                var o = 0
                                  , a = "";
                                return d.processFillInText(u.prepare(r), (function(r, i) {
                                    o += 1,
                                    a += r,
                                    null !== i && (a += function(n, r) {
                                        var o = n.type
                                          , a = n.typeconfig
                                          , i = n.style;
                                        if ("text" === o)
                                            return "<span><input type='text' " + e.inputModeAttrib(t.keyboard) + e.spellcheckattrib() + "class='edit' id='" + r + "' style=\"" + i.join(";") + '"></input></span>';
                                        if ("select" === o) {
                                            for (var s = a.split(/##/), u = 0; u < s.length; ++u)
                                                s[u] = s[u].trim();
                                            if (0 === s.length)
                                                return "<span>Fill In Blanks: INVALID SELECT<span>";
                                            s.sort();
                                            var c = "<span><select class='edit' id='" + r + "' style=\"" + i.join(";") + '">';
                                            for (c += '<option value="" data-placeholder="true"></option>',
                                            u = 0; u < s.length; ++u)
                                                c += '<option value="' + s[u] + '">' + s[u] + "</option>";
                                            return (c += "</select><span class='select-arrows'></span></span>") + '<span class="print-only-inline">(' + l(document.createElement("div")).text(s.join(" / ")).safeHtml() + ")</span>"
                                        }
                                        return "<span>Fill In Blanks: INVALID Type (" << o << ")<span>"
                                    }(i, "FIT_" + n + "_" + o))
                                }
                                )),
                                a
                            }(d.getFITText(t))
                              , c = l(document.createElement("div")).addClass(r("fit-sentence", d.isLegacyFITStyle(t) && "question-style")).attr("role", "region").safeHtml(a).appendTo(this.div);
                            s.processAudioTags(c),
                            i.resolveYoutubePlaceholders(c),
                            o.process(c),
                            this.div.find("select").each((function() {
                                e.setTag(l(this).parent(), "fit-empty")
                            }
                            )),
                            this.div.find("input, select").each((function() {
                                e.createCorrectWrongMarker().appendTo(l(this).parent())
                            }
                            ));
                            try {
                                this.div.find("input:text").autoGrowInput()
                            } catch (e) {}
                            this.div.find(".fit-empty").each((function() {
                                var t = l(this);
                                t.removeClass("fit-empty"),
                                e.setTag(t, "fit-empty")
                            }
                            ));
                            var f = h.widgetstorage.createThrottler(this.updateState.bind(this))
                              , p = this;
                            this.div.find("input").each((function(e) {
                                l(this).bind("keyup change", (function() {
                                    p.loading || f.trigger()
                                }
                                ))
                            }
                            )),
                            this.div.find("select").each((function(e) {
                                l(this).bind("change", (function(e, t) {
                                    p.loading || f.trigger()
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        g.repaint = function() {
                            this.div.find("input").trigger("update")
                        }
                        ,
                        g.save = function() {
                            return this.getCheckInput()
                        }
                        ,
                        g.load = function(e) {
                            var t = 0;
                            this.div.find(".edit").each((function(n) {
                                l(this).is("input") ? l(this).val(e[t++]).trigger("update") : l(this).is("select") && l(this).val(e[t++].trim()).attr("selected", !0)
                            }
                            ))
                        }
                        ,
                        g.setReadOnly = function(e) {
                            -1 == c.getPlatform().indexOf("ipad") && this.div.find("input, select").prop("disabled", e)
                        }
                        ,
                        g.clear = function() {
                            this.div.find(".edit").each((function(e) {
                                var t = l(this);
                                t.is("input") ? t.val("").trigger("update") : t.is("select") && (this.selectedIndex = -1,
                                t.trigger("change"))
                            }
                            ))
                        }
                        ,
                        g.createExtraRationale = function(t) {
                            var n, r = function(t) {
                                var n = !1
                                  , r = "";
                                return d.processFillInText(u.prepare(t), (function(t, o) {
                                    if (r += t,
                                    null !== o) {
                                        var a = function(t) {
                                            var n = t.type
                                              , r = t.typeconfig;
                                            if ("text" == n)
                                                return e.textAnswerToDisplayString(r);
                                            if ("select" == n) {
                                                var o = r.split(/##/);
                                                return 0 === o.length ? "Fill In Blanks: INVALID SELECT" : o[0]
                                            }
                                            return "Fill In Blanks: INVALID Type (" << n << ")"
                                        }(o);
                                        "" !== a || "select" === o.type ? (r += '<span class="answer answer-in-text">' + a + "</span>",
                                        n = !0) : r += "_____"
                                    }
                                }
                                )),
                                n ? r : null
                            }(d.getFITText(t));
                            return null !== r && (n = e.translate("The answer:") + '<br><br><div class="the-answer-text">' + r + "</div>"),
                            n
                        }
                        ,
                        g.name = f("Fill-in-the-blank(s) question"),
                        g
                    }
                }
            }
        },
        35457: function(e, t, n) {
            var r = n(79085);
            e.exports = {
                Group: r
            }
        },
        6378: function(e, t, n) {
            var r = n(45250).cloneDeep
              , o = n(17902)
              , a = n(2616).ionlist
              , i = n(78073)
              , s = n(58065);
            n(1420);
            var u = n(78514)
              , c = r(a);
            e.exports = {
                IonicCompoundBuilder: function(e) {
                    return function(t, n, r, a, l) {
                        var d = e.QuestionTypeBase(t, n, r, a, l);
                        function f(e) {
                            var t = [];
                            return e.find("li").each((function(e, n) {
                                var r = s(n).attr("data-ion-index");
                                t.push(c[r])
                            }
                            )),
                            t
                        }
                        function p(t, n, r, a) {
                            var s, u, c, l = (s = f(t),
                            u = f(n),
                            c = s.concat(u),
                            {
                                parsedFormula: o.joinIonsToFormula(c),
                                totalCharge: o.totalCharge(c)
                            }), d = o.formatFormula(l.parsedFormula);
                            r.safeHtml(i.prepare("$$" + d + "$$")),
                            i.process(r.children()),
                            e.createCorrectWrongMarker().appendTo(r),
                            d ? a.text(e.translate("Sum of charges:") + " " + l.totalCharge) : a.text("")
                        }
                        var h, m, g = {}, v = {};
                        function w(e) {
                            var t = a.getScrollObject();
                            v.down > 0 && (t.scrollTop = t.scrollTop + (v.down >> 1)),
                            v.up > 0 && (t.scrollTop = t.scrollTop - (v.up >> 1)),
                            (v.up > 0 || v.down > 0) && e() && setTimeout(w.bind(null, e), 100)
                        }
                        function b(e, t, n, r, u, c, l) {
                            var d = s(document.createElement("li"));
                            d.addClass("wordwrapper"),
                            d.safeHtml(i.prepare("$$" + o.formatIon(e) + "$$")),
                            d.attr("data-ion-index", t),
                            e.charge > 0 ? n.append(d) : r.append(d),
                            l && d.draggable({
                                helper: "clone",
                                scope: e.charge > 0 ? "pos" : "neg",
                                revert: "invalid",
                                start: function(e, t) {
                                    var n = a.getScrollObject();
                                    g = {
                                        top: s(n).offset().top + 50,
                                        bottom: s(n).offset().top + s(n).height() - 50,
                                        scrollTop: n.scrollTop
                                    },
                                    h = !1,
                                    m = !0
                                },
                                drag: function(e, t) {
                                    var n = s(".ui-draggable-dragging");
                                    function r() {
                                        var e = a.getScrollObject();
                                        n.setTranslate(0, e.scrollTop - g.scrollTop)
                                    }
                                    v.up = g.top - e.clientY,
                                    v.down = e.clientY - g.bottom,
                                    (v.up > 0 || v.down > 0) && !h ? (w((function() {
                                        return r(),
                                        m
                                    }
                                    )),
                                    h = !0) : (r(),
                                    h = !1,
                                    m = !1)
                                },
                                stop: function(e, t) {
                                    h = !1
                                }
                            })
                        }
                        return d.getCheckInput = function() {
                            var e = this.div.find("#pos-drop-target")
                              , t = this.div.find("#neg-drop-target");
                            return {
                                posIons: f(e),
                                negIons: f(t)
                            }
                        }
                        ,
                        d.setCorrection = function(t) {
                            var n = this.div.find(".composed-formula");
                            e.setTagValue(n, "wrong", t && 0 === t.correctness),
                            e.setTagValue(n, "correct", t && 1 === t.correctness)
                        }
                        ,
                        d.renderTypeSpecificPart = function() {
                            var n = s(document.createElement("div")).addClass("icb-cover").appendTo(this.div);
                            e.data(n, "valid-answer", t.Valid);
                            var r = s(document.createElement("div")).addClass("bw-row").appendTo(n)
                              , o = s(document.createElement("div")).addClass("bw-col-1-2").appendTo(r)
                              , a = s(document.createElement("ul")).addClass("drag-source").appendTo(o)
                              , i = s(document.createElement("div")).addClass("bw-col-1-2").appendTo(r)
                              , u = s(document.createElement("ul")).addClass("drag-source").appendTo(i)
                              , l = s(document.createElement("div")).addClass("bw-row").appendTo(n)
                              , f = s(document.createElement("div")).addClass("bw-col-1-2 ddboxwrapper").css("position", "relative").appendTo(l)
                              , h = s(document.createElement("ul")).addClass("drop-target ddbox").attr("id", "pos-drop-target").appendTo(f);
                            s(document.createElement("div")).addClass("ddboxbg").appendTo(h),
                            s(document.createElement("div")).addClass("sign").text("+").appendTo(f);
                            var m = s(document.createElement("div")).addClass("trash-button bw-icon-small bw-icon-trash bw-smalliconbutton").appendTo(f)
                              , g = s(document.createElement("div")).addClass("bw-col-1-2 ddboxwrapper").css("position", "relative").appendTo(l)
                              , v = s(document.createElement("ul")).addClass("drop-target ddbox").attr("id", "neg-drop-target").appendTo(g);
                            s(document.createElement("div")).addClass("ddboxbg").appendTo(v),
                            s(document.createElement("div")).addClass("sign").text("-").appendTo(g);
                            var w = s(document.createElement("div")).addClass("trash-button bw-icon-small bw-icon-trash bw-smalliconbutton").appendTo(g);
                            s(document.createElement("div")).css("clear", "both").appendTo(n);
                            for (var y = s(document.createElement("div")).addClass("composed-formula").appendTo(n), C = s(document.createElement("div")).addClass("total-charge").appendTo(n), x = {}, E = 0; E < t.KnownIons.length; ++E)
                                x[t.KnownIons[E]] = !0;
                            var k = [];
                            for (E = 0; E < c.length; ++E)
                                c[E].ionIndex = E,
                                c[E].ion in x && k.push(c[E]);
                            for (k.sort((function(e, t) {
                                return e.ion.localeCompare(t.ion)
                            }
                            )),
                            E = 0; E < k.length; ++E) {
                                var S = k[E];
                                b(S, S.ionIndex, a, u, 0, 0, !0)
                            }
                            function T(e, t) {
                                e.droppable({
                                    scope: t,
                                    drop: function(e, t) {
                                        t.draggable.parent()[0] !== this && t.draggable.clone().appendTo(s(this)),
                                        s(this).sortable("refresh"),
                                        p(h, v, y, C),
                                        d.updateState()
                                    }
                                })
                            }
                            h.add(v).sortable({
                                placeholder: "sortable-placeholder",
                                stop: function() {
                                    p(h, v, y, C),
                                    d.updateState()
                                }
                            }),
                            T(h, "pos"),
                            T(v, "neg"),
                            m.add(w).tapOrClick((function() {
                                s(this).parent().find("li").each((function(e, t) {
                                    s(t).remove()
                                }
                                )),
                                p(h, v, y, C),
                                d.updateState()
                            }
                            ))
                        }
                        ,
                        d.save = function() {
                            var e = this.div.find("#pos-drop-target")
                              , t = this.div.find("#neg-drop-target")
                              , n = [];
                            return e.find("li").each((function(e, t) {
                                var r = s(t).attr("data-ion-index");
                                n.push(r)
                            }
                            )),
                            t.find("li").each((function(e, t) {
                                var r = s(t).attr("data-ion-index");
                                n.push(r)
                            }
                            )),
                            n
                        }
                        ,
                        d.load = function(e) {
                            for (var t = this.div.find("#pos-drop-target"), n = this.div.find("#neg-drop-target"), r = 0; r < e.length; ++r) {
                                var o = e[r];
                                o < c.length ? b(c[o], o, t, n, 0, 0, !1) : console.error("Saved ion doesn't exist anymore: ", o)
                            }
                            i.process(t.find("li").children()),
                            i.process(n.find("li").children()),
                            p(t, n, this.div.find(".composed-formula"), this.div.find(".total-charge"))
                        }
                        ,
                        d.clear = function() {
                            var e = this.div.find("#pos-drop-target")
                              , t = this.div.find("#neg-drop-target");
                            e.find("li").remove(),
                            t.find("li").remove(),
                            p(e, t, this.div.find(".composed-formula"), this.div.find(".total-charge"))
                        }
                        ,
                        d.createExtraRationale = function(t) {
                            var n = o.formatFormula(o.parseFormula(t.Valid));
                            return e.translate("The answer:") + '</br><div class="answer">' + i.prepare("$$" + n + "$$") + "</div>"
                        }
                        ,
                        d.name = u("Ionic compound builder"),
                        d
                    }
                }
            }
        },
        33676: function(e, t, n) {
            var r = n(10304);
            e.exports = {
                MarkSentence: r
            }
        },
        98159: function(e, t, n) {
            var r = n(17496)
              , o = n(78073)
              , a = n(50466)
              , i = n(58065)
              , s = n(62946)
              , u = n(98274)
              , c = n(16806)
              , l = n(45027)
              , d = n(78514)
              , f = n(45250).map
              , p = n(6322).isRtlOrRtlMixed
              , h = n(51958)
              , m = h.MATCH_TYPE_WORD
              , g = h.MATCH_TYPE_PIC
              , v = h.MATCH_TYPE_AUDIO
              , w = h.isMatchDistractor
              , b = h.matchElemId;
            function y(e) {
                var t = e.closest(".contentarea");
                return {
                    width: t.width() || 1024,
                    height: t.height() || 768
                }
            }
            function C(e, t) {
                var n = c.create(Object.assign({}, t, {
                    disable_press: !0,
                    disable_drag: !0,
                    loadcb: function(t) {
                        if ("Auto" !== e) {
                            var r = t.target;
                            n.css("width", Math.min(r.naturalWidth, 300) + "px")
                        }
                    }
                }));
                return i(document.createElement("div")).append(n)
            }
            function x(e) {
                return e.replace(/QC[0-9]+_/, "")
            }
            function E(e, t, n, c, h) {
                return function(n, E, k, S, T) {
                    var _ = h.QuestionTypeBase(n, E, k, S, T);
                    return _.getCheckInput = function() {
                        for (var e = this.matchConnections.getConnections(), t = [], n = 0; n < e.length; ++n) {
                            var r = e[n];
                            t.push({
                                source: h.data(this.div.find("#" + r.sourceId), "txt"),
                                target: h.data(this.div.find("#" + r.targetId), "txt")
                            })
                        }
                        return t
                    }
                    ,
                    _.setConnections = function(e) {
                        this.matchConnections.setLoading(!0),
                        this.matchConnections.clearConnections();
                        for (var t = 0; t < e.length; ++t)
                            this.matchConnections.connect(e[t].sourceId, e[t].targetId);
                        this.matchConnections.setLoading(!1)
                    }
                    ,
                    _.renderTypeSpecificPart = function(u) {
                        var c = this
                          , f = r.getConfigSync()
                          , b = (window.MatchConnections || s).create(this.div, S.getScrollObject, h, "Straight", this.updateState.bind(this), p(f && f.direction));
                        this.matchConnections = b,
                        this.div.addClass("match");
                        for (var x = n.pairs ? n.pairs : [], E = i(document.createElement("table")).addClass("match_table").css("page-break-inside", "auto").attr("resize-mode", n.img_resize_mode).appendTo(this.div), k = 0; k < x.length; ++k) {
                            var T = i(document.createElement("td")).css("page-break-inside", "avoid").css("page-break-after", "auto").addClass("match_source match_source_" + k)
                              , _ = i(document.createElement("td")).css("page-break-inside", "avoid").css("page-break-after", "auto").addClass("match_target match_target_" + k)
                              , A = i(document.createElement("tr")).css("page-break-inside", "avoid").css("page-break-after", "auto").appendTo(E);
                            p(f && f.direction) ? (A.append(_).append(T),
                            E.css("direction", "rtl")) : (A.append(T).append(_),
                            E.css("direction", "ltr"))
                        }
                        y(this.div);
                        var O = [];
                        for (k = 0; k < x.length; ++k)
                            O.push(k);
                        for (var D, I, P, R = 0, L = this, N = 0; N < x.length; ++N) {
                            var F = x[k = O[N]];
                            if (!w(F.source, e)) {
                                var M, j = "cs_" + k;
                                if (e === g) {
                                    var q = F.source.sources && F.source.sources.length > 0 ? F.source.sources[0].src : ""
                                      , B = F.source.origbase;
                                    M = i(document.createElement("div")).addClass("connectwindow connectpicture connectsource").attr("pic", q).attr("id", l.randomId(20)),
                                    h.data(M, "id", j),
                                    h.data(M, "txt", B),
                                    h.createCorrectWrongMarker().appendTo(M);
                                    var W = C(n.img_resize_mode, F.source).addClass("imgwrapper").appendTo(M);
                                    i(W).find("img").one("load", (function() {
                                        L.repaint()
                                    }
                                    )).each((function() {
                                        this.complete && (window.jQuery.fn.jquery > "3" ? i(this).trigger("load") : i(this).load())
                                    }
                                    ))
                                } else
                                    e === m ? (M = i(document.createElement("div")).addClass("connectwindow connectword connectsource").safeHtml(o.prepare(F.source)).attr("id", l.randomId(20)),
                                    h.data(M, "id", j),
                                    h.data(M, "txt", F.source),
                                    h.createCorrectWrongMarker().prependTo(M)) : e === v && (M = i(document.createElement("div")).addClass("connectwindow connectaudio connectsource").attr("id", l.randomId(20)),
                                    D = F.source,
                                    I = M,
                                    P = void 0,
                                    P = a.addElement(D, "body"),
                                    i(document.createElement("div")).addClass("bw-button audiobutton").append(i(document.createElement("div")).addClass("bw-icon-large bw-icon-music-play-2")).makeButton(d("play")).tapOrClick(P.toggle.bind(P)).appendTo(I),
                                    h.data(M, "id", j),
                                    h.data(M, "txt", N + ""),
                                    h.createCorrectWrongMarker().prependTo(M));
                                E.find(".match_source_" + R).append(M),
                                ++R
                            }
                        }
                        var U = l.randomIndexList(x.length, u)
                          , z = 0;
                        for (N = 0; N < x.length; ++N) {
                            var H;
                            if (F = x[k = U[N]],
                            !w(F.target, t))
                                j = "ct_" + k,
                                t === g ? (q = F.target.sources && F.target.sources.length > 0 ? F.target.sources[0].src : "",
                                B = F.target.origbase,
                                H = i(document.createElement("div")).addClass("connectwindow connectpicture connecttarget").attr("pic", q).attr("id", l.randomId(20)),
                                h.data(H, "id", j),
                                h.data(H, "txt", B),
                                W = C(n.img_resize_mode, F.target).addClass("imgwrapper").appendTo(H),
                                i(W).find("img").one("load", (function() {
                                    L.repaint()
                                }
                                )).each((function() {
                                    this.complete && (window.jQuery.fn.jquery > "3" ? i(this).trigger("load") : i(this).load())
                                }
                                )),
                                h.createCorrectWrongMarker().appendTo(H)) : (H = i(document.createElement("div")).addClass("connectwindow connectword connecttarget").safeHtml(o.prepare(F.target)).attr("id", l.randomId(20)),
                                h.data(H, "id", j),
                                h.data(H, "txt", F.target),
                                h.createCorrectWrongMarker().appendTo(H)),
                                E.find(".match_target_" + z).append(H),
                                ++z
                        }
                        for (E.find("tr").each((function() {
                            var e = i(this);
                            e.find(".match_source").is(":empty") && e.find(".match_target").is(":empty") && e.remove()
                        }
                        )),
                        k = 0; k < x.length; ++k)
                            w(x[k].source, e) || (j = "cs_" + k,
                            b.addSource(h.findByData(this.div, ".connectsource", "id", j).attr("id")));
                        for (k = 0; k < x.length; ++k)
                            w(x[k].target, t) || (j = "ct_" + k,
                            b.addTarget(h.findByData(this.div, ".connecttarget", "id", j).attr("id")));
                        setTimeout((function() {
                            o.scheduleOrExecuteIfNoLatex(c.repaintConnections.bind(c))
                        }
                        ), 100)
                    }
                    ,
                    _.setCorrection = function(n, r, o, a) {
                        for (var i = r && r.pairs ? r.pairs : [], s = 0; s < i.length; ++s)
                            if (!w(i[s].source, e) && !w(i[s].target, t)) {
                                var c = h.findByData(this.div, ".connectsource", "txt", b(e, i[s].source, s)).attr("id")
                                  , l = h.findByData(this.div, ".connecttarget", "txt", u.pictureId(i[s].target)).attr("id");
                                if (a) {
                                    for (var d = -1, f = this.matchConnections.getConnections(), p = 0; p < f.length; ++p)
                                        if (f[p].sourceId === c) {
                                            d = f[p].targetId;
                                            break
                                        }
                                    d !== l && this.matchConnections.connect(c, l, !0, !0)
                                }
                            }
                        setTimeout(this.matchConnections.repaint.bind(this.matchConnections), 0)
                    }
                    ,
                    _.repaintConnections = function() {
                        this.matchConnections.repaint(),
                        setTimeout(this.matchConnections.repaint.bind(this.matchConnections), 100)
                    }
                    ,
                    _.repaint = _.onResize = function() {
                        if ("Auto" === n.img_resize_mode) {
                            var e = y(this.div);
                            this.div.find(".match_table .img").each((function() {
                                var t, r, o, a, s, u, c, l;
                                t = i(this),
                                r = n.pairs.length,
                                o = e,
                                a = function(e) {
                                    function t(e) {
                                        return e.outerWidth() - e.width()
                                    }
                                    return 2 * (t(e.parent()) + t(e.parent().parent()) + t(e.parent().parent().parent()) + 25)
                                }(t),
                                s = Math.max((o.width - a) / 2, 40),
                                c = Math.max(o.height / r - 20 - 10, 40) / ((u = t.find("img"))[0].naturalHeight / u[0].naturalWidth),
                                l = Math.min(s, c),
                                t.css({
                                    width: l
                                })
                            }
                            ))
                        }
                        setTimeout(this.repaintConnections.bind(this))
                    }
                    ,
                    _.save = function() {
                        for (var e = this.matchConnections.getConnections(), t = 0; t < e.length; ++t)
                            e[t].sourceId = h.data(this.div.find("#" + e[t].sourceId), "id"),
                            e[t].targetId = h.data(this.div.find("#" + e[t].targetId), "id");
                        return 0 === e.length ? null : e
                    }
                    ,
                    _.load = function(e) {
                        var t = this;
                        this.matchConnections.setLoading();
                        var n = f(e, (function(e) {
                            return {
                                sourceId: h.findByData(t.div, ".connectsource", "id", x(e.sourceId)).attr("id"),
                                targetId: h.findByData(t.div, ".connecttarget", "id", x(e.targetId)).attr("id")
                            }
                        }
                        ));
                        return this.setConnections(n)
                    }
                    ,
                    _.setReadOnly = function(e) {
                        if (!1 === e) {
                            var t = this.matchConnections.getConnections();
                            this.setConnections(t)
                        }
                    }
                    ,
                    _.clear = function() {
                        this.matchConnections.clearConnections()
                    }
                    ,
                    _.prepareCorrection = function(t) {
                        for (var n = [], r = t.pairs ? t.pairs : [], o = 0; o < r.length; ++o) {
                            var a = h.findByData(this.div, ".connectsource", "txt", b(e, r[o].source, o))
                              , i = h.findByData(this.div, ".connecttarget", "txt", u.pictureId(r[o].target));
                            n.push({
                                sourceId: a.attr("id"),
                                targetId: i.attr("id")
                            })
                        }
                        this.matchConnections.setCorrectPairs(n)
                    }
                    ,
                    _.name = d(c),
                    _
                }
            }
            e.exports = {
                WordMatch: E.bind(null, m, m, "WordMatch", "Word Match question"),
                WordPictureMatch: E.bind(null, m, g, "WordPictureMatch", "Word - Picture Match question"),
                PicturePictureMatch: E.bind(null, g, g, "PicturePictureMatch", "Picture - Picture Match question"),
                AudioWordMatch: E.bind(null, v, m, "AudioWordMatch", "Audio - Word Match question"),
                AudioPictureMatch: E.bind(null, v, g, "AudioPictureMatch", "Audio - Picture Match question")
            }
        },
        16117: function(e, t, n) {
            function r(e) {
                return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                r(e)
            }
            function o(e, t, n) {
                return (t = function(e) {
                    var t = function(e) {
                        if ("object" !== r(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== r(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(e);
                    return "symbol" === r(t) ? t : String(t)
                }(t))in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n,
                e
            }
            var a = n(74827).isLetter
              , i = n(61743)
              , s = n(58065)
              , u = n(98274)
              , c = n(45250).map
              , l = n(36326).createCaseSensitiveKeywordListMatchRegexpForNFKC
              , d = n(78514)
              , f = n(19863).getTextWordCount;
            e.exports = {
                MultiLine: function(e) {
                    return function(t, n, r, p, h) {
                        var m = e.QuestionTypeBase(t, n, r, p, h);
                        return m.inputField = function() {
                            return this.div.find(".edit")
                        }
                        ,
                        m.getCheckInput = function() {
                            return this.inputField().val()
                        }
                        ,
                        m.setNumberOfWords = function(e) {
                            var t = this.div.find(".number-of-words");
                            if (t) {
                                var n = f(e);
                                t.text(n)
                            }
                        }
                        ,
                        m.updateTextareaCover = function() {
                            var e = this;
                            if (this.supportlinks || this.showkeywords) {
                                var t, n = (t = this.getCheckInput(),
                                c(t.split(/\r\n|\r|\n/), (function(e) {
                                    return function(e) {
                                        return s(document.createElement("div")).text(e).safeHtml()
                                    }(e)
                                }
                                )).join("<br>"));
                                this.supportlinks && (n = u.linkifyLinks(n)),
                                this.showkeywords && (n = function(t) {
                                    for (var n = t, r = e.questionconfig || {
                                        keywords: [],
                                        "case-sensitive": "no"
                                    }, o = r["case-sensitive"], i = r.Keywords || [], s = [], u = 0; u < i.length; ++u)
                                        for (var c = i[u].split(/##/), d = c.length > 1 && !1 === isNaN(c[c.length - 1]), f = 0; f < (d ? c.length - 1 : c.length); ++f)
                                            "" !== c[f].trim() && s.push(c[f]);
                                    if (s.length > 0) {
                                        var p = l(s, o);
                                        n.normalize && (n = n.normalize("NFKC")),
                                        n = n.replace(p, (function(e, t, n, r) {
                                            return 0 !== n && a(r.charAt(n - 1)) || n + e.length !== r.length && a(r.charAt(n + e.length)) ? e : "<span class='ml-keyword'>" + e + "</span>"
                                        }
                                        ))
                                    }
                                    return n
                                }(n));
                                var r = this.div.find(".textareacover")
                                  , o = this.div.find("textarea");
                                r.safeHtml(n);
                                for (var i = o.parent(); !i.parent().hasClass("ml-cover"); )
                                    i = i.parent();
                                var d = i.position();
                                r.css({
                                    left: d.left,
                                    top: d.top,
                                    width: o.outerWidth(),
                                    height: o.outerHeight()
                                })
                            }
                        }
                        ,
                        m.onResize = m.repaint = function() {
                            this.updateTextareaCover()
                        }
                        ,
                        m.showTextareaCover = function() {
                            this.updateTextareaCover(),
                            this.div.addClass("showcover").removeClass("hidecover"),
                            this.div.find(".textareacover").scrollTop(this.div.find("textarea").scrollTop())
                        }
                        ,
                        m.hideTextAreaCover = function() {
                            this.div.removeClass("showcover").addClass("hidecover")
                        }
                        ,
                        m.renderTypeSpecificPart = function() {
                            var n = this.div.addClass("ml-cover hidecover bw-column-container")
                              , r = s(document.createElement("div")).addClass("bw-column-resizing").appendTo(n)
                              , a = s(document.createElement("textarea")).addClass("edit").appendTo(r);
                            this.data.show_word_counter && "yes" === this.data.show_word_counter && (a.on("input", (function(e) {
                                m.setNumberOfWords(e.target.value)
                            }
                            )),
                            s(document.createElement("div")).css(o(o({}, "text-align", "right"), "margin-top", "5px")).safeHtml(d("Words: %d").replace("%d", "<span class='number-of-words'>0</span>")).appendTo(r)),
                            e.addSpellCheckAttrib(a),
                            e.createCorrectWrongMarker({
                                elementType: "div"
                            }).addClass("bw-column-fixed bw-centering-container").appendTo(n);
                            try {
                                a.xarea(),
                                a.css("overflow-y", "auto"),
                                a.next().attr("aria-hidden", "true").css("overflow-wrap", "anywhere")
                            } catch (e) {}
                            var i = p.widgetstorage.createThrottler(this.updateState.bind(this));
                            a.bind("keyup change", (function() {
                                i.trigger()
                            }
                            )),
                            this.supportlinks = "yes" === t["support-links"],
                            this.showkeywords = "yes" === t["show-matched-keywords"] && "" !== t.Keywords,
                            this.showkeywords && n.addClass("show-keywords"),
                            (this.supportlinks || this.showkeywords) && (s(document.createElement("div")).addClass("textareacover").css("overflow", "hidden auto").prependTo(r),
                            a.bind("focusout", this.showTextareaCover.bind(this)),
                            a.bind("focus", this.hideTextAreaCover.bind(this)),
                            this.showTextareaCover())
                        }
                        ,
                        m.save = function() {
                            return this.getCheckInput()
                        }
                        ,
                        m.load = function(e) {
                            this.inputField().val(e),
                            this.inputField().trigger("keyup"),
                            this.setNumberOfWords(e),
                            this.updateTextareaCover()
                        }
                        ,
                        m.setCorrection = function(t, n) {
                            var r = this.div;
                            if (null == t)
                                return e.setTagValue(r, "ml-open", !1),
                                e.setTagValue(r, "ml-answer", !1),
                                void e.setTagValue(r, "ml-none", !1);
                            for (var o = !0, a = 0; a < t.keywords.length; ++a)
                                if (t.keywords[a].match) {
                                    o = !1;
                                    break
                                }
                            e.setTagValue(r, "ml-open", -2 === t.correctness),
                            e.setTagValue(r, "ml-answer", 1 === t.correctness),
                            e.setTagValue(r, "ml-partial", 0 === t.correctness && !o),
                            e.setTagValue(r, "ml-none", 0 === t.correctness && o),
                            this.questionconfig = n,
                            this.updateTextareaCover()
                        }
                        ,
                        m.clear = function() {
                            this.load(""),
                            this.questionconfig = null
                        }
                        ,
                        m.setReadOnly = function(e) {
                            -1 == i.getPlatform().indexOf("ipad") && this.inputField().prop("disabled", e)
                        }
                        ,
                        m.name = d("Multi Line Text question"),
                        m
                    }
                }
            }
        },
        90647: function(e, t, n) {
            var r = n(78073)
              , o = n(61743)
              , a = n(58065)
              , i = n(36565)
              , s = n(45027)
              , u = n(78514);
            e.exports = {
                TextMultpleChoice: function(e) {
                    return function(t, n, c, l, d) {
                        var f = e.QuestionTypeBase(t, n, c, l, d);
                        return f.getCheckInput = function() {
                            var e = this.div.find("[checked='checked']").attr("value");
                            return null == e ? null : e
                        }
                        ,
                        f.renderTypeSpecificPart = function(n) {
                            var o = this
                              , u = this.div.addClass("tmc-cover").attr("role", "radiogroup");
                            if (t.Answers)
                                for (var c, l, d, f = s.randomIndexList(t.Answers.length, n), p = function() {
                                    c = "yes" === t["random-answer-order"] ? f[h] : h,
                                    l = r.prepare(t.Answers[c].trim());
                                    var n = o;
                                    (d = i.createLabeledRadiobutton(u, l, (function() {
                                        if (!n.readOnly) {
                                            var e = "checked" === a(this).attr("checked");
                                            a(this).parent().find(".bw-radiobutton").trigger("clear"),
                                            e && a(this).trigger("check"),
                                            n.updateState()
                                        }
                                    }
                                    ), "question-" + t.id)).find(".bw-button-label").append(e.createCorrectWrongMarker()),
                                    d.attr("answer", t.Answers[c]).attr("value", c + 1).addClass("tmc-row"),
                                    d.toggleClass("tmc-multi-column", "yes" === t["multi-column"])
                                }, h = 0; h < t.Answers.length; ++h)
                                    p()
                        }
                        ,
                        f.save = function() {
                            return this.div.find("[checked='checked']").attr("answer")
                        }
                        ,
                        f.load = function(e) {
                            this.div.find(".bw-radiobutton").each((function() {
                                a(this).trigger(a(this).attr("answer") === e ? "check" : "clear")
                            }
                            ))
                        }
                        ,
                        f.clear = function() {
                            this.div.find(".bw-radiobutton").trigger("clear")
                        }
                        ,
                        f.setReadOnly = function(e) {
                            -1 == o.getPlatform().indexOf("ipad") && this.div.find(".bw-radiobutton").prop("disabled", e)
                        }
                        ,
                        f.prepareCorrection = function(t) {
                            var n = this.div.find(".tmc-row[value=" + t.Valid + "]");
                            n.length > 0 && e.setTag(n, "tmc-answer")
                        }
                        ,
                        f.name = u("Text multiple choice question"),
                        f
                    }
                },
                RatedMultipleChoice: function(e) {
                    return function(t, n, s, c, l) {
                        var d = e.QuestionTypeBase(t, n, s, c, l);
                        return d.getCheckInput = function() {
                            var e = this.div.find("[checked='checked']").attr("value");
                            return null == e ? null : e
                        }
                        ,
                        d.renderTypeSpecificPart = function() {
                            for (var e, n, o = this, s = this.div.addClass("rmc-cover").attr("role", "radiogroup"), u = t.Answers ? t.Answers : [], c = function() {
                                e = r.prepare(u[l].answer.trim());
                                var c = o;
                                (n = i.createLabeledRadiobutton(s, e, (function() {
                                    c.readOnly || (a(this).parent().find(".bw-radiobutton").trigger("clear"),
                                    a(this).trigger("check"),
                                    c.updateState())
                                }
                                ), "question-" + t.id)).attr("answer", u[l].answer).attr("value", l).addClass("tmc-row"),
                                n.toggleClass("tmc-multi-column", "yes" == t["multi-column"])
                            }, l = 0; l < u.length; ++l)
                                c()
                        }
                        ,
                        d.save = function() {
                            return this.div.find("[checked='checked']").attr("answer")
                        }
                        ,
                        d.load = function(e) {
                            this.div.find(".bw-radiobutton").each((function() {
                                a(this).trigger(a(this).attr("answer") === e ? "check" : "clear")
                            }
                            ))
                        }
                        ,
                        d.clear = function() {
                            this.div.find(".bw-radiobutton").trigger("clear")
                        }
                        ,
                        d.setReadOnly = function(e) {
                            -1 == o.getPlatform().indexOf("ipad") && this.div.find(".bw-radiobutton").prop("disabled", e)
                        }
                        ,
                        d.name = u("Rated multiple choice question"),
                        d
                    }
                }
            }
        },
        69943: function(e, t, n) {
            var r = n(78073)
              , o = n(61743)
              , a = n(58065)
              , i = n(36565)
              , s = n(45027)
              , u = n(45250).map
              , c = n(51958)
              , l = c.arrayContains
              , d = c.removeNonNumbers
              , f = n(78514);
            e.exports = {
                TextMultiSelect: function(e) {
                    return function(t, n, c, p, h) {
                        var m = e.QuestionTypeBase(t, n, c, p, h);
                        return m.getCheckInput = function() {
                            for (var e = this.div.find(".bw-checkbox").length, t = [], n = 0; n < e; ++n) {
                                var r = this.div.find(".bw-checkbox[value=" + n + "]");
                                t.push("checked" === r.attr("checked"))
                            }
                            return t
                        }
                        ,
                        m.renderTypeSpecificPart = function(n) {
                            var o = this
                              , a = this.div.addClass("tmc-cover");
                            if (t.Answers) {
                                var u = 0;
                                "yes" === t.limited_selection && t.Valid && (u = d(t.Valid).split(" ").length);
                                for (var c = s.randomIndexList(t.Answers.length, n), l = 0; l < t.Answers.length; ++l) {
                                    var f = "yes" === t["random-answer-order"] ? c[l] : l
                                      , p = r.prepare(t.Answers[f].trim())
                                      , h = i.createLabeledCheckbox(a, p, (function() {
                                        self.readOnly || o.updateState()
                                    }
                                    ), u, "question-" + t.id);
                                    h.find(".bw-button-label").append(e.createCorrectWrongMarker()),
                                    h.attr("value", f).addClass("tmc-row"),
                                    h.toggleClass("tmc-multi-column", "yes" === t["multi-column"])
                                }
                            }
                        }
                        ,
                        m.save = function() {
                            return u(this.getCheckInput(), (function(e) {
                                return e ? 1 : 0
                            }
                            ))
                        }
                        ,
                        m.load = function(e) {
                            this.div.find(".bw-checkbox").each((function(t) {
                                var n = a(this);
                                n.trigger(1 === e[parseInt(n.attr("value"))] ? "check" : "clear")
                            }
                            ))
                        }
                        ,
                        m.clear = function() {
                            this.div.find(".bw-checkbox").trigger("clear")
                        }
                        ,
                        m.setReadOnly = function(e) {
                            -1 === o.getPlatform().indexOf("ipad") && this.div.find(".bw-checkbox").prop("disabled", e)
                        }
                        ,
                        m.prepareCorrection = function(t) {
                            if (this.questionconfig = {
                                Answers: t.Answers,
                                Valid: t.Valid
                            },
                            null != t.Valid) {
                                var n = d(t.Valid).split(" ");
                                this.div.find(".tmc-row").each((function() {
                                    var t = a(this);
                                    l(n, parseInt(t.attr("value")) + 1 + "") && e.setTag(t, "tmc-answer")
                                }
                                ))
                            }
                        }
                        ,
                        m.name = f("Text multiple choice / multiple answers question"),
                        m
                    }
                }
            }
        },
        61700: function(e, t, n) {
            var r = n(45250).each
              , o = n(51958)
              , a = o.questionTableRowQuestion
              , i = o.questionTableRowAnswers
              , s = n(78073)
              , u = n(61743)
              , c = n(58065)
              , l = n(77752)
              , d = n(36565)
              , f = n(78514);
            e.exports = {
                MultiSelectQuestionTable: function(e) {
                    return function(t, n, o, p, h) {
                        var m = e.QuestionTypeBase(t, n, o, p, h);
                        return m.getCheckInput = function() {
                            var e = [];
                            return this.div.find("tr.question").each((function() {
                                var t = [];
                                c(this).find(".bw-simple-checkbox").each((function() {
                                    t.push("checked" === c(this).attr("checked") ? 1 : 0)
                                }
                                )),
                                e.push(t)
                            }
                            )),
                            e
                        }
                        ,
                        m.setCorrection = function(t) {
                            this.div.find("tr.question").each((function(n) {
                                c(this).find(".bw-simple-checkbox").each((function(r) {
                                    var o = c(this).parent().parent();
                                    e.setTagValue(o, "mqt-correct", t && 1 === t.correctness[n][r]),
                                    e.setTagValue(o, "mqt-wrong", t && 0 === t.correctness[n][r])
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        m.renderTypeSpecificPart = function() {
                            var r = this
                              , o = c(document.createElement("div")).addClass("mqt-cover").appendTo(this.div)
                              , u = c(document.createElement("table")).appendTo(o)
                              , l = c(document.createElement("tr")).appendTo(u);
                            c(document.createElement("th")).appendTo(l);
                            var f = function(e) {
                                return r.questionid + "_answer_" + e
                            }
                              , p = function(e) {
                                return r.questionid + "_question_" + e
                            };
                            if (t.columns)
                                for (var h = 0; h < t.columns.length; ++h) {
                                    var m = t.columns[h].trim();
                                    c(document.createElement("th")).safeHtml(s.prepare(m)).attr({
                                        id: f(h),
                                        scope: "column"
                                    }).appendTo(l)
                                }
                            var g = this;
                            if (t.rows)
                                for (var v = 0; v < t.rows.length; ++v) {
                                    var w = c(document.createElement("tr")).addClass("question").appendTo(u);
                                    w.attr("nr", v);
                                    var b = a(t, v);
                                    c(document.createElement("th")).addClass("nocenter").attr({
                                        id: p(v),
                                        scope: "row"
                                    }).safeHtml(s.prepare(b)).appendTo(w);
                                    var y = t.columns ? t.columns : []
                                      , C = void 0;
                                    for ("yes" === t.limited_selection && (C = i(t, v).length),
                                    h = 0; h < y.length; ++h) {
                                        var x = c(document.createElement("td")).appendTo(w)
                                          , E = c(document.createElement("div")).addClass("mqt-wrapper").appendTo(x);
                                        d.createSimpleCheckbox(E, (function() {
                                            c(this).parent().parent().toggleClass("mqt-checked"),
                                            g.readOnly || g.updateState()
                                        }
                                        ), void 0, w, C, "".concat(p(v), " ").concat(f(h))).attr("value", h).attr("name", "qt_" + n + "_" + v),
                                        E.append(e.createCorrectWrongMarker({
                                            elementType: "span"
                                        }))
                                    }
                                }
                        }
                        ,
                        m.save = function() {
                            return this.getCheckInput()
                        }
                        ,
                        m.load = function(e) {
                            this.clear(),
                            this.div.find("tr.question").each((function() {
                                var t = c(this).attr("nr")
                                  , n = e[t]
                                  , r = 0;
                                c(this).find(".bw-simple-checkbox").each((function() {
                                    var e = c(this);
                                    n && r < n.length && 1 === n[r++] ? (e.trigger("check"),
                                    e.parent().parent().addClass("mqt-checked")) : e.trigger("clear")
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        m.setReadOnly = function(e) {
                            -1 == u.getPlatform().indexOf("ipad") && this.div.find(".bw-simple-checkbox").prop("disabled", e)
                        }
                        ,
                        m.clear = function() {
                            this.div.find(".mqt-checked").removeClass("mqt-checked"),
                            this.div.find(".bw-simple-checkbox").trigger("clear")
                        }
                        ,
                        m.prepareCorrection = function(t) {
                            var n, o = t.columns ? t.columns : [], s = [];
                            for (n = 0; n < o.length; ++n)
                                s[o[n].trim()] = !0;
                            var u = this.div.find("tr.question");
                            r(u, (function(r, u) {
                                var d = c(r);
                                i(t, u).forEach((function(r) {
                                    for (s.hasOwnProperty(r) || l.showAlert("'" + r + "' is not a valid answer for question <br><br>" + a(t, u), "Configuration error"),
                                    n = 0; n < o.length; ++n)
                                        o[n].trim() === r && e.setTag(c(d.find("td")[n]), "mqt-answer")
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        m.name = f("Question table with multiple answers"),
                        m
                    }
                }
            }
        },
        25661: function(e, t, n) {
            var r = n(3222).spellCheckAttribs
              , o = n(49161).keyboardAttribs
              , a = n(78073)
              , i = n(58065)
              , s = n(98274)
              , u = n(78514);
            function c(e) {
                return parseInt(1.2 * e + 1)
            }
            e.exports = {
                Numeric: function(e) {
                    return function(t, n, l, d, f) {
                        var p = e.QuestionTypeBase(t, n, l, d, f);
                        return p.getCheckInput = function() {
                            var e = {};
                            return this.div.find(".n-cover .edit").each((function() {
                                var t = i(this)
                                  , n = i(this).attr("part")
                                  , r = t.val();
                                e[n] = r
                            }
                            )),
                            e
                        }
                        ,
                        p.setCorrection = function(t) {
                            var n = this.div.find(".n-cover");
                            e.setTagValue(n, "n-answer", t && 1 === t.correctness),
                            e.setTagValue(n, "n-open", t && -2 === t.correctness)
                        }
                        ,
                        p.renderTypeSpecificPart = function() {
                            var n = i(document.createElement("div")).addClass("n-cover bw-column-container").appendTo(this.div);
                            function a(e, n) {
                                var a = Object.assign({}, r(!1), o(t.keyboard));
                                return a.type = "text",
                                null != t.placeholder && "" !== t.placeholder && (a.placeholer = t.placeholder),
                                a.part = n,
                                a.size = "1",
                                i(document.createElement("input")).attr(a).addClass("edit " + e)
                            }
                            if (n.attr("answer-style", t.answer_style),
                            "Single" === t.answer_style)
                                a("single", "single").appendTo(n);
                            else if ("Fraction" === t.answer_style)
                                i('<table class="fraction"><tr><td class="numeratorcell"></td></tr><tr><td class="denominatorcell"></td></tr></table>').appendTo(n),
                                a("fraction", "numerator").appendTo(n.find(".numeratorcell")),
                                a("fraction", "denominator").appendTo(n.find(".denominatorcell"));
                            else if ("Mixed" === t.answer_style)
                                i('<table class="fraction"><tr><td rowspan="2" class="wholenumbercell"></td><td class="numeratorcell"></td></tr><tr><td class="denominatorcell"></td></tr></table>').appendTo(n),
                                a("fraction", "wholenumber").appendTo(n.find(".wholenumbercell")),
                                a("fraction", "numerator").appendTo(n.find(".numeratorcell")),
                                a("fraction", "denominator").appendTo(n.find(".denominatorcell"));
                            else if ("Exponential" === t.answer_style)
                                i(document.createElement("div")).addClass("exponential").appendTo(n),
                                a("", "base").appendTo(n.find(".exponential")),
                                a("", "exponent").appendTo(n.find(".exponential"));
                            else if ("Matrix" === t.answer_style) {
                                var u = s.getMatrixDimensions(t.matrix);
                                null != u ? function(e, t, n) {
                                    var r = i(document.createElement("table")).attr("matrix-style", "parentheses")
                                      , o = i(document.createElement("tr")).appendTo(r);
                                    i(document.createElement("td")).addClass("matrix-left").appendTo(o);
                                    var a = i(document.createElement("td")).addClass("matrix-body").appendTo(o);
                                    i(document.createElement("td")).addClass("matrix-right").appendTo(o);
                                    for (var s = i(document.createElement("table")).appendTo(a), u = 0; u < e.rows; ++u)
                                        for (var c = i(document.createElement("tr")).appendTo(s), l = 0; l < e.columns; ++l)
                                            i(document.createElement("td")).appendTo(c).append(n(u, l));
                                    return r
                                }(u, 0, (function(e, t) {
                                    return a("", "c_" + e + "_" + t)
                                }
                                )).appendTo(n) : console.log("Invalid matrix definition")
                            } else
                                console.error("Unsupported numeric question answer style: " + t.answer_style);
                            e.createCorrectWrongMarker().addClass("bw-column-fixed bw-centering-container").appendTo(n);
                            var l = d.widgetstorage.createThrottler(this.updateState.bind(this))
                              , f = n.find("input");
                            f.bind("keyup", (function() {
                                i(this).attr("size", c(i(this).val().length)),
                                l.trigger()
                            }
                            )),
                            f.bind("change", (function() {
                                l.trigger()
                            }
                            ))
                        }
                        ,
                        p.save = function() {
                            return this.getCheckInput()
                        }
                        ,
                        p.load = function(e) {
                            this.div.find(".n-cover .edit").each((function() {
                                var t = i(this)
                                  , n = i(this).attr("part");
                                e.hasOwnProperty(n) ? t.val(e[n]) : t.val(""),
                                t.attr("size", c(t.val().length))
                            }
                            ))
                        }
                        ,
                        p.clear = function() {
                            this.div.find(".n-cover .edit").each((function() {
                                var e = i(this);
                                e.val(""),
                                e.attr("size", c(e.val().length))
                            }
                            ))
                        }
                        ,
                        p.createExtraRationale = function(t) {
                            var n, r;
                            if ("Single" === t.answer_style)
                                "" === t.single_number || isNaN(t.single_number) && isNaN(t.single_number.replace(/,/g, ".")) || (n = e.translate("The answer:") + '<br><br><div class="answer">' + t.single_number + (null !== (r = t.unit) && void 0 !== r ? r : ""));
                            else if ("Fraction" === t.answer_style)
                                n = e.translate("The answer:") + '<br><br><div class="answer">' + a.prepare("$$\\frac{" + t.numerator + "}{" + t.denominator + "}$$") + "</div>";
                            else if ("Mixed" === t.answer_style)
                                n = e.translate("The answer:") + '<br><br><div class="answer">' + a.prepare("$$" + t.whole_number + "\\frac{" + t.numerator + "}{" + t.denominator + "}$$") + "</div>";
                            else if ("Exponential" === t.answer_style)
                                n = e.translate("The answer:") + '<br><br><div class="answer">' + a.prepare("$$" + t.base + "^{" + t.exponent + "}$$") + "</div>";
                            else if ("Matrix" === t.answer_style) {
                                var o = s.canonicalMatrix(t);
                                null != o && (n = e.translate("The answer:") + '<br><br><div class="answer">' + a.prepare(o) + "</div>")
                            }
                            return n
                        }
                        ,
                        p.name = u("Numeric answer question"),
                        p
                    }
                }
            }
        },
        4002: function(e, t, n) {
            n(61743);
            var r = n(82065)
              , o = n(58065)
              , a = n(55286)
              , i = n(24846).imageToDataURL
              , s = n(78514);
            n(24507).adaptWidgetLoadPath,
            e.exports = {
                Photo: function(e) {
                    return function(t, n, u, c, l) {
                        var d = e.QuestionTypeBase(t, n, u, c, l);
                        return d.renderTypeSpecificPart = function() {
                            var n = this.div.addClass("photo-cover")
                              , a = o(document.createElement("div")).addClass("photo-place-holder").appendTo(n);
                            a.attr("data-height", t.Height + "px"),
                            a.css("height", t.Height + "px"),
                            a.css("width", Math.round(4 * t.Height / 3) + "px");
                            var i = o(document.createElement("div")).addClass("photo-container").appendTo(a)
                              , s = o(document.createElement("div")).addClass("photo-upload-inner").appendTo(i)
                              , u = o(document.createElement("div")).addClass("photo-place-holder-inner").appendTo(s);
                            if (r.createPictureIcon(u),
                            o(document.createElement("p")).safeHtml(e.translate("Select picture")).appendTo(u),
                            navigator.mediaDevices && "function" == typeof navigator.mediaDevices.getUserMedia) {
                                var c = o(document.createElement("div")).addClass("photo-camera-inner").appendTo(i);
                                u = o(document.createElement("div")).addClass("photo-place-holder-inner").addClass("photo-camera-place-holder-inner").appendTo(c),
                                r.createCameraIcon(u),
                                o(document.createElement("p")).safeHtml(e.translate("Use camera")).appendTo(u)
                            }
                            var l = o(document.createElement("div")).addClass("photo-actual").appendTo(n);
                            l.css("height", t.Height + "px"),
                            l.css("width", Math.round(4 * t.Height / 3) + "px"),
                            this.image = o(document.createElement("img")).attr({
                                src: "",
                                alt: "Can't load image"
                            }).appendTo(l),
                            o(document.createElement("div")).addClass("photo-delete-button").append(o(document.createElement("div")).addClass("bw-icon bw-icon-trash")).appendTo(l),
                            o(document.createElement("input")).attr({
                                type: "file",
                                accept: "image/*"
                            }).addClass("take-picture-field hidden").appendTo(n),
                            r.createPhotoQuestion(this.div, this.updateState.bind(this))
                        }
                        ,
                        d.save = function() {
                            return this.image.is("[data-width]") ? i(this.image.get(0), {
                                detectBlankAnswers: !0,
                                imageType: "image/jpeg",
                                targetJpgSize: 25e4,
                                width: this.image.attr("data-width"),
                                height: this.image.attr("data-height")
                            }) : void 0
                        }
                        ,
                        d.load = function(e) {
                            var t = this;
                            "BLANK" != e ? (this.isLoaded = !1,
                            this.isCleared = !1,
                            a.getImageSize(e, (function(n, r) {
                                !0 !== t.isCleared && (t.image.attr("data-width", n),
                                t.image.attr("data-height", r),
                                t.image.attr("src", e),
                                t.image.load((function() {
                                    t.isLoaded = !0,
                                    t.image.closest(".photo-cover").addClass("photo-set")
                                }
                                )))
                            }
                            ))) : this.clear()
                        }
                        ,
                        d.clear = function() {
                            this.isLoaded = !1,
                            this.isCleared = !0,
                            this.url = "",
                            this.uploaded = !1;
                            var e = this.image.closest(".photo-cover");
                            e.removeClass("photo-set"),
                            e.find(".photo-actual img").attr({
                                src: "",
                                "data-width": null,
                                "data-height": null
                            })
                        }
                        ,
                        d.name = s("Photo question"),
                        d
                    }
                }
            }
        },
        85535: function(e, t, n) {
            var r = n(58065)
              , o = n(16806)
              , a = n(51958)
              , i = a.arrayContains
              , s = a.removeNonNumbers
              , u = n(78514);
            e.exports = {
                PictureMultpleChoice: function(e) {
                    return function(t, n, a, i, s) {
                        var c = e.QuestionTypeBase(t, n, a, i, s);
                        return c.getCheckInput = function() {
                            var e = this.div.find(".selected");
                            return e.length ? e.attr("value") : null
                        }
                        ,
                        c.renderTypeSpecificPart = function() {
                            var n = this
                              , a = this.div.addClass("pmc-cover");
                            if (t.Answers) {
                                for (var i, s, u = function() {
                                    i = t.Answers[c].sources[0].src,
                                    s = r(document.createElement("div")).addClass("pmc-quiz"),
                                    o.create({
                                        img: t.Answers[c],
                                        type: "div",
                                        background: "white",
                                        disable_click: !0,
                                        disable_press: !0
                                    }).appendTo(s),
                                    s.bind("check", (function() {
                                        r(this).addClass("selected").attr({
                                            "aria-checked": "true"
                                        })
                                    }
                                    )),
                                    s.bind("clear", (function() {
                                        r(this).removeClass("selected").attr({
                                            "aria-checked": "false"
                                        })
                                    }
                                    )),
                                    s.trigger("clear"),
                                    s.css({
                                        position: "relative"
                                    }),
                                    e.data(s, "report-name", t.Answers[c].origbase),
                                    s.attr({
                                        value: c + 1,
                                        pic: i
                                    }),
                                    r(document.createElement("div")).addClass("right-picture").appendTo(s),
                                    e.createCorrectWrongMarker({
                                        elementType: "div"
                                    }).addClass("picture-marker").appendTo(s),
                                    s.appendTo(a);
                                    var u = n;
                                    s.makeButton({
                                        role: "radio"
                                    }).clickOrHold((function(e) {
                                        var t;
                                        u.readOnly || (r(t = this).hasClass("selected") ? r(t).trigger("clear") : (r(t.parentNode).find(".pmc-quiz").trigger("clear"),
                                        r(t).trigger("check")),
                                        n.updateState())
                                    }
                                    ), (function() {
                                        r(this).find("[role=img]").trigger("zoom")
                                    }
                                    ), 1e3)
                                }, c = 0; c < t.Answers.length; ++c)
                                    u();
                                (c > 3 || "" != t.img) && a.css({
                                    margin: "auto"
                                })
                            }
                        }
                        ,
                        c.save = function() {
                            var t = this.div.find(".selected");
                            return e.data(t, "report-name")
                        }
                        ,
                        c.load = function(t) {
                            this.div.find(".pmc-quiz").each((function() {
                                var n = r(this);
                                n.trigger(e.data(n, "report-name") === t ? "check" : "clear")
                            }
                            ))
                        }
                        ,
                        c.clear = function() {
                            this.div.find(".pmc-quiz").trigger("clear")
                        }
                        ,
                        c.prepareCorrection = function(t) {
                            var n = this.div.find(".pmc-quiz");
                            n.length >= t.Valid && e.setTag(r(n[t.Valid - 1]), "pmc-answer")
                        }
                        ,
                        c.name = u("Picture Multiple Choice question"),
                        c
                    }
                },
                PictureMultiSelect: function(e) {
                    return function(t, n, a, c, l) {
                        var d = e.QuestionTypeBase(t, n, a, c, l);
                        return d.getCheckInput = function() {
                            var e = [];
                            return this.div.find(".pmc-quiz").each((function(t) {
                                var n = r(this).hasClass("selected");
                                e.push(n)
                            }
                            )),
                            e
                        }
                        ,
                        d.renderTypeSpecificPart = function() {
                            var n = this
                              , a = this.div.addClass("pmc-cover");
                            function u() {
                                return a.find("[role=checkbox].selected").length
                            }
                            var c = "yes" === t.limited_selection ? s(t.Valid || "").split(" ").length : 0;
                            function l() {
                                a.toggleClass("bw-check-limit-reached", c > 0 && u() >= c)
                            }
                            if (t.Answers)
                                for (var f, p, h = function() {
                                    f = t.Answers[m].sources[0].src,
                                    p = r(document.createElement("div")).addClass("pmc-quiz"),
                                    o.create({
                                        img: t.Answers[m],
                                        type: "div",
                                        background: "white",
                                        disable_click: !0,
                                        disable_press: !0
                                    }).appendTo(p),
                                    p.bind("check", (function() {
                                        r(this).addClass("selected").attr({
                                            "aria-checked": "true"
                                        }),
                                        l()
                                    }
                                    )),
                                    p.bind("clear", (function() {
                                        r(this).removeClass("selected").attr({
                                            "aria-checked": "false"
                                        }),
                                        l()
                                    }
                                    )),
                                    p.trigger("clear"),
                                    p.css({
                                        position: "relative"
                                    }),
                                    e.data(p, "report-name", t.Answers[m].origbase),
                                    p.attr({
                                        pic: f
                                    }),
                                    r(document.createElement("div")).addClass("right-picture").appendTo(p),
                                    e.createCorrectWrongMarker({
                                        elementType: "div"
                                    }).addClass("picture-marker").appendTo(p),
                                    p.appendTo(a);
                                    var i = n;
                                    p.makeButton({
                                        role: "checkbox"
                                    }).clickOrHold((function(e) {
                                        if (!i.readOnly) {
                                            if (r(this).hasClass("selected"))
                                                r(this).trigger("clear");
                                            else {
                                                if ("yes" === t.limited_selection && t.Valid && u() >= c)
                                                    return;
                                                r(this).trigger("check")
                                            }
                                            i.updateState()
                                        }
                                    }
                                    ), (function() {
                                        r(this).find("[role=img]").trigger("zoom")
                                    }
                                    ), 1e3)
                                }, m = 0; m < t.Answers.length; ++m)
                                    h();
                            d.save = function() {
                                var t = [];
                                return this.div.find(".selected").each((function() {
                                    t.push(e.data(r(this), "report-name"))
                                }
                                )),
                                t
                            }
                            ,
                            d.load = function(t) {
                                try {
                                    this.div.find(".pmc-quiz").each((function() {
                                        r(this).trigger(-1 != t.indexOf(e.data(r(this), "report-name")) ? "check" : "clear")
                                    }
                                    ))
                                } catch (e) {
                                    console.error("Error loading PictureMultiSelect data")
                                }
                            }
                            ,
                            d.clear = function() {
                                this.div.find(".pmc-quiz").trigger("clear")
                            }
                            ,
                            d.prepareCorrection = function(t) {
                                if (null != t.Valid)
                                    for (var n = s(t.Valid).split(" "), o = this.div.find(".pmc-quiz"), a = 0; a < o.length; ++a)
                                        i(n, 1 + a + "") && e.setTag(r(o[a]), "pmc-answer")
                            }
                        }
                        ,
                        d.name = u("Picture Multi Select question"),
                        d
                    }
                }
            }
        },
        48396: function(e, t, n) {
            var r = n(58065)
              , o = n(98274)
              , a = n(16806)
              , i = n(45027).randomIndexList
              , s = n(78514);
            e.exports = {
                PictureOrdering: function(e) {
                    return function(t, n, u, c, l) {
                        var d = e.QuestionTypeBase(t, n, u, c, l);
                        return d.getCheckInput = function() {
                            var t = [];
                            return this.div.find(".target .target-box").each((function() {
                                var n = r(this).find(".po-pic").get(0);
                                if (n) {
                                    var o = e.data(r(n), "report-name");
                                    t.push(o)
                                } else
                                    t.push(null)
                            }
                            )),
                            t
                        }
                        ,
                        d.setCorrection = function(t) {
                            this.div.find(".target .target-box").each((function(n) {
                                var o = r(this);
                                e.setTagValue(o, "correct", t && 1 === t.correctness[n]),
                                e.setTagValue(o, "wrong", t && 0 === t.correctness[n])
                            }
                            ));
                            var n = this.div.find(".po-cover")
                              , a = !!t && o.allCorrect(t);
                            n.toggleClass("all-wrong", t && !a),
                            n.toggleClass("all-correct", t && a)
                        }
                        ,
                        d.renderTypeSpecificPart = function(n) {
                            var s = this
                              , u = r(document.createElement("div")).addClass("po-cover").appendTo(this.div);
                            e.setTag(u, "all-wrong");
                            var c = r(document.createElement("div")).addClass("display").appendTo(u).get(0)
                              , l = r(document.createElement("div")).addClass("target").appendTo(u).get(0);
                            if (t.Pictures)
                                for (var d = i(t.Pictures.length, n), f = 0; f < d.length; ++f) {
                                    var p = d[f]
                                      , h = t.Pictures[p].sources[0].src
                                      , m = r(document.createElement("div")).addClass("po-quiz");
                                    m.appendTo(c);
                                    var g = r(document.createElement("div")).addClass("po-pic").attr("tabindex", "-1").append(a.create({
                                        img: t.Pictures[p],
                                        type: "div",
                                        disable_press: !0
                                    }));
                                    e.data(g, "report-name", o.pictureId(t.Pictures[p])),
                                    g.attr({
                                        pic: h
                                    }),
                                    e.createCorrectWrongMarker({
                                        elementType: "div"
                                    }).addClass("picture-marker").appendTo(g),
                                    g.appendTo(m);
                                    var v = function(e, t) {
                                        t.childNodes.length && r(t.childNodes[0]).insertBefore(e),
                                        r(e).appendTo(t),
                                        r(e).css({
                                            position: "static"
                                        }),
                                        s.updateState()
                                    };
                                    g.draggable({
                                        scope: this.questionid,
                                        appendTo: u,
                                        start: function(e, t) {},
                                        stop: function(e, t) {
                                            r(this).animate({
                                                top: 0,
                                                left: 0
                                            }, (function() {
                                                r(this).css({
                                                    position: "relative"
                                                })
                                            }
                                            ))
                                        }
                                    }),
                                    m.droppable({
                                        drop: function(e, t) {
                                            v(t.draggable, this)
                                        },
                                        tolerance: "intersect",
                                        scope: this.questionid
                                    }),
                                    r(document.createElement("div")).addClass("target-box").attr("index", p + "").appendTo(l).droppable({
                                        drop: function(e, t) {
                                            v(t.draggable, this)
                                        },
                                        tolerance: "intersect",
                                        scope: this.questionid
                                    })
                                }
                        }
                        ,
                        d.save = function() {
                            var t = [];
                            return this.div.find(".target .target-box").each((function() {
                                var n = r(this).find(".po-pic");
                                n.length ? t.push(e.data(n, "report-name")) : t.push("")
                            }
                            )),
                            t
                        }
                        ,
                        d.load = function(t) {
                            var n = this;
                            this.clear();
                            var o = 0;
                            this.div.find(".target .target-box").each((function(a, i) {
                                "" != t[o] && n.div.find(".display .po-pic").each((function() {
                                    e.data(r(this), "report-name") === t[o] && r(this).appendTo(r(i))
                                }
                                )),
                                ++o
                            }
                            ))
                        }
                        ,
                        d.clear = function() {
                            var t = [];
                            this.div.find(".target .po-pic").each((function() {
                                var n = r(this);
                                e.clearTag(n.parent(), "correct"),
                                e.clearTag(n.parent(), "wrong"),
                                t.push(n)
                            }
                            ));
                            var n = this.div.find(".po-cover");
                            e.clearTag(n, "all-wrong"),
                            e.clearTag(n, "all-correct"),
                            this.div.find(".display .po-quiz").each((function() {
                                var e = r(this);
                                0 === this.childNodes.length && t.length > 0 && t.pop().appendTo(e)
                            }
                            ))
                        }
                        ,
                        d.createExtraRationale = function(t) {
                            for (var n = r(document.createElement("div")).safeHtml(e.translate("The answer:")), o = r(document.createElement("div")).addClass("answer-box").appendTo(n), i = t.Pictures ? t.Pictures : [], s = 0; s < i.length; ++s)
                                a.create({
                                    img: i[s],
                                    background: "white",
                                    type: "div"
                                }).addClass("po-quiz").appendTo(o);
                            return n.html()
                        }
                        ,
                        d.name = s("Picture Ordering question"),
                        d
                    }
                }
            }
        },
        18838: function(e, t, n) {
            var r = n(78073)
              , o = n(61743)
              , a = n(58065)
              , i = n(77752)
              , s = n(36565)
              , u = n(78514)
              , c = n(51958)
              , l = c.questionTableRowQuestion
              , d = c.questionTableRowAnswer;
            e.exports = {
                QuestionTable: function(e) {
                    return function(t, n, c, f, p) {
                        var h = e.QuestionTypeBase(t, n, c, f, p);
                        return h.getCheckInput = function() {
                            var e = [];
                            return this.div.find("tr.question").each((function() {
                                var t = a(this).find("[checked='checked']");
                                if (t.length > 0) {
                                    var n = t.attr("value");
                                    e.push(n)
                                } else
                                    e.push(null)
                            }
                            )),
                            e
                        }
                        ,
                        h.setCorrection = function(t) {
                            for (var n = this.div.find("tr.question"), r = 0; r < n.length; ++r) {
                                var o = a(n[r]);
                                e.setTagValue(o, "qt-correct", t && 1 === t.correctness[r]),
                                e.setTagValue(o, "qt-wrong", t && 0 === t.correctness[r])
                            }
                        }
                        ,
                        h.renderTypeSpecificPart = function() {
                            var o = this
                              , i = a(document.createElement("div")).addClass("qt-cover").appendTo(this.div)
                              , u = a(document.createElement("table")).appendTo(i)
                              , c = a(document.createElement("tr")).appendTo(u);
                            a(document.createElement("th")).appendTo(c);
                            var d = function(e) {
                                return o.questionid + "_answer_" + e
                            }
                              , f = function(e) {
                                return o.questionid + "_question_" + e
                            };
                            if (t.columns)
                                for (var p = 0; p < t.columns.length; ++p) {
                                    var h = t.columns[p].trim();
                                    a(document.createElement("th")).safeHtml(r.prepare(h)).attr({
                                        id: d(p),
                                        scope: "column"
                                    }).appendTo(c)
                                }
                            var m = this;
                            if (t.rows)
                                for (var g = 0; g < t.rows.length; ++g) {
                                    var v = a(document.createElement("tr")).addClass("question").appendTo(u);
                                    v.attr({
                                        nr: g
                                    });
                                    var w = l(t, g);
                                    a(document.createElement("th")).addClass("nocenter").attr({
                                        id: f(g),
                                        scope: "row"
                                    }).safeHtml(r.prepare(w)).appendTo(v);
                                    var b = t.columns ? t.columns : [];
                                    for (p = 0; p < b.length; ++p) {
                                        var y = a(document.createElement("td")).appendTo(v)
                                          , C = s.createSimpleRadiobutton(y, (function() {
                                            if (!m.readOnly) {
                                                var e = a(this)
                                                  , t = a(this.parentNode.parentNode);
                                                t.find(".qt-checked").removeClass("qt-checked"),
                                                t.find(".bw-simple-radiobutton").trigger("clear"),
                                                e.trigger("check"),
                                                e.parent().addClass("qt-checked"),
                                                m.updateState()
                                            }
                                        }
                                        ), void 0, "".concat(f(g), " ").concat(d(p)));
                                        C.attr("value", p).attr("name", "qt_" + n + "_" + g)
                                    }
                                    v.append(e.createCorrectWrongMarker({
                                        elementType: "td"
                                    }))
                                }
                        }
                        ,
                        h.save = function() {
                            var e = {};
                            return this.div.find("tr.question").each((function() {
                                var t = a(this).attr("nr")
                                  , n = a(this).find("[checked='checked']").attr("value");
                                e[t] = n
                            }
                            )),
                            e
                        }
                        ,
                        h.load = function(e) {
                            this.clear(),
                            this.div.find("tr.question").each((function() {
                                var t = a(this).attr("nr")
                                  , n = e[t];
                                if (void 0 !== n && "" !== n) {
                                    var r = a(this).find(".bw-simple-radiobutton[value='" + n + "']");
                                    r.trigger("check"),
                                    r.parent().addClass("qt-checked")
                                }
                            }
                            ))
                        }
                        ,
                        h.setReadOnly = function(e) {
                            -1 == o.getPlatform().indexOf("ipad") && this.div.find(".bw-simple-radiobutton").prop("disabled", e)
                        }
                        ,
                        h.clear = function() {
                            this.div.find(".qt-checked").removeClass("qt-checked"),
                            this.div.find(".bw-simple-radiobutton").trigger("clear")
                        }
                        ,
                        h.prepareCorrection = function(t) {
                            var n, r = t.columns ? t.columns : [], o = [];
                            for (n = 0; n < r.length; ++n)
                                o[r[n].trim()] = !0;
                            for (var s = this.div.find("tr.question"), u = 0; u < s.length; ++u) {
                                var c = a(s[u])
                                  , f = d(t, u);
                                for (null === f || o.hasOwnProperty(f) || i.showAlert("'" + f + "' is not a valid answer for question <br><br>" + l(t, u), "Configuration error"),
                                n = 0; n < r.length; ++n)
                                    r[n].trim() === f && e.setTag(a(c.find("td")[n]), "qt-answer")
                            }
                        }
                        ,
                        h.name = u("Question table"),
                        h
                    }
                }
            }
        },
        72805: function(e, t, n) {
            function r(e) {
                return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                r(e)
            }
            function o(e, t, n) {
                return (t = function(e) {
                    var t = function(e) {
                        if ("object" !== r(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== r(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(e);
                    return "symbol" === r(t) ? t : String(t)
                }(t))in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n,
                e
            }
            var a = n(35606)
              , i = n(58065)
              , s = n(78514)
              , u = n(19863).getHtmlWordCount
              , c = n(81227).Ay;
            e.exports = {
                RichText: function(e) {
                    return function(t, n, r, l, d) {
                        var f = e.QuestionTypeBase(t, n, r, l, d);
                        return f.getCheckInput = function() {
                            var e = this.rteditor.safeHtml();
                            return c(e, {
                                richTextAnswer: !0
                            })
                        }
                        ,
                        f.setNumberOfWords = function(e) {
                            var t = this.div.find(".number-of-words");
                            if (t) {
                                var n = u(e || "");
                                t.text(n)
                            }
                        }
                        ,
                        f.renderTypeSpecificPart = function() {
                            var t = this
                              , n = i(document.createElement("div")).addClass("ml-cover").css("clear", "both").appendTo(this.div);
                            this.rteditor = a.createEditor(this.questionid + "_rteditor", n),
                            this.data.show_word_counter && "yes" === this.data.show_word_counter && (this.rteditor.on("input", (function(e) {
                                f.setNumberOfWords(t.rteditor.safeHtml())
                            }
                            )),
                            i(document.createElement("div")).css(o(o({}, "text-align", "right"), "margin-top", "5px")).safeHtml(s("Words: %d").replace("%d", "<span class='number-of-words'>0</span>")).appendTo(n)),
                            e.addSpellCheckAttrib(this.rteditor),
                            this.lastSavedData = "";
                            var r = l.widgetstorage.createThrottler((function() {
                                var e = t.getCheckInput();
                                t.lastSavedData != e && t.updateState()
                            }
                            ));
                            this.rteditor.on("blur keyup paste input", (function() {
                                r.trigger()
                            }
                            ))
                        }
                        ,
                        f.save = function() {
                            var e = this.getCheckInput();
                            return this.lastSavedData = e,
                            e
                        }
                        ,
                        f.load = function(e) {
                            this.lastSavedData = e,
                            this.rteditor.safeHtml(e),
                            this.setNumberOfWords(e),
                            a.sanitizeEditor(this.rteditor)
                        }
                        ,
                        this.setReadOnly = function(e) {
                            e ? (this.rteditor.parent().find(".btn-toolbar-wrapper").hide(),
                            this.rteditor.attr("contenteditable", "false")) : (this.rteditor.parent().find(".btn-toolbar-wrapper").show(),
                            this.rteditor.attr("contenteditable", "true"))
                        }
                        ,
                        f.clear = function() {
                            this.load("")
                        }
                        ,
                        f.name = s("Rich Text question"),
                        f
                    }
                }
            }
        },
        77533: function(e, t, n) {
            var r = n(17496)
              , o = n(62375)
              , a = n(1309).richTextAsHtml
              , i = n(50466)
              , s = n(78073)
              , u = n(58065)
              , c = n(84966)
              , l = n(78514);
            e.exports = {
                TextDescription: function(e) {
                    return function(t, n, d, f, p) {
                        var h = e.QuestionTypeBase(t, n, d, f, p);
                        return h.getQuestionNumber = function(n) {
                            return "yes" === r.getConfigSync().info_numbering ? e.getNumbering(t, n) : ""
                        }
                        ,
                        h.getQuestionHtml = function() {
                            return a(t.Title)
                        }
                        ,
                        h.getTitleClass = function() {
                            return "textdescriptiontitle"
                        }
                        ,
                        h.renderTypeSpecificPart = function() {
                            var e = u(document.createElement("div")).addClass("textdescription").safeHtml(s.prepare(a(t.Text))).appendTo(this.div);
                            i.processAudioTags(e),
                            c.resolveYoutubePlaceholders(e),
                            o.process(e)
                        }
                        ,
                        h.name = l("Text"),
                        h
                    }
                }
            }
        },
        31375: function(e, t, n) {
            var r = n(98854)
              , o = n(58065)
              , a = n(78514);
            e.exports = {
                Whiteboard: function(e) {
                    return function(t, n, i, s, u) {
                        var c = r.bindToContext(s)
                          , l = e.QuestionTypeBase(t, n, i, s, u);
                        return l.renderTypeSpecificPart = function() {
                            var e = this
                              , n = this.questionid + "_content"
                              , r = this.div.addClass("w-cover").attr("id", n)
                              , a = o(document.createElement("div")).addClass("w-toolbar-wrapper").appendTo(r)
                              , i = o(document.createElement("div")).addClass("bw-toolbar maintoolbar").appendTo(a);
                            i.addClass("black" == t.button_color ? "white" : "black");
                            var s = o(document.createElement("div")).addClass("bw-toolbar hidden phototoolbar").appendTo(a);
                            function u(e, t) {
                                o(document.createElement("div")).attr("id", e).addClass("bw-button-group").appendTo(t)
                            }
                            s.addClass("black" == t.button_color ? "white" : "black"),
                            u("buttons-container", i),
                            u("width-buttons-container", i),
                            u("colors-container", i),
                            u("tool-buttons-container", i),
                            u("photo-buttons-container", s);
                            var l = o(document.createElement("div")).attr("id", "drawingareawrapper").appendTo(r)
                              , d = o(document.createElement("div")).attr("id", "drawingarea").appendTo(l);
                            o(document.createElement("input")).attr({
                                type: "class",
                                id: "textedit",
                                size: "50"
                            }).appendTo(l),
                            o(document.createElement("input")).attr({
                                type: "file",
                                accept: "image/*"
                            }).addClass("take-picture-field hidden").appendTo(r);
                            var f = o(document.createElement("div")).addClass("photo-placer hidden").appendTo(l)
                              , p = Math.round(4 * (t.Height - 100) / 3)
                              , h = t.Height - 100;
                            f.css("height", h + "px"),
                            f.css("width", p + "px"),
                            f.attr("data-start-height", h),
                            f.attr("data-start-width", p),
                            c.addWidthButtons("#" + n + " #width-buttons-container", !0),
                            c.addColorButtons("#" + n + " #colors-container", !0),
                            c.addClearUndoRedoButtons("#" + n + " #buttons-container"),
                            c.addZoomButtons("#" + n + " #buttons-container", "yes" === t.enable_pan),
                            c.addDrawToolButtons("#" + n + " #buttons-container", "yes" === t.enable_photo, "yes" === t.enable_pan, !0, t.stickers && t.stickers.length > 0),
                            c.addPhotoEditingButtons("#" + n + " #photo-buttons-container"),
                            this.whiteboard = c.createWhiteboard({
                                topselector: "#" + n,
                                canvasselector: " #drawingarea",
                                createCanvas: !0,
                                width: d.width(),
                                height: t.Height,
                                background_image: t.img,
                                background_resize_policy: t["resize-policy"],
                                image_on_top: "yes" === t.image_on_top,
                                maintoolbar: ".maintoolbar",
                                phototoolbar: ".phototoolbar",
                                enablephoto: "yes" === t.enable_photo,
                                colorsaspopup: "bottom",
                                widthaspopup: "bottom",
                                toolsaspopup: "bottom",
                                allow_pan: "yes" === t.enable_pan,
                                allow_zoom: "yes" === t.enable_pan,
                                stickers: t.stickers
                            }),
                            d.find("canvas").css("height", t.Height),
                            setTimeout((function() {
                                e.div.closest(".content").find("img").on("load", (function() {
                                    e.repaint(!0)
                                }
                                )).each((function() {
                                    this.complete && (window.jQuery.fn.jquery > "3" ? o(this).trigger("load") : o(this).load())
                                }
                                ))
                            }
                            ), 10),
                            this.whiteboard.onChange(this.updateState.bind(this))
                        }
                        ,
                        l.repaint = l.onResize = function(e) {
                            var t = this.div.find("#drawingarea");
                            this.div.find("canvas").attr("width", t.width()),
                            this.whiteboard.redrawOnResize(e)
                        }
                        ,
                        l.save = function() {
                            return this.whiteboard.saveData()
                        }
                        ,
                        l.load = function(e) {
                            var t = this;
                            this.isLoaded = !1,
                            this.whiteboard.loadData(e, (function() {
                                t.isLoaded = !0
                            }
                            ))
                        }
                        ,
                        l.setReadOnly = function(e) {
                            this.whiteboard.setReadOnly(e)
                        }
                        ,
                        l.clear = function() {
                            return this.whiteboard.clearPage()
                        }
                        ,
                        l.name = a("Whiteboard question"),
                        l
                    }
                }
            }
        },
        86832: function(e, t, n) {
            var r = n(6322)
              , o = r.isRTL
              , a = r.isUseMixedTextDirection
              , i = n(17496)
              , s = n(78073)
              , u = n(58065)
              , c = n(98274)
              , l = n(78514);
            e.exports = {
                WordOrdering: function(e) {
                    return function(t, n, r, d, f) {
                        var p = e.QuestionTypeBase(t, n, r, d, f);
                        return p.getData = function() {
                            var e = [];
                            return this.div.find(".ms-cover .words .wordwrapper").each((function() {
                                e.push(u(this).attr("word"))
                            }
                            )),
                            e
                        }
                        ,
                        p.getCheckInput = function() {
                            return this.answered ? this.getData() : null
                        }
                        ,
                        p.setCorrection = function(n) {
                            "each" === t.policy ? (this.div.find(".wordwrapper").each((function(t) {
                                var r = u(this);
                                e.setTagValue(r, "ms-correctword", n && 1 === n.correctness[t])
                            }
                            )),
                            e.setTagValue(this.div.find(".ms-cover"), "ms-answer", n && c.arrayCount(n.correctness, 1) === n.correctness.length)) : e.setTagValue(this.div.find(".ms-cover"), "ms-answer", n && 1 === n.correctness)
                        }
                        ,
                        p.renderTypeSpecificPart = function() {
                            var n = i.getConfigSync();
                            this.div.attr("policy", t.policy);
                            var r = u(document.createElement("div")).addClass("ms-cover").appendTo(this.div)
                              , c = u(document.createElement("div")).addClass("words").toggleClass("sentence", "Sentences" === t.order_type).appendTo(r)
                              , l = [];
                            if (t.Words)
                                for (var d = 0; d < t.Words.length; ++d)
                                    l.push({
                                        word: t.Words[d],
                                        pos: d
                                    });
                            var f = this;
                            for (d = 0; d < l.length; ++d)
                                u(document.createElement("div")).addClass("wordwrapper").safeHtml(s.prepare(l[d].word)).attr("word", l[d].word).appendTo(c).draggable({
                                    scope: this.questionid,
                                    helper: "clone",
                                    start: function(t, n) {
                                        e.blurFocused();
                                        var r = u(t.target || t.srcElement);
                                        r.addClass("drag_placeholder"),
                                        this.clone = r.clone().insertAfter(r),
                                        r.hide()
                                    },
                                    drag: function(e, r) {
                                        if (f.answered = !0,
                                        "Sentences" != t.order_type) {
                                            var i = this.clone[0];
                                            (g = r.helper.offset()).right = g.left + u(i).width();
                                            var s = null
                                              , c = "right-to-left" === n.direction || l.length > 0 && a(n.direction) && o(l[0])
                                              , d = !1;
                                            if (f.div.find(".ms-cover .words .wordwrapper").each((function() {
                                                if (!u(this).hasClass("ui-draggable-dragging") && !d) {
                                                    this != i && (s = this);
                                                    var e = u(this).offset();
                                                    if (e.right = e.left + u(this).width(),
                                                    e.bottom = e.top + u(this).height(),
                                                    e.top < g.top + 10 && g.top - 10 < e.bottom) {
                                                        var t = (g.left + g.right) / 2
                                                          , n = (e.left + e.right) / 2;
                                                        if (t < n && t > e.left - 20) {
                                                            if (d = !0,
                                                            this != i)
                                                                try {
                                                                    return u(i).detach(),
                                                                    void (c ? u(i).insertAfter(this) : u(i).insertBefore(this))
                                                                } catch (e) {}
                                                        } else if (t > n && t < e.right + 20 && (d = !0,
                                                        this != i))
                                                            try {
                                                                return u(i).detach(),
                                                                void (c ? u(i).insertBefore(this) : u(i).insertAfter(this))
                                                            } catch (e) {}
                                                    }
                                                }
                                            }
                                            )),
                                            !d & null != s) {
                                                var p = u(s).offset();
                                                p.right = p.left + u(s).width(),
                                                p.bottom = p.top + u(s).height();
                                                var h = p.top < g.top + 10 && g.top - 10 < p.bottom
                                                  , m = c ? g.right <= p.left : g.left >= p.right;
                                                if (h && m)
                                                    try {
                                                        s != i && (u(i).detach(),
                                                        u(i).insertAfter(s))
                                                    } catch (e) {}
                                            }
                                        } else {
                                            var g = r.helper.offset()
                                              , v = (s = null,
                                            i = this.clone[0],
                                            d = !1,
                                            !1);
                                            f.div.find(".ms-cover .words .wordwrapper").each((function() {
                                                if (!d && !u(this).hasClass("ui-draggable-dragging")) {
                                                    var e = u(this).offset();
                                                    if (g.top < e.top) {
                                                        if (d = !0,
                                                        u(this).hasClass("drag_placeholder"))
                                                            return;
                                                        u(i).detach(),
                                                        u(i).insertBefore(this)
                                                    }
                                                    u(this).hasClass("drag_placeholder") ? v = !0 : (s = this,
                                                    v = !1)
                                                }
                                            }
                                            )),
                                            !1 === d && !1 === v && (u(i).detach(),
                                            u(i).insertAfter(s))
                                        }
                                    },
                                    stop: function(e, t) {
                                        var n = u(this);
                                        this.clone.replaceWith(n),
                                        n.show().removeClass("drag_placeholder").animate({
                                            top: 0,
                                            left: 0
                                        }, (function() {
                                            f.updateState()
                                        }
                                        ))
                                    }
                                });
                            e.createCorrectWrongMarker().appendTo(c)
                        }
                        ,
                        p.save = function() {
                            return this.getCheckInput()
                        }
                        ,
                        p.load = function(e) {
                            e.length > 0 && (this.answered = !0);
                            var t = [];
                            this.div.find(".ms-cover .words .wordwrapper").each((function() {
                                t.push(u(this).detach())
                            }
                            ));
                            for (var n = this.div.find(".ms-cover .words .cr-marker"), r = 0; r < e.length; ++r)
                                for (var o = 0; o < t.length; ++o)
                                    if (t[o].attr("word") == e[r]) {
                                        t[o].insertBefore(n),
                                        t.splice(o, 1);
                                        break
                                    }
                            for (o = 0; o < t.length; ++o)
                                t[o].insertBefore(n)
                        }
                        ,
                        p.setReadOnly = function(e) {
                            this.div.find(".wordwrapper").draggable(e ? "disable" : "enable")
                        }
                        ,
                        p.clear = function() {
                            this.answered = !1;
                            var e = [];
                            this.div.find(".ms-cover .words .wordwrapper").each((function() {
                                e.push(u(this).detach())
                            }
                            ));
                            for (var n = t, r = this.div.find(".ms-cover .words .cr-marker"), o = 0; o < (n.Words || []).length; ++o)
                                for (var a = 0; a < e.length; ++a)
                                    if (e[a].attr("word") == n.Words[o]) {
                                        e[a].insertBefore(r),
                                        e.splice(a, 1);
                                        break
                                    }
                        }
                        ,
                        p.createExtraRationale = function(t) {
                            var n = "Sentences" === t.order_type ? "<br>" : " "
                              , r = (t.Words ? t.Words : []).join(n);
                            return e.translate("The answer:") + '<br><br><div class="answer the-answer-text">' + s.prepare(r) + "</div>"
                        }
                        ,
                        p.name = l("Word Ordering question"),
                        p
                    }
                }
            }
        },
        9735: function(e, t, n) {
            var r = n(77533)
              , o = n(90647)
              , a = n(69943)
              , i = n(18838)
              , s = n(61700)
              , u = n(85535)
              , c = n(16117)
              , l = n(72805)
              , d = n(68217)
              , f = n(13709)
              , p = n(20117)
              , h = n(48232)
              , m = n(33796)
              , g = n(49201).A
              , v = n(48396)
              , w = n(86832)
              , b = n(98159)
              , y = n(5931)
              , C = n(31375)
              , x = n(4002)
              , E = n(25661)
              , k = n(39340)
              , S = n(6378)
              , T = n(75730)
              , _ = n(33676)
              , A = n(50907)
              , O = n(35457)
              , D = n(64193)
              , I = n(54389)
              , P = n(11600).A
              , R = n(60254).A;
            e.exports = {
                TextDescription: ["qt_textdescription", r],
                TextMultpleChoice: ["qt_multiplechoice", o],
                RatedMultipleChoice: ["qt_multiplechoice", o],
                TextMultiSelect: ["qt_multiselect", a],
                QuestionTable: ["qt_questiontable", i],
                MultiSelectQuestionTable: ["qt_multiselect_questiontable", s],
                PictureMultpleChoice: ["qt_picturemultiplechoice", u],
                PictureMultiSelect: ["qt_picturemultiplechoice", u],
                MultiLine: ["qt_multiline", c],
                RichText: ["qt_richtext", l],
                ExtraMultiLine: ["qt_extramultiline", d],
                ExtraCheckbox: ["qt_extracheckbox", f],
                FillInText: ["qt_fillintext", p],
                FillInTable: ["qt_fillintable", h],
                AnnotatePicture: ["qt_annotatepicture", m],
                SingleLine: ["qt_singleline", g, "react"],
                PictureOrdering: ["qt_pictureordering", v],
                WordOrdering: ["qt_wordordering", w],
                WordMatch: ["qt_match", b],
                WordPictureMatch: ["qt_match", b],
                PicturePictureMatch: ["qt_match", b],
                AudioWordMatch: ["qt_match", b],
                AudioPictureMatch: ["qt_match", b],
                TextDragDrop: ["qt_dragdrop", y],
                PictureDragDrop: ["qt_dragdrop", y],
                Whiteboard: ["qt_whiteboard", C],
                Photo: ["qt_photo", x],
                Numeric: ["qt_numeric", E],
                BalanceChemicalEquation: ["qt_balancechemicalequation", k],
                IonicCompoundBuilder: ["qt_ioniccompoundbuilder", S],
                CorrectSentence: ["qt_correct_sentence", T],
                MarkSentence: ["qt_marksentence", _],
                DragWordsInSentence: ["qt_dragwordsinsentence", A],
                Group: ["qt_group", O],
                AudioRecording: ["qt_audiorecording", D],
                Equations: ["qt_equations", I],
                CrossWord: ["qt_crossword", P, "react"],
                Rubric: ["qt_rubric", R, "react"]
            }
        },
        62375: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                process: function() {
                    return h
                }
            });
            var r = n(55286)
              , o = n(94292)
              , a = n(58065)
              , i = n.n(a)
              , s = n(69049)
              , u = n(84966)
              , c = n(78514)
              , l = n.n(c)
              , d = n(94292)
              , f = d.openWidget
              , p = d.addLinkIcon;
            function h(e) {
                e.addClass("bw-richtext"),
                r.processRichTextImages(e),
                function(e) {
                    e.find("a.rtlink").each((function() {
                        var e = i()(this);
                        e.find("span").css({
                            "text-decoration": "",
                            color: ""
                        });
                        var t = e.attr("target");
                        !1 !== t && void 0 !== t || e.attr("target", "_top")
                    }
                    ))
                }(e),
                (0,
                o.processRichTextWidgetPlayLinks)(e, !0),
                function(e) {
                    e.find("video").each((function() {
                        (0,
                        u.adjustRichTextVideoSize)(i()(this))
                    }
                    ))
                }(e),
                function(e) {
                    e.find(".iframeplaceholder").each((function() {
                        var e = i()(this)
                          , t = e.attr("src");
                        e.replaceWith(i()(document.createElement("iframe")).addClass("rt-iframe").attr("src", t))
                    }
                    ))
                }(e),
                (0,
                s.processEmbeddedIframes)(e.find(".rt-iframe")),
                function(e) {
                    e.find("table").addClass("bw-richtext-table").each((function() {
                        var e = this.parentNode
                          , t = document.createElement("div");
                        t.style.overflowX = "scroll",
                        e.insertBefore(t, this),
                        t.appendChild(this)
                    }
                    ))
                }(e),
                function(e) {
                    e.find(".medium-insert-widgets > figure span[data-href]").replaceWith((function() {
                        var e = i()(this)
                          , t = i()(this).closest("figure").find("figcaption").text()
                          , n = e.attr("data-href");
                        return function(e, t, n) {
                            var r = i()(document.createElement("div")).makeLink().attr("aria-label", l()("Widget link") + ": " + t).attr("widget", n).addClass(e.attr("class")).tapOrClick((function(e) {
                                return f(n + "?noiframe=1", !0, e),
                                !1
                            }
                            )).safeHtml(e.html());
                            return p(r),
                            r
                        }(e, t, n).addClass("widgetlink")
                    }
                    ))
                }(e)
            }
        },
        46795: function(e, t, n) {
            var r = n(45250).compact
              , o = function(e, t, n, o, a) {
                var i = e.bindToContext(a);
                return {
                    create: function(e, n) {
                        var a = o(e);
                        n = n || {};
                        var s = a.attr("id")
                          , u = a.find(" .scratchboard");
                        i.addWidthButtons("#" + s + " .scratchpad-width-buttons-container", !0),
                        i.addColorButtons("#" + s + " .scratchpad-colors-container", !0),
                        i.addDrawToolButtons("#" + s + " .scratchpad-draw-tools-container", n.enable_photo, n.enable_pan),
                        i.addClearUndoRedoButtons("#" + s + " .scratchpad-undo-redo-container"),
                        n.enable_photo && i.addPhotoEditingButtons("#" + s + " #photo-buttons-container");
                        var c = i.createWhiteboard({
                            topselector: "#" + a.attr("id"),
                            canvasselector: " .scratchboard",
                            createCanvas: !0,
                            width: u.width(),
                            height: u.height(),
                            transparentbackground: !0,
                            colorsaspopup: "top",
                            widthaspopup: "top",
                            enablephoto: n.enable_photo,
                            maintoolbar: ".maintoolbar",
                            phototoolbar: ".phototoolbar"
                        })
                          , l = n.lines || "none"
                          , d = a.css("stroke") || "lightgray";
                        function f(e, t, n, r, o) {
                            if ("lines" === l || "grid" === l) {
                                var a = "lines" === l ? 30 : 20;
                                e.beginPath(),
                                e.strokeWidth = 0,
                                e.strokeStyle = d;
                                for (var i = a * Math.ceil(n / a); i < o; i += a)
                                    e.moveTo(t, i),
                                    e.lineTo(r, i);
                                if ("grid" === l)
                                    for (var s = a * Math.ceil(t / a); s < r; s += a)
                                        e.moveTo(s, n),
                                        e.lineTo(s, o);
                                e.stroke()
                            }
                        }
                        function p() {
                            var e = a.find(".scratchboardwrapper")
                              , t = a.find(".scratchboardgrid")
                              , n = t[0].getContext("2d");
                            t[0].width = e.width(),
                            t[0].height = e.height(),
                            n.clearRect(0, 0, e.width(), e.height()),
                            f(n, 0, 0, e.width(), e.height())
                        }
                        p();
                        var h = []
                          , m = 0
                          , g = a.find(".scratchpad-prev");
                        g.hide();
                        var v = a.find(".scratchpad-next");
                        function w(e) {
                            var t = a.find(".overlay")
                              , n = a.find(".scratchboard")
                              , r = o(document.createElement("canvas")).appendTo(t);
                            t.css({
                                width: n.width(),
                                height: n.height(),
                                position: "absolute",
                                background: a.css("background"),
                                top: "0px",
                                left: "0px"
                            }),
                            r[0].width = n.width(),
                            r[0].height = n.height();
                            var i = r[0].getContext("2d");
                            i.clearRect(0, 0, n.width(), n.height()),
                            f(i, 0, 0, n.width(), n.height()),
                            i.drawImage(c.canvas, 0, 0);
                            var s = "left" === e ? "100%" : "-100%";
                            n.css({
                                position: "relative",
                                left: s
                            });
                            var u = "left" === e ? "-100%" : "100%";
                            t.animate({
                                left: u
                            }, 400, (function() {
                                t.safeHtml("")
                            }
                            )),
                            n.animate({
                                left: "0%"
                            }, 400)
                        }
                        return v.hide(),
                        g.tapOrClick((function() {
                            --m,
                            v.show(),
                            0 === m && g.hide(),
                            w("right"),
                            c.loadData(h[m])
                        }
                        )),
                        v.tapOrClick((function() {
                            ++m,
                            g.show(),
                            w("left"),
                            h.length === m ? (v.hide(),
                            c.loadData("")) : c.loadData(h[m])
                        }
                        )),
                        c.onChange((function() {
                            h[m] = c.saveData(),
                            v.show(),
                            a.trigger("change")
                        }
                        )),
                        {
                            id: s,
                            div: a,
                            whiteboard: c,
                            load: function(e) {
                                try {
                                    m = 0,
                                    (h = JSON.parse(e)).length > m && (c.loadData(h[m]),
                                    v.show())
                                } catch (t) {
                                    console.log("Error loading scatchpad"),
                                    console.log(e["scratchpad.pages"]),
                                    console.log(t)
                                }
                            },
                            pageCount: function() {
                                return h.length
                            },
                            pageImgData: function(e) {
                                try {
                                    if (e >= h.length)
                                        return console.log("Error: getPageImgData requested for invalid page" + e),
                                        null;
                                    m !== e && c.loadData(h[e]);
                                    var t = c.imgData("WWB");
                                    return m !== e && c.loadData(h[m]),
                                    t
                                } catch (t) {
                                    return console.log("Error: getPageImgData Could not read image data for page " + e),
                                    console.log(t),
                                    null
                                }
                            },
                            notes: function() {
                                for (var e = [], n = 0; n < h.length; ++n)
                                    e.push(t.transformToRgbColors(h[n]));
                                return e
                            },
                            onResize: function() {
                                p();
                                var e = a.find(".scratchboard")
                                  , t = a.find(".scratchboard canvas")[0];
                                t.width = e.width(),
                                t.height = e.height(),
                                c.redraw()
                            },
                            save: function() {
                                return JSON.stringify(r(h))
                            },
                            clear: function() {
                                h = [],
                                m = 0,
                                c.loadData(""),
                                v.hide(),
                                g.hide(),
                                a.trigger("change")
                            }
                        }
                    }
                }
            }
            .bind(null, n(98854), n(69713), n(17280), n(58065));
            e.exports = {
                bindToContext: o
            }
        },
        51131: function(e) {
            e.exports = window.canvasResize
        },
        41222: function(e) {
            e.exports = window.Hammer
        },
        85685: function(e) {
            e.exports = window.$
        },
        23558: function(e) {
            e.exports = window.jsPlumb
        },
        3222: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                spellCheckAttribString: function() {
                    return l
                },
                spellCheckAttribs: function() {
                    return c
                }
            });
            var r = n(24015)
              , o = n.n(r)
              , a = n(40105)
              , i = n.n(a)
              , s = {
                spellcheck: "true",
                autocomplete: "new-password",
                autocapitalize: "none"
            }
              , u = {
                spellcheck: "false",
                autocorrect: "off",
                autocomplete: "new-password",
                autocapitalize: "none"
            };
            function c(e) {
                return o()({
                    name: Date.now() + Math.random()
                }, e ? s : u)
            }
            function l(e) {
                var t = c(e);
                return i()(t, (function(e, t) {
                    return t + '="' + e + '"'
                }
                )).join(" ")
            }
        },
        5400: function(e, t, n) {
            var r, o, a, i;
            e.exports = (r = n(69050),
            o = n(49632).A,
            a = n(26598),
            i = a.createLogger("AsyncKeyStoreToBWDSAdapter"),
            function(e) {
                var t = {};
                function n(e, n) {
                    t.queue.executeSequential((function(t) {
                        try {
                            e(t)
                        } catch (e) {
                            console.error("AsyncBWDS: Uncaught error: " + e),
                            r.handleException(e, n, t)
                        }
                    }
                    ))
                }
                return t.async = e,
                t.queue = r.newCallbackQueue(),
                t.readNoSync = function(e, n, r) {
                    i.debug("readNoSync " + e),
                    t.async.getItemsAsync([e], (function(r) {
                        if (r.hasOwnProperty(e)) {
                            var o = JSON.parse(r[e].attribs);
                            !1 === o.removed ? n(r[e].value, t.fileStat(e, o)) : n(null, t.fileStat(e, o))
                        } else
                            n(null, null)
                    }
                    ), (function(e) {
                        r(e)
                    }
                    ))
                }
                ,
                t.read = function(e, a) {
                    n((function(n) {
                        t.readNoSync(e, (function(e, t) {
                            null == e ? r.callSafe(a, r.error(o.BWDS_ERROR_UNKNOWN, "AsyncBWDS Error: no such file"), null, t) : r.callSafe(a, null, e, t),
                            n()
                        }
                        ), (function(e) {
                            r.handleException(e, a, n)
                        }
                        ))
                    }
                    ), a)
                }
                ,
                t.writeNoSync = function(e, n, o, a) {
                    i.debug("writeNoSync " + e + " " + n);
                    var s = null == n ? 0 : n.length;
                    t.async.getItemsAsync([e], (function(i) {
                        var u, c = r.getDateTime();
                        i.hasOwnProperty(e) ? ((u = JSON.parse(i[e].attribs)).updated_at = c,
                        u.filesize = s,
                        u.isdir = null == n,
                        u.removed = !1,
                        u.version = u.version + 1,
                        u.offline = !1) : u = {
                            created_at: c,
                            updated_at: c,
                            filesize: s,
                            isdir: null == n,
                            removed: !1,
                            version: 1,
                            backup_version: 0,
                            backup_date: null,
                            offline: !1
                        },
                        t.async.setItemsAsync([{
                            key: e,
                            value: null == n ? "" : n,
                            attribs: JSON.stringify(u)
                        }], (function(n) {
                            if ("" != e) {
                                var r = e.lastIndexOf("/")
                                  , i = "";
                                -1 != r && (i = e.substring(0, r)),
                                t.writeNoSync(i, null, o, a)
                            } else
                                o(t.fileStat(e, u))
                        }
                        ), (function(e) {
                            a(e)
                        }
                        ))
                    }
                    ), (function(e) {
                        a(e)
                    }
                    ))
                }
                ,
                t.write = function(e, o, a) {
                    n((function(n) {
                        t.writeNoSync(e, null == o ? "" : o, (function(e) {
                            r.callSafe(a, null, e),
                            n()
                        }
                        ), (function(e) {
                            r.handleException(e, a, n)
                        }
                        ))
                    }
                    ), a)
                }
                ,
                t.removeFiles = function(e, n, o) {
                    if (0 == e.length)
                        null != n && n();
                    else {
                        var a = e.shift()
                          , s = a.attribs
                          , u = r.getDateTime();
                        s.removed = !0,
                        s.offline = !1,
                        s.updated_at = u,
                        t.async.setItemsAsync([{
                            key: a.name,
                            value: "",
                            attribs: JSON.stringify(s)
                        }], (function() {
                            t.removeFiles(e, (function() {
                                n(s)
                            }
                            ), o)
                        }
                        ), (function() {
                            i.error("removeFiles, could not write new file attribs to clear, removing including attribs"),
                            t.async.removeItemsAsync([a.name], (function() {
                                t.removeFiles(e, (function() {
                                    n(s)
                                }
                                ), o)
                            }
                            ), o)
                        }
                        ))
                    }
                }
                ,
                t.removeRecurse = function(e, n, r) {
                    if (0 == e.length)
                        null != n && n();
                    else {
                        var o = e.shift();
                        t.async.getDirAttribs(o, (function(o) {
                            var a = [];
                            for (var i in o) {
                                var s = JSON.parse(o[i]);
                                !1 === s.removed && (!0 === s.isdir && e.push(i),
                                a.push({
                                    name: i,
                                    attribs: s
                                }))
                            }
                            t.removeFiles(a, (function() {
                                t.removeRecurse(e, n, r)
                            }
                            ), r)
                        }
                        ), r)
                    }
                }
                ,
                t.removeNoSync = function(e, n, a) {
                    i.debug("removeNoSync " + e),
                    "" == e ? t.removeRecurse([e], n, (function(e) {
                        r.handleException(e, a)
                    }
                    )) : t.async.getItemsAsync([e], (function(i) {
                        if (i.hasOwnProperty(e)) {
                            var s = JSON.parse(i[e].attribs);
                            !1 === s.removed ? s.isdir ? t.removeFiles([{
                                name: e,
                                attribs: s
                            }], (function() {
                                t.removeRecurse([e], n, (function(e) {
                                    r.handleException(e, a)
                                }
                                ))
                            }
                            ), (function(e) {
                                r.handleException(e, a)
                            }
                            )) : t.removeFiles([{
                                name: e,
                                attribs: s
                            }], (function(r) {
                                n(t.fileStat(e, r))
                            }
                            ), (function(e) {
                                r.handleException(e, a)
                            }
                            )) : a(r.error(o.BWDS_ERROR_UNKNOWN, "AsyncBWDS Error: no such file"))
                        } else
                            a(r.error(o.BWDS_ERROR_UNKNOWN, "AsyncBWDS Error: no such file"))
                    }
                    ), (function(e) {
                        r.handleException(e, a)
                    }
                    ))
                }
                ,
                t.remove = function(e, o) {
                    n((function(n) {
                        t.removeNoSync(e, (function() {
                            r.callSafe(o, null),
                            n()
                        }
                        ), (function(e) {
                            r.callSafe(o, e),
                            n()
                        }
                        ))
                    }
                    ), o)
                }
                ,
                t.dirNoSync = function(e, n, o) {
                    i.debug("dirNoSync " + e),
                    t.async.getDirAttribs(e, (function(t) {
                        var o = [];
                        for (var a in t)
                            !1 === JSON.parse(t[a]).removed && "" != a && o.push(r.trimLeadingSlash(a.substr(e.length)));
                        o.length > 0 ? n(o) : n(null)
                    }
                    ), (function(e) {
                        o(e)
                    }
                    ))
                }
                ,
                t.dir = function(e, a) {
                    n((function(n) {
                        t.dirNoSync(e, (function(t) {
                            null !== t ? r.callSafe(a, null, t) : "" === e ? r.callSafe(a, null, []) : r.callSafe(a, r.error(o.BWDS_ERROR_UNKNOWN, "AsyncBWDS Error: no such file")),
                            n()
                        }
                        ), (function(e) {
                            r.handleException(e, a, n)
                        }
                        ))
                    }
                    ), a)
                }
                ,
                t.fileStat = function(e, t) {
                    return {
                        name: e,
                        size: t.filesize,
                        created: t.created_at,
                        modified: t.updated_at,
                        isdir: t.isdir,
                        removed: t.removed,
                        version: t.version,
                        backup_version: t.backup_version,
                        backup_date: t.hasOwnProperty("backup_date") ? t.backup_date : null,
                        offline: !!t.hasOwnProperty("offline") && t.offline
                    }
                }
                ,
                t.dirStat = function(e, n, r, o) {
                    i.debug("dirNoSync " + e),
                    t.async.getDirAttribs(e, (function(e) {
                        var o = [];
                        for (var a in e)
                            "" !== a && o.push(t.fileStat(a, JSON.parse(e[a])));
                        r(n, o)
                    }
                    ), (function(e) {
                        o(e)
                    }
                    ))
                }
                ,
                t.statNoSync = function(e, n, r) {
                    i.debug("statNoSync " + e),
                    t.async.getItemsAsync([e], (function(o) {
                        if (o.hasOwnProperty(e)) {
                            var a = JSON.parse(o[e].attribs)
                              , i = t.fileStat(e, a);
                            a.isdir ? t.dirStat(e, i, n, r) : n(i)
                        } else
                            n(null)
                    }
                    ), (function(e) {
                        r(e)
                    }
                    ))
                }
                ,
                t.stat = function(e, a) {
                    n((function(n) {
                        t.statNoSync(e, (function(e, t) {
                            null !== e ? void 0 === t ? r.callSafe(a, null, e) : r.callSafe(a, null, e, t) : r.callSafe(a, r.error(o.BWDS_ERROR_UNKNOWN, "AsyncBWDS Error: no such file")),
                            n()
                        }
                        ), (function(e) {
                            r.handleException(e, a, n)
                        }
                        ))
                    }
                    ), a)
                }
                ,
                t.setStatNoSync = function(e, n, a, s) {
                    i.debug("setStatNoSync " + e),
                    t.async.getItemsAsync([e], (function(i) {
                        if (i.hasOwnProperty(e)) {
                            var u = JSON.parse(i[e].attribs);
                            for (var c in n)
                                if ("backup_date" == c)
                                    u.backup_date = n.backup_date;
                                else {
                                    if ("backup_version" != c)
                                        return void s(r.error(o.BWDS_ERROR_WRONG_ATTRIB, "KeyStoreBWDS Error: Can't set attribute " + c));
                                    u.backup_version = n.backup_version
                                }
                            t.async.setItemsAsync([{
                                key: e,
                                value: i[e].value,
                                attribs: JSON.stringify(u)
                            }], (function(n) {
                                a(t.fileStat(e, u))
                            }
                            ), (function(e) {
                                r.handleException(e, s)
                            }
                            ))
                        } else
                            s(r.error(o.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"))
                    }
                    ), (function(e) {
                        s(e)
                    }
                    ))
                }
                ,
                t.setStat = function(e, o, a) {
                    n((function(n) {
                        t.setStatNoSync(e, o, (function(e) {
                            r.callSafe(a, null, e),
                            n()
                        }
                        ), (function(e) {
                            r.callSafe(a, e),
                            n()
                        }
                        ))
                    }
                    ), a)
                }
                ,
                t.executeSync = function(e, n) {
                    t.queue.executeSequential(e, n)
                }
                ,
                t.removeAll = function(e) {
                    var n = [""]
                      , r = []
                      , o = null;
                    !function a() {
                        if (r.length > 0) {
                            var i = r.shift();
                            t.removeNoSync(i, (function() {
                                a()
                            }
                            ), (function() {
                                console.log("Could not remove ", i),
                                o = "Could not remove file",
                                a()
                            }
                            ))
                        } else if (0 !== n.length) {
                            var s = n.shift();
                            t.dirStat(s, null, (function(e, t) {
                                for (var o = 0; o < t.length; ++o) {
                                    var i = t[o];
                                    i.removed || (i.isdir ? n.push(i.name) : r.push(i.name))
                                }
                                a()
                            }
                            ), (function() {
                                console.log("Error getting stat for ", s),
                                o = "Error removing files",
                                a()
                            }
                            ))
                        } else
                            e(o)
                    }()
                }
                ,
                t.clearAll = function(e) {
                    i.debug("clearAll"),
                    t.async.clearAllAsync ? t.async.clearAllAsync((function() {
                        i.debug("AsyncBWDS.clearAll OK callback"),
                        r.callSafe(e)
                    }
                    ), (function(t) {
                        r.handleException(t, e)
                    }
                    )) : t.removeAll(e)
                }
                ,
                t
            }
            )
        },
        49632: function(e, t, n) {
            "use strict";
            n.d(t, {
                b: function() {
                    return r
                }
            });
            var r = {
                BWDS_ERROR_INTERNAL: 0,
                BWDS_ERROR_UNKNOWN: 1,
                BWDS_ERROR_UNAVAILABLE: 2,
                BWDS_ERROR_WRONG_ATTRIB: 3,
                BWDS_ERROR_FULL: 4,
                BWDS_ERROR_SECURITY: 5
            };
            t.A = r
        },
        42287: function(e, t, n) {
            var r, o, a, i = n(45250).each, s = n(78120);
            e.exports = (r = n(26598),
            o = r.createLogger("IndexedDBAsyncKeyStore"),
            a = function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : s;
                this.idbstore = t
            }
            ,
            a.prototype.getItemsAsync = function(e, t, n) {
                var r = this;
                if (o.debug("IndexedDBAsyncKeyStore getItemsAsync"),
                0 === e.length)
                    return o.debug("IndexedDB Error: getItemsAsync without names"),
                    void n({
                        code: 9999,
                        message: "IndexedDB Error: getItemsAsync without names"
                    });
                var a = {};
                function i(e) {
                    var t = this;
                    return o.debug("readelem ", e),
                    new Promise((function(n, r) {
                        t.idbstore.get(e).then((function(t) {
                            o.debug("read elem: " + e),
                            null != t && (a[e] = t),
                            n()
                        }
                        ), (function(t) {
                            o.debug("error accessing elem: " + e),
                            r(t)
                        }
                        )).catch((function(e) {
                            o.error("Caught idb exception", e),
                            r(e)
                        }
                        ))
                    }
                    ))
                }
                e.reduce((function(e, t) {
                    return e.then((function() {
                        return i.bind(r, t)()
                    }
                    ))
                }
                ), Promise.resolve()).then((function() {
                    t(a)
                }
                ), n)
            }
            ,
            a.prototype.getDirAttribs = function(e, t, n) {
                o.debug("IndexedDBAsyncKeyStore getDirAttribs"),
                this.idbstore.direlems(e).then((function(e) {
                    var n = {};
                    i(e, (function(e) {
                        n[e.keyname] = e.attribs
                    }
                    )),
                    t(n)
                }
                ), n)
            }
            ,
            a.prototype.setItemsAsync = function(e, t, n) {
                if (o.debug("IndexedDBAsyncKeyStore setItemsAsync"),
                0 === e.length)
                    return o.error("IndexedDB Error: setItemsAsync without names"),
                    void n({
                        code: 9999,
                        message: "setItemsAsync without names"
                    });
                if (e.length > 1)
                    return o.error("IndexedDB Error: setItemsAsync can only handle 1 item"),
                    void n({
                        code: 9999,
                        message: "setItemsAsync can only handle 1 item"
                    });
                var r, a, i = e[0];
                this.idbstore.set(i.key, {
                    keyname: i.key,
                    value: i.value,
                    attribs: i.attribs,
                    dir: (r = i.key,
                    a = r.lastIndexOf("/"),
                    -1 != a ? r.substring(0, a) : "")
                }).then((function() {
                    t()
                }
                ), n).catch(n)
            }
            ,
            a.prototype.removeItemsAsync = function(e, t, n) {
                var r = this;
                if (o.debug("IndexedDBAsyncKeyStore removeItemsAsync"),
                0 === e.length)
                    return o.debug("IndexedDB Error: removeItemsAsync without names"),
                    void n({
                        code: 9999,
                        message: "IndexedDB Error: removeItemsAsync without names"
                    });
                e.reduce((function(e, t) {
                    return e.then((function() {
                        return r.idbstore.del(t)
                    }
                    ))
                }
                ), Promise.resolve()).then((function() {
                    t()
                }
                ), n)
            }
            ,
            a.prototype.clearAllAsync = function(e, t) {
                o.debug("IndexedDBAsyncKeyStore clearAllAsync"),
                this.idbstore.clear().then(e, t)
            }
            ,
            a)
        },
        11697: function(e, t, n) {
            var r, o, a, i, s = n(33015);
            e.exports = (r = n(10910),
            o = n(26598),
            a = o.createLogger("NativeSQLAsyncKeyStore"),
            (i = new r).startListening(),
            function(e) {
                e = e || function(e) {
                    var t = document.createElement("IFRAME");
                    t.setAttribute("src", e),
                    t.setAttribute("height", "1px"),
                    t.setAttribute("width", "1px"),
                    document.documentElement.appendChild(t),
                    t.parentNode.removeChild(t),
                    t = null
                }
                ;
                var t = {};
                function n(e) {
                    var t = String.fromCharCode(29);
                    return (e = e.map((function(e) {
                        return e.replace(new RegExp(",","g"), t)
                    }
                    ))).join()
                }
                return t.resultForCallback = function(e, t) {
                    i.processCallback(e, t)
                }
                ,
                t.runningInIframe = function() {
                    try {
                        return window.self !== window.top
                    } catch (e) {
                        return !0
                    }
                }
                ,
                t.callObjC = function(n, r, o, a) {
                    var u = s.url(n, r)
                      , c = i.registerCallbacks(o, a)
                      , l = "'" + c.ok + "'"
                      , d = "'" + c.error + "'"
                      , f = "window.BWKSNativeSQL.resultForCallback";
                    t.runningInIframe() && (f = "function BWKSNativeSQL_callback_wrapper(callbackID, arg) { window.postMessage({ 'command': callbackID, 'arg': arg, 'to': '_widget' }, '*'); }; BWKSNativeSQL_callback_wrapper"),
                    e(u + "&okCallbackId=" + l + "&errorCallbackId=" + d + "&callbackFunc=" + f)
                }
                ,
                t.getItemsAsync = function(e, r, o) {
                    if (0 == e.length)
                        return a.error("NativeSQL Error: getItemsAsync without names"),
                        void o({
                            message: "NativeSQL Error: getItemsAsync without names"
                        });
                    t.callObjC("getItemsAsync", {
                        names: n(e)
                    }, r, o)
                }
                ,
                t.getDirAttribs = function(e, n, r) {
                    t.callObjC("getDirAttribsAsync", {
                        dirname: e
                    }, n, r)
                }
                ,
                t.setItemsAsync = function(e, n, r) {
                    if (0 == e.length)
                        return a.error("NativeSQL Error: setItemsAsync without names"),
                        void r({
                            message: "setItemsAsync without names"
                        });
                    if (e.length > 1)
                        return a.error("NativeSQL Error: setItemsAsync can only handle 1 item"),
                        void r({
                            message: "setItemsAsync can only handle 1 item"
                        });
                    var o = e[0];
                    t.callObjC("setItemAsync", {
                        keyname: o.key,
                        value: o.value,
                        attribs: o.attribs
                    }, n, r)
                }
                ,
                t.removeItemsAsync = function(e, r, o) {
                    if (0 == e.length)
                        return a.error("NativeSQL Error: removeItemsAsync without names"),
                        void o({
                            message: "NativeSQL Error: removeItemsAsync without names"
                        });
                    t.callObjC("removeItemsAsync", {
                        names: n(e)
                    }, r, o)
                }
                ,
                t
            }
            )
        },
        55927: function(e, t, n) {
            e.exports = function(e, t, n) {
                var r = n.createLogger("SyncKeyStoreToBWDSAdapter");
                function o(t, n) {
                    try {
                        t()
                    } catch (t) {
                        r.error("Uncaught error: " + t),
                        e.handleException(t, n)
                    }
                }
                return function(n) {
                    var a = {};
                    function i(n, r, o) {
                        return !1 !== a.keystore.setItem(n, r) || (e.callSafe(o, e.error(t.BWDS_ERROR_FULL, "KeyStoreBWDS error: storage full"), null),
                        !1)
                    }
                    return a.keystore = n,
                    a.write = function(t, n, s) {
                        o((function() {
                            r.debug("write " + t);
                            var o, u, c = n.length, l = t.lastIndexOf(".");
                            if (-1 == l ? (o = t,
                            u = "") : (o = t.substr(0, l),
                            u = t.substr(l + 1)),
                            i(o, n, s))
                                if ("" != o) {
                                    var d, f = o.lastIndexOf("/"), p = "";
                                    -1 != f && (p = o.substring(0, f)),
                                    d = o.substring(f);
                                    var h, m = a.keystore.getItem(p), g = e.getDateTime();
                                    null === m ? (h = {})[d] = {
                                        type: u,
                                        created_at: g,
                                        updated_at: g,
                                        filesize: c,
                                        removed: !1,
                                        version: 1,
                                        backup_version: 0,
                                        backup_date: null,
                                        offline: !1
                                    } : (h = JSON.parse(m))[d] ? (h[d].type = u,
                                    h[d].updated_at = g,
                                    h[d].filesize = c,
                                    h[d].version = h[d].hasOwnProperty("version") ? h[d].version + 1 : 2,
                                    h[d].removed = !1,
                                    h[d].offline = !1) : h[d] = {
                                        type: u,
                                        created_at: g,
                                        updated_at: g,
                                        filesize: c,
                                        removed: !1,
                                        version: 1,
                                        backup_version: 0,
                                        backup_date: null,
                                        offline: !1
                                    };
                                    var v = a.fileStat(p, d, h[d]);
                                    a.write(p + ".dir", JSON.stringify(h), (function(t) {
                                        e.callSafe(s, t, v)
                                    }
                                    ))
                                } else
                                    e.callSafe(s, null, null)
                        }
                        ), s)
                    }
                    ,
                    a.read = function(n, i) {
                        o((function() {
                            var o, s;
                            r.debug("read " + n);
                            var u = n.lastIndexOf(".");
                            -1 == u ? (o = n,
                            s = "") : (o = n.substr(0, u),
                            s = n.substr(u + 1));
                            var c, l = o.lastIndexOf("/"), d = "";
                            -1 != l && (d = o.substring(0, l)),
                            c = o.substring(l);
                            var f = a.keystore.getItem(d);
                            if (null !== f) {
                                var p = JSON.parse(f);
                                if (p[c])
                                    if (s && p[c].type != s)
                                        e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"), null, null);
                                    else if (!0 === p[c].removed)
                                        e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "BWKDLocal Error: removed file"), null, a.fileStat(d, c, p[c]));
                                    else {
                                        var h = a.keystore.getItem(o);
                                        e.callSafe(i, null, h, a.fileStat(d, c, p[c]))
                                    }
                                else
                                    e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "BWKDLocal Error: unknown file"), null, null)
                            } else
                                e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"), null, null)
                        }
                        ), i)
                    }
                    ,
                    a.clearDir = function(e) {
                        var t = a.keystore.getItem(e);
                        if (null != t) {
                            var n = JSON.parse(t);
                            for (var o in n)
                                "dir" == n[o].type && "" != o && a.clearDir(e + o),
                                r.debug("Clearing: " + e + o),
                                a.keystore.removeItem(e + o);
                            a.keystore.removeItem(e)
                        }
                    }
                    ,
                    a.clear = function(t, n) {
                        o((function() {
                            if (r.debug("clear " + t),
                            t)
                                throw Error("clear(): Unexpected parameter");
                            a.clearDir(""),
                            e.callSafe(n, null)
                        }
                        ), n)
                    }
                    ,
                    a.removeDir = function(t, n) {
                        r.debug("removeDir(" + t + ")");
                        var o = a.keystore.getItem(t);
                        if (null != o) {
                            var s = JSON.parse(o)
                              , u = e.getDateTime();
                            for (var c in s) {
                                var l = s[c];
                                !1 === l.removed && ("dir" === l.type ? "" !== c && a.removeDir(t + c, n) : (r.debug("Clearing: " + t + c),
                                a.keystore.removeItem(t + c)),
                                s[c].version = s[c].hasOwnProperty("version") ? s[c].version + 1 : 2,
                                s[c].removed = !0,
                                s[c].updated_at = u)
                            }
                            if (!i(t, JSON.stringify(s), n))
                                return
                        }
                    }
                    ,
                    a.remove = function(n, i) {
                        o((function() {
                            if (r.debug("remove " + n),
                            "" == n || null == n || null == n)
                                return a.removeDir("", i),
                                void e.callSafe(i, null);
                            var o, s, u = n.lastIndexOf("."), c = (o = -1 == u ? n : n.substr(0, u)).lastIndexOf("/"), l = "";
                            -1 != c && (l = o.substring(0, c)),
                            s = o.substring(c);
                            var d = a.keystore.getItem(l);
                            if (null !== d) {
                                var f = JSON.parse(d);
                                if (!f[s])
                                    return r.error("unknown file"),
                                    void e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"));
                                "dir" == f[s].type ? a.removeDir(n, i) : a.keystore.removeItem(o),
                                f[s].removed = !0,
                                f[s].version = f[s].hasOwnProperty("version") ? f[s].version + 1 : 2;
                                var p = e.getDateTime();
                                f[s].updated_at = p;
                                var h = a.fileStat(l, s, f[s]);
                                a.write(l + ".dir", JSON.stringify(f), (function(t) {
                                    e.callSafe(i, t, h)
                                }
                                ))
                            } else
                                e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"))
                        }
                        ), i)
                    }
                    ,
                    a.dir = function(n, i) {
                        o((function() {
                            var o, s;
                            if (r.debug("dir " + n),
                            "" != n) {
                                var u, c = n.lastIndexOf("/"), l = "";
                                if (-1 != c && (l = n.substring(0, c)),
                                u = n.substring(c),
                                null === (o = a.keystore.getItem(l)))
                                    return void e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown directory"));
                                if (!1 === (s = JSON.parse(o)).hasOwnProperty(u) || "dir" !== s[u].type)
                                    return void e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown directory"))
                            }
                            o = a.keystore.getItem(n),
                            s = JSON.parse(o);
                            var d = [];
                            for (var f in s)
                                !0 !== s[f].removed && d.push(e.trimLeadingSlash(f) + ("dir" == s[f].type ? "" : "." + s[f].type));
                            e.callSafe(i, null, d)
                        }
                        ), i)
                    }
                    ,
                    a.fileStat = function(e, t, n) {
                        return {
                            name: e + t + ("dir" == n.type ? "" : "." + n.type),
                            size: n.hasOwnProperty("filesize") ? n.filesize : null == a.keystore.getItem(e + t) ? 0 : a.keystore.getItem(e + t).length,
                            created: n.created_at,
                            modified: n.updated_at,
                            isdir: "dir" == n.type,
                            removed: n.hasOwnProperty("removed") && !0 === n.removed,
                            version: n.version,
                            backup_version: n.backup_version,
                            backup_date: n.hasOwnProperty("backup_date") ? n.backup_date : null,
                            offline: !!n.hasOwnProperty("offline") && n.offline
                        }
                    }
                    ,
                    a.dirStat = function(t, n, r) {
                        var o = a.keystore.getItem(t)
                          , i = JSON.parse(o)
                          , s = [];
                        for (var u in i)
                            s.push(a.fileStat(t, u, i[u]));
                        e.callSafe(n, null, r, s)
                    }
                    ,
                    a.stat = function(n, i) {
                        o((function() {
                            if (r.debug("stat " + n),
                            "" != n) {
                                var o, s, u = n.lastIndexOf("."), c = (o = -1 == u ? n : n.substr(0, u)).lastIndexOf("/"), l = "";
                                -1 != c && (l = o.substring(0, c)),
                                s = o.substring(c);
                                var d = a.keystore.getItem(l);
                                if (null !== d && "" !== d) {
                                    var f = JSON.parse(d);
                                    if (f[s])
                                        return "dir" == f[s].type ? void a.dirStat(n, i, a.fileStat(l, s, f[s])) : void e.callSafe(i, null, a.fileStat(l, s, f[s]));
                                    e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"))
                                } else
                                    e.callSafe(i, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"))
                            } else
                                a.dirStat(n, i, {
                                    isdir: !0,
                                    name: ""
                                })
                        }
                        ), i)
                    }
                    ,
                    a.setStat = function(n, s, u) {
                        o((function() {
                            if (r.debug("stat " + n),
                            "" != n) {
                                var o, c, l = n.lastIndexOf("."), d = (o = -1 == l ? n : n.substr(0, l)).lastIndexOf("/"), f = "";
                                -1 != d && (f = o.substring(0, d)),
                                c = o.substring(d);
                                var p = a.keystore.getItem(f);
                                if (null !== p) {
                                    var h = JSON.parse(p);
                                    if (h[c]) {
                                        if ("dir" == h[c].type)
                                            return void e.callSafe(u, e.error(t.BWDS_ERROR_WRONG_ATTRIB, "KeyStoreBWDS Error: Can't set attributes for directory"));
                                        for (var m in s)
                                            if ("backup_date" == m)
                                                h[c].backup_date = s.backup_date;
                                            else {
                                                if ("backup_version" != m)
                                                    return void e.callSafe(u, e.error(t.BWDS_ERROR_WRONG_ATTRIB, "KeyStoreBWDS Error: Can't set attribute " + m));
                                                h[c].backup_version = s.backup_version
                                            }
                                        if (!i(f, JSON.stringify(h), u))
                                            return;
                                        e.callSafe(u, null, a.fileStat(f, c, h[c]))
                                    } else
                                        e.callSafe(u, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"))
                                } else
                                    e.callSafe(u, e.error(t.BWDS_ERROR_UNKNOWN, "KeyStoreBWDS Error: unknown file"))
                            } else
                                e.callSafe(u, e.error(t.BWDS_ERROR_WRONG_ATTRIB, "KeyStoreBWDS Error: Can't set attributes for directory"))
                        }
                        ), u)
                    }
                    ,
                    a.executeSync = function(e, t) {
                        e((function() {}
                        ))
                    }
                    ,
                    a.clearAll = function(e) {
                        o((function() {
                            a.clear("", e)
                        }
                        ), e)
                    }
                    ,
                    a
                }
            }(n(69050), n(49632).A, n(26598))
        },
        95450: function(e, t, n) {
            e.exports = function(e) {
                var t = e.createLogger("WebSQLAsyncKeyStore");
                function n(e, n, r) {
                    t.error("WebSQL Error: executeSQL triggered error: " + r.message),
                    null != e && e(r)
                }
                var r = function(e, t) {
                    this.name = e || "BWDS1",
                    this.initialized = !1,
                    this.valid = !1,
                    this.db = null,
                    this.openDatabase = void 0 !== t ? t : window.openDatabase ? window.openDatabase.bind(window) : function() {
                        console.error("webSQL not supported")
                    }
                };
                return r.prototype._prepareDatabase = function(e, n) {
                    var r = this.openDatabase(this.name, "", "Offline BW storage", 5242880);
                    return "" == r.version && (t.debug("WebSQL: creating db"),
                    r.changeVersion(r.version, "1.0", (function(e) {
                        t.debug("WebSQL: creating table"),
                        e.executeSql("CREATE TABLE keyvalue (keyname PRIMARY KEY, dir, name, value, attribs)")
                    }
                    ), n)),
                    r
                }
                ,
                r.prototype._initializeAndRun = function(e, n) {
                    if (this.initialized)
                        this.valid ? void 0 !== e && e() : (t.debug("WebSQL Error: Database is initialized but not valid, calling error"),
                        void 0 !== n && n(this.error));
                    else if (this.initialized = !0,
                    this.openDatabase) {
                        try {
                            t.debug("WebSQL: initializing database"),
                            this.db = this._prepareDatabase((function(e) {
                                t.debug("WebSQL Error: Received error while preparing database: " + e.message)
                            }
                            )),
                            this.valid = !0
                        } catch (e) {
                            switch (e.code) {
                            case e.SECURITY_ERR:
                                t.debug("WebSQL Error: Received security error: " + e.message);
                                break;
                            case e.INVALID_STATE_ERR:
                                t.debug("WebSQL Error: Received invalid state error: " + e.message);
                                break;
                            default:
                                t.debug("WebSQL Error: Received error " + e.code + ": " + e.message)
                            }
                            return this.valid = !1,
                            this.error = e,
                            void n(e)
                        }
                        e()
                    } else
                        t.debug("WebSQL Error: No WebSQL database available"),
                        this.valid = !1,
                        this.error = {
                            code: 9999,
                            message: "WebSQL Error: No WebSQL database available"
                        },
                        n(this.error)
                }
                ,
                r.prototype._initializeAndRunTransaction = function(e, n, r) {
                    var o = this;
                    this._initializeAndRun((function() {
                        o.db[e ? "readTransaction" : "transaction"]((function(e) {
                            try {
                                n(e)
                            } catch (e) {
                                t.error("Error while executing transaction: " + e.code + ": " + e.message),
                                null != r && r(e)
                            }
                        }
                        ), (function(e) {
                            t.error("WebSQL Error: " + e.code + " starting transaction :" + e.message),
                            o.valid = !1,
                            o.initialized = !1,
                            null != r && r(e)
                        }
                        ))
                    }
                    ), (function(e) {
                        t.error("WebSQL Error: database not valid"),
                        null != r && r(e)
                    }
                    ))
                }
                ,
                r.prototype._initializeAndRunReadTransaction = function(e, t) {
                    this._initializeAndRunTransaction(!0, e, t)
                }
                ,
                r.prototype._initializeAndRunReadWriteTransaction = function(e, t) {
                    this._initializeAndRunTransaction(!1, e, t)
                }
                ,
                r.prototype.getItemsAsync = function(e, r, o) {
                    if (0 === e.length)
                        return t.debug("WebSQL Error: getItemsAsync without names"),
                        void o({
                            code: 9999,
                            message: "WebSQL Error: getItemsAsync without names"
                        });
                    this._initializeAndRunReadTransaction((function(a) {
                        for (var i = "", s = 0; s < e.length; ++s)
                            i += ("" == i ? "" : ", ") + "?";
                        a.executeSql("SELECT keyname, value, attribs FROM keyvalue where keyname IN (" + i + ")", e, (function(e, n) {
                            for (var o = {}, a = 0; a < n.rows.length; ++a) {
                                var i = n.rows.item(a);
                                o[i.keyname] = i,
                                t.debug("WebSQL: read (" + i.keyname + ") = " + i.value)
                            }
                            r(o)
                        }
                        ), n.bind(null, o))
                    }
                    ), o)
                }
                ,
                r.prototype.getDirAttribs = function(e, t, r) {
                    this._initializeAndRunReadTransaction((function(o) {
                        o.executeSql("SELECT keyname, attribs FROM keyvalue where dir = ?", [e], (function(e, n) {
                            for (var r = {}, o = 0; o < n.rows.length; ++o) {
                                var a = n.rows.item(o);
                                r[a.keyname] = a.attribs
                            }
                            t(r)
                        }
                        ), n.bind(null, r))
                    }
                    ), r)
                }
                ,
                r.prototype.setItemsAsync = function(e, r, o) {
                    if (0 === e.length)
                        return t.error("WebSQL Error: setItemsAsync without names"),
                        void o({
                            code: 9999,
                            message: "setItemsAsync without names"
                        });
                    if (e.length > 1)
                        return t.error("WebSQL Error: setItemsAsync can only handle 1 item"),
                        void o({
                            code: 9999,
                            message: "setItemsAsync can only handle 1 item"
                        });
                    var a = e[0];
                    this._initializeAndRunReadWriteTransaction((function(i) {
                        var s, u = a.key, c = u.lastIndexOf("/"), l = "";
                        -1 != c && (l = u.substring(0, c)),
                        s = u.substring(c + 1),
                        i.executeSql("INSERT OR REPLACE INTO 'keyvalue' ( 'keyname', 'dir', 'name', 'value', 'attribs' ) VALUES ( ? , ? , ?, ? , ? )", [a.key, l, s, a.value, a.attribs], (function(n, i) {
                            i.rowsAffected != e.length ? (t.error("WebSQL Error: store error on key " + name),
                            o({
                                code: 9999,
                                message: "WebSQL store error: wrong # rows affected"
                            })) : null != r ? (t.debug("WebSQL: wrote (" + a.key + ")"),
                            r()) : t.error("WebSQL Error: setItemsAsync no OK function")
                        }
                        ), n.bind(null, o))
                    }
                    ), o)
                }
                ,
                r.prototype.removeItemsAsync = function(e, r, o) {
                    if (0 === e.length)
                        return t.debug("WebSQL Error: removeItemsAsync without names"),
                        void o({
                            code: 9999,
                            message: "WebSQL Error: removeItemsAsync without names"
                        });
                    this._initializeAndRunReadWriteTransaction((function(a) {
                        for (var i = "", s = 0; s < e.length; ++s)
                            i += ("" == i ? "" : ", ") + "?";
                        a.executeSql("DELETE FROM keyvalue where keyname IN (" + i + ")", e, (function(n, o) {
                            t.debug("WebSQL: removed " + e.join(", ")),
                            null != r && r()
                        }
                        ), n.bind(null, o))
                    }
                    ), o)
                }
                ,
                r.prototype.clearAllAsync = function(e, r) {
                    this._initializeAndRunReadWriteTransaction((function(o) {
                        o.executeSql("DELETE FROM keyvalue", [], (function(n, r) {
                            t.debug("WebSQL: Cleared all"),
                            null != e && e()
                        }
                        ), n.bind(null, r))
                    }
                    ), r)
                }
                ,
                r
            }(n(26598))
        },
        78120: function(e, t, n) {
            "use strict";
            function r(e) {
                return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                r(e)
            }
            function o(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var o = t[n];
                    o.enumerable = o.enumerable || !1,
                    o.configurable = !0,
                    "value"in o && (o.writable = !0),
                    Object.defineProperty(e, (void 0,
                    a = function(e) {
                        if ("object" !== r(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== r(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(o.key),
                    "symbol" === r(a) ? a : String(a)), o)
                }
                var a
            }
            n.r(t),
            n.d(t, {
                Store: function() {
                    return s
                },
                clear: function() {
                    return f
                },
                del: function() {
                    return d
                },
                direlems: function() {
                    return p
                },
                get: function() {
                    return c
                },
                set: function() {
                    return l
                }
            });
            var a, i = n(40860), s = function() {
                return e = function e() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "bwds-store"
                      , n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "keyval";
                    !function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, e),
                    this.storeName = n,
                    this._dbp = new i((function(e, r) {
                        var o = indexedDB.open(t, 1);
                        o.onerror = function() {
                            return r(o.error)
                        }
                        ,
                        o.onsuccess = function() {
                            return e(o.result)
                        }
                        ,
                        o.onupgradeneeded = function() {
                            o.result.createObjectStore(n).createIndex("dir_idx", "dir")
                        }
                    }
                    ))
                }
                ,
                (t = [{
                    key: "_withIDBStore",
                    value: function(e, t) {
                        var n = this;
                        return this._dbp.then((function(r) {
                            return new i((function(o, a) {
                                var i = r.transaction(n.storeName, e);
                                i.oncomplete = function() {
                                    return o()
                                }
                                ,
                                i.onabort = i.onerror = function() {
                                    return a(i.error)
                                }
                                ,
                                t(i.objectStore(n.storeName))
                            }
                            ))
                        }
                        ))
                    }
                }]) && o(e.prototype, t),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e;
                var e, t
            }();
            function u() {
                return a || (a = new s),
                a
            }
            function c(e) {
                var t;
                return (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : u())._withIDBStore("readonly", (function(n) {
                    t = n.get(e)
                }
                )).then((function() {
                    return t.result
                }
                ))
            }
            function l(e, t) {
                return (arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : u())._withIDBStore("readwrite", (function(n) {
                    n.put(t, e)
                }
                ))
            }
            function d(e) {
                return (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : u())._withIDBStore("readwrite", (function(t) {
                    t.delete(e)
                }
                ))
            }
            function f() {
                return (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : u())._withIDBStore("readwrite", (function(e) {
                    e.clear()
                }
                ))
            }
            function p(e) {
                var t;
                return (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : u())._withIDBStore("readonly", (function(n) {
                    t = n.index("dir_idx").getAll(e)
                }
                )).then((function() {
                    return t.result
                }
                ))
            }
        },
        95079: function(e, t, n) {
            var r, o, a = n(90589), i = a.realValueToDisplayValue, s = a.findCorrection, u = a.styledTableToHtml;
            e.exports = (r = n(78073),
            o = n(58065),
            n(1723),
            function(e) {
                var t = e.tablediv
                  , n = e.tabledata
                  , a = e.hasOwnProperty("calculate") ? e.calculate : function() {}
                  , c = !!e.hasOwnProperty("support_correction_colors") && e.support_correction_colors;
                o(document.createElement("div")).addClass("styledtablehidden").css("display", "none").appendTo(o(t).parent());
                for (var l = null, d = null, f = function(e, a, u, f, p, h, m) {
                    var g = o(a)
                      , v = {}
                      , w = n.values[u][f];
                    w.hasOwnProperty("CellFormat") && (h = i(h, w.CellFormat),
                    g.find(".bw-table-cell-contents").text(h));
                    for (var b = ["font-family", "font-weight", "font-style", "font-variant", "font-size"], y = 0; y < b.length; ++y) {
                        var C = b[y];
                        w.hasOwnProperty(C) && (v[C] = w[C])
                    }
                    if (w.hasOwnProperty("font-size") && (v["line-height"] = Math.max(parseInt(w["font-size"]), 21) + "px"),
                    c && w.hasOwnProperty("CellRole") && ("checked" === w.CellRole || "input" === w.CellRole)) {
                        if (l) {
                            var x = s(l.correctioninfo, u, f);
                            if (x && x.answer !== h && (l = d(),
                            x = s(l.correctioninfo, u, f)),
                            x)
                                if (1 === x.correctness)
                                    g.addClass("cell_correct").removeClass("cell_wrong").removeClass("cell_open"),
                                    g.find(".bw-table-cell-contents").append(" &#x2713;");
                                else if (-2 !== x.correctness && x.correct) {
                                    var E;
                                    if (x.correct.startsWith("select:")) {
                                        var k = x.correct.split(":");
                                        k.shift(),
                                        E = k.join(":").split("##")[0]
                                    } else {
                                        var S = x.correct.split(/##/);
                                        E = 1 === S.length ? x.correct : S.join(" / ")
                                    }
                                    var T = g.addClass("cell_wrong").removeClass("cell_correct").removeClass("cell_open").find(".bw-table-cell-contents").append(o(document.createElement("span")).addClass("cell_right_value").safeHtml(" (" + E + ")"));
                                    0 === x.correctness && T.append(o(document.createElement("span")).addClass("cr-wrong").append(" &#x2718;"))
                                } else
                                    g.addClass("cell_open")
                        }
                    } else
                        w.hasOwnProperty("BackgroundColor") && (v.background = w.BackgroundColor,
                        v["background-clip"] = "padding-box"),
                        w.hasOwnProperty("TextColor") && (v.color = w.TextColor);
                    if (w.hasOwnProperty("HAlign") && (v["text-align"] = w.HAlign),
                    w.hasOwnProperty("VAlign") && (v["vertical-align"] = w.VAlign),
                    w.hasOwnProperty("BorderLeft") && (v["border-left"] = w.BorderLeft),
                    w.hasOwnProperty("BorderRight") && (v["border-right"] = w.BorderRight),
                    w.hasOwnProperty("BorderTop") && (v["border-top"] = w.BorderTop),
                    w.hasOwnProperty("BorderBottom") && (v["border-bottom"] = w.BorderBottom),
                    n.hasOwnProperty("layout") && n.layout.hasOwnProperty("rows") && (v.height = n.layout.rows[u].height + "px"),
                    g.css(v),
                    w.hasmath) {
                        var _ = o(t).parent().find("#cell_" + u + "_" + f).clone();
                        _.removeAttr("id"),
                        g.empty().append(_),
                        r.processMathElems(g)
                    }
                }, p = n && n.values ? n.values : [], h = function(e) {
                    for (var n = [], a = e || [], i = 0; i < a.length; ++i) {
                        for (var s = a[i], u = [], c = 0; c < s.length; ++c) {
                            var l = s[c];
                            if (!l.hasOwnProperty("CellRole") || "calculated" !== l.CellRole && "checked" !== l.CellRole)
                                if (l.hasOwnProperty("CellRole") && "readonly" === l.CellRole) {
                                    var d = r.prepare(l.value);
                                    d !== l.value ? (o(document.createElement("span")).attr("id", "cell_" + i + "_" + c).safeHtml(d).appendTo(o(t).parent().find(".styledtablehidden")),
                                    l.hasmath = !0,
                                    u.push(d)) : u.push(l.value)
                                } else
                                    u.push(l.value);
                            else
                                "checked" === l.CellRole && l.value.startsWith("select:") ? u.push(l.value) : u.push("")
                        }
                        n.push(u)
                    }
                    return n
                }(p), m = o.extend(!0, [], h), g = 0, v = n && n.layout && n.layout.columns ? n.layout.columns : [], w = 0; w < v.length; ++w)
                    g += v[w].width;
                for (w = 0; w < p.length; ++w)
                    for (var b = p[w], y = 0, C = 0, x = 0; x < b.length; ++x) {
                        if ((_ = b[x]).hasOwnProperty("BorderTop")) {
                            var E = parseInt(_.BorderTop);
                            E > y && (y = E)
                        }
                        if (_.hasOwnProperty("BorderBottom")) {
                            var k = parseInt(_.BorderBottom);
                            k > C && (C = k)
                        }
                    }
                for (x = 0; x < v.length; ++x) {
                    var S = 0
                      , T = 0;
                    for (w = 0; w < p.length; ++w) {
                        var _;
                        if ((_ = n.values[w][x]).hasOwnProperty("BorderLeft")) {
                            var A = parseInt(_.BorderLeft);
                            A > S && (S = A)
                        }
                        if (_.hasOwnProperty("BorderRight")) {
                            var O = parseInt(_.BorderRight);
                            O > T && (T = O)
                        }
                    }
                    g += S + T
                }
                var D = {};
                D.data = h,
                D.table_change_callbacks = [],
                D.setChangeCallBack = function(e) {
                    this.table_change_callbacks.push(e)
                }
                ,
                D.callChangeCallbacks = function() {
                    for (var e = 0; e < this.table_change_callbacks.length; ++e)
                        this.table_change_callbacks[e]()
                }
                ;
                var I = {
                    data: h,
                    asyncRendering: !1,
                    stretchH: "none",
                    onChange: function(e, n) {
                        a(),
                        o(t).bwtable("render"),
                        D.callChangeCallbacks()
                    },
                    maxColumns: n && n.layout && n.layout.colums ? n.layout.columns.length : 0,
                    cells: function(e, t, r) {
                        var o = {
                            renderer: f
                        };
                        return !n.values[e][t].hasOwnProperty("CellRole") || "readonly" !== n.values[e][t].CellRole && "calculated" !== n.values[e][t].CellRole || (o.readOnly = !0),
                        n.values[e][t].hasOwnProperty("CellRole") && "checked" === n.values[e][t].CellRole && n.values[e][t].value.startsWith("select:") && (o.isSelect = !0),
                        o
                    },
                    width: g,
                    spellcheck: e.spellcheck,
                    keyboard: e.keyboard
                };
                if (n && n.layout && n.layout.columns) {
                    var P = [];
                    for (v = n.layout.columns,
                    w = 0; w < v.length; ++w)
                        P.push(v[w].width);
                    I.colWidths = P
                }
                return o(t).bwtable(I),
                D.setData = function(e) {
                    for (var r = n && n.values ? n.values : [], i = 0; i < e.length; ++i) {
                        var s = e[i];
                        if (r[s.row] && r[s.row][s.column]) {
                            var u = r[s.row][s.column];
                            u.hasOwnProperty("CellRole") && "checked" !== u.CellRole && "input" !== u.CellRole || (h[s.row][s.column] = s.value)
                        }
                    }
                    a(),
                    o(t).bwtable("render")
                }
                ,
                D.getData = function() {
                    for (var e = [], t = n && n.values ? n.values : [], r = 0; r < t.length; ++r)
                        for (var o = t[r], a = 0; a < o.length; ++a) {
                            var i = o[a];
                            i.hasOwnProperty("CellRole") && "input" !== i.CellRole && "checked" !== i.CellRole || (i.hasOwnProperty("CellRole") || h[r][a] !== m[r][a]) && e.push({
                                row: r,
                                column: a,
                                value: h[r][a]
                            })
                        }
                    return e
                }
                ,
                D.getProgress = function() {
                    for (var e = 0, t = 0, r = n && n.values ? n.values : [], o = 0; o < r.length; ++o)
                        for (var a = r[o], i = 0; i < a.length; ++i) {
                            var s = a[i];
                            "input" !== s.CellRole && "checked" !== s.CellRole || (++e,
                            h[o][i] !== m[o][i] && ++t)
                        }
                    return {
                        inputCellCount: e,
                        changedCellCount: t
                    }
                }
                ,
                D.clear = function() {
                    for (var e = n && n.values ? n.values : [], r = 0; r < e.length; ++r)
                        for (var i = e[r], s = 0; s < i.length; ++s) {
                            var u = i[s];
                            u.hasOwnProperty("CellRole") && "checked" !== u.CellRole && "input" !== u.CellRole || (h[r][s] = "checked" !== u.CellRole ? u.value : "")
                        }
                    a(),
                    o(t).bwtable("render"),
                    this.callChangeCallbacks()
                }
                ,
                D.loadCorrect = function(e) {
                    for (var n = 0; n < e.values.length; ++n)
                        for (var r = e.values[n], a = 0; a < r.length; ++a) {
                            var i = r[a];
                            i.hasOwnProperty("CellRole") && "checked" === i.CellRole && (h[n][a] = i.value)
                        }
                    o(t).bwtable("render")
                }
                ,
                D.render = function() {
                    o(t).bwtable("render")
                }
                ,
                D.setReadOnly = function(e) {
                    o(t).bwtable("updateSettings", {
                        readOnly: e
                    })
                }
                ,
                D.setCorrectionCallback = function(e) {
                    l = (d = e) ? d() : null,
                    o(t).bwtable("render")
                }
                ,
                D.getCheckInput = function() {
                    for (var e = [], t = n && n.values ? n.values : [], r = 0; r < t.length; ++r)
                        for (var o = t[r], a = 0; a < o.length; ++a) {
                            var i = o[a];
                            !i.hasOwnProperty("CellRole") || "input" !== i.CellRole && "checked" !== i.CellRole || e.push({
                                row: r,
                                column: a,
                                value: h[r][a]
                            })
                        }
                    return e
                }
                ,
                D.getFormattedValueForCell = function(e, t) {
                    var r = n.values[e][t];
                    return r.hasOwnProperty("CellFormat") ? i(h[e][t], r.CellFormat) : h[e][t]
                }
                ,
                D.getEmailTable = function(e, t) {
                    return u(n, h, e, t)
                }
                ,
                D
            }
            )
        },
        6322: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                isRTL: function() {
                    return o
                },
                isRtlOrRtlMixed: function() {
                    return i
                },
                isUseMixedTextDirection: function() {
                    return s
                },
                setAutoDirection: function() {
                    return a
                },
                setAutoDirectionIfRequired: function() {
                    return u
                }
            });
            var r = n(51958);
            function o(e) {
                for (var t = [], n = new RegExp("^[֐-׾؀-۾܀-ݎݐ-ݾހ-޾߀-߾ࠀ-࠾ࡀ-࡞ࢠ-ࣾऀ-ॾ]|\ud802[\udf60-\udf7e]+$"), r = 1, o = 0; o <= r; o++)
                    if (t[o] = e.substring(o - 1, o),
                    /\s/.test(t[o]) && r++,
                    n.test(t[o]))
                        return !0;
                return !1
            }
            function a(e, t, n) {
                null == t ? t = e.text() : n && (t = (0,
                r.appSafeUnescape)(t)),
                t.length > 0 ? o(t) ? e.css("direction", "rtl") : e.css("direction", "ltr") : console.log("setAutoDirection: no text")
            }
            function i(e) {
                return null != e && e.startsWith("right-to-left")
            }
            function s(e) {
                return null != e && e.endsWith("mixed")
            }
            function u(e, t, n, r) {
                s(t) && a(e, n, r)
            }
        },
        31004: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                createThrobber: function() {
                    return a
                }
            });
            var r = n(58065)
              , o = n.n(r);
            function a(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 100
                  , n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]
                  , r = o()(document.createElement("div")).addClass("bw-throbber-wrapper bw-centering-container").appendTo(e)
                  , a = o()(document.createElement("canvas")).addClass("bw-throbber bw-centered").attr({
                    width: t,
                    height: t
                }).appendTo(r)
                  , i = a[0].getContext("2d");
                i.translate(t / 2, t / 2);
                for (var s = 30 * t / 100, u = 0; u < s; ++u) {
                    i.rotate(2 * -Math.PI / s);
                    var c = n ? 0 : 255;
                    i.strokeStyle = "rgba(" + c + "," + c + "," + c + "," + (1 / s).toFixed(2) + ")",
                    i.lineWidth = 3,
                    i.moveTo(t / 5, 0),
                    i.lineTo(2 * t / 5, 0),
                    i.stroke()
                }
                var l = null
                  , d = !1;
                return window.requestionAnimationFrame && window.requestAnimationFrame((function e(t) {
                    if (l || (l = t),
                    !d) {
                        var n = "rotate(" + 360 * Math.floor(t / 1e3 * s) / s + "deg)";
                        a.css({
                            transform: n,
                            "-webkit-transform": n,
                            "-moz-transform": n,
                            "-ms-transform": n
                        }),
                        window.requestionAnimationFrame && window.requestAnimationFrame(e)
                    }
                }
                )),
                {
                    close: function() {
                        r.remove(),
                        d = !0
                    }
                }
            }
        },
        5562: function(e) {
            e.exports = function() {
                var e = [];
                function t() {
                    for (var t = 0; t < e.length; ++t)
                        e[t]()
                }
                return {
                    executeCssUpdateCallbacks: t,
                    CssUpdateCallbacks: e,
                    updateConfigCSS: function(e) {
                        for (var n = document.getElementsByTagName("link"), r = 0, o = n.length; r < o; r++) {
                            var a = n[r]
                              , i = a.rel;
                            if ("string" != typeof i || 0 === i.length || "stylesheet" === i) {
                                var s = a.getAttribute("href");
                                0 === s.indexOf("config") && -1 !== s.indexOf(".css") && (a.setAttribute("href", "config" + e + ".css"),
                                setTimeout(t, 100))
                            }
                        }
                    },
                    addAllDesignInfo: function() {
                        void 0 !== window.addAllDesignInfo && window.addAllDesignInfo()
                    },
                    addCSSUpdateCallback: function(t) {
                        e.push(t)
                    }
                }
            }()
        },
        17280: function(e, t, n) {
            "use strict";
            n.r(t);
            var r = n(58065)
              , o = n.n(r)
              , a = n(61743)
              , i = n(78514)
              , s = n.n(i)
              , u = n(73030);
            function c(e) {
                return c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                c(e)
            }
            var l = (0,
            a.getPlatform)();
            -1 !== l.indexOf("android") ? o().fn.extend({
                clickOnDraggable: function(e) {
                    return this.each((function() {
                        var t = !1;
                        this.ClickOnDraggableCallback = e,
                        o()(this).on("touchstart", (function(e) {
                            var n = e.originalEvent ? e.originalEvent : e;
                            1 === n.changedTouches.length && 1 === n.touches.length && n.changedTouches[1] === n.touches[1] ? (t = !0,
                            setTimeout((function() {
                                t && (console.error("touch takes too long"),
                                t = !1)
                            }
                            ), 100)) : t = !1
                        }
                        )),
                        o()(this).on("touchend", (function(e) {
                            if (t) {
                                var n = e.originalEvent ? e.originalEvent : e;
                                1 === n.changedTouches.length && 0 === n.touches.length ? (t = !1,
                                this.ClickOnDraggableCallback()) : t = !1
                            }
                        }
                        ))
                    }
                    ))
                }
            }) : o().fn.extend({
                clickOnDraggable: function(e) {
                    return this.each((function() {
                        o()(this).click(e)
                    }
                    ))
                }
            }),
            -1 !== l.indexOf("android") || -1 !== l.indexOf("preview") || -1 !== l.indexOf("phantomjs") || -1 !== l.indexOf("headlesschrome") || -1 !== l.indexOf("chrome") || "ibw-platform-osx-safari" === l || "ibw-platform-osx-other" === l || "ibw-platform-osx-ibooks-epub" === l || "ibw-platform-unknown" === l ? o().fn.extend({
                tapOrClick: function(e) {
                    return this.each((function() {
                        o()(this).click(e);
                        var t = this
                          , n = o()(this);
                        n.is("button") || n.is("a") || n.on("keydown", (function(n) {
                            var r = n.which;
                            13 !== r && 32 !== r || (n.preventDefault(),
                            n.stopPropagation(),
                            n.stopImmediatePropagation(),
                            e.bind(t)({
                                preventDefault: function() {},
                                stopPropagation: function() {},
                                stopImmediatePropagation: function() {}
                            }))
                        }
                        ))
                    }
                    ))
                },
                tapOrClickOff: function() {
                    return this.each((function() {
                        o()(this).unbind("click");
                        var e = o()(this);
                        e.is("button") || e.is("a") || e.off("keydown")
                    }
                    ))
                },
                triggerTapOrClick: function(e) {
                    return this.each((function() {
                        o()(this).trigger("click", e)
                    }
                    ))
                }
            }) : o().fn.extend({
                tapOrClick: function(e) {
                    return this.each((function() {
                        var t = this
                          , n = o()(this);
                        n.addClass("epub-block"),
                        n.find("*").each((function() {
                            this instanceof SVGElement && o()(this).addClass("epub-block")
                        }
                        ));
                        var r = !1;
                        n.hammer ? "ibw-platform-ipad-bookwidgets" === l || "ibw-platform-ipad-seb" === l || "ibw-platform-ipad-ibooks-epub" === l || "ibw-platform-ipad-other" === l ? n.hammer().on("tap", (function(o) {
                            !1 === r && (e.bind(t)(o),
                            r = !0,
                            setTimeout((function() {
                                r = !1
                            }
                            ), 500)),
                            n.blur(),
                            o.stopImmediatePropagation()
                        }
                        )) : n.hammer().on("tap", (function(r) {
                            e.bind(t)(r),
                            n.blur(),
                            r.stopImmediatePropagation()
                        }
                        )) : n.click((function(r) {
                            e.bind(t)(r),
                            n.blur()
                        }
                        )),
                        (n.hammer || !n.is("button") && !n.is("a")) && n.on("keydown", (function(n) {
                            var r = n.which;
                            13 !== r && 32 !== r || (n.preventDefault(),
                            n.stopPropagation(),
                            n.stopImmediatePropagation(),
                            e.bind(t)({
                                preventDefault: function() {},
                                stopPropagation: function() {},
                                stopImmediatePropagation: function() {}
                            }))
                        }
                        ))
                    }
                    ))
                },
                tapOrClickOff: function() {
                    return this.each((function() {
                        var e = o()(this);
                        e.hammer ? e.hammer().off("tap") : e.unbind("click"),
                        (e.hammer || !e.is("button") && !e.is("a")) && e.off("keydown")
                    }
                    ))
                },
                triggerTapOrClick: function(e) {
                    return this.each((function() {
                        var t = o()(this);
                        t.hammer ? t.hammer().trigger("tap", e) : t.trigger("click", e)
                    }
                    ))
                }
            }),
            o().fn.extend({
                clickOrHold: function(e, t, n) {
                    return n = n || 3e3,
                    this.each((function() {
                        var r = !1
                          , a = null;
                        o()(this).click((function(t) {
                            r || e.bind(this)(t),
                            r = !1
                        }
                        )),
                        o()(this).on("keydown", (function(t) {
                            var n = t.which;
                            13 !== n && 32 !== n || (t.preventDefault(),
                            t.stopPropagation(),
                            t.stopImmediatePropagation(),
                            e.bind(this)({
                                prevent: function() {},
                                stopPropagation: function() {},
                                stopImmediatePropagation: function() {}
                            }))
                        }
                        )),
                        o()(this).on("mousedown touchstart", (function() {
                            var e = this;
                            a = setTimeout((function() {
                                a = null,
                                r = !0,
                                t.bind(e)()
                            }
                            ), n)
                        }
                        )),
                        o()(this).on("mouseup touchend", (function() {
                            null !== a && (clearTimeout(a),
                            a = null),
                            r && setTimeout((function() {
                                r = !1
                            }
                            ), 400)
                        }
                        ))
                    }
                    ))
                }
            }),
            o().fn.extend({
                makeButton: function(e) {
                    "string" == typeof (e = e || {}) && (e = {
                        label: e
                    }),
                    this.attr({
                        role: e.hasOwnProperty("role") ? e.role : "button"
                    });
                    var t = this.attr("tabindex");
                    return "undefined" !== c(t) && !1 !== t || this.attr({
                        tabindex: "0"
                    }),
                    e.hasOwnProperty("label") && this.attr({
                        "aria-label": e.label
                    }),
                    e.hasOwnProperty("labelledby") && this.attr({
                        "aria-labelledby": e.labelledby
                    }),
                    e.describedby && this.attr("aria-describedby", e.describedby),
                    this
                },
                makeLink: function(e) {
                    return this.attr({
                        role: "link",
                        tabindex: "0"
                    }),
                    e && this.attr({
                        "aria-label": e
                    }),
                    this
                },
                enterOrSpaceClicks: function() {
                    var e = o()(this);
                    return this.each((function() {
                        e.is("button") || e.is("a") || o()(this).on("keydown", (function(e) {
                            var t = e.which;
                            13 !== t && 32 !== t || (e.preventDefault(),
                            e.stopPropagation(),
                            e.stopImmediatePropagation(),
                            o()(this).trigger("click"))
                        }
                        ))
                    }
                    ))
                }
            });
            var d = o().fn.dialog;
            o().fn.dialog = function(e) {
                var t = d.call(this, e);
                if ("string" != typeof e) {
                    var n = t.parent();
                    n.attr({
                        "aria-modal": "true"
                    }).find(".ui-dialog-titlebar-close").attr({
                        "aria-label": s()("close")
                    }),
                    (0,
                    u.g)(n[0]),
                    t.on("dialogclose", (function() {
                        (0,
                        u._)()
                    }
                    ))
                }
                return t
            }
        },
        78514: function(e, t, n) {
            e.exports = (n(17496),
            function(e) {
                try {
                    return window.bwlocalizationmap && window.bwlocalizationmap[e] && "" !== window.bwlocalizationmap[e] ? window.bwlocalizationmap[e] : e
                } catch (t) {
                    return e
                }
            }
            )
        },
        36565: function(e, t, n) {
            var r, o;
            e.exports = (r = n(58065),
            o = n(78514),
            {
                createLabeledCheckbox: function(e, t, n, o, a) {
                    var i = r(document.createElement("table")).addClass("bw-checkbox").appendTo(e)
                      , s = r(document.createElement("tr")).appendTo(i)
                      , u = r(document.createElement("td")).addClass("bw-checkbox-cell").appendTo(s);
                    function c() {
                        return null != o && o > 0 && r(e).find("[role=checkbox][checked=checked]").length >= o
                    }
                    function l() {
                        r(e).toggleClass("bw-check-limit-reached", c())
                    }
                    return r(document.createElement("div")).addClass("bw-checkbox-checkbox bw-icon bw-icon-accept").appendTo(u),
                    r(document.createElement("td")).addClass("bw-button-label-cell").append(r(document.createElement("div")).addClass("bw-button-label").safeHtml(t)).appendTo(s),
                    i.bind("check", (function() {
                        r(this).attr({
                            checked: "checked",
                            "aria-checked": "true"
                        }),
                        l()
                    }
                    )),
                    i.bind("clear", (function() {
                        r(this).attr({
                            checked: null,
                            "aria-checked": "false"
                        }),
                        l()
                    }
                    )),
                    i.makeButton({
                        role: "checkbox",
                        describedby: a
                    }).tapOrClick((function() {
                        var e = r(this);
                        if ("disabled" !== e.attr("disabled"))
                            if ("checked" === e.attr("checked"))
                                e.trigger("clear"),
                                n && n.call(e[0], !1);
                            else {
                                if (c())
                                    return;
                                e.trigger("check"),
                                n && n.call(e[0], !0)
                            }
                    }
                    )),
                    i.trigger("clear"),
                    i
                },
                createProgressBar: function(e, t) {
                    var n = {};
                    n.parent = e,
                    n.max = t,
                    r(document.createElement("div")).addClass("bw-progress-bar").css("left", "-100%").appendTo(r(e));
                    var o = 100 / t;
                    return r(document.createElement("div")).addClass("bw-progress-bar-marker").css({
                        left: "-100%",
                        width: o + "%"
                    }).appendTo(r(e)),
                    n.setProgress = function(t, n, o) {
                        n = n || 400;
                        var a = 100 * -(this.max - parseFloat(t)) / this.max
                          , i = r(this.parent + "> .bw-progress-bar")
                          , s = r(e).width()
                          , u = -(this.max - parseFloat(t)) * s / this.max;
                        i.css("left", i.css("left")),
                        i.animate({
                            left: u
                        }, n, "swing", (function() {
                            i.css("left", a + "%"),
                            o && o()
                        }
                        ))
                    }
                    ,
                    n.setPosition = function(t, n) {
                        n = n || 400;
                        var o = r(this.parent + "> .bw-progress-bar-marker")
                          , a = 100 * parseFloat(t) / this.max
                          , i = r(e).width() * t / this.max;
                        o.css("left", o.css("left")),
                        o.animate({
                            left: i
                        }, n, "swing", (function() {
                            o.css("left", a + "%")
                        }
                        ))
                    }
                    ,
                    n.clear = function() {
                        r(this.parent + " .bw-progress-bar").css("left", "-100%"),
                        r(this.parent + " .bw-progress-bar-marker").css("left", "-100%")
                    }
                    ,
                    n
                },
                createSimpleCheckbox: function(e, t, n, o, a, i) {
                    var s = r(document.createElement("div")).addClass("bw-simple-checkbox bw-icon bw-icon-accept").appendTo(r(e))
                      , u = {
                        role: "checkbox"
                    };
                    function c() {
                        return null != a && a > 0 && r(o).find("[role=checkbox][checked=checked]").length >= a
                    }
                    function l() {
                        r(o).toggleClass("bw-check-limit-reached", c())
                    }
                    return n && (u.labelledby = n),
                    i && (u.describedby = i),
                    s.bind("check", (function() {
                        r(this).attr({
                            checked: "checked",
                            "aria-checked": "true"
                        }),
                        l()
                    }
                    )),
                    s.bind("clear", (function() {
                        r(this).attr({
                            checked: null,
                            "aria-checked": "false"
                        }),
                        l()
                    }
                    )),
                    s.makeButton(u).tapOrClick((function() {
                        var e = r(this);
                        if ("disabled" !== e.attr("disabled"))
                            if ("checked" === e.attr("checked"))
                                e.trigger("clear"),
                                t && t.call(e[0], !1);
                            else {
                                if (c())
                                    return;
                                e.trigger("check"),
                                t && t.call(e[0], !0)
                            }
                    }
                    )),
                    s.trigger("clear"),
                    s
                },
                createNumberButtons: function(e, t, n, a, i) {
                    function s(e) {
                        if (r(".buttonslot").removeClass("selected"),
                        t <= 9)
                            r("#BS_" + e).addClass("selected");
                        else if (e < 5) {
                            r("#BS_1").removeClass("hide_number"),
                            r("#BS_7").addClass("hide_number");
                            for (var n = 1; n < 8; ++n)
                                r("#BS_" + n).find(".number-button").safeHtml(n + 1);
                            r("#BS_" + e).addClass("selected")
                        } else if (t - e < 6) {
                            r("#BS_1").addClass("hide_number"),
                            r("#BS_7").removeClass("hide_number");
                            for (var o = 2; o < 8; ++o)
                                r("#BS_" + o).find(".number-button").safeHtml(t - 8 + o);
                            r("#BS_" + (9 - (t - e))).addClass("selected")
                        } else {
                            r("#BS_1").addClass("hide_number"),
                            r("#BS_7").addClass("hide_number");
                            for (var s = 1; s < 8; ++s)
                                r("#BS_" + s).find(".number-button").safeHtml(s + e - 3);
                            r("#BS_4").addClass("selected")
                        }
                        0 === e ? r(a).addClass("hidden") : r(a).removeClass("hidden"),
                        e === t - 1 ? r(i).addClass("hidden") : r(i).removeClass("hidden")
                    }
                    r(e).addClass("bw-column-container");
                    for (var u = 0, c = Math.min(t, 9), l = r(e), d = 0; d < c; ++d)
                        r(document.createElement("div")).addClass("buttonslot bw-column-resizing").attr("id", "BS_" + d).append(r(document.createElement("div")).addClass("number-button bw-button").text(d + 1)).appendTo(l).find(".number-button").makeButton().tapOrClick((function() {
                            s(u = parseInt(r(this).safeHtml()) - 1),
                            n(u)
                        }
                        ));
                    function f() {
                        --u < 0 && (u = 0),
                        s(u),
                        n(u)
                    }
                    function p() {
                        ++u >= t && (u = t - 1),
                        s(u),
                        n(u)
                    }
                    return t > 9 && (r(document.createElement("div")).addClass("ellipsis").appendTo(r("#BS_1")),
                    r(document.createElement("div")).addClass("ellipsis").appendTo(r("#BS_7")),
                    r("#BS_7").addClass("hide_number"),
                    r("#BS_7").find(".number-button").safeHtml(t - 1),
                    r("#BS_8").find(".number-button").safeHtml(t)),
                    r("#BS_0").addClass("selected"),
                    r(a).addClass("hidden"),
                    r(a).makeButton(o("previous")).tapOrClick(f),
                    r(i).makeButton(o("next")).tapOrClick(p),
                    {
                        updateButtons: s,
                        next: p,
                        prev: f
                    }
                },
                createSimpleRadiobutton: function(e, t, n, o) {
                    var a = r(document.createElement("div")).addClass("bw-simple-radiobutton bw-icon").appendTo(r(e));
                    a.bind("check", (function() {
                        r(this).attr({
                            checked: "checked",
                            "aria-checked": "true"
                        })
                    }
                    )),
                    a.bind("clear", (function() {
                        r(this).attr({
                            checked: null,
                            "aria-checked": "false"
                        })
                    }
                    ));
                    var i = {
                        role: "radio"
                    };
                    return n && (i.labelledby = n),
                    o && (i.describedby = o),
                    a.makeButton(i).tapOrClick((function() {
                        var e = r(this);
                        "disabled" !== e.attr("disabled") && ("checked" === e.attr("checked") ? (e.trigger("clear"),
                        t && t.call(e[0], !1)) : (e.trigger("check"),
                        t && t.call(e[0], !0)))
                    }
                    )),
                    a.trigger("clear"),
                    a
                },
                createLabeledRadiobutton: function(e, t, n, o) {
                    var a = r(document.createElement("table")).addClass("bw-radiobutton").appendTo(e)
                      , i = r(document.createElement("tr")).appendTo(a)
                      , s = r(document.createElement("td")).addClass("bw-radiobutton-cell").appendTo(i);
                    return r(document.createElement("div")).addClass("bw-radiobutton-radiobutton bw-icon bw-icon-largedot").appendTo(s),
                    r(document.createElement("td")).addClass("bw-button-label-cell").append(r(document.createElement("div")).addClass("bw-button-label").safeHtml(t)).appendTo(i),
                    a.bind("check", (function() {
                        r(this).attr({
                            checked: "checked",
                            "aria-checked": "true"
                        })
                    }
                    )),
                    a.bind("clear", (function() {
                        r(this).attr({
                            checked: null,
                            "aria-checked": "false"
                        })
                    }
                    )),
                    a.makeButton({
                        role: "radio",
                        describedby: o
                    }).tapOrClick((function() {
                        var e = r(this);
                        "disabled" !== e.attr("disabled") && ("checked" === e.attr("checked") ? (e.trigger("clear"),
                        n && n.call(e[0], !1)) : (e.trigger("check"),
                        n && n.call(e[0], !0)))
                    }
                    )),
                    a.trigger("clear"),
                    a
                },
                createProgressCircle: function(e, t, n) {
                    var o = {}
                      , a = 40
                      , i = 40;
                    o.id = t,
                    o.progress = Array(n);
                    var s = r(document.createElement("div")).addClass("bw-progress-circle bw-centering-container").attr("id", t).appendTo(r(e));
                    r(document.createElement("div")).addClass("bw-progress-circle-text bw-centered").appendTo(s);
                    var u = [];
                    function c(e, t) {
                        if (-1 === e)
                            return "";
                        var r = 2 * Math.PI * e / n
                          , o = 2 * Math.PI * (e + 1) / n
                          , s = a + Math.sin(r) * t
                          , u = i - Math.cos(r) * t
                          , c = a + Math.sin(o) * t
                          , l = i - Math.cos(o) * t;
                        return "M X1 Y1 A R R 0 0 1 X2 Y2".replace("X1", s).replace("Y1", u).replace("X2", c).replace("Y2", l).replace("D", r).replace("R", t).replace("R", t)
                    }
                    function l(e) {
                        return '<path d="' + c(e, 30) + '"/>'
                    }
                    for (var d = 0; d < n; ++d)
                        u.push(l(d));
                    return r('<svg class="bw-progress-circle-drawing" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 80 80">' + u.join("") + '<path class="the marker"/></svg>').appendTo(s),
                    o.setProgress = function(e, t) {
                        r("#" + this.id + " path:nth-child(" + (e + 1) + ")").attr("class", t)
                    }
                    ,
                    o.setTextAndPosition = function(e, t) {
                        var n = r("#" + this.id + " .bw-progress-circle-text");
                        n.animate({
                            opacity: 0
                        }, 200, "swing", (function() {
                            n.empty().append(e).animate({
                                opacity: 1
                            }, 200)
                        }
                        ));
                        var o = r("#" + this.id + " path.the.marker");
                        o.animate({
                            opacity: 0
                        }, 200, "swing", (function() {
                            o.attr("d", c(t, 30)).animate({
                                opacity: 1
                            }, 200)
                        }
                        ))
                    }
                    ,
                    o
                }
            })
        },
        92789: function(e) {
            function t(e) {
                return t = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                t(e)
            }
            e.exports = function(e) {
                return "string" == typeof (n = e) || "object" === t(n) && n.constructor === String ? 0 === e.indexOf("http://") || 0 === e.indexOf("https://") || 0 === e.indexOf("//") ? e.replace(/\(/g, "_").replace(/\)/g, "_").replace(/'/g, "%27") : encodeURIComponent(e).replace(/%2F/g, "/").replace(/'/g, "%27") : "";
                var n
            }
        },
        62780: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                replaceParamsBySessionLink: function() {
                    return i
                },
                valueOrCacheValue: function() {
                    return s
                }
            });
            var r = n(40105)
              , o = n.n(r)
              , a = ["backbutton", "backlink", "q"];
            function i(e) {
                if ("" === e)
                    return e;
                if ("undefined" == typeof sessionStorage)
                    return e;
                var t = e.substring(1).split("&")
                  , n = "cache_" + (new Date).getTime() + "_";
                return "?" + o()(t, (function(e) {
                    for (var t = 0; t < a.length; ++t)
                        if (e.startsWith(a[t] + "=") && !e.startsWith(a[t] + "=cache_")) {
                            var r = n + t;
                            return sessionStorage.setItem(r, decodeURIComponent(e.substring(a[t].length + 1))),
                            a[t] + "=" + r
                        }
                    return e
                }
                )).join("&")
            }
            function s(e) {
                return null == e ? e : e.startsWith("cache_") ? sessionStorage.getItem(e) : e
            }
        },
        98854: function(e, t, n) {
            n(92084);
            var r = n(45250)
              , o = n(15570)
              , a = n(61743)
              , i = a.getPlatform
              , s = a.isIOS
              , u = a.isTouchDevice
              , c = n(24846).imageToDataURL
              , l = function(e, t, n, a, l, d, f, p, h) {
                var m = h.widgetstorage;
                function g(e) {
                    t(document.createElement("div")).html('<svg width="12" height="12" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" fill="currentcolor" class="ml2"><path xmlns="http://www.w3.org/2000/svg" d="M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"></path></svg>').addClass("chevron").appendTo(e)
                }
                function v(e, n) {
                    return t(document.createElement("div")).addClass("bw-toolbutton").attr("id", e).append(t(document.createElement("div")).addClass("bw-icon " + n))
                }
                return {
                    addColorButtons: function(e, n) {
                        var r = [{
                            datacolor: "white",
                            classname: "bw-color-white"
                        }, {
                            datacolor: "black",
                            classname: "bw-color-black"
                        }, {
                            datacolor: "red",
                            classname: "bw-color-red"
                        }, {
                            datacolor: "orange",
                            classname: "bw-color-orange"
                        }, {
                            datacolor: "yellow",
                            classname: "bw-color-yellow"
                        }, {
                            datacolor: "#00de00",
                            classname: "bw-color-green"
                        }, {
                            datacolor: "blue",
                            classname: "bw-color-blue"
                        }, {
                            datacolor: "#bc00de",
                            classname: "bw-color-purple"
                        }, {
                            datacolor: "brown",
                            classname: "bw-color-brown"
                        }]
                          , o = t(e);
                        if (o.addClass("color-button-bar"),
                        !0 === n) {
                            g(t(document.createElement("div")).addClass("bw-toolbutton").attr("id", "color_popup").css({
                                position: "relative"
                            }).append(t(document.createElement("div")).append(t(document.createElement("div")).addClass("bw-icon bw-icon-fill-drop").css({
                                position: "absolute"
                            })).append(t(document.createElement("div")).addClass("bw-icon bw-icon-fill-drop-small bw-color-blue"))).appendTo(o));
                            for (var a = t(document.createElement("div")).attr("id", "colorpopup").appendTo(t("body")), i = 0; i < r.length; ++i)
                                t(document.createElement("a")).attr({
                                    "data-color": r[i].datacolor,
                                    href: "#"
                                }).append(t(document.createElement("i")).addClass("bw-icon bw-icon-fill-drop-small " + r[i].classname)).appendTo(a)
                        } else
                            for (i = 0; i < r.length; ++i)
                                t(document.createElement("div")).addClass("bw-toolbutton colorbutton").attr("data-color", r[i].datacolor).append(t(document.createElement("div")).addClass("bw-icon bw-icon-fill-drop-small " + r[i].classname)).appendTo(o)
                    },
                    addZoomButtons: function(e, n) {
                        var r = t(e);
                        r.addClass("tool-button-bar"),
                        !0 === n && !1 === u() && (v("zoom_in_drawing", "bw-icon-zoom-in").appendTo(r),
                        v("zoom_out_drawing", "bw-icon-zoom-out").appendTo(r))
                    },
                    addWidthButtons: function(e, n) {
                        var r = [{
                            datasize: 2,
                            datafontsize: 16,
                            classname: "bw-icon-smalldot"
                        }, {
                            datasize: 6,
                            datafontsize: 20,
                            classname: "bw-icon-mediumdot"
                        }, {
                            datasize: 14,
                            datafontsize: 24,
                            classname: "bw-icon-largedot"
                        }]
                          , o = t(e);
                        if (o.addClass("width-button-bar"),
                        !0 === n) {
                            g(t(document.createElement("div")).addClass("bw-toolbutton").attr("id", "width_popup").css({
                                position: "relative"
                            }).append(t(document.createElement("div")).addClass("bw-icon bw-icon-mediumdot")).appendTo(o));
                            for (var a = t(document.createElement("div")).attr("id", "widthpopup").appendTo(t("body")), i = 0; i < r.length; ++i)
                                t(document.createElement("a")).attr({
                                    "data-size": r[i].datasize + "",
                                    "data-fontsize": r[i].datafontsize + "",
                                    href: "#"
                                }).append(t(document.createElement("i")).addClass("bw-icon " + r[i].classname)).appendTo(a)
                        } else
                            for (i = 0; i < r.length; ++i)
                                t(document.createElement("div")).addClass("bw-toolbutton").attr({
                                    "data-size": r[i].datasize + "",
                                    "data-fontsize": r[i].datafontsize + ""
                                }).append(t(document.createElement("div")).addClass("bw-icon " + r[i].classname)).appendTo(o)
                    },
                    addDrawToolButtons: function(e, n, r, o, a) {
                        var i = [{
                            id: "drawtool",
                            classname: "bw-icon-pencil"
                        }, {
                            id: "linetool",
                            classname: "bw-icon-line"
                        }, {
                            id: "texttool",
                            classname: "bw-icon-text"
                        }, {
                            id: "eraser",
                            classname: "bw-icon-eraser"
                        }];
                        r && i.unshift({
                            id: "pantool",
                            classname: "bw-icon-pan"
                        });
                        var s = t(e);
                        if (s.addClass("tool-button-bar"),
                        !0 === o) {
                            g(v("tool_popup", "bw-icon-pencil").css({
                                position: "relative"
                            }).appendTo(s));
                            for (var u = t(document.createElement("div")).attr("id", "toolpopup").appendTo(t("body")), c = 0; c < i.length; ++c)
                                t(document.createElement("a")).attr({
                                    "data-tool": i[c].id,
                                    href: "#"
                                }).append(t(document.createElement("i")).addClass("bw-icon " + i[c].classname)).appendTo(u)
                        } else
                            for (c = 0; c < i.length; ++c)
                                v((p = i[c]).id, p.classname).appendTo(s);
                        if (!0 === n && (!t.browser.msie || 10 !== t.browser.version))
                            if (navigator.mediaDevices && "function" == typeof navigator.mediaDevices.getUserMedia) {
                                var l = [{
                                    id: "cameratool-upload",
                                    classname: "bw-icon-share"
                                }, {
                                    id: "cameratool-camera",
                                    classname: "bw-icon-camera"
                                }];
                                if (!0 === o) {
                                    g(v("cameratool_popup", "bw-icon-camera").css({
                                        position: "relative"
                                    }).appendTo(s));
                                    for (var d = t(document.createElement("div")).attr("id", "camerapopup").appendTo(t("body")), f = 0; f < l.length; ++f)
                                        t(document.createElement("a")).attr({
                                            "data-tool": l[f].id,
                                            href: "#"
                                        }).append(t(document.createElement("i")).addClass("bw-icon " + l[f].classname)).appendTo(d)
                                } else
                                    for (c = 0; c < l.length; ++c) {
                                        var p;
                                        v((p = l[c]).id, p.classname).appendTo(s)
                                    }
                            } else
                                v("cameratool", "bw-icon-camera").appendTo(s);
                        !0 === a && v("stickertool", "bw-icon-sticker").appendTo(s)
                    },
                    addClearUndoRedoButtons: function(e) {
                        var n = t(e);
                        v("reset_image", "bw-icon-trash").appendTo(n),
                        v("undo", "bw-icon-undo").appendTo(n),
                        v("redo", "bw-icon-redo").appendTo(n)
                    },
                    addPhotoEditingButtons: function(e) {
                        var n = t(e);
                        v("zoom_in", "bw-icon-grow").appendTo(n),
                        v("zoom_out", "bw-icon-shrink").appendTo(n),
                        v("rotate_left", "bw-icon-rotate-left").appendTo(n),
                        v("rotate_right", "bw-icon-rotate-right").appendTo(n),
                        v("accept_image", "bw-icon-accept").appendTo(n),
                        v("reject_image", "bw-icon-reject").appendTo(n)
                    },
                    createWhiteboard: function(u) {
                        var h, g, v, w, b, y, C, x = u.topselector, E = u.toolbarselector || u.topselector, k = x + " " + u.canvasselector, S = u.texteditselector || x + " #textedit", T = u.toolbarselector ? u.canvasselector + ", " + u.toolbarselector : u.topselector, _ = e.create(r.pick(u, ["background_resize_policy", "transparentbackground", "background_image", "image_on_top"])), A = {
                            x: 0,
                            y: 0
                        }, O = 1, D = 1;
                        !0 === u.createCanvas && t(document.createElement("div")).attr("id", "canvasdiv").append(t(document.createElement("canvas")).attr("id", "canvas").attr({
                            width: u.width,
                            height: u.height
                        }).text("Your browser does not support the HTML 5 Canvas.")).appendTo(k);
                        var I = t(k + " #canvas")[0]
                          , P = I.getContext("2d")
                          , R = !1;
                        function L(e) {
                            if (!R || e) {
                                var t = I.width
                                  , n = I.height;
                                0 !== t && 0 !== n && (R = !0,
                                O = _.backgroundImage.scale(t, n),
                                A = _.backgroundImage.origin(t, n, O),
                                D = _.backgroundImage.drawScale())
                            }
                        }
                        _.initializeBackgroundImage().then((function() {
                            L(!0),
                            Ke()
                        }
                        ));
                        var N = !0 === u.image_on_top;
                        function F() {
                            I.width = I.width,
                            _.clearPage(I, P),
                            Ke()
                        }
                        function M(e) {
                            a.showConfirmationDialog(n("Are you sure?"), n("Clear the image and start over?"), (function() {
                                F(),
                                e && e(),
                                null !== Ye && Ye()
                            }
                            ), null, n("Yes, clear the image"), n("No, keep my image"))
                        }
                        function j(e) {
                            w && w.removeClass("bw-selected"),
                            (w = t(e)).addClass("bw-selected"),
                            h = t(e).data("color")
                        }
                        function q() {
                            j(this)
                        }
                        function B(e) {
                            for (var t = e.split(" "), n = 0; n < t.length; ++n)
                                if (0 === t[n].indexOf("bw-color"))
                                    return t[n];
                            return ""
                        }
                        function W(e) {
                            v = t(e).data("size"),
                            y = t(e).data("fontsize"),
                            C && C.removeClass("bw-selected"),
                            (C = t(e)).addClass("bw-selected")
                        }
                        function U() {
                            W(this)
                        }
                        t(E + " #reset_image").tapOrClick((function() {
                            M()
                        }
                        )),
                        t(E + " #undo").tapOrClick((function(e) {
                            _.undo(),
                            null !== Ye && Ye(),
                            Ke()
                        }
                        )),
                        t(E + " #redo").tapOrClick((function(e) {
                            _.redo(),
                            Ke(),
                            null !== Ye && Ye()
                        }
                        )),
                        null != u.toolsaspopup && "no" != u.toolssaspopup ? (t(E + " #tool_popup").on("toolbarItemClick", (function(e, n) {
                            switch (t(n).attr("data-tool")) {
                            case "pantool":
                                Se();
                                break;
                            case "drawtool":
                                Ee();
                                break;
                            case "linetool":
                                ke();
                                break;
                            case "texttool":
                                xe();
                                break;
                            case "eraser":
                                Le()
                            }
                            t(this).find("div.bw-icon").removeClass().addClass(t(n).find("i").attr("class")),
                            t(this).data("toolbarObj").hide()
                        }
                        )),
                        t(E + " #tool_popup").toolbar({
                            content: "#toolpopup",
                            position: u.toolsaspopup,
                            hideOnClick: !0
                        }).on("toolbarShown", (function() {
                            t(E).trigger("whiteboardToolbarShown")
                        }
                        ))) : (t(E + " #pantool").tapOrClick(Se),
                        t(E + " #drawtool").tapOrClick(Ee),
                        t(E + " #linetool").tapOrClick(ke),
                        t(E + " #texttool").tapOrClick(xe),
                        t(E + " #eraser").tapOrClick(Le)),
                        t(E + " #zoom_in_drawing").tapOrClick((function() {
                            var e = O;
                            O = Math.min(Fe, 1.25 * O);
                            var n = t(k)
                              , r = n.width()
                              , o = n.height();
                            A.x = (A.x - r / 2) * O / e + r / 2,
                            A.y = (A.y - o / 2) * O / e + o / 2,
                            Ke()
                        }
                        )),
                        t(E + " #zoom_out_drawing").tapOrClick((function() {
                            var e = O;
                            O = Math.max(Me, O / 1.25);
                            var n = t(k)
                              , r = n.width()
                              , o = n.height();
                            A.x = (A.x - r / 2) / (e / O) + r / 2,
                            A.y = (A.y - o / 2) / (e / O) + o / 2,
                            Ke()
                        }
                        )),
                        null != u.toolsaspopup && "no" != u.toolssaspopup ? (t(E + " #cameratool_popup").on("toolbarItemClick", (function(e, r) {
                            switch (t(r).attr("data-tool")) {
                            case "cameratool-upload":
                                !function(e) {
                                    we(),
                                    -1 === i().indexOf("preview") ? t(e).closest(".w-cover").find(".take-picture-field").click() : a.showAlert(n("Accessing the camera and photo library does not work on this platform."), n("Camera not supported"))
                                }(this);
                                break;
                            case "cameratool-camera":
                                _e()
                            }
                            t(this).data("toolbarObj").hide()
                        }
                        )),
                        t(E + " #cameratool_popup").toolbar({
                            content: "#camerapopup",
                            position: u.toolsaspopup,
                            hideOnClick: !0
                        }).on("toolbarShown", (function() {
                            t(E).trigger("whiteboardToolbarShown")
                        }
                        ))) : (t(E + " #cameratool-upload").click(Te),
                        t(E + " #cameratool-camera").click((function() {
                            _e()
                        }
                        ))),
                        t(E + " #cameratool").click(Te),
                        t(E + " #stickertool").click((function() {
                            var e = t(document.createElement("div")).addClass("bw-popup-wrapper bw-centering-container").appendTo("body")
                              , n = t(document.createElement("div")).addClass("stickers bw-centered").appendTo(e);
                            function r() {
                                e.remove()
                            }
                            function o(e) {
                                e.preventDefault(),
                                e.stopPropagation();
                                var n = t(this);
                                r(),
                                Re(n.attr("src"), !0)
                            }
                            e.click(r);
                            for (var a = 0; a < u.stickers.length; ++a)
                                t(document.createElement("img")).attr("src", u.stickers[a].sources[0].src).addClass("sticker").on("dragstart", Ae).tapOrClick(o).appendTo(n)
                        }
                        )),
                        t(E + " #textedit").blur(be.bind(null, !0)),
                        t(E + " #zoom_in").tapOrClick((function() {
                            var e = t(x + " .photo-placer")
                              , n = 1.1
                              , r = e.width() * n
                              , o = e.height() * n;
                            e.width(r),
                            e.height(o);
                            var a = (1 - n) * e.width() / 2
                              , i = (1 - n) * e.height() / 2
                              , s = e.offset();
                            e.offset({
                                top: s.top + i,
                                left: s.left + a
                            })
                        }
                        )),
                        t(E + " #zoom_out").tapOrClick((function() {
                            var e = t(x + " .photo-placer")
                              , n = 1 / 1.1
                              , r = e.width() * n
                              , o = e.height() * n;
                            e.width(r),
                            e.height(o);
                            var a = (1 - n) * e.width() / 2
                              , i = (1 - n) * e.height() / 2
                              , s = e.offset();
                            e.offset({
                                top: s.top + i,
                                left: s.left + a
                            })
                        }
                        )),
                        t(E + " #rotate_left").tapOrClick((function() {
                            Ie -= 15,
                            Oe(t(x + " .photo-placer"), Ie)
                        }
                        )),
                        t(E + " #rotate_right").tapOrClick((function() {
                            Ie += 15,
                            Oe(t(x + " .photo-placer"), Ie)
                        }
                        )),
                        t(E + " #accept_image").tapOrClick((function() {
                            var e = t(x + " .photo-placer")
                              , r = e.width()
                              , o = e.height()
                              , i = e.position()
                              , s = e.attr("data-blob")
                              , u = "true" === e.find("img").attr("sticker")
                              , l = Ie * Math.PI / 180;
                            Oe(e, 0);
                            var d = e.position();
                            Oe(e, Ie);
                            var f = d.left - i.left
                              , p = d.top - i.top
                              , h = t(x + " #drawingareawrapper")
                              , g = t(x + " #drawingarea")
                              , v = h.length > 0 && g.length > 0 ? parseInt(h.css("padding-left")) + parseInt(g.css("border-left-width")) : 0
                              , w = h.length > 0 && g.length > 0 ? parseInt(h.css("padding-top")) + parseInt(g.css("border-top-width")) : 0;
                            function b(e, t) {
                                var n = new Image;
                                n.onload = function() {
                                    var e = (i.left + r / 2 + f - v - A.x) / O
                                      , a = (i.top + o / 2 + p - w - A.y) / O;
                                    _.addPhoto(n, t, e, a, r / O, o / O, l),
                                    null !== Ye && Ye(),
                                    Ke()
                                }
                                ,
                                n.onerror = function(e) {
                                    console.log("Error loading image (1)"),
                                    console.log(e)
                                }
                                ,
                                "data:" !== e.substr(0, 5) && (n.crossOrigin = "Anonymous",
                                e += (-1 === e.indexOf("?") ? "?" : "&") + "bw_cors=1"),
                                n.src = e,
                                Pe()
                            }
                            if (u)
                                if (s) {
                                    var y = s.startsWith("http:") || s.startsWith("https:") ? s : window.location.protocol + s;
                                    console.log("addImage", y),
                                    b(y, y)
                                } else
                                    a.showAlert(n("Error using picture"));
                            else {
                                var C = t(document.createElement("img"));
                                C.appendTo(e),
                                C.load((function() {
                                    var t = C.width()
                                      , r = C.height()
                                      , o = e.width()
                                      , i = e.height()
                                      , s = c(C[0], {
                                        width: Math.min(t, o),
                                        height: Math.min(r, i),
                                        targetJpgSize: 25e4
                                    });
                                    C.remove(),
                                    m.registerImage(s).done((function(e) {
                                        b(s, e)
                                    }
                                    )).fail((function() {
                                        a.showAlert(n("Could not store picture"), n("Error using picture"))
                                    }
                                    ))
                                }
                                )),
                                C.error((function(e) {
                                    console.log("Error loading image (2)"),
                                    console.log(e)
                                }
                                )),
                                "http:" !== window.location.protocol && "https:" !== window.location.protocol || (C[0].crossOrigin = "Anonymous"),
                                C.attr("src", s)
                            }
                        }
                        )),
                        t(E + " #reject_image").tapOrClick((function() {
                            Pe()
                        }
                        )),
                        t.fn.enterKey = function(e) {
                            return this.each((function() {
                                t(this).keypress((function(t) {
                                    13 == (t.keyCode ? t.keyCode : t.which) && e.call(this, t)
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        t(S).enterKey(be.bind(null, !1)),
                        g = _.backgroundImage.isDefined() || !0 === u.transparentbackground ? "background" : "white",
                        null != u.colorsaspopup && "no" != u.colorsaspopup ? (t(E + " #color_popup").on("toolbarItemClick", (function(e, n) {
                            j(n);
                            var r = t(this).find(".bw-icon-fill-drop-small");
                            r.removeClass(B(r.attr("class"))).addClass(B(t(n).find("i").attr("class"))),
                            t(this).data("toolbarObj").hide()
                        }
                        )),
                        t(E + " #color_popup").toolbar({
                            content: "#colorpopup",
                            position: u.colorsaspopup,
                            hideOnClick: !0
                        }).on("toolbarShown", (function() {
                            t(E).trigger("whiteboardToolbarShown")
                        }
                        )),
                        h = "blue") : (t(E + " .colorbutton").each((function(e, n) {
                            t(n).css("color", l.light[t(n).data("color")]),
                            t(n).tapOrClick(q)
                        }
                        )),
                        j(t(E + " .colorbutton")[1]),
                        h = "black"),
                        null != u.widthaspopup && "no" != u.widthsaspopup ? (t(E + " #width_popup").on("toolbarItemClick", (function(e, n) {
                            W(n),
                            t(this).find("div.bw-icon").removeClass().addClass(t(n).find("i").attr("class")),
                            t(this).data("toolbarObj").hide()
                        }
                        )),
                        t(E + " #width_popup").toolbar({
                            content: "#widthpopup",
                            position: u.widthaspopup,
                            hideOnClick: !0
                        }).on("toolbarShown", (function() {
                            t(E).trigger("whiteboardToolbarShown")
                        }
                        )),
                        v = 6,
                        y = 20) : (t(E + " #width-buttons").children("li").each((function(e, n) {
                            t(n).tapOrClick(U)
                        }
                        )),
                        W(t(E + " #width-buttons li:first-child")[0])),
                        I.addEventListener("mousedown", (function(e) {
                            H || (H = !0,
                            Ce.start({
                                x: e.clientX,
                                y: e.clientY
                            }))
                        }
                        ), !1),
                        I.addEventListener("mousemove", (function(e) {
                            H && Ce.move({
                                x: e.clientX,
                                y: e.clientY
                            })
                        }
                        ), !1),
                        I.addEventListener("mouseup", Ne, !1),
                        I.addEventListener("mouseleave", Ne, !1),
                        I.addEventListener("touchstart", (function(e) {
                            if (e.preventDefault(),
                            !0 !== Ue) {
                                if (!0 === We && Be(e, ze)) {
                                    if (!0 !== u.allow_pan)
                                        return;
                                    return He = e.changedTouches[0].identifier,
                                    void Qe(e, ze, He)
                                }
                                1 === e.changedTouches.length || !0 !== u.allow_pan ? function(e, t) {
                                    We = !0,
                                    Ue = !1;
                                    var n = qe(e, t);
                                    Ce.start(n)
                                }(e, ze = e.changedTouches[0].identifier) : (ze = e.changedTouches[0].identifier,
                                He = e.changedTouches[1].identifier,
                                Qe(e, ze, He))
                            }
                        }
                        ), !1),
                        I.addEventListener("touchend", Ve, !1),
                        I.addEventListener("touchcancel", Ve, !1),
                        I.addEventListener("touchmove", (function(e) {
                            if (e.preventDefault(),
                            We) {
                                var t = qe(e, ze);
                                if (!t)
                                    return;
                                Ce.move(t)
                            } else if (Ue) {
                                var n = Be(e, ze)
                                  , r = Be(e, He);
                                if (null === n || null === r)
                                    return void (Ue = !1);
                                je.move(n, r)
                            }
                        }
                        ), !1),
                        _.drawScreen(I, P);
                        var z, H = !1, Q = 0;
                        function V(e, n, r) {
                            var o = t(e).offset();
                            return {
                                x: n - o.left + window.pageXOffset,
                                y: r - o.top + window.pageYOffset
                            }
                        }
                        function Y(e, t, n, r) {
                            var o, a, i = V(I, e, t);
                            o = i.x,
                            a = i.y,
                            P.beginPath(),
                            "background" != n ? Q ? (P.strokeStyle = l.light[n],
                            P.lineWidth = r * O,
                            P.moveTo(o, a),
                            P.lineTo(Q.x, Q.y),
                            P.stroke()) : (P.fillStyle = l.light[n],
                            P.arc(o, a, r / 2 * O, Math.PI / 180 * 0, Math.PI / 180 * 360, !1),
                            P.fill(),
                            P.closePath()) : _.erase(P, o, a, A, O),
                            N && _.drawImageTranslated(P, A, O);
                            var s = {};
                            s.x = (o - A.x) / O,
                            s.y = (a - A.y) / O,
                            z.push(s),
                            Q = {
                                x: o,
                                y: a
                            }
                        }
                        function K(e, t) {
                            var n = e.x - t.x
                              , r = e.y - t.y;
                            return Math.sqrt(n * n + r * r)
                        }
                        var G = 2.5;
                        function $(e, t, n) {
                            z = [],
                            Q = 0,
                            Y(e.x, e.y, t, n)
                        }
                        function J(e, t, n) {
                            Y(e.x, e.y, t, n)
                        }
                        function X(e, t, n) {
                            (function(e, t) {
                                var n = "background" === e ? z : function(e) {
                                    var t = [];
                                    t.push(e[0]);
                                    for (var n = 0, r = 1; r < e.length - 1; ++r)
                                        K(e[n], e[r]) >= G && (t.push(e[r]),
                                        n = r);
                                    return t.push(e[e.length - 1]),
                                    t
                                }(z);
                                _.addLine(n, e, t),
                                null !== Ye && Ye()
                            }
                            )(t, n),
                            Ke()
                        }
                        var Z, ee = {
                            start: function(e) {
                                $(e, h, v * D)
                            },
                            move: function(e) {
                                J(e, h, v * D)
                            },
                            end: function(e) {
                                X(0, h, v * D)
                            }
                        }, te = {
                            start: function(e) {
                                z = [],
                                Q = 0,
                                Y(e.x, e.y, h, v * D),
                                Y(e.x, e.y, h, v * D),
                                te.activeLine = _.addLine(z, h, v * D),
                                null !== Ye && Ye()
                            },
                            move: function(e) {
                                z = [],
                                Y(e.x, e.y, h, v * D),
                                te.activeLine.points[1] = z[0],
                                Ke()
                            },
                            end: function(e) {
                                K(te.activeLine.points[0], te.activeLine.points[1]) < 5 && _.undo(),
                                null !== Ye && Ye(),
                                Ke()
                            }
                        }, ne = {
                            start: function(e) {},
                            move: function(e) {},
                            end: function(e) {}
                        }, re = {
                            start: function(e) {
                                Z = e,
                                u.panbackground && u.panbackground.start && u.panbackground.start({
                                    pageX: e.x,
                                    pageY: e.y
                                })
                            },
                            move: function(e) {
                                u.panbackground && !1 !== u.panbackground.panDisabled() || (A = {
                                    x: A.x + e.x - Z.x,
                                    y: A.y + e.y - Z.y
                                },
                                Z = e),
                                u.panbackground && u.panbackground.move && u.panbackground.move({
                                    pageX: e.x,
                                    pageY: e.y
                                }),
                                Ke()
                            },
                            end: function(e) {
                                u.panbackground && !1 !== u.panbackground.panDisabled() || (A = {
                                    x: A.x + e.x - Z.x,
                                    y: A.y + e.y - Z.y
                                }),
                                u.panbackground && u.panbackground.end && u.panbackground.end({
                                    pageX: e.x,
                                    pageY: e.y
                                }),
                                Ke()
                            }
                        }, oe = {
                            start: function(e) {
                                $(e, g, 14)
                            },
                            move: function(e) {
                                J(e, g, 14)
                            },
                            end: function(e) {
                                X(0, g, 14)
                            }
                        }, ae = !1;
                        function ie() {
                            var e = t(S)
                              , n = {
                                16: {
                                    x: 3,
                                    y: 2
                                },
                                20: {
                                    x: 3,
                                    y: 2
                                },
                                24: {
                                    x: 2,
                                    y: 1
                                }
                            };
                            _.addText((parseInt(e.css("left")) - A.x - ge.left + n[y].x) / O, (parseInt(e.css("top")) - A.y - ge.top + n[y].y) / O + y * D, e.val(), h, y * D),
                            null !== Ye && Ye(),
                            e.val(""),
                            Ke()
                        }
                        var se = {
                            x: -3,
                            y: -13
                        }
                          , ue = t(t(S).parent())
                          , ce = parseInt(ue.css("padding-left"))
                          , le = parseInt(ue.css("padding-right"))
                          , de = parseInt(ue.css("padding-top"))
                          , fe = t(k)
                          , pe = parseInt(fe.css("border-left-width"))
                          , he = parseInt(fe.css("border-right-width"))
                          , me = parseInt(fe.css("border-top"))
                          , ge = {
                            left: (isNaN(ce) ? 0 : ce) + (isNaN(pe) ? 0 : pe),
                            top: (isNaN(de) ? 0 : de) + (isNaN(me) ? 0 : me)
                        };
                        function ve(e, n, r) {
                            var o = t(S);
                            ae && "" !== o.val() && ie(),
                            o.css({
                                left: e + se.x + ge.left + "px",
                                top: n + se.y + ge.top + "px",
                                display: "block",
                                "font-size": 100 * O * y / 16 + "%",
                                color: l.light[h],
                                width: ue.width() - e - le - he - 2 + "px"
                            }),
                            o.focus(),
                            ae = !0
                        }
                        function we() {
                            t(S).hide(),
                            ae = !1
                        }
                        function be(e, n) {
                            var r = t(S);
                            return "" === r.val() ? (we(),
                            ae = !1) : (ie(),
                            e ? (we(),
                            ae = !1) : ve(parseInt(r.css("left")) - se.x - ge.left, parseInt(r.css("top")) - se.y - ge.top + y * O * D)),
                            n.stopPropagation(),
                            !0
                        }
                        var ye = {
                            start: function(e) {},
                            move: function(e) {},
                            end: function(e) {
                                var t = V(I, e.x, e.y);
                                ve(t.x, t.y)
                            }
                        }
                          , Ce = ee;
                        function xe() {
                            b && b.removeClass("bw-selected"),
                            (b = t(E + " #texttool")).addClass("bw-selected"),
                            Ce = ye,
                            t(T).attr("selected-tool", "text")
                        }
                        function Ee() {
                            b && b.removeClass("bw-selected"),
                            (b = t(E + " #drawtool")).addClass("bw-selected"),
                            we(),
                            Ce = ee,
                            t(T).attr("selected-tool", "draw")
                        }
                        function ke() {
                            b && b.removeClass("bw-selected"),
                            (b = t(E + " #linetool")).addClass("bw-selected"),
                            we(),
                            Ce = te,
                            t(T).attr("selected-tool", "line")
                        }
                        function Se() {
                            b && b.removeClass("bw-selected"),
                            (b = t(E + " #pantool")).addClass("bw-selected"),
                            we(),
                            Ce = re,
                            t(T).attr("selected-tool", "pan")
                        }
                        function Te() {
                            we(),
                            -1 === i().indexOf("preview") ? t(this).closest(".w-cover").find(".take-picture-field").click() : a.showAlert(n("Accessing the camera and photo library does not work on this platform."), n("Camera not supported"))
                        }
                        function _e(e) {
                            we(),
                            p.takePictureOrShowError().then((function(e) {
                                var t = e.url;
                                Pe(),
                                Re(t)
                            }
                            ))
                        }
                        function Ae(e) {
                            return e.preventDefault(),
                            !1
                        }
                        function Oe(e, t) {
                            var n = "rotate(" + t + "deg)";
                            e.get(0).style.transform = n,
                            e.get(0).style.oTransform = n,
                            e.get(0).style.msTransform = n,
                            e.get(0).style.mozTransform = n,
                            e.get(0).style.webkitTransform = n
                        }
                        Ee();
                        var De, Ie = 0;
                        function Pe() {
                            var e = t(x + " .photo-placer");
                            e.css({
                                background: "transparent"
                            }),
                            e.addClass("hidden"),
                            Oe(e, 0),
                            e.height(e.attr("data-start-height")),
                            e.width(e.attr("data-start-width")),
                            e.css({
                                left: 0,
                                top: 0
                            }),
                            t(x + " " + u.maintoolbar).removeClass("hidden"),
                            t(x + " " + u.phototoolbar).addClass("hidden"),
                            o.stop("positioning whiteboard image"),
                            Ie = 0
                        }
                        function Re(e, n) {
                            var r = t(x).find(".photo-placer");
                            r.empty();
                            var a = t(document.createElement("img")).on("dragstart", Ae).css({
                                "image-orientation": "0"
                            });
                            a.load((function() {
                                var t = l = a.width()
                                  , o = l / (c = a.height())
                                  , i = r.width()
                                  , u = r.height();
                                if (l / i > c / u)
                                    var c = (l = Math.min(i, l)) / o;
                                else
                                    var l = (c = Math.min(u, c)) * o;
                                r.height(c),
                                r.width(l),
                                a.attr({
                                    width: "100%",
                                    height: "100%"
                                }),
                                r.css("overflow", "hidden"),
                                s() && !1 === n ? d(event.target.files[0], {
                                    width: t,
                                    height: 0,
                                    crop: !1,
                                    quality: 100,
                                    rotate: 0,
                                    callback: function(e, t, n) {
                                        r.attr("data-blob", e)
                                    }
                                }) : r.attr("data-blob", e)
                            }
                            )),
                            a.attr({
                                src: e,
                                sticker: n ? "true" : "false"
                            }).appendTo(r),
                            r.removeClass("hidden").css({
                                width: "100%",
                                height: "100%",
                                top: 0,
                                left: 0
                            }),
                            t(x + " " + u.maintoolbar).addClass("hidden"),
                            t(x + " " + u.phototoolbar).removeClass("hidden"),
                            o.start("positioning whiteboard image")
                        }
                        function Le() {
                            b && b.removeClass("bw-selected"),
                            (b = t(E + " #eraser")).addClass("bw-selected"),
                            we(),
                            Ce = oe,
                            t(T).attr("selected-tool", "eraser")
                        }
                        function Ne(e) {
                            H && (H = !1,
                            Ce.end({
                                x: e.clientX,
                                y: e.clientY
                            }))
                        }
                        !0 === u.enablephoto && (De = t(x),
                        !("url"in window) && "webkitURL"in window && (window.URL = window.webkitURL),
                        De.find(" .take-picture-field").on("change", (function e(n) {
                            var r = t(x);
                            1 === n.target.files.length && 0 === n.target.files[0].type.indexOf("image/") && (Pe(),
                            Re(URL.createObjectURL(n.target.files[0])));
                            var o = r.find(" .take-picture-field");
                            o.replaceWith(t(o[0].outerHTML)),
                            r.find(" .take-picture-field").on("change", e)
                        }
                        ))),
                        (!0 === u.enablephoto || u.stickers && u.stickers.length > 0) && function() {
                            var e = t(x).find(".photo-placer");
                            e.get(0).addEventListener("touchstart", (function(e) {
                                e.preventDefault()
                            }
                            ), !1),
                            e.get(0).addEventListener("touchmove", (function(e) {
                                e.preventDefault()
                            }
                            ), !1),
                            e.get(0).addEventListener("touchend", (function(e) {
                                e.preventDefault()
                            }
                            ), !1);
                            var n = new f.Manager(e.get(0));
                            n.add(new f.Pan({
                                threshold: 0,
                                pointers: 0
                            })),
                            n.add(new f.Rotate({
                                threshold: 0
                            })).recognizeWith(n.get("pan")),
                            n.add(new f.Pinch({
                                threshold: 0
                            })).recognizeWith([n.get("pan"), n.get("rotate")]);
                            var r = null;
                            function o(t) {
                                null === r && (r = {
                                    pos: e.offset(),
                                    width: e.width(),
                                    height: e.height(),
                                    center: {
                                        x: e.offset().left,
                                        y: e.offset().top
                                    }
                                }),
                                t && !r.hasOwnProperty("last_rotation") && (r.last_rotation = Ie - t.rotation,
                                r.center = t.center)
                            }
                            function a(t) {
                                var n = Math.max(.3, t.scale);
                                e.offset({
                                    top: r.pos.top + t.deltaY + (r.center.y - r.pos.top) * (1 - n),
                                    left: r.pos.left + t.deltaX + (r.center.x - r.pos.left) * (1 - n)
                                }),
                                e.width(r.width * n),
                                e.height(r.height * n),
                                r.hasOwnProperty("last_rotation") && (Ie = r.last_rotation + t.rotation,
                                Oe(e, Ie))
                            }
                            n.on("hammer.input", (function(e) {
                                e.isFinal && (r = null)
                            }
                            )),
                            n.on("panstart panmove", (function(e) {
                                "panstart" === e.type ? o() : a(e)
                            }
                            )),
                            n.on("rotatestart rotatemove", (function(e) {
                                "rotatestart" === e.type ? o(e) : a(e)
                            }
                            )),
                            n.on("pinchstart pinchmove", (function(e) {
                                "pinchstart" === e.type ? o(e) : a(e)
                            }
                            )),
                            n.on("rotateend rotatecancel pinchend pinchcancel", (function() {
                                r && (r = null,
                                o())
                            }
                            ))
                        }();
                        var Fe = 5
                          , Me = .2
                          , je = {
                            getCenter: function(e, t) {
                                return V(I, (e.x + t.x) / 2, (e.y + t.y) / 2)
                            },
                            getDistance: function(e, t) {
                                return Math.sqrt((t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y))
                            },
                            start: function(e, t) {
                                this.center = this.getCenter(e, t),
                                this.size = this.getDistance(e, t)
                            },
                            move: function(e, t) {
                                var n = this.getCenter(e, t)
                                  , r = this.getDistance(e, t);
                                if (!0 === u.allow_zoom) {
                                    var o = Math.max(Math.min(O * r / this.size, Fe), Me)
                                      , a = this.size * o / O;
                                    O = o,
                                    A.x = (A.x - this.center.x) * a / this.size + n.x,
                                    A.y = (A.y - this.center.y) * a / this.size + n.y
                                } else
                                    A.x = A.x - this.center.x + n.x,
                                    A.y = A.y - this.center.y + n.y;
                                this.center = n,
                                this.size = r,
                                Ke()
                            },
                            end: function() {}
                        };
                        function qe(e, t) {
                            for (var n = 0; n < e.changedTouches.length; ++n)
                                if (e.changedTouches[n].identifier === t) {
                                    var r = e.changedTouches[n];
                                    return {
                                        x: r.clientX,
                                        y: r.clientY
                                    }
                                }
                            return null
                        }
                        function Be(e, t) {
                            for (var n = 0; n < e.touches.length; ++n)
                                if (e.touches[n].identifier === t) {
                                    var r = e.touches[n];
                                    return {
                                        x: r.clientX,
                                        y: r.clientY
                                    }
                                }
                            return null
                        }
                        var We = !1
                          , Ue = !1
                          , ze = 0
                          , He = 0;
                        function Qe(e, t, n) {
                            We = !1,
                            Ue = !0;
                            var r = Be(e, t)
                              , o = Be(e, n);
                            je.start(r, o)
                        }
                        function Ve(e) {
                            if (e.preventDefault(),
                            We) {
                                var t = qe(e, ze);
                                if (!t)
                                    return;
                                We = !1,
                                Ce.end(t)
                            } else if (Ue) {
                                var n = qe(e, ze)
                                  , r = qe(e, He);
                                null === n && null === r || (je.end(),
                                Ue = !1)
                            }
                        }
                        var Ye = null;
                        function Ke() {
                            I.width = I.width;
                            var e = I.getContext("2d");
                            _.draw(I, e, A, O)
                        }
                        return {
                            loadData: function(e) {
                                F(),
                                _.load(e, (function(e, t) {
                                    m.getImageUrl(e).always((function(e) {
                                        t(e)
                                    }
                                    ))
                                }
                                ), Ke),
                                Ke()
                            },
                            saveData: function() {
                                return _.save()
                            },
                            imgData: function(e) {
                                return _.imgData(e)
                            },
                            canvas: I,
                            onChange: function(e) {
                                Ye = e
                            },
                            redraw: Ke,
                            redrawOnResize: function(e) {
                                L(e || !u.allow_zoom),
                                Ke()
                            },
                            setReadOnly: function(e) {
                                Ce = e ? ne : ee,
                                u.maintoolbar && t(x + " " + u.maintoolbar).toggleClass("hidden", e)
                            },
                            isEmpty: function() {
                                return _.isEmpty()
                            },
                            clear: M,
                            clearPage: F,
                            setOrigin: function(e) {
                                A = e
                            },
                            selectTool: function(e) {
                                "pan" === e ? Se() : "draw" === e ? Ee() : "text" === e ? xe() : "eraser" === e ? Le() : console.log("Request to select unknown tool: " + e)
                            }
                        }
                    }
                }
            }
            .bind(null, n(82750), n(58065), n(78514), n(77752), n(54542), n(51131), n(41222), n(69225));
            e.exports = {
                bindToContext: l
            }
        },
        30692: function(e, t, n) {
            var r = n(45250).isEmpty
              , o = n(62780).valueOrCacheValue
              , a = n(99860)
              , i = a.instructionsAreEmpty
              , s = a.prepareInfoPopup
              , u = a.showInfoPopupIfFirstTimeInSession
              , c = n(4296).getUrlParams;
            n(17280),
            n(43541),
            n(46338),
            e.exports = function(e, t, n, a, l, d, f, p) {
                function h(e) {
                    if (-1 === e.indexOf("?"))
                        return e;
                    var t = /^([^?]*)\?/.exec(e);
                    if (t && 2 === t.length)
                        return t[1];
                    throw Error("Shoudln't happen")
                }
                function m(e, t) {
                    if (r(t))
                        return e;
                    var n = h(e)
                      , o = [];
                    return a.each(t, (function(e, t) {
                        o.push(e + "=" + t)
                    }
                    )),
                    n + "?" + o.join("&")
                }
                function g() {
                    var e = c(window.location.href);
                    return {
                        backlink: e.hasOwnProperty("backlink") ? o(e.backlink) : null,
                        backbutton: e.hasOwnProperty("backbutton") ? o(e.backbutton) : null
                    }
                }
                function v() {
                    var t = g().backlink
                      , n = e.getPlatform();
                    if ("ibw-platform-osx-preview" === n || "ibw-platform-win32-preview" === n)
                        console.log("Moving back by using history.back()"),
                        window.history.back();
                    else {
                        var r = window.location.origin;
                        t.startsWith(r) && (t = t.substr(r.length)),
                        console.log("Moving back by setting window.location to: " + t),
                        window.location = t
                    }
                }
                function w() {
                    var e = g()
                      , t = e.backlink
                      , n = e.backbutton;
                    null != t && (null != n ? a(document.createElement("div")).addClass("widget-backlink widget-backlink-text").safeHtml("&#9664; ").text(n).appendTo(a("body")) : a(document.createElement("div")).addClass("widget-backlink widget-backlink-icon").appendTo(a("body"))).click(v)
                }
                var b = !1;
                function y(e) {
                    if (!b) {
                        var t = a("#top-container")
                          , n = t.height()
                          , r = t.width()
                          , o = a(".closebutton-container")
                          , i = a("#top-container .bw-toolbar");
                        o.css("min-width", ""),
                        i.css("min-width", "");
                        var s = o.width()
                          , u = i.width();
                        if (i.css("min-width", s),
                        o.css("min-width", u),
                        a(".title-container").css("max-width", r - 2 * Math.max(s, u)),
                        !0 !== e && a("#top-container").height() !== n) {
                            b = !0;
                            try {
                                window.onresize && window.onresize()
                            } catch (e) {
                                console.error("Error when calling onResize during centerWidgetTitle"),
                                console.error(e)
                            }
                            b = !1
                        }
                    }
                }
                function C() {
                    a("#top-container").removeClass("bw-show-popup-menu"),
                    a("#title-toolbar").appendTo(a("#top-container .bw-toolbar")),
                    a(".bw-menu-overlay").remove()
                }
                function x() {
                    if (!(a("#menubutton").length > 0)) {
                        var e = a("#top-container .bw-toolbar");
                        if (e.children(":not(.outside-popup)").length > 1) {
                            e.removeClass("bw-toolbar");
                            var t = a(document.createElement("div")).addClass("bw-toolbar").attr("role", "menubar").appendTo(a(".titlebar-layout"));
                            e.find(".outside-popup").each((function() {
                                a(this).appendTo(t)
                            }
                            )),
                            e.appendTo(t).addClass("bw-button-group"),
                            a(document.createElement("div")).attr("id", "menubutton").addClass("bw-toolbutton").append(a(document.createElement("div")).addClass("bw-icon bw-icon-menu")).makeButton(n("Menu")).tapOrClick((function() {
                                a("#top-container").hasClass("bw-show-popup-menu") ? C() : setTimeout((function() {
                                    a("#top-container").addClass("bw-show-popup-menu");
                                    var e = a(document.createElement("div")).addClass("bw-menu-overlay").appendTo("#container");
                                    setTimeout((function() {
                                        e.on("click touchend", (function() {
                                            setTimeout(C, 500)
                                        }
                                        ))
                                    }
                                    ), 350),
                                    a("#title-toolbar").appendTo(e)
                                }
                                ), 100)
                            }
                            )).appendTo(t)
                        } else
                            e.attr("role", "toolbar")
                    }
                }
                function E(e, t, n) {
                    var r = a(e)
                      , o = a(document.createElement("div")).attr("id", "container").prependTo(r).addClass("top-bottom-layout")
                      , i = a(document.createElement("div")).attr("id", "top-container").appendTo(o).addClass("top-container")
                      , s = a(document.createElement("div")).appendTo(i).addClass("titlebar-layout");
                    return a(document.createElement("div")).addClass("closebutton-container").appendTo(s),
                    a(document.createElement("div")).addClass("title-container").append(a(document.createElement("span")).attr("id", "title")).appendTo(s),
                    n && 0 !== a(n).length ? a(n).addClass("bw-toolbar").removeClass("floating-toolbar").appendTo(s) : a(document.createElement("div")).attr("id", "title-toolbar").addClass("bw-toolbar").appendTo(s),
                    x(),
                    a(t).appendTo(o).addClass("bottom-container"),
                    y(),
                    o
                }
                function k() {
                    var t = a(document.createElement("div")).addClass("bw-debug-window bw-row-container").appendTo("body")
                      , n = a(document.createElement("div")).addClass("bw-debug-output bw-row-resizing").appendTo(t);
                    function r(e) {
                        e.appendTo(n),
                        n[0].scrollTop = n[0].scrollHeight - n[0].getBoundingClientRect().height
                    }
                    function o(e) {
                        for (var t = [], n = 0; n < e.length; ++n)
                            t.push(JSON.stringify(e[n]));
                        return t.join(" ")
                    }
                    a(document.createElement("div")).addClass("bw-debug-close").text("X").tapOrClick((function() {
                        t.remove(),
                        localStorage.removeItem("bw-debug-enabled")
                    }
                    )).appendTo(t),
                    console.log = function() {
                        r(a(document.createElement("p")).safeHtml(o(arguments)))
                    }
                    ,
                    console.error = function(e, t) {
                        r(a(document.createElement("p")).css("color", "red").safeHtml(o(arguments)))
                    }
                    ,
                    window.onerror = function(e, t, n) {
                        return r(a(document.createElement("p")).attr("style", "color: red").safeHtml(e + " (" + t + ":" + n + ")")),
                        !0
                    }
                    ,
                    console.log(e.getPlatform(), navigator.platform, navigator.userAgent, window.innerWidth, window.innerHeight);
                    var i = a(document.createElement("input")).addClass("bw-debug-input bw-row-fixed").appendTo(t)
                      , s = []
                      , u = 0;
                    i.keypress((function(e) {
                        var t;
                        13 === (e.keyCode ? e.keyCode : e.which) && (t = i.val().replace(/[\u2018\u2019]/g, "'").replace(/[\u201C\u201D]/g, '"'),
                        console.log((0,
                        eval)(t)),
                        s.push(t),
                        u = s.length,
                        i.val(""))
                    }
                    )),
                    i.keydown((function(e) {
                        var t = e.keyCode ? e.keyCode : e.which;
                        38 === t ? u > 0 && (--u,
                        i.val(s[u])) : 40 === t && u < s.length && (++u === s.length ? i.val("") : i.val(s[u]))
                    }
                    ));
                    try {
                        t.draggable()
                    } catch (e) {
                        console.error("No drag support")
                    }
                }
                function S(e) {
                    var t = 0;
                    e.clickOrHold((function() {
                        t = 0
                    }
                    ), (function() {
                        3 == ++t && (function() {
                            if (!(a(".bw-debug-window").length > 0)) {
                                var e = a(document.createElement("div")).addClass("bw-debug-wrapper").appendTo("body")
                                  , t = a(document.createElement("div")).addClass("bw-debug-dialog").appendTo(e);
                                a(document.createElement("p")).text("Enter your support key:").appendTo(t);
                                var n = a(document.createElement("input")).attr("placeholder", "key").appendTo(t);
                                a(document.createElement("br")).appendTo(t),
                                a(document.createElement("button")).attr("type", "button").text("Cancel").tapOrClick((function() {
                                    e.remove()
                                }
                                )).appendTo(t),
                                a(document.createElement("button")).attr("type", "button").text("OK").tapOrClick((function() {
                                    "bw-magic" === n.val() && (k(),
                                    e.remove(),
                                    localStorage.setItem("bw-debug-enabled", "true"))
                                }
                                )).appendTo(t)
                            }
                        }(),
                        t = 0)
                    }
                    ), 2e3);
                    try {
                        "true" === localStorage.getItem("bw-debug-enabled") && k()
                    } catch (e) {}
                }
                return a((function() {
                    var t = e.getPlatform()
                      , n = a("html");
                    n.hasClass("ibw-platform-custom") || n.addClass(t)
                }
                )),
                window.custom_alert = t.showAlert,
                window.criticalAlert = t.showCriticalAlert,
                window.bw_confirmation_dialog = t.showConfirmationDialog,
                window.tr = n,
                window.getUrlParams = c,
                window.getNakedURL = h,
                window.setQueryParameters = m,
                window.createLabeledCheckbox = l.createLabeledCheckbox,
                window.createProgressBar = l.createProgressBar,
                window.createSimpleCheckbox = l.createSimpleCheckbox,
                window.createNumberButtons = l.createNumberButtons,
                window.createSimpleRadiobutton = l.createSimpleRadiobutton,
                window.createLabeledRadiobutton = l.createLabeledRadiobutton,
                window.createProgressCircle = l.createProgressCircle,
                window.URIEncodeImage = d,
                window.BWAdaptToPageProtocol = p,
                window.updateConfigCSS = f.updateConfigCSS,
                {
                    makeWidget: function(t) {
                        s((t = t || {}).instructions),
                        i(t.instructions) || "title_layout" !== t.layout || (t.layout = "title_toolbar_layout");
                        var n = a("body");
                        n.addClass("bw"),
                        t.hasOwnProperty("no-user-select") && !0 === t["no-user-select"] && n.addClass("no-user-select");
                        var r, o = t.layout || "";
                        if ("title_layout" === o ? (r = E("body", "#bottom-container")).find(".top-container").addClass("title-only") : "title_overlay_layout" === o ? ((r = E("body", "#bottom-container")).addClass("title-overlay"),
                        r.find(".top-container").addClass("title-only")) : r = "title_toolbar_layout" === o ? E("body", "#bottom-container", "#title-toolbar") : a("#container"),
                        t.hasOwnProperty("title") && "" !== t.title) {
                            var c = r.find("#title");
                            c.safeHtml(t.title).attr({
                                role: "banner"
                            }),
                            S(c)
                        } else {
                            var l = r.find(".top-container");
                            l.addClass("title-empty"),
                            S(l)
                        }
                        "ibw-platform-ipad-ibooks-epub" === e.getPlatform() && (t.hasOwnProperty("epubBlockTouchEndCheck") || (t.epubBlockTouchEndCheck = function(e) {
                            return e.srcElement instanceof SVGElement || a(e.srcElement).hasClass("epub-block")
                        }
                        ),
                        document.addEventListener("touchend", (function(e) {
                            var n = a(window).width();
                            (e.layerX < 50 || n - e.layerX < 50 || t.epubBlockTouchEndCheck(e)) && e.preventDefault()
                        }
                        ), !1),
                        t.hasOwnProperty("epubBlockTouchStartCheck") && document.addEventListener("touchstart", (function(e) {
                            t.epubBlockTouchStartCheck(e) && e.preventDefault()
                        }
                        ), !1)),
                        w(),
                        u(t.instructions, t.uuid)
                    },
                    getNakedURL: h,
                    setQueryParameters: m,
                    prependToTitleToolbar: function(e) {
                        var t = a("#title-toolbar");
                        e.prependTo(t),
                        x(),
                        y()
                    },
                    centerTitle: y,
                    getBacklinkInfo: g,
                    moveBackToPreviousWidget: v,
                    ShowBacklinkIfRequired: w
                }
            }(n(61743), n(77752), n(78514), n(58065), n(36565), n(92789), n(5562), n(120).A)
        },
        16806: function(e, t, n) {
            var r = n(59104).A
              , o = n(99870)
              , a = n(50466);
            e.exports = function(e, t, n, i) {
                function s(e, t) {
                    return i('<svg class="' + e + '" xmlns="http://www.w3.org/2000/svg" version="1.1">' + t + "</svg>")
                }
                function u(e, t, n, r) {
                    return '<line x1="' + e + '" y1="' + t + '" x2="' + n + '" y2="' + r + '" />'
                }
                function c(n) {
                    var r = i(document.createElement("div")).addClass("bw-popup-zoomable-image")
                      , o = i(document.createElement("div")).addClass("bw-zoomable-image").css({
                        background: "black url(" + n.replace(/ /g, "%20") + ") no-repeat center center",
                        "background-size": "contain"
                    }).appendTo(r);
                    i(document.createElement("div")).addClass("bw-button bw-popup-closebutton").append(i(document.createElement("div")).addClass("bw-icon-small bw-icon-close")).makeButton(t("close")).enterOrSpaceClicks().click((function(e) {
                        setTimeout(r.remove.bind(r), 0)
                    }
                    )).appendTo(r);
                    var a = s("bw-zoomable-image-zoomin", u(14.5, 4, 14.5, 26) + u(4, 14.5, 26, 14.5)).appendTo(r)
                      , c = s("bw-zoomable-image-zoomout", u(4, 14.5, 26, 14.5)).appendTo(r);
                    e.bwMakeDragAndResizable(o, a, c),
                    r.attr("tabindex", "0"),
                    r.on("keydown", (function(e) {
                        "Escape" === e.key && (e.stopPropagation(),
                        e.preventDefault(),
                        r.remove())
                    }
                    )),
                    r.appendTo(i("body")),
                    r.focus()
                }
                return {
                    create: function(e) {
                        var s, u, l, d = e.hasOwnProperty("img") ? e.img : e, f = d.sources && d.sources.length > 0 ? n(d.sources[0].src) : "", p = f, h = d.audio ? n(d.audio) : null;
                        if (e.type && "img" !== e.type)
                            s = u = i(document.createElement("div")).attr("role", "img").css({
                                background: (e.background || "") + " url(" + f.replace(/ /g, "%20") + ") no-repeat center center",
                                "background-size": (l = e.resize_policy,
                                l ? "Contain entire picture, keep aspect ratio" === l ? "contain" : "Cover entire area, keep aspect ratio" === l ? "cover" : "No resize" === l ? "" : "Cover entire area with entire picture" === l ? "100% 100%" : "contain" : "contain")
                            }),
                            h && s.css("position", "relative");
                        else {
                            s = i(document.createElement("div")).addClass(o("img", null == r ? void 0 : r.ZoomableImageWidthWrapper));
                            var m = i(document.createElement("div")).appendTo(s);
                            (u = i(document.createElement("img"))).on("load", (function(t) {
                                var n = u[0].naturalHeight / u[0].naturalWidth;
                                if (m.css({
                                    "padding-bottom": 100 * n + "%"
                                }),
                                e.maxHeight) {
                                    var r = e.maxHeight / n;
                                    r < u[0].naturalWidth ? s.css({
                                        "max-width": r + "px"
                                    }) : s.css({
                                        "max-width": u[0].naturalWidth + "px"
                                    })
                                } else
                                    s.css("max-width", u[0].naturalWidth + "px");
                                e.loadcb && e.loadcb(t)
                            }
                            )),
                            u.attr("src", f).addClass(null == r ? void 0 : r.ZoomableImageImage),
                            e.disable_drag && u.attr("draggable", !1),
                            u.appendTo(m)
                        }
                        var g = d.alttext || e.alttext;
                        if (null != g && "" !== g && (s.attr("alt", g),
                        e.type && "img" !== e.type && s.attr("aria-label", g)),
                        u.on("zoom", (function() {
                            c(p)
                        }
                        )),
                        e.disable_click || u.clickOnDraggable((function() {
                            c(p)
                        }
                        )),
                        e.disable_press || u.hammer().on("press", (function() {
                            c(p)
                        }
                        )),
                        h) {
                            var v = i(document.createElement("div"))
                              , w = a.addElement(h, v);
                            w.on("ended", (function() {
                                v.removeClass(null == r ? void 0 : r.Pound)
                            }
                            )),
                            w.on("pause", (function() {
                                v.removeClass(null == r ? void 0 : r.Pound)
                            }
                            )),
                            w.on("play", (function() {
                                v.addClass(null == r ? void 0 : r.Pound)
                            }
                            )),
                            v.addClass(o("bw-icon bw-icon-music-play-3 bw-image-play-button bw-image-audio-button", null == r ? void 0 : r.ImagePlayButton)).makeButton(t("play")).tapOrClick((function(e) {
                                e.preventDefault(),
                                e.stopPropagation(),
                                !1 === w.paused() ? w.pause() : w.play()
                            }
                            )).appendTo(s)
                        }
                        return s
                    },
                    showPopup: c
                }
            }(n(70269), n(78514), n(92789), n(58065))
        },
        22420: function(e, t, n) {
            "use strict";
            n.d(t, {
                A$: function() {
                    return j
                },
                D9: function() {
                    return N
                },
                Er: function() {
                    return d
                },
                Hv: function() {
                    return D
                },
                KR: function() {
                    return L
                },
                PH: function() {
                    return m
                },
                Qc: function() {
                    return w
                },
                W0: function() {
                    return M
                },
                aB: function() {
                    return _
                },
                aK: function() {
                    return P
                },
                dw: function() {
                    return O
                },
                fI: function() {
                    return y
                },
                o_: function() {
                    return F
                },
                pK: function() {
                    return R
                },
                sy: function() {
                    return C
                },
                tr: function() {
                    return g
                }
            });
            var r = n(1693)
              , o = n.n(r)
              , a = n(36326);
            function i(e) {
                return i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                i(e)
            }
            function s(e, t, n) {
                return (t = function(e) {
                    var t = function(e) {
                        if ("object" !== i(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== i(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(e);
                    return "symbol" === i(t) ? t : String(t)
                }(t))in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n,
                e
            }
            function u(e) {
                return function(e) {
                    if (Array.isArray(e))
                        return c(e)
                }(e) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(e) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return c(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? c(e, t) : void 0
                    }
                }(e) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function c(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var l = new (o())
              , d = function(e) {
                return !!(e && e.length >= 1)
            }
              , f = function(e, t) {
                var n = u(e);
                return n[t] || (n[t] = []),
                n
            }
              , p = function(e, t, n) {
                var r = u(e);
                return r = function(e, t, n) {
                    var r = u(e);
                    return r[n] || (r = f(r, n)),
                    r[n][t] || (r[n] = u(e[n]),
                    r[n][t] = {
                        x: t,
                        y: n
                    }),
                    r
                }(r = f(r, n), t, n),
                r
            }
              , h = function(e, t) {
                return "V" === e.dir ? {
                    x: parseInt(e.x),
                    y: parseInt(e.y) + t
                } : {
                    x: parseInt(e.x) + t,
                    y: parseInt(e.y)
                }
            }
              , m = function(e) {
                var t = []
                  , n = {
                    H: [],
                    V: []
                }
                  , r = 1;
                return e && e.forEach((function(e, o) {
                    var a = {
                        direction: e.dir,
                        coords: [],
                        description: e.description,
                        id: o
                    }
                      , i = v(t, parseInt(e.x), parseInt(e.y));
                    i && i.number ? a.number = i.number : (t = p(t, parseInt(e.x), parseInt(e.y)),
                    (i = v(t, parseInt(e.x), parseInt(e.y))) && (i.number = r,
                    t = x(t, parseInt(e.x), parseInt(e.y), i)),
                    a.number = r,
                    r++),
                    l.splitGraphemes(e.word).forEach((function(n, r) {
                        var o = h(e, r);
                        t = p(t, o.x, o.y),
                        a.coords.push(o)
                    }
                    )),
                    t = T(t, parseInt(e.x), parseInt(e.y), "firstOfWord", !0),
                    n[e.dir].push(a)
                }
                )),
                {
                    wordlist: n,
                    crosswordArray: t
                }
            }
              , g = function(e) {
                var t = [];
                return e && e.forEach((function(e) {
                    l.splitGraphemes(e.word).forEach((function(n, r) {
                        var o = h(e, r);
                        t = p(t, o.x, o.y),
                        t = T(t, o.x, o.y, "letter", n)
                    }
                    ))
                }
                )),
                t
            }
              , v = function(e, t, n) {
                return e[n] ? Object.assign({}, e[n][t]) : void 0
            }
              , w = function(e) {
                if (e)
                    return [].concat(u(e.V ? e.V : []), u(e.H ? e.H : [])).find((function(e) {
                        return e.selected
                    }
                    ))
            }
              , b = function(e, t) {
                var n = function(e) {
                    return l.splitGraphemes(e.word).map((function(t, n) {
                        return h(e, n)
                    }
                    ))
                }(t);
                return n.map((function(t) {
                    return v(e, t.x, t.y)
                }
                ))
            }
              , y = function(e, t) {
                return b(e, t).map((function(e) {
                    return (null == e ? void 0 : e.letter) || " "
                }
                )).join("")
            }
              , C = function(e, t) {
                var n = b(e, t);
                return !n.every((function(e) {
                    return " " === (null == e ? void 0 : e.letter)
                }
                )) && n.every((function(e) {
                    return null == e ? void 0 : e.letter
                }
                ))
            }
              , x = function(e, t, n, r) {
                var o = u(e);
                return o[n] && o[n][t] ? o[n] = u(o[n]) : o = p(o, t, n),
                o[n][t] = r,
                o
            }
              , E = function(e, t) {
                var n = Object.assign({}, e);
                return Object.keys(e).forEach((function(r) {
                    e[r].forEach((function(e) {
                        n = function(e, t, n) {
                            var r = u(e[t.direction]);
                            return r = r.map((function(e) {
                                if (e && e.id === t.id) {
                                    var r = Object.assign({}, t);
                                    return delete r[n],
                                    r
                                }
                                return e
                            }
                            )),
                            Object.assign(Object.assign({}, e), s({}, t.direction, r))
                        }(n, e, t)
                    }
                    ))
                }
                )),
                n
            }
              , k = function(e, t, n, r) {
                var o = u(e[t.direction]);
                return o = o.map((function(e) {
                    return e && e.id === t.id ? Object.assign(Object.assign({}, e), s({}, n, r)) : e
                }
                )),
                Object.assign(Object.assign({}, e), s({}, t.direction, o))
            }
              , S = function(e, t) {
                var n = u(e);
                return e.forEach((function(e) {
                    e.forEach((function(e) {
                        e && e[t] && (n = function(e, t, n, r) {
                            var o = u(e);
                            if (o[n] && o[n][t]) {
                                o[n] = u(o[n]);
                                var a = Object.assign({}, o[n][t]);
                                delete a[r],
                                o[n][t] = a
                            }
                            return o
                        }(n, e.x, e.y, t))
                    }
                    ))
                }
                )),
                n
            }
              , T = function(e, t, n, r, o) {
                var a = u(e);
                return a[n] && a[n][t] ? (a[n] = u(a[n]),
                a[n][t] = Object.assign({}, a[n][t]),
                a[n][t][r] = o) : (a = p(a, t, n))[n][t][r] = o,
                a
            }
              , _ = function(e, t) {
                var n = E(e, "selected");
                n = E(n, "unclear");
                var r = S(t, "selected");
                return r = S(r, "unclear"),
                {
                    wordlist: n,
                    crosswordArray: r = S(r, "hasInput")
                }
            }
              , A = function(e, t, n) {
                var r = u(e);
                return t.coords.forEach((function(e) {
                    r = T(r, e.x, e.y, n, !0)
                }
                )),
                r
            }
              , O = function(e, t, n) {
                var r = _(e, t)
                  , o = r.wordlist
                  , a = r.crosswordArray;
                return o = k(o, n, "selected", !0),
                a = A(a, n, "selected"),
                I(o, a, n)
            }
              , D = function(e, t, n) {
                var r = _(e, t)
                  , o = r.wordlist
                  , a = r.crosswordArray
                  , i = function(e, t) {
                    return [].concat(u(e.H), u(e.V)).filter((function(e) {
                        return e.coords.filter((function(e) {
                            return e.x === t.x && e.y === t.y
                        }
                        )).length > 0
                    }
                    ))
                }(e, n);
                return 1 === i.length ? (o = k(o, i[0], "selected", !0),
                a = A(a, i[0], "selected"),
                I(o, a, i[0])) : (i.length > 1 && i.forEach((function(e) {
                    o = k(o, e, "unclear", !0),
                    o = k(o, e, "selected", !0),
                    a = A(a, e, "unclear")
                }
                )),
                {
                    wordlist: o,
                    crosswordArray: a
                })
            }
              , I = function(e, t, n) {
                var r = S(u(t), "hasInput")
                  , o = E(Object.assign({}, e), "inputIndex")
                  , a = n.coords[0];
                return r = T(r, a.x, a.y, "hasInput", !0),
                o = k(o, n, "selected", !0),
                {
                    wordlist: o = k(o, n, "inputIndex", 0),
                    crosswordArray: r
                }
            }
              , P = function(e, t, n) {
                var r = w(e)
                  , o = u(t)
                  , a = Object.assign({}, e);
                if (r && r.selected && void 0 !== r.inputIndex) {
                    var i = r.coords[n.length];
                    i && (a = E(Object.assign({}, a), "inputIndex"),
                    o = S(u(o), "hasInput"),
                    o = T(o, i.x, i.y, "hasInput", !0),
                    a = k(a, r, "inputIndex", n.length)),
                    n.length === r.coords.length && (a = k(a, r, "inputIndex", n.length))
                }
                return {
                    wordlist: a,
                    crosswordArray: o
                }
            }
              , R = function(e, t, n) {
                var r = w(e)
                  , o = u(t)
                  , a = Object.assign({}, e);
                return r && r.selected && void 0 !== r.inputIndex && (r.inputIndex < r.coords.length || n.length === r.coords.length) && l.splitGraphemes(n).forEach((function(e, t) {
                    var n = r.coords[t];
                    n && (o = T(o, n.x, n.y, "letter", e))
                }
                )),
                {
                    wordlist: a,
                    crosswordArray: o
                }
            }
              , L = function(e, t) {
                var n = function(e, t) {
                    var n = w(e)
                      , r = u(t)
                      , o = Object.assign({}, e);
                    if (n && n.selected && void 0 !== n.inputIndex) {
                        var a = n.inputIndex;
                        if (a > 0) {
                            var i = n.coords[a - 1];
                            i && (o = E(Object.assign({}, o), "inputIndex"),
                            r = S(u(r), "hasInput"),
                            r = T(r, i.x, i.y, "hasInput", !0),
                            o = k(o, n, "inputIndex", a - 1))
                        }
                    }
                    return {
                        wordlist: o,
                        crosswordArray: r
                    }
                }(e, t)
                  , r = n.wordlist
                  , o = n.crosswordArray
                  , a = w(r);
                if (a && a.selected && void 0 !== a.inputIndex) {
                    var i = a.coords[a.inputIndex];
                    o = T(o, i.x, i.y, "letter", void 0)
                }
                return {
                    wordlist: r,
                    crosswordArray: o
                }
            }
              , N = function(e) {
                return e.map((function(e) {
                    return e.filter((function(e) {
                        return e
                    }
                    )).map((function(e) {
                        return {
                            x: e.x,
                            y: e.y,
                            letter: e.letter
                        }
                    }
                    )).filter((function(e) {
                        return void 0 !== e.letter && null != e.letter
                    }
                    ))
                }
                )).filter((function(e) {
                    return e
                }
                )).reduce((function(e, t) {
                    return e.concat(t)
                }
                ))
            }
              , F = function(e, t) {
                return !e.some((function(e) {
                    var n;
                    return void 0 === (null === (n = v(t, e.x, e.y)) || void 0 === n ? void 0 : n.x)
                }
                ))
            }
              , M = function(e, t) {
                var n = u(e);
                return t.forEach((function(e) {
                    e.letter && (n = T(n, e.x, e.y, "letter", e.letter))
                }
                )),
                n
            }
              , j = function(e, t, n) {
                var r = g(t)
                  , o = e.map((function(e) {
                    return e ? e.map((function(e) {
                        var t = Object.assign({}, e);
                        if (e && (e.x || 0 === e.x) && (e.y || 0 === e.y)) {
                            var o = v(r, e.x, e.y)
                              , i = (0,
                            a.matchesOneOfAnswers)(e.letter, null == o ? void 0 : o.letter, n);
                            t.isCorrect = i
                        }
                        return t
                    }
                    )) : e
                }
                ));
                return function(e, t) {
                    var n = function(e) {
                        return e ? e.map((function(e, t) {
                            var n = {
                                direction: e.dir,
                                coords: [],
                                description: e.description,
                                id: t
                            };
                            return l.splitGraphemes(e.word).forEach((function(t, r) {
                                var o = h(e, r);
                                n.coords.push(o)
                            }
                            )),
                            n
                        }
                        )) : []
                    }(t);
                    return n.filter((function(t) {
                        return !t.coords.some((function(t) {
                            var n = v(e, t.x, t.y);
                            return void 0 === (null == n ? void 0 : n.letter) || "" === n.letter
                        }
                        ))
                    }
                    ))
                }(e, t).forEach((function(e) {
                    e.coords.forEach((function(e) {
                        o = T(o, e.x, e.y, "isCompleteWord", !0)
                    }
                    ))
                }
                )),
                o
            }
        },
        24846: function(e, t, n) {
            "use strict";
            function r(e) {
                if (!e)
                    return null;
                if (e.startsWith("data:"))
                    return e.split("data:")[1].split(";")[0].split("/")[1];
                var t = e.split("?")[0].split("/").pop();
                if (null == t)
                    return null;
                var n = t.split(".");
                if (n.length < 2)
                    return null;
                var r = n.pop();
                return null == r ? null : r.toLowerCase().replace("jpg", "jpeg")
            }
            function o(e) {
                return "jpeg" === r(e) ? "image/jpeg" : "image/png"
            }
            function a(e) {
                var t, n, r, a, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                i = Object.assign({
                    detectBlankAnswers: !1,
                    maxJpgQuality: .9,
                    minJpgQuality: .5
                }, i);
                var s = document.createElement("canvas")
                  , u = s.getContext("2d");
                if (null == u)
                    throw new Error("Could not get 2d context");
                if (i.detectBlankAnswers && "" === e.src)
                    return "BLANK";
                var c, l = null !== (t = i.width) && void 0 !== t ? t : e.width, d = null !== (n = i.height) && void 0 !== n ? n : e.height;
                if (s.width = l,
                s.height = d,
                u.drawImage(e, 0, 0, l, d),
                "image/png" === (null !== (r = i.imageType) && void 0 !== r ? r : o(null !== (a = i.src) && void 0 !== a ? a : e.src)))
                    c = s.toDataURL("image/png");
                else
                    try {
                        var f = i.maxJpgQuality;
                        if (c = s.toDataURL("image/jpeg", f),
                        null != i.targetJpgSize)
                            for (; c.length > i.targetJpgSize && f > i.minJpgQuality; )
                                f -= .1,
                                c = s.toDataURL("image/jpeg", f)
                    } catch (e) {
                        console.log("No image/jpeg supported for toDataURL"),
                        c = s.toDataURL("image/png")
                    }
                return c
            }
            n.r(t),
            n.d(t, {
                decideImageTypeBasedUponSrc: function() {
                    return o
                },
                getSrcImageTypeByExtensionOrDataUrlMimetype: function() {
                    return r
                },
                imageToDataURL: function() {
                    return a
                }
            })
        },
        82594: function(e, t, n) {
            "use strict";
            n.d(t, {
                FP: function() {
                    return xe
                },
                JB: function() {
                    return ge
                },
                MQ: function() {
                    return Ee
                },
                QE: function() {
                    return Ce
                },
                QJ: function() {
                    return Oe
                },
                Rd: function() {
                    return me
                },
                VN: function() {
                    return Ae
                },
                Xe: function() {
                    return ye
                },
                ZH: function() {
                    return _e
                },
                a$: function() {
                    return ke
                },
                ak: function() {
                    return we
                },
                al: function() {
                    return be
                },
                cr: function() {
                    return Te
                },
                er: function() {
                    return he
                },
                f4: function() {
                    return W
                },
                jA: function() {
                    return pe
                },
                yD: function() {
                    return ve
                },
                z8: function() {
                    return Se
                }
            });
            var r = n(87526)
              , o = n.n(r)
              , a = n(81211)
              , i = n.n(a)
              , s = n(46343)
              , u = n.n(s)
              , c = n(81936)
              , l = n.n(c)
              , d = n(46108)
              , f = n.n(d)
              , p = n(57581)
              , h = n.n(p)
              , m = n(34789)
              , g = n.n(m)
              , v = n(46155)
              , w = n.n(v)
              , b = n(55009)
              , y = n.n(b)
              , C = n(40105)
              , x = n.n(C)
              , E = n(75857)
              , k = n.n(E)
              , S = n(4642)
              , T = n.n(S)
              , _ = n(38202)
              , A = n.n(_)
              , O = n(51958)
              , D = n(97857)
              , I = n(63181)
              , P = n(17902)
              , R = n(2616)
              , L = n(1309)
              , N = n(98274)
              , F = n(90589)
              , M = n(45027)
              , j = n(22420);
            function q(e) {
                return function(e) {
                    if (Array.isArray(e))
                        return B(e)
                }(e) || function(e) {
                    if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                        return Array.from(e)
                }(e) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return B(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? B(e, t) : void 0
                    }
                }(e) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function B(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var W, U = f()(R.ionlist);
            function z() {
                return {}
            }
            function H(e) {
                return {
                    answer: arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ""
                }
            }
            function Q() {
                return {
                    answer: []
                }
            }
            function V(e, t, n) {
                return {
                    answer: A()(Array((0,
                    O.safeArray)(n[e]).length), t)
                }
            }
            function Y(e, t, n, r) {
                var o = {
                    answer: n
                };
                return e.mapToQuestion ? e.mapToQuestion(t, o) : o
            }
            function K(e, t, n, r) {
                return n
            }
            function G(e, t, n, r) {
                var o = {
                    answer: JSON.parse(n)
                };
                return e.mapToQuestion ? e.mapToQuestion(t, o) : o
            }
            function $(e, t) {
                return {
                    answer: e
                }
            }
            function J(e, t) {
                return {
                    answer: e
                }
            }
            function X(e, t) {
                return null == t ? null : t.answer
            }
            function Z(e, t) {
                return null == t || null == t.answer ? null : JSON.stringify(t.answer)
            }
            function ee() {
                return {
                    answer: null,
                    saveAnswer: null
                }
            }
            function te(e, t, n) {
                return Object.assign({}, t, {
                    assetID: n
                })
            }
            function ne(e, t) {
                return t.assetID || ""
            }
            function re(e, t) {
                var n = 0
                  , r = 0
                  , o = /_([0-9]+)$/;
                function a(e) {
                    var t = e.match(o);
                    return null == t ? 999 : parseInt(t[1])
                }
                return T()(t.answer, (function(e) {
                    n = Math.max(n, a(e.sourceId)),
                    r = Math.max(r, a(e.targetId))
                }
                )),
                n >= (0,
                O.safeArray)(e.pairs).length || r >= (0,
                O.safeArray)(e.pairs).length ? {
                    answer: null,
                    answerLoadError: W.REMOVE_FULL
                } : t
            }
            function oe(e, t, n, r, o) {
                var a = w()(g()(x()((0,
                O.safeArray)(o.pairs), (function(e, n) {
                    return {
                        key: (0,
                        O.matchElemId)(t, e.target),
                        value: "ct_" + n
                    }
                }
                )), "key"), "value");
                return {
                    answer: h()(x()((0,
                    O.safeArray)(n.pairs), (function(n, r) {
                        return (0,
                        O.isMatchDistractor)(n.source, e) || (0,
                        O.isMatchDistractor)(n.target, t) ? null : {
                            sourceId: "cs_" + r,
                            targetId: a[(0,
                            O.matchElemId)(t, n.target)]
                        }
                    }
                    )), (function(e) {
                        return null != e
                    }
                    ))
                }
            }
            function ae(e, t, n, r, o, a, i) {
                return {
                    answer: null
                }
            }
            function ie(e, t, n, r) {
                return {
                    answered: r.length > 0
                }
            }
            function se(e, t, n, r) {
                if (!n.answer || !n.answer.answer)
                    return {
                        answered: !1
                    };
                for (var o = 0; o < n.answer.answer.length; o++)
                    if (n.answer.answer[o].words.length > 0)
                        return {
                            answered: !0
                        };
                return {
                    answered: !1
                }
            }
            function ue(e, t, n) {
                var r = "no" !== t["only-drop-on-boxes"]
                  , o = h()((0,
                O.safeArray)(t.Boxes), (function(e) {
                    return null != e.name && "" !== e.name
                }
                )).length;
                if (!1 === r && (o += 1),
                n.answer.length !== o)
                    return {
                        answer: null,
                        answerLoadError: W.REMOVE_FULL
                    };
                for (var a, i = x()(k()(h()(x()((0,
                O.safeArray)(t.Boxes), "Items"), (function(e) {
                    return null != e
                }
                ))), (function(t) {
                    return e ? t.origbase : t
                }
                )), s = function() {
                    var e = n.answer[u];
                    if (null == l()(t.Boxes, (function(t) {
                        return (0,
                        O.appSafeUnescape)(t.name) === e.name
                    }
                    )) && (r || !1 === r && "DD_BOXES" !== e.name))
                        return {
                            v: {
                                answer: null,
                                answerLoadError: W.REMOVE_FULL
                            }
                        };
                    for (var o = 0; o < e.words.length; ++o) {
                        var a = i.indexOf(N.dragDropKey(e.words[o]));
                        if (-1 === a)
                            return {
                                v: {
                                    answer: null,
                                    answerLoadError: W.REMOVE_FULL
                                }
                            };
                        i.splice(a, 1)
                    }
                }, u = 0; u < n.answer.length; ++u)
                    if (a = s())
                        return a.v;
                return n
            }
            function ce(e, t) {
                return {
                    answer: x()(h()((0,
                    O.safeArray)(t.Boxes), (function(e) {
                        return "" !== e.name
                    }
                    )), (function(n) {
                        return {
                            name: n.name,
                            words: x()((0,
                            O.safeArray)(n.Items), (function(n) {
                                return "yes" === t["only-drop-on-boxes"] ? e ? n.origbase : n : {
                                    name: e ? n.origbase : n,
                                    left: 0,
                                    top: 0
                                }
                            }
                            ))
                        }
                    }
                    ))
                }
            }
            function le(e, t, n, r, o, a) {
                return {
                    answer: null
                }
            }
            function de(e, t, n, r, o) {
                var a = e.tabledata && e.tabledata.values ? e.tabledata.values : []
                  , i = a.length
                  , s = i > 0 ? a[0].length : 0
                  , u = A()(new Array(i), 0).map((function() {
                    return A()(new Array(s), "")
                }
                ));
                return T()(t, (function(e) {
                    u[e.row][e.column] = e.value
                }
                )),
                (0,
                F.styledTableToHtml)(e.tabledata, u, o, r)
            }
            function fe(e, t, n) {
                return e.create(t).answer.answers.length !== n.answer.answers.length ? {
                    answer: null,
                    answerLoadError: W.REMOVE_FULL
                } : n
            }
            !function(e) {
                e.REMOVE_FULL = "REMOVE_FULL",
                e.REMOVE_PART = "REMOVE_PART"
            }(W || (W = {}));
            var pe = {
                TextDescription: {
                    create: z,
                    update: z,
                    fromSaveData: z,
                    toSaveData: function() {}
                },
                TextMultpleChoice: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    mapToQuestion: function(e, t) {
                        return o()((0,
                        O.safeArray)(e.Answers), t.answer) ? t : {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        }
                    },
                    toSaveData: X,
                    setCorrect: function(e, t) {
                        return {
                            answer: e.Answers && e.Valid ? e.Answers[parseInt(e.Valid) - 1] : null
                        }
                    }
                },
                RatedMultipleChoice: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    mapToQuestion: function(e, t) {
                        var n = (0,
                        O.safeArray)(e.Answers).map((function(e) {
                            return e.answer
                        }
                        ));
                        return o()((0,
                        O.safeArray)(n), t.answer) ? t : {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        }
                    },
                    toSaveData: X,
                    alwaysHasCorrection: !0
                },
                TextMultiSelect: {
                    create: V.bind(null, "Answers", 0),
                    update: J,
                    mapToQuestion: function(e, t) {
                        return null == t.answer || (0,
                        O.safeArray)(e.Answers).length !== t.answer.length ? {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        } : t
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        var n = (0,
                        O.removeNonNumbers)((0,
                        O.safeString)(e.Valid)).trim().split(/\s+/);
                        return {
                            answer: e.Answers && e.Valid ? y()(e.Answers.length, (function(e) {
                                return (0,
                                O.arrayContains)(n, e + 1 + "") ? 1 : 0
                            }
                            )) : null
                        }
                    },
                    extraCorrectionFields: function(e, t, n, r) {
                        return {
                            answered: -1 !== r.indexOf(!0)
                        }
                    }
                },
                QuestionTable: {
                    create: function(e) {
                        var t = {};
                        return T()((0,
                        O.safeArray)(e.rows), (function(e, n) {
                            t[n] = ""
                        }
                        )),
                        {
                            answer: t
                        }
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = 0
                          , r = 0;
                        return T()(t.answer, (function(e, t) {
                            n = Math.max(n, parseInt(t)),
                            r = Math.max(r, e)
                        }
                        )),
                        n >= (0,
                        O.safeArray)(e.rows).length || r >= (0,
                        O.safeArray)(e.columns).length ? {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        } : t
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        for (var n = {}, r = (0,
                        O.safeArray)(e.columns), o = 0; o < r.length; ++o)
                            n[r[o].trim()] = o;
                        return {
                            answer: e.rows && e.columns ? w()(g()(x()(e.rows, (function(t, r) {
                                var o = (0,
                                O.questionTableRowAnswer)(e, r);
                                return {
                                    key: r + "",
                                    value: null != o ? n[o] : null
                                }
                            }
                            )), "key"), "value") : null
                        }
                    }
                },
                MultiSelectQuestionTable: {
                    create: function(e) {
                        return V("rows", A()(new Array((0,
                        O.safeArray)(e.columns).length), 0), e)
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = (0,
                        O.safeArray)(t.answer).length
                          , r = n > 0 ? (0,
                        O.safeArray)(t.answer[0]).length : 0;
                        return n !== (0,
                        O.safeArray)(e.rows).length || r !== (0,
                        O.safeArray)(e.columns).length ? {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        } : t
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        for (var n = {}, r = (0,
                        O.safeArray)(e.columns), o = 0; o < r.length; ++o)
                            n[r[o].trim()] = o;
                        return {
                            answer: e.rows && e.columns ? x()(e.rows, (function(t, o) {
                                var a = x()((0,
                                O.questionTableRowAnswers)(e, o), (function(e) {
                                    return n[e]
                                }
                                ));
                                return x()(r, (function(e, t) {
                                    return (0,
                                    O.arrayContains)(a, t) ? 1 : 0
                                }
                                ))
                            }
                            )) : null
                        }
                    },
                    extraCorrectionFields: function(e, t, n, r) {
                        return {
                            answered: -1 !== k()(r).indexOf(1)
                        }
                    }
                },
                PictureMultpleChoice: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X,
                    mapToQuestion: function(e, t) {
                        var n = x()((0,
                        O.safeArray)(e.Answers), (function(e) {
                            return e.origbase
                        }
                        ));
                        return t && !o()(n, t.answer) ? {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        } : t
                    },
                    setCorrect: function(e, t) {
                        return {
                            answer: e.Answers && e.Valid ? e.Answers[parseInt(e.Valid) - 1].origbase : null
                        }
                    },
                    extraAnswerFields: function(e, t, n, r) {
                        return {
                            answer: null
                        }
                    }
                },
                PictureMultiSelect: {
                    create: V.bind(null, "Answers", ""),
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = h()(t.answer, (function(t) {
                            return null != l()((0,
                            O.safeArray)(e.Answers), (function(e) {
                                return e.origbase === t
                            }
                            ))
                        }
                        ))
                          , r = {
                            answer: n
                        };
                        return (0,
                        O.safeArray)(t.answer).length !== (0,
                        O.safeArray)(n).length ? (r.answerLoadError = W.REMOVE_PART,
                        0 === n.length && (r.answerLoadError = W.REMOVE_FULL),
                        r) : t
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        var n = h()((0,
                        O.removeNonNumbers)((0,
                        O.safeString)(e.Valid)).trim().split(/\s+/), (function(t) {
                            var n = parseInt(t);
                            return n >= 1 && n <= e.Answers.length
                        }
                        ));
                        return {
                            answer: e.Answers && e.Valid ? x()(n, (function(t) {
                                return e.Answers[parseInt(t) - 1].origbase
                            }
                            )) : null
                        }
                    },
                    extraCorrectionFields: function(e, t, n, r) {
                        return {
                            answer: null,
                            answered: -1 !== r.indexOf(!0)
                        }
                    },
                    alwaysHasCorrection: !0
                },
                MultiLine: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X,
                    setCorrect: function(e, t) {
                        return {
                            answer: (0,
                            O.safeArray)(e.Keywords).join("\n")
                        }
                    },
                    extraAnswerFields: function(e, t, n, r, o) {
                        return {
                            annotatedtable: x()(o.keywords, (function(e) {
                                return e.match ? e.hasOwnProperty("points") ? "&#9745 " + e.keyword + "(" + e.points + ")<br>" : "&#9745 " + e.keyword + "<br>" : "&#9744 " + e.keyword + "<br>"
                            }
                            )).join("")
                        }
                    }
                },
                RichText: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X
                },
                ExtraMultiLine: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X,
                    extraAnswerFields: function() {
                        return {}
                    }
                },
                ExtraCheckbox: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X,
                    checkIfMandatoryFieldOK: function(e, t) {
                        return "no" === e.mandatory || t.answer && "yes" === t.answer.answer
                    }
                },
                FillInText: {
                    create: function(e) {
                        var t = 0;
                        return N.processFillInText(N.getFITText(e), (function(e, n) {
                            null != n && ++t
                        }
                        )),
                        H(e, A()(new Array(t), ""))
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = 0
                          , r = [];
                        return N.processFillInText(N.getFITText(e), (function(e, o) {
                            null != o && (n < t.answer.length && ("select" !== o.type || -1 !== x()(o.typeconfig.split("##"), (function(e) {
                                return e.trim()
                            }
                            )).indexOf(t.answer[n].trim())) ? r.push(t.answer[n]) : r.push(""),
                            ++n)
                        }
                        )),
                        n !== t.answer.length ? {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        } : {
                            answer: r
                        }
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        var n = [];
                        return N.processFillInText(N.getFITText(e), (function(e, t) {
                            null != t && ("text" === t.type ? n.push((0,
                            O.appSafeUnescape)(t.typeconfig)) : n.push((0,
                            O.appSafeUnescape)(t.typeconfig.split("##")[0].trim())))
                        }
                        )),
                        {
                            answer: n
                        }
                    },
                    extraAnswerFields: function(e, t, n) {
                        return {
                            "report-question": (r = e.Question,
                            o = "",
                            N.processFillInText((0,
                            L.richTextAsHtml)(r), (function(e, t) {
                                o += e,
                                null != t && (o += "_____")
                            }
                            )),
                            o)
                        };
                        var r, o
                    },
                    alwaysHasCorrection: !0
                },
                FillInTable: {
                    create: function(e) {
                        for (var t = [], n = e.tabledata && e.tabledata.values ? e.tabledata.values : [], r = 0; r < n.length; ++r)
                            for (var o = n[r], a = 0; a < o.length; ++a) {
                                var i = o[a];
                                "input" !== i.CellRole && "checked" !== i.CellRole || t.push({
                                    row: r,
                                    column: a,
                                    value: ""
                                })
                            }
                        return {
                            answer: t
                        }
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = e.tabledata && e.tabledata.values ? e.tabledata.values : []
                          , r = n.length
                          , o = r > 0 ? n[0].length : 0;
                        if (null == t.answer)
                            return t;
                        var a = h()(t.answer, (function(e) {
                            return e.column < o && e.row < r
                        }
                        ));
                        return a.length === (0,
                        O.safeArray)(t.answer).length ? {
                            answer: x()(a, (function(t) {
                                return e.tabledata.values[t.row][t.column].value && e.tabledata.values[t.row][t.column].value.startsWith("select:") ? Object.assign({}, t, {
                                    value: t.value.trim()
                                }) : t
                            }
                            ))
                        } : {
                            answer: a,
                            answerLoadError: W.REMOVE_PART
                        }
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        if (!e.tabledata || !e.tabledata.values)
                            return {
                                answer: null
                            };
                        for (var n = [], r = 0; r < e.tabledata.values.length; ++r)
                            for (var o = e.tabledata.values[r], a = 0; a < o.length; ++a) {
                                var i = o[a];
                                i.hasOwnProperty("CellRole") && "checked" === i.CellRole && n.push({
                                    row: r,
                                    column: a,
                                    value: i.value.startsWith("select:") ? i.value.replace(/^(select:)/, "").split("##")[0].trim() : i.value
                                })
                            }
                        return {
                            answer: n
                        }
                    },
                    extraAnswerFields: function(e, t, n, r, o, a) {
                        return {
                            annotatedtable: de(e, n.answer ? n.answer.answer : [], 0, o, a)
                        }
                    },
                    alwaysHasCorrection: !0
                },
                AnnotatePicture: {
                    create: V.bind(null, "EditFields", ""),
                    update: J,
                    mapToQuestion: function(e, t) {
                        return t.answer.length !== (0,
                        O.safeArray)(e.EditFields).length ? {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        } : (t.answer = x()(t.answer, (function(t, n) {
                            return e.EditFields[n].Valid && e.EditFields[n].Valid.startsWith("select:") ? t.trim() : t
                        }
                        )),
                        t)
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        return {
                            answer: x()((0,
                            O.safeArray)(e.EditFields), (function(e) {
                                return e.Valid ? e.Valid.startsWith("select:") ? e.Valid.replace(/^(select:)/, "").split("##")[0] : e.Valid.trim() : ""
                            }
                            ))
                        }
                    },
                    alwaysHasCorrection: !0,
                    extraAnswerFields: function(e, t, n, r, o, a) {
                        return {
                            answer: x()(r, (function(e, n) {
                                var r;
                                return (null !== (r = t.EditFields[n].name) && void 0 !== r ? r : n) + ": " + ("" === e ? "(no answer)" : e)
                            }
                            ))
                        }
                    }
                },
                SingleLine: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X,
                    setCorrect: function(e, t) {
                        return {
                            answer: e.Valid ? e.Valid : ""
                        }
                    }
                },
                PictureOrdering: {
                    create: V.bind(null, "Pictures", ""),
                    update: J,
                    mapToQuestion: function(e, t) {
                        if (t.answer.length !== (0,
                        O.safeArray)(e.Pictures).length)
                            return {
                                answer: null,
                                answerLoadError: W.REMOVE_FULL
                            };
                        for (var n, r = function() {
                            var n = t.answer[o];
                            if ("" !== n && null == l()((0,
                            O.safeArray)(e.Pictures), (function(e) {
                                return e.origbase === n
                            }
                            )))
                                return {
                                    v: {
                                        answer: null,
                                        answerLoadError: W.REMOVE_FULL
                                    }
                                }
                        }, o = 0; o < t.answer.length; ++o)
                            if (n = r())
                                return n.v;
                        return t
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        return {
                            answer: x()((0,
                            O.safeArray)(e.Pictures), N.pictureId)
                        }
                    },
                    alwaysHasCorrection: !0,
                    extraAnswerFields: function(e, t, n, r) {
                        return {
                            answer: null
                        }
                    }
                },
                WordOrdering: {
                    create: function(e) {
                        return H(e, null)
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = q(t.answer).sort()
                          , r = q((0,
                        O.safeArray)(e.Words)).sort();
                        return u()(n, r) ? t : {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        }
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        return {
                            answer: (0,
                            O.safeArray)(e.Words)
                        }
                    },
                    alwaysHasCorrection: !0
                },
                WordMatch: {
                    create: Q,
                    update: J,
                    mapToQuestion: re,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: oe.bind(null, O.MATCH_TYPE_WORD, O.MATCH_TYPE_WORD),
                    extraAnswerFields: ae.bind(null, O.MATCH_TYPE_WORD, O.MATCH_TYPE_WORD),
                    extraCorrectionFields: ie,
                    alwaysHasCorrection: !0
                },
                WordPictureMatch: {
                    create: Q,
                    update: J,
                    mapToQuestion: re,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: oe.bind(null, O.MATCH_TYPE_WORD, O.MATCH_TYPE_PIC),
                    extraAnswerFields: ae.bind(null, O.MATCH_TYPE_WORD, O.MATCH_TYPE_PIC),
                    extraCorrectionFields: ie,
                    alwaysHasCorrection: !0
                },
                AudioWordMatch: {
                    create: Q,
                    update: J,
                    mapToQuestion: re,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: oe.bind(null, O.MATCH_TYPE_AUDIO, O.MATCH_TYPE_WORD),
                    extraAnswerFields: ae.bind(null, O.MATCH_TYPE_AUDIO, O.MATCH_TYPE_WORD),
                    extraCorrectionFields: ie,
                    alwaysHasCorrection: !0
                },
                AudioPictureMatch: {
                    create: Q,
                    update: J,
                    mapToQuestion: re,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: oe.bind(null, O.MATCH_TYPE_AUDIO, O.MATCH_TYPE_PIC),
                    extraAnswerFields: ae.bind(null, O.MATCH_TYPE_AUDIO, O.MATCH_TYPE_PIC),
                    extraCorrectionFields: ie,
                    alwaysHasCorrection: !0
                },
                PicturePictureMatch: {
                    create: Q,
                    update: J,
                    mapToQuestion: re,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: oe.bind(null, O.MATCH_TYPE_PIC, O.MATCH_TYPE_PIC),
                    extraAnswerFields: ae.bind(null, O.MATCH_TYPE_PIC, O.MATCH_TYPE_PIC),
                    extraCorrectionFields: ie,
                    alwaysHasCorrection: !0
                },
                TextDragDrop: {
                    create: Q,
                    update: J,
                    mapToQuestion: ue.bind(null, !1),
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: ce.bind(null, !1),
                    extraAnswerFields: le.bind(null, !1),
                    extraCorrectionFields: se,
                    alwaysHasCorrection: !0
                },
                PictureDragDrop: {
                    create: Q,
                    update: J,
                    mapToQuestion: ue.bind(null, !0),
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: ce.bind(null, !0),
                    extraAnswerFields: le.bind(null, !0),
                    extraCorrectionFields: se,
                    alwaysHasCorrection: !0
                },
                Whiteboard: {
                    create: H,
                    update: $,
                    fromSaveData: function(e, t, n) {
                        return Y(this, e, t)
                    },
                    toSaveData: X,
                    toCheckInput: function(e, t) {
                        return null != t && null != t.answer || null
                    },
                    setAssetID: te,
                    toSubmitAnswerAnswer: ne
                },
                Photo: {
                    create: ee,
                    fromSaveData: function(e, t, n) {
                        return K(0, 0, t)
                    },
                    update: function(e, t, n) {
                        return {
                            answer: e,
                            saveAnswer: null
                        }
                    },
                    updateSaveAnswer: function(e, t, n) {
                        return Object.assign({}, n, {
                            saveAnswer: t
                        })
                    },
                    toSaveData: function(e, t) {
                        return null == t ? null : t.saveAnswer
                    },
                    toCheckInput: function(e, t) {
                        return null == t ? null : !(!t.answer && !t.saveAnswer)
                    },
                    setAssetID: te,
                    toSubmitAnswerAnswer: ne
                },
                AudioRecording: {
                    create: ee,
                    fromSaveData: function(e, t, n) {
                        return K(0, 0, t)
                    },
                    update: function(e, t, n) {
                        return {
                            answer: e,
                            saveAnswer: null
                        }
                    },
                    updateSaveAnswer: function(e, t, n) {
                        return Object.assign({}, n, {
                            saveAnswer: t
                        })
                    },
                    toSaveData: function(e, t) {
                        return null == t || null == t.saveAnswer ? null : JSON.stringify(t.saveAnswer)
                    },
                    toCheckInput: function(e, t) {
                        return null == t ? null : !(!t.answer && !t.saveAnswer)
                    },
                    setAssetID: te,
                    toSubmitAnswerAnswer: ne
                },
                Numeric: {
                    create: function(e) {
                        var t = {};
                        if ("Single" === e.answer_style)
                            t.single = "";
                        else if ("Fraction" === e.answer_style)
                            t.numerator = "",
                            t.denominator = "";
                        else if ("Mixed" === e.answer_style)
                            t.wholenumber = "",
                            t.numerator = "",
                            t.denominator = "";
                        else if ("Exponential" === e.answer_style)
                            t.base = "",
                            t.exponent = "";
                        else if ("Matrix" === e.answer_style)
                            for (var n = N.getMatrixDimensions(e.matrix), r = 0; r < n.rows; ++r)
                                for (var o = 0; o < n.columns; ++o)
                                    t["c_" + r + "_" + o] = "";
                        else
                            console.error("Unsupported numeric question answer style: " + e.answer_style);
                        return {
                            answer: t
                        }
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = i()(this.create(e).answer).sort()
                          , r = i()(t.answer).sort();
                        return u()(n, r) ? t : {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        }
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        var n = {};
                        if ("Single" === e.answer_style)
                            n.single = e.unit && "" !== e.unit ? e.single_number + e.unit : e.single_number;
                        else if ("Fraction" === e.answer_style)
                            n.numerator = (0,
                            O.safeString)(e.numerator),
                            n.denominator = (0,
                            O.safeString)(e.denominator);
                        else if ("Mixed" === e.answer_style)
                            n.wholenumber = (0,
                            O.safeString)(e.whole_number),
                            n.numerator = (0,
                            O.safeString)(e.numerator),
                            n.denominator = (0,
                            O.safeString)(e.denominator);
                        else if ("Exponential" === e.answer_style)
                            n.base = (0,
                            O.safeString)(e.base),
                            n.exponent = (0,
                            O.safeString)(e.exponent);
                        else if ("Matrix" === e.answer_style)
                            for (var r = N.getMatrixDimensions(e.matrix), o = 0; o < r.rows; ++o)
                                for (var a = 0; a < r.columns; ++a)
                                    n["c_" + o + "_" + a] = (0,
                                    O.numericGetMatrixElem)(e.matrix, o, a);
                        else
                            console.error("Unsupported numeric question answer style: " + e.answer_style);
                        return {
                            answer: n
                        }
                    },
                    alwaysHasCorrection: !0
                },
                BalanceChemicalEquation: {
                    create: function(e) {
                        var t = {};
                        switch (e.SubType) {
                        case "type1":
                        case "type2":
                            t.checkedAnswer = "";
                            var n = P.parseEquation(e.Equation)
                              , r = P.reduceReactantsAndProducts(n);
                            t.enteredReactantsTableValues = "type1" === e.SubType ? [] : h()(x()(r.reactants, (function(e, t) {
                                return {
                                    value: "",
                                    row: t,
                                    column: 1
                                }
                            }
                            )), (function(e, t) {
                                return t % 2 == 1
                            }
                            )),
                            t.enteredProductsTableValues = "type1" === e.SubType ? x()(r.products, (function(e, t) {
                                return {
                                    value: "",
                                    row: t,
                                    column: 1
                                }
                            }
                            )) : h()(x()(r.products, (function(e, t) {
                                return {
                                    value: "",
                                    row: t,
                                    column: 1
                                }
                            }
                            )), (function(e, t) {
                                return t % 2 == 0
                            }
                            ));
                            break;
                        case "type3":
                            var o = P.parseEquation(e.Equation)
                              , a = o.reactants.concat(o.products);
                            t.enteredCoefficients = x()(a, (function(e) {
                                return ""
                            }
                            ))
                        }
                        return {
                            answer: t
                        }
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        var n = {};
                        function r(e, t, n) {
                            if (null == e)
                                return "";
                            var r = l()(e, {
                                row: t,
                                column: n
                            });
                            return null == r ? "" : r.value
                        }
                        switch (e.SubType) {
                        case "type1":
                            n.checkedAnswer = (0,
                            O.bceBalancedLabelToYesNo)(t.answer.checkedAnswer, I.Tl);
                            var o = P.parseEquation(e.Equation)
                              , a = P.reduceReactantsAndProducts(o);
                            n.enteredReactantsTableValues = [];
                            var i = 0;
                            if (T()(t.answer.enteredProductsTableValues, (function(e, t) {
                                i = Math.max(i, e.row)
                            }
                            )),
                            (0,
                            O.safeArray)(t.answer.enteredProductsTableValues).length !== a.products.length && a.products.length - 1 < i)
                                return {
                                    answer: null,
                                    answerLoadError: W.REMOVE_FULL
                                };
                            n.enteredProductsTableValues = x()(a.products, (function(e, n) {
                                return {
                                    value: r(t.answer.enteredProductsTableValues, n, 1),
                                    row: n,
                                    column: 1
                                }
                            }
                            ));
                            break;
                        case "type2":
                            n.checkedAnswer = (0,
                            O.bceBalancedLabelToYesNo)(t.answer.checkedAnswer, I.Tl);
                            var s = P.parseEquation(e.Equation)
                              , u = P.reduceReactantsAndProducts(s);
                            n.enteredReactantsTableValues = h()(x()(u.reactants, (function(e, n) {
                                return {
                                    value: r(t.answer.enteredReactantsTableValues, n, 1),
                                    row: n,
                                    column: 1
                                }
                            }
                            )), (function(e, t) {
                                return t % 2 == 1
                            }
                            )),
                            n.enteredProductsTableValues = h()(x()(u.products, (function(e, n) {
                                return {
                                    value: r(t.answer.enteredProductsTableValues, n, 1),
                                    row: n,
                                    column: 1
                                }
                            }
                            )), (function(e, t) {
                                return t % 2 == 0
                            }
                            ));
                            var c = 0;
                            T()(t.answer.enteredReactantsTableValues, (function(e, t) {
                                c = Math.max(c, e.row)
                            }
                            ));
                            var d = 0;
                            T()(t.answer.enteredProductsTableValues, (function(e, t) {
                                d = Math.max(d, e.row)
                            }
                            ));
                            var f = u.reactants.length % 2 == 0 ? u.reactants.length - 1 >= c : u.reactants.length - 2 >= c
                              , p = u.reactants.length % 2 == 0 ? u.reactants.length - 1 >= d : u.reactants.length - 2 >= d;
                            if (!(n.enteredReactantsTableValues.length === t.answer.enteredReactantsTableValues.length && n.enteredProductsTableValues.length === t.answer.enteredProductsTableValues.length || p && f))
                                return {
                                    answer: null,
                                    answerLoadError: W.REMOVE_FULL
                                };
                            break;
                        case "type3":
                            var m = P.parseEquation(e.Equation);
                            if (m.reactants.concat(m.products).length !== t.answer.enteredCoefficients.length)
                                return {
                                    answer: null,
                                    answerLoadError: W.REMOVE_FULL
                                };
                            n.enteredCoefficients = t.answer.enteredCoefficients
                        }
                        return {
                            answer: n
                        }
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        var n = {};
                        switch (e.SubType) {
                        case "type1":
                        case "type2":
                            n.checkedAnswer = P.isBalanced(e.Equation) ? "yes" : "no";
                            var r = P.parseEquation(e.Equation)
                              , o = P.reduceReactantsAndProducts(r);
                            n.enteredReactantsTableValues = "type1" === e.SubType ? [] : h()(x()(o.reactants, (function(e, t) {
                                return {
                                    value: e.qty + "",
                                    row: t,
                                    column: 1
                                }
                            }
                            )), (function(e, t) {
                                return t % 2 == 1
                            }
                            )),
                            n.enteredProductsTableValues = "type1" === e.SubType ? x()(o.products, (function(e, t) {
                                return {
                                    value: e.qty + "",
                                    row: t,
                                    column: 1
                                }
                            }
                            )) : h()(x()(o.products, (function(e, t) {
                                return {
                                    value: e.qty + "",
                                    row: t,
                                    column: 1
                                }
                            }
                            )), (function(e, t) {
                                return t % 2 == 0
                            }
                            ));
                            break;
                        case "type3":
                            var a = P.parseEquation(e.Equation)
                              , i = a.reactants.concat(a.products);
                            n.enteredCoefficients = x()(i, (function(e) {
                                return e.qty
                            }
                            ))
                        }
                        return {
                            answer: n
                        }
                    },
                    extraAnswerFields: function(e, t, n, r, o, a) {
                        var i, s, u = a, c = [], l = "", d = "";
                        switch (e.SubType) {
                        case "type1":
                        case "type2":
                            var f, p = (0,
                            I.Tl)(O.BCE_YES_LABEL), h = (0,
                            I.Tl)(O.BCE_NO_LABEL);
                            switch (r.balanced) {
                            case "":
                                f = (0,
                                I.Tl)("(no option chosen)");
                                break;
                            case "no":
                                f = h;
                                break;
                            case "yes":
                                f = p
                            }
                            l = P.isBalanced(e.Equation) ? p : h;
                            var m = P.parseEquation(e.Equation)
                              , g = P.reduceReactantsAndProducts(m);
                            for (c.push(f),
                            i = 0; i < r.reactantsTable.length; ++i)
                                "" === (s = r.reactantsTable[i]) ? c.push(" (" + g.reactants[s.row].qty + ")") : c.push(parseInt(s.value) === g.reactants[s.row].qty ? s.value : s.value + " (" + g.reactants[s.row].qty + ")");
                            for (i = 0; i < r.productsTable.length; ++i)
                                "" === (s = r.productsTable[i]) ? c.push(" (" + g.products[s.row].qty + ")") : c.push(parseInt(s.value) === g.products[s.row].qty ? s.value : s.value + " (" + g.products[s.row].qty + ")");
                            var v = {
                                "case-sensitive": "no",
                                tabledata: (0,
                                O.bceCreateTableData)(g.reactants, (0,
                                O.bceReactantsEditableFields)(e.SubType)),
                                "scoring-weight": "1"
                            }
                              , w = {
                                "case-sensitive": "no",
                                tabledata: (0,
                                O.bceCreateTableData)(g.products, (0,
                                O.bceProductsEditableFields)(e.SubType)),
                                "scoring-weight": "1"
                            };
                            return {
                                answer: c,
                                annotatedtable: d = "<br>" + (0,
                                O.bceFormatQuestion)(e) + "<br><br>" + (0,
                                I.Tl)("Reactants") + ": " + de(v, n.answer ? n.answer.answer.enteredReactantsTableValues : [], r.reactantsTable, N.check.FillInTable(v, r.reactantsTable), u) + "<br><br>" + (0,
                                I.Tl)("Products") + ": " + de(w, n.answer ? n.answer.answer.enteredProductsTableValues : [], r.productsTable, N.check.FillInTable(w, r.productsTable), u) + "<br>" + f,
                                canonicalAnswer: l
                            };
                        case "type3":
                            return {
                                answer: c = r,
                                annotatedtable: d,
                                canonicalAnswer: l = (0,
                                O.bceFormatQuestion)({
                                    Equation: e.Equation,
                                    SubType: "type1"
                                }),
                                "report-question": e.Question + "<br>" + (0,
                                O.bceFormatQuestion)(e, !0)
                            }
                        }
                        return {}
                    },
                    alwaysHasCorrection: !0
                },
                IonicCompoundBuilder: {
                    create: Q,
                    update: J,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e, t) {
                        for (var n = P.splitFormulaInIons(e.Valid, U), r = [], o = 0; o < n.length; ++o)
                            for (var a = 0; a < U.length; ++a)
                                if (U[a].ion === n[o].ion)
                                    for (var i = 0; i < n[o].qty; ++i)
                                        r.push(a);
                        return {
                            answer: r
                        }
                    },
                    extraAnswerFields: function(e, t) {
                        return {
                            canonicalAnswer: "$$" + P.formatFormula(P.parseFormula(t.Valid)) + "$$"
                        }
                    },
                    alwaysHasCorrection: !0
                },
                CorrectSentence: {
                    create: function(e) {
                        var t = 0;
                        return N.processCorrectSentence((0,
                        O.safeString)(e.Sentence), "yes" === e["all-words-editable"], (function() {}
                        ), (function() {}
                        ), (function() {
                            ++t
                        }
                        )),
                        {
                            answer: {
                                answers: A()(Array(t), "")
                            }
                        }
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        return fe(this, e, t)
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e) {
                        var t = [];
                        return N.processCorrectSentence(e.Sentence, "yes" === e["all-words-editable"], (function() {}
                        ), (function() {}
                        ), (function(e, n) {
                            t.push(n)
                        }
                        )),
                        {
                            answer: {
                                answers: t
                            }
                        }
                    },
                    extraAnswerFields: function(e, t, n, r, o, a) {
                        var i = []
                          , s = 0
                          , u = "yes" === e["all-words-editable"];
                        return N.processCorrectSentence(e.Sentence, u, (function(e) {
                            i.push(e)
                        }
                        ), (function(e) {
                            i.push(e)
                        }
                        ), (function(e, t) {
                            var n = r[s]
                              , c = o.correctness[s++];
                            a ? u && e === t ? n === e ? i.push(n) : "" === n ? i.push("<span style='color: red; text-decoration: line-through ; opacity: 0.7'>" + e + "</span>") : i.push("<span style='color: red'>" + n + "</span>") : 1 === c ? "" === n ? i.push("<span style='color: green; text-decoration: line-through ; opacity: 0.7'>" + e + "</span>") : i.push("<span style='color: green'>" + n + "</span>") : "" === n ? i.push("<span style='color: red; text-decoration: line-through ; opacity: 0.7'>" + e + "</span>") : i.push("<span style='color: red'>" + n + "</span>") : i.push("<i>" + n + "</i>")
                        }
                        )),
                        {
                            annotatedtable: i.join("")
                        }
                    },
                    alwaysHasCorrection: !0
                },
                DragWordsInSentence: {
                    create: function(e) {
                        var t = 0;
                        return N.processDragWordsInSentence((0,
                        L.richTextAsHtml)(e.Sentence), (function(e, n, r) {
                            n && "" !== n && ++t
                        }
                        )),
                        {
                            answer: {
                                answers: A()(Array(t), "")
                            }
                        }
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        return fe(this, e, t)
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e) {
                        var t = [];
                        return N.processDragWordsInSentence((0,
                        L.richTextAsHtml)(e.Sentence), (function(e, n, r) {
                            n && "" !== n && t.push(n)
                        }
                        )),
                        {
                            answer: {
                                answers: t
                            }
                        }
                    },
                    alwaysHasCorrection: !0
                },
                Equations: {
                    create: function(e) {
                        var t = 0;
                        return N.processEquations((0,
                        L.richTextAsHtml)(e.Sentence), (function(e, n, r) {
                            null != n && ++t
                        }
                        )),
                        H(e, {
                            answers: A()(Array(t), "")
                        })
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        return fe(this, e, t)
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e) {
                        var t = [];
                        return N.processEquations((0,
                        L.richTextAsHtml)(e.Sentence), (function(e, n, r) {
                            null != n && (n.startsWith("$$") && (n = n.substring(2)),
                            n.endsWith("$$") && (n = n.substring(0, n.length - 2)),
                            t.push(N.toText(n)))
                        }
                        )),
                        {
                            answer: {
                                answers: t
                            }
                        }
                    },
                    alwaysHasCorrection: !0
                },
                Group: {
                    create: function(e) {
                        return H(e, {
                            answers: k()(x()((0,
                            O.safeArray)(e.groups), (function(e) {
                                return x()((0,
                                O.safeArray)(e.elements), (function(e) {
                                    return [N.cleanGroupElemPaths(e)]
                                }
                                ))
                            }
                            )))
                        })
                    },
                    mapToQuestion: function(e, t) {
                        function n(e) {
                            return e.Type + (e.word || e.audiodesc || (e.image ? e.image.origbase : ""))
                        }
                        var r = x()(k()(this.create(e).answer.answers), n).sort()
                          , o = x()(k()(t.answer.answers), n).sort();
                        return u()(r, o) ? t : {
                            answer: null,
                            answerLoadError: W.REMOVE_FULL
                        }
                    },
                    update: J,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e) {
                        return {
                            answer: {
                                answers: x()(e.groups || [], (function(e) {
                                    return e.elements || []
                                }
                                ))
                            }
                        }
                    },
                    alwaysHasCorrection: !0
                },
                MarkSentence: {
                    create: function(e) {
                        var t = 0;
                        return N.processMarkSentence((0,
                        O.safeString)(e.Sentence), (function() {}
                        ), (function() {
                            ++t
                        }
                        ), (function(n) {
                            "yes" === e.mark_individual_words ? N.processText(n.word, (function() {
                                ++t
                            }
                            ), (function() {}
                            )) : ++t
                        }
                        )),
                        H(e, {
                            answers: A()(Array(t), "")
                        })
                    },
                    update: J,
                    mapToQuestion: function(e, t) {
                        return fe(this, e, t)
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    toSaveData: Z,
                    setCorrect: function(e) {
                        var t = [];
                        return N.processMarkSentence(e.Sentence, (function() {}
                        ), (function() {
                            t.push("")
                        }
                        ), (function(n) {
                            "yes" === e.mark_individual_words ? N.processText(n.word, (function() {
                                t.push(n.type)
                            }
                            ), (function() {}
                            )) : t.push(n.type)
                        }
                        )),
                        {
                            answer: {
                                answers: t
                            }
                        }
                    }
                },
                CrossWord: {
                    create: Q,
                    toSaveData: Z,
                    update: J,
                    extraCorrectionFields: function(e, t, n, r) {
                        return n.answer && n.answer.answer && n.answer.answer.length > 0 ? {
                            answered: !0
                        } : {
                            answered: !1
                        }
                    },
                    setCorrect: function(e, t, n) {
                        var r = (0,
                        j.tr)(e.words);
                        return {
                            answer: (0,
                            j.D9)(r)
                        }
                    },
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    mapToQuestion: function(e, t) {
                        if (e.words && e.words.length >= 1) {
                            var n = (0,
                            j.PH)(e.words);
                            if (t && t.answer && !(0,
                            j.o_)(t.answer, n.crosswordArray))
                                return {
                                    answer: null,
                                    answerLoadError: W.REMOVE_FULL
                                }
                        }
                        return t
                    }
                },
                Rubric: {
                    create: Q,
                    toSaveData: Z,
                    update: J,
                    fromSaveData: function(e, t, n) {
                        return G(this, e, t)
                    },
                    mapToQuestion: function(e, t) {
                        var n = e.rubric
                          , r = t.answer
                          , o = r.filter((function(e) {
                            return e.checked
                        }
                        ));
                        if (!o || 0 === o.length)
                            return t;
                        var a = Math.max.apply(Math, q(o.map((function(e) {
                            return e.x
                        }
                        ))))
                          , i = Math.max.apply(Math, q(o.map((function(e) {
                            return e.y
                        }
                        ))));
                        if (n && r) {
                            var s = n.labels;
                            return n.rows.length >= i && s.length >= a ? t : {
                                answer: null,
                                answerLoadError: W.REMOVE_FULL
                            }
                        }
                        return t
                    }
                }
            };
            function he(e) {
                return {
                    answer: {
                        answer: null
                    },
                    showHint: !1,
                    showScratchpad: !1,
                    seed: (0,
                    M.createRandomSeed)()
                }
            }
            function me(e, t) {
                return he()
            }
            function ge(e, t, n) {
                return pe[e.Type].setCorrect ? Object.assign({}, t, {
                    answer: pe[e.Type].setCorrect(e, t, n)
                }) : me()
            }
            function ve(e, t, n) {
                return Object.assign({}, e, {
                    answer: pe[n.Type].update(t, n, e.answer)
                })
            }
            function we(e, t) {
                return Object.assign({}, e, {
                    showHint: t
                })
            }
            function be(e, t) {
                return Object.assign({}, e, {
                    showScratchpad: t
                })
            }
            function ye(e, t) {
                return Object.assign({}, e, {
                    scratchpad: t,
                    scratchpadAssetIDs: []
                })
            }
            function Ce(e, t) {
                return Object.assign({}, e, {
                    score: t
                })
            }
            function xe(e, t, n) {
                if (t) {
                    var r = pe[e.Type].fromSaveData(e, t, n.answer);
                    return Object.assign({}, n, {
                        answer: r,
                        showHint: !1
                    })
                }
                return he()
            }
            function Ee(e, t) {
                return pe[e.Type].toSaveData ? pe[e.Type].toSaveData(e, t.answer) : (console.error("Can't find toSaveData for " + e.Type),
                null)
            }
            function ke(e, t, n) {
                return pe[e.Type].setAssetID ? Object.assign({}, t, {
                    answer: pe[e.Type].setAssetID(e, t.answer, n)
                }) : t
            }
            function Se(e, t, n, r) {
                for (var o, a = q(null !== (o = t.scratchpadAssetIDs) && void 0 !== o ? o : []); a.length <= n; )
                    a.push(null);
                return a[n] = r,
                Object.assign({}, t, {
                    scratchpadAssetIDs: a
                })
            }
            function Te(e, t, n) {
                return pe[e.Type].updateSaveAnswer ? Object.assign({}, t, {
                    answer: pe[e.Type].updateSaveAnswer(e, n, t.answer)
                }) : t
            }
            function _e(e, t) {
                var n = null == t.answer || null == t.answer.answer ? Object.assign({}, t, {
                    answer: pe[e.Type].create(e)
                }) : t
                  , r = Ee(e, n);
                return {
                    question_state: n,
                    saved_data: r,
                    check_input: pe[e.Type].toCheckInput ? pe[e.Type].toCheckInput(e, t.answer) : null == D.JI[e.Type] || null == r ? null : D.JI[e.Type](r, e)
                }
            }
            function Ae(e, t, n) {
                var r = _e(e, t).check_input
                  , o = N.check[e.Type](n || e, r);
                return pe[e.Type].extraCorrectionFields && Object.assign(o, pe[e.Type].extraCorrectionFields(e, n, t, r)),
                o
            }
            var Oe = function(e, t) {
                return Object.assign({}, e, {
                    isanswerLoadErrorVisible: t
                })
            }
        },
        62325: function(e, t, n) {
            "use strict";
            n.d(t, {
                Nr: function() {
                    return M
                },
                TW: function() {
                    return F
                },
                au: function() {
                    return N
                },
                dr: function() {
                    return q
                },
                hm: function() {
                    return I
                },
                oL: function() {
                    return R
                },
                vV: function() {
                    return W
                }
            });
            var r = n(4642)
              , o = n.n(r)
              , a = n(57581)
              , i = n.n(a)
              , s = n(58065)
              , u = n.n(s)
              , c = n(82594)
              , l = n(19605)
              , d = n(97857)
              , f = n(24846)
              , p = n(98274)
              , h = n(69713);
            function m(e) {
                return m = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                m(e)
            }
            function g() {
                g = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , o = "function" == typeof Symbol ? Symbol : {}
                  , a = o.iterator || "@@iterator"
                  , i = o.asyncIterator || "@@asyncIterator"
                  , s = o.toStringTag || "@@toStringTag";
                function u(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    u({}, "")
                } catch (e) {
                    u = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function c(e, t, n, o) {
                    var a = t && t.prototype instanceof f ? t : f
                      , i = Object.create(a.prototype)
                      , s = new _(o || []);
                    return r(i, "_invoke", {
                        value: E(e, n, s)
                    }),
                    i
                }
                function l(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = c;
                var d = {};
                function f() {}
                function p() {}
                function h() {}
                var v = {};
                u(v, a, (function() {
                    return this
                }
                ));
                var w = Object.getPrototypeOf
                  , b = w && w(w(A([])));
                b && b !== t && n.call(b, a) && (v = b);
                var y = h.prototype = f.prototype = Object.create(v);
                function C(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        u(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function x(e, t) {
                    function o(r, a, i, s) {
                        var u = l(e[r], e, a);
                        if ("throw" !== u.type) {
                            var c = u.arg
                              , d = c.value;
                            return d && "object" == m(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                o("next", e, i, s)
                            }
                            ), (function(e) {
                                o("throw", e, i, s)
                            }
                            )) : t.resolve(d).then((function(e) {
                                c.value = e,
                                i(c)
                            }
                            ), (function(e) {
                                return o("throw", e, i, s)
                            }
                            ))
                        }
                        s(u.arg)
                    }
                    var a;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    o(e, n, t, r)
                                }
                                ))
                            }
                            return a = a ? a.then(r, r) : r()
                        }
                    })
                }
                function E(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = k(i, n);
                                if (s) {
                                    if (s === d)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = l(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === d)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function k(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        k(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        d;
                    var o = l(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        d;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    d) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    d)
                }
                function S(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function T(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function _(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(S, this),
                    this.reset(!0)
                }
                function A(e) {
                    if (e) {
                        var t = e[a];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: O
                    }
                }
                function O() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return p.prototype = h,
                r(y, "constructor", {
                    value: h,
                    configurable: !0
                }),
                r(h, "constructor", {
                    value: p,
                    configurable: !0
                }),
                p.displayName = u(h, s, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === p || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h,
                    u(e, s, "GeneratorFunction")),
                    e.prototype = Object.create(y),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                C(x.prototype),
                u(x.prototype, i, (function() {
                    return this
                }
                )),
                e.AsyncIterator = x,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new x(c(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                C(y),
                u(y, s, "Generator"),
                u(y, a, (function() {
                    return this
                }
                )),
                u(y, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = A,
                _.prototype = {
                    constructor: _,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(T),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        d) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        d
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                T(n),
                                d
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    T(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: A(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        d
                    }
                },
                e
            }
            function v(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function w(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function i(e) {
                            v(a, r, o, i, s, "next", e)
                        }
                        function s(e) {
                            v(a, r, o, i, s, "throw", e)
                        }
                        i(void 0)
                    }
                    ))
                }
            }
            function b(e, t, n) {
                var r = (0,
                h.getPhotosFromData)(t)
                  , a = n ? (0,
                h.getPhotosFromData)(n) : []
                  , s = i()(r, (function(e) {
                    return -1 === a.indexOf(e)
                }
                ));
                o()(s, (function(t) {
                    e.widgetstorage.clearImage(t)
                }
                ))
            }
            var y, C, x, E, k, S, T, _, A = {
                Whiteboard: {
                    freeResources: function(e, t, n, r) {
                        b(e, n.answer, r)
                    },
                    getAssetAsync: (_ = w(g().mark((function e(t, n, r) {
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r && null != r.answer) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return e.next = 4,
                                    (0,
                                    d.f_)(r.answer, n, {
                                        readImage: t.widgetstorage.getImageUrl.bind(t.widgetstorage)
                                    }, "WWB");
                                case 4:
                                    return e.t0 = e.sent,
                                    e.abrupt("return", {
                                        data: e.t0,
                                        mimetype: "image/vnd.bookwidgets.wwb"
                                    });
                                case 6:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return _.apply(this, arguments)
                    }
                    ),
                    getAssetSync: function(e, t, n) {
                        return null == n || null == n.answer ? null : {
                            type: "whiteboard",
                            data: n.answer,
                            resize_policy: t.resize_policy,
                            image_on_top: t.image_on_top,
                            img: t.img
                        }
                    }
                },
                Photo: {
                    freeResources: function(e, t, n) {
                        null != n.saveAnswer && e.widgetstorage.clearImage(n.saveAnswer)
                    },
                    getAssetAsync: (T = w(g().mark((function e(t, n, r) {
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r && null != r.answer && "BLANK" !== r.answer) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return e.abrupt("return", new Promise((function(e) {
                                        var t = new Image;
                                        t.addEventListener("load", (function() {
                                            u()(t).attr({
                                                "data-width": t.width,
                                                "data-height": t.height
                                            });
                                            var n = (0,
                                            f.imageToDataURL)(t, {
                                                detectBlankAnswers: !0
                                            });
                                            e("BLANK" === n ? null : {
                                                data: n
                                            })
                                        }
                                        )),
                                        t.src = r.answer
                                    }
                                    )));
                                case 3:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return T.apply(this, arguments)
                    }
                    ),
                    getAssetSync: function(e, t, n) {
                        return null == n || null == n.answer ? null : {
                            type: "img",
                            data: n.answer
                        }
                    },
                    preprocessLoadDataAsync: (S = w(g().mark((function e(t, n, r) {
                        var o;
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return e.next = 4,
                                    t.widgetstorage.getImageUrl(r);
                                case 4:
                                    return o = e.sent,
                                    e.abrupt("return", {
                                        answer: o,
                                        saveAnswer: r
                                    });
                                case 6:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return S.apply(this, arguments)
                    }
                    ),
                    preprocessLoadDataSync: (k = w(g().mark((function e(t, n, r) {
                        var o;
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return o = r,
                                    e.abrupt("return", {
                                        answer: o,
                                        saveAnswer: r
                                    });
                                case 4:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return k.apply(this, arguments)
                    }
                    ),
                    prepareSaveDataAsync: (E = w(g().mark((function e(t, n, r) {
                        var o;
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r && null != r.answer && null == r.saveAnswer && "BLANK" !== r.answer) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return e.next = 4,
                                    t.widgetstorage.registerImage(r.answer);
                                case 4:
                                    return o = e.sent,
                                    e.abrupt("return", o);
                                case 6:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return E.apply(this, arguments)
                    }
                    )
                },
                AudioRecording: {
                    freeResources: function(e, t, n) {
                        null != n.saveAnswer && null != n.saveAnswer.url && e.widgetstorage.clearImage(n.saveAnswer.url)
                    },
                    getAssetAsync: (x = w(g().mark((function e(t, n, r) {
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r && null != r.answer) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return e.abrupt("return", {
                                        data: r.answer.url,
                                        mimetype: r.answer.mimetype
                                    });
                                case 3:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return x.apply(this, arguments)
                    }
                    ),
                    getAssetSync: function(e, t, n) {
                        return null == n || null == n.answer ? null : {
                            type: "audio",
                            data: n.answer.url,
                            mimetype: n.answer.mimetype
                        }
                    },
                    preprocessLoadDataAsync: (C = w(g().mark((function e(t, n, r) {
                        var o, a;
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return o = JSON.parse(r),
                                    e.next = 5,
                                    t.widgetstorage.getImageUrl(o.url);
                                case 5:
                                    return a = e.sent,
                                    e.abrupt("return", {
                                        answer: {
                                            url: a,
                                            mimetype: o.mimetype
                                        },
                                        saveAnswer: o
                                    });
                                case 7:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return C.apply(this, arguments)
                    }
                    ),
                    preprocessLoadDataSync: function(e, t, n) {
                        if (null == n)
                            return null;
                        var r = JSON.parse(n);
                        return {
                            answer: {
                                url: r.url,
                                mimetype: r.mimetype
                            },
                            saveAnswer: r
                        }
                    },
                    prepareSaveDataAsync: (y = w(g().mark((function e(t, n, r) {
                        var o;
                        return g().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (null != r && null != r.answer && null != r.answer.url && null == r.saveAnswer) {
                                        e.next = 2;
                                        break
                                    }
                                    return e.abrupt("return", null);
                                case 2:
                                    return e.next = 4,
                                    t.widgetstorage.registerImage(r.answer.url);
                                case 4:
                                    return o = e.sent,
                                    e.abrupt("return", {
                                        url: o,
                                        mimetype: r.answer.mimetype
                                    });
                                case 6:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    function(e, t, n) {
                        return y.apply(this, arguments)
                    }
                    )
                }
            };
            function O(e, t, n) {
                return D.apply(this, arguments)
            }
            function D() {
                return (D = w(g().mark((function e(t, n, r) {
                    return g().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (!A[n.Type] || !A[n.Type].getAssetAsync) {
                                    e.next = 4;
                                    break
                                }
                                return e.next = 3,
                                A[n.Type].getAssetAsync(t, n, r.answer);
                            case 3:
                                return e.abrupt("return", e.sent);
                            case 4:
                                return e.abrupt("return", null);
                            case 5:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function I(e, t, n) {
                return P.apply(this, arguments)
            }
            function P() {
                return (P = w(g().mark((function e(t, n, r) {
                    return g().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (!A[n.Type] || !A[n.Type].preprocessLoadDataAsync) {
                                    e.next = 4;
                                    break
                                }
                                return e.next = 3,
                                A[n.Type].preprocessLoadDataAsync(t, n, r);
                            case 3:
                                return e.abrupt("return", e.sent);
                            case 4:
                                return e.abrupt("return", r);
                            case 5:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function R(e, t, n) {
                return L.apply(this, arguments)
            }
            function L() {
                return (L = w(g().mark((function e(t, n, r) {
                    return g().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (!A[n.Type] || !A[n.Type].prepareSaveDataAsync) {
                                    e.next = 4;
                                    break
                                }
                                return e.next = 3,
                                A[n.Type].prepareSaveDataAsync(t, n, r.answer);
                            case 3:
                                return e.abrupt("return", e.sent);
                            case 4:
                                return e.abrupt("return", null);
                            case 5:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function N(e, t, n, r) {
                A[t.Type] && A[t.Type].freeResources && A[t.Type].freeResources(e, t, n.answer, r)
            }
            function F(e, t) {
                return Object.assign({}, t, {
                    questions: t.questions.map((function(n, r) {
                        if (N(e, t.config.questions[r], n),
                        n.scratchpad)
                            try {
                                var a = JSON.parse(n.scratchpad);
                                o()(a, (function(t) {
                                    b(e, t)
                                }
                                ))
                            } catch (e) {
                                console.error("Error parsing scratchpad"),
                                console.error(e)
                            }
                    }
                    ))
                })
            }
            function M(e, t, n) {
                return j.apply(this, arguments)
            }
            function j() {
                return (j = w(g().mark((function e(t, n, r) {
                    return g().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                return e.abrupt("return", O(t, n.config.questions[r], n.questions[r]));
                            case 1:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function q(e, t, n) {
                return B.apply(this, arguments)
            }
            function B() {
                return (B = w(g().mark((function e(t, n, r) {
                    var o, a, i, s, u;
                    return g().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                a = [],
                                i = JSON.parse(null !== (o = n.questions[r].scratchpad) && void 0 !== o ? o : "[]"),
                                s = 0;
                            case 3:
                                if (!(s < i.length)) {
                                    e.next = 14;
                                    break
                                }
                                return u = i[s],
                                e.t0 = a,
                                e.next = 8,
                                (0,
                                d.f_)(u, {
                                    resize_policy: null,
                                    img: null
                                }, {
                                    readImage: t.widgetstorage.getImageUrl.bind(t.widgetstorage)
                                }, "WWB");
                            case 8:
                                e.t1 = e.sent,
                                e.t2 = {
                                    data: e.t1,
                                    mimetype: "image/vnd.bookwidgets.wwb"
                                },
                                e.t0.push.call(e.t0, e.t2);
                            case 11:
                                ++s,
                                e.next = 3;
                                break;
                            case 14:
                                return e.abrupt("return", a);
                            case 15:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function W(e, t, n, r) {
                return function(e, t, n, r, o) {
                    var a = t.Question || t.Title
                      , i = (0,
                    c.ZH)(t, r)
                      , s = i.question_state
                      , u = i.saved_data
                      , l = i.check_input
                      , f = c.jA[t.Type].toSubmitAnswerAnswer ? c.jA[t.Type].toSubmitAnswerAnswer(t, s.answer) : null == d.qm[t.Type] ? null : d.qm[t.Type](u, t, l, {
                        readImage: e.widgetstorage.getImageUrl.bind(e.widgetstorage)
                    });
                    if ((o || c.jA[t.Type].alwaysHasCorrection) && p.check[t.Type]) {
                        var h = p.check[t.Type](n, l)
                          , m = {
                            question: a,
                            answer: f,
                            check_input: l,
                            correctness: h ? h.correctness : 0,
                            score: h ? h.score : 0,
                            outof: h ? h.outof : 0
                        };
                        return c.jA[t.Type].extraCorrectionFields && Object.assign(m, c.jA[t.Type].extraCorrectionFields(t, n, s, l)),
                        c.jA[t.Type].extraAnswerFields && Object.assign(m, c.jA[t.Type].extraAnswerFields(t, n, s, l, h, o)),
                        r.scratchpadAssetIDs && Object.assign(m, {
                            scratchpad: r.scratchpadAssetIDs
                        }),
                        m
                    }
                    return {
                        question: a,
                        answer: f
                    }
                }(e, t.config.questions[n], (0,
                l.iB)(t, n), t.questions[n], r)
            }
        },
        19605: function(e, t, n) {
            "use strict";
            n.d(t, {
                A3: function() {
                    return Q
                },
                D7: function() {
                    return se
                },
                DM: function() {
                    return A
                },
                DT: function() {
                    return K
                },
                G: function() {
                    return N
                },
                H6: function() {
                    return O
                },
                HW: function() {
                    return H
                },
                HX: function() {
                    return J
                },
                J4: function() {
                    return L
                },
                JC: function() {
                    return q
                },
                Jr: function() {
                    return ee
                },
                KJ: function() {
                    return S
                },
                Mt: function() {
                    return G
                },
                PY: function() {
                    return D
                },
                RB: function() {
                    return B
                },
                Rt: function() {
                    return E
                },
                Ru: function() {
                    return F
                },
                Rz: function() {
                    return ue
                },
                SB: function() {
                    return ne
                },
                SV: function() {
                    return Z
                },
                U7: function() {
                    return X
                },
                XW: function() {
                    return $
                },
                Xd: function() {
                    return w
                },
                YR: function() {
                    return x
                },
                Y_: function() {
                    return j
                },
                _r: function() {
                    return P
                },
                _u: function() {
                    return R
                },
                cn: function() {
                    return k
                },
                d4: function() {
                    return Y
                },
                dh: function() {
                    return M
                },
                g2: function() {
                    return _
                },
                g3: function() {
                    return ae
                },
                gu: function() {
                    return I
                },
                hX: function() {
                    return W
                },
                i3: function() {
                    return V
                },
                iB: function() {
                    return C
                },
                ig: function() {
                    return z
                },
                jJ: function() {
                    return te
                },
                kk: function() {
                    return ie
                },
                ld: function() {
                    return re
                },
                mN: function() {
                    return oe
                },
                pv: function() {
                    return T
                },
                s4: function() {
                    return b
                },
                vZ: function() {
                    return U
                },
                y9: function() {
                    return y
                }
            });
            var r = n(3514)
              , o = n.n(r)
              , a = n(75857)
              , i = n.n(a)
              , s = n(46343)
              , u = n.n(s)
              , c = n(40105)
              , l = n.n(c)
              , d = n(58065)
              , f = n.n(d)
              , p = n(51958)
              , h = n(82594)
              , m = n(23798)
              , g = (0,
            n(26598).createLogger)("quizState");
            function v(e) {
                return Object.assign({}, function(e) {
                    return Object.assign({}, (0,
                    m.a3)(e), {
                        questions: l()((0,
                        p.safeArray)(e.questions), h.er)
                    })
                }(e), {
                    checkMode: !1,
                    readOnly: !1,
                    showCorrectness: !1,
                    showCorrectAnswers: !1,
                    showAnsweredCorrect: !1,
                    showAnswerKeys: !1,
                    showRationale: !1,
                    submitted: !1,
                    showCalculator: !1,
                    showExtraKeyboard: !1,
                    nextQuestion: {
                        nr: 0,
                        showCorrection: !1
                    }
                })
            }
            function w(e) {
                return g.debug("createQuizState"),
                Object.assign({}, v(e), {
                    currentQuestion: 0
                })
            }
            function b(e, t, n) {
                return g.debug("updateAnswer"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(r, o) {
                        return o === t ? (0,
                        h.yD)(r, n, e.config.questions[t]) : r
                    }
                    ))
                })
            }
            function y(e) {
                var t, n, r, a, s, u = 0, c = 0;
                if (o()(e))
                    return null;
                if (e) {
                    if (e.hasOwnProperty("answered") && !1 === e.answered)
                        t = !1,
                        n = !1,
                        s = !0,
                        a = !1;
                    else if (e.correctness.constructor === Array) {
                        n = !0,
                        a = !1,
                        t = !0,
                        s = !0;
                        for (var l = i()(e.correctness), d = 0; d < l.length; ++d)
                            -2 === l[d] && (a = !0),
                            1 !== l[d] && (n = !1),
                            -1 === l[d] ? t = !1 : s = !1;
                        r = !1 === n && !1 === a && !1 === s,
                        e.answered && (t = e.answered)
                    } else
                        t = -1 !== e.correctness,
                        s = -1 === e.correctness,
                        n = 1 === e.correctness,
                        a = -2 === e.correctness,
                        r = 0 === e.correctness;
                    u = e.score,
                    c = e.outof
                }
                return {
                    answered: t,
                    correct: n,
                    wrong: r,
                    manual: a,
                    allunanswered: s,
                    score: u,
                    outof: c
                }
            }
            function C(e, t) {
                return e.questionConfigIncludingCorrection ? e.questionConfigIncludingCorrection[t] : e.config.questions[t]
            }
            function x(e, t) {
                g.debug("updateCorrection");
                var n = e.questions[t]
                  , r = (0,
                h.VN)(e.config.questions[t], n, C(e, t));
                return u()(r, n.correction) ? e : Object.assign({}, e, {
                    questions: e.questions.map((function(e, n) {
                        return n === t ? Object.assign({}, e, {
                            correction: r,
                            answerstate: y(r)
                        }) : e
                    }
                    ))
                })
            }
            function E(e) {
                return g.debug("updateAllCorrection"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(t, n) {
                        var r = (0,
                        h.VN)(e.config.questions[n], t, C(e, n));
                        return Object.assign({}, t, {
                            correction: r,
                            answerstate: y(r)
                        })
                    }
                    ))
                })
            }
            function k(e, t, n) {
                return g.debug("updateShowHint", t, n),
                Object.assign({}, e, {
                    questions: e.questions.map((function(e, r) {
                        return r === t ? (0,
                        h.ak)(e, n) : e
                    }
                    ))
                })
            }
            function S(e, t, n) {
                return g.debug("updateShowScratchpad", t, n),
                Object.assign({}, e, {
                    questions: e.questions.map((function(e, r) {
                        return r === t ? (0,
                        h.al)(e, n) : e
                    }
                    ))
                })
            }
            function T(e, t, n) {
                return g.debug("updateScratchpad", t, n),
                Object.assign({}, e, {
                    questions: e.questions.map((function(e, r) {
                        return r === t ? (0,
                        h.Xe)(e, n) : e
                    }
                    ))
                })
            }
            function _(e, t, n) {
                return g.debug("updateScore"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(e, r) {
                        return r === t ? (0,
                        h.QE)(e, n) : e
                    }
                    ))
                })
            }
            function A(e) {
                return g.debug("clearQuestions"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(t, n) {
                        return (0,
                        h.Rd)(e.config.questions[n], t)
                    }
                    ))
                })
            }
            function O(e, t) {
                return g.debug("fromPreprocessedSaveData"),
                Object.assign({}, e, {
                    questions: l()(e.config.questions, (function(n, r) {
                        return (0,
                        h.FP)(n, t[r], e.questions[r])
                    }
                    ))
                })
            }
            function D(e, t, n) {
                return g.debug("setQuestionSavePreparation"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(r, o) {
                        return o === t ? (0,
                        h.cr)(e.config.questions[o], r, n) : r
                    }
                    ))
                })
            }
            function I(e) {
                return g.debug("setCorrectQuestionAnswers"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(t, n) {
                        return (0,
                        h.JB)(C(e, n), t, e.config.questions[n])
                    }
                    ))
                })
            }
            function P(e, t) {
                return (0,
                h.MQ)(e.config.questions[t], e.questions[t])
            }
            function R(e, t, n) {
                return g.debug("setQuestionAssetID"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(r, o) {
                        return o === t ? (0,
                        h.a$)(e.config.questions[o], r, n) : r
                    }
                    ))
                })
            }
            function L(e, t, n, r) {
                return g.debug("setQuestionScratchpadAssetID"),
                Object.assign({}, e, {
                    questions: e.questions.map((function(o, a) {
                        return a === t ? (0,
                        h.z8)(e.config.questions[a], o, n, r) : o
                    }
                    ))
                })
            }
            function N(e, t, n) {
                return g.debug("setQuestionConfigIncludingCorrection"),
                Object.assign({}, e, {
                    correctionAvailable: t,
                    questionConfigIncludingCorrection: n
                })
            }
            function F(e) {
                return g.debug("clearScores", e),
                Object.assign({}, e, {
                    questions: e.questions.map((function(e) {
                        return (0,
                        h.QE)(e, null)
                    }
                    )),
                    totalScore: null
                })
            }
            function M(e, t) {
                return g.debug("setTotalScore"),
                Object.assign({}, e, {
                    totalScore: t
                })
            }
            function j(e, t) {
                return g.debug("setCheckMode"),
                Object.assign({}, e, {
                    checkMode: t
                })
            }
            function q(e, t) {
                return g.debug("setReadOnly"),
                Object.assign({}, e, {
                    readOnly: t
                })
            }
            function B(e, t) {
                return g.debug("setShowCorrectness"),
                Object.assign({}, e, {
                    showCorrectness: t
                })
            }
            function W(e, t) {
                return g.debug("setShowCorrectAnswers"),
                Object.assign({}, e, {
                    showCorrectAnswers: t
                })
            }
            function U(e, t) {
                return g.debug("setShowAnsweredCorrect"),
                Object.assign({}, e, {
                    showAnsweredCorrect: t
                })
            }
            function z(e, t) {
                return g.debug("setShowAnswerKeys"),
                Object.assign({}, e, {
                    showAnswerKeys: t
                })
            }
            function H(e, t) {
                return g.debug("setShowRationale"),
                Object.assign({}, e, {
                    showRationale: t
                })
            }
            function Q(e, t) {
                return g.debug("setSubmitted"),
                Object.assign({}, e, {
                    submitted: t
                })
            }
            function V(e, t) {
                return g.debug("setShowCalculator"),
                Object.assign({}, e, {
                    showCalculator: t
                })
            }
            function Y(e, t) {
                return g.debug("setShowExtraKeyboard"),
                Object.assign({}, e, {
                    showExtraKeyboard: t
                })
            }
            function K(e, t) {
                return g.debug("setQuestionOrder"),
                Object.assign({}, e, {
                    questionOrder: t
                })
            }
            function G(e, t) {
                return g.debug("setQuestionStoreIndexes"),
                Object.assign({}, e, {
                    storeIndexes: t
                })
            }
            function $(e, t) {
                return g.debug("setCountdownTime"),
                Object.assign({}, e, {
                    countdown: t
                })
            }
            function J(e, t, n, r) {
                return g.debug("setLockPassword"),
                null != e.lock && e.lock.resolve(),
                Object.assign({}, e, {
                    lock: null != t ? f().Deferred() : null,
                    lockPassword: t,
                    lockAllowCancel: n,
                    lockExtraMessage: r
                })
            }
            function X(e) {
                return g.debug("clearLockPassword"),
                Object.assign({}, e, {
                    lock: null,
                    lockPassword: null
                })
            }
            function Z(e, t) {
                return Object.assign({}, e, {
                    nextQuestion: t
                })
            }
            function ee(e, t) {
                return g.debug("setClearCount"),
                Object.assign({}, e, {
                    clearCount: t
                })
            }
            function te(e, t) {
                return Object.assign({}, e, {
                    iterationCount: t
                })
            }
            function ne(e, t) {
                return Object.assign({}, e, {
                    lockedQuestions: t
                })
            }
            function re(e, t) {
                return Object.assign({}, e, {
                    starredQuestions: t
                })
            }
            function oe(e, t) {
                return Object.assign({}, e, {
                    questionAudioPlays: t
                })
            }
            function ae(e, t) {
                return Object.assign({}, e, {
                    currentQuestion: t
                })
            }
            function ie(e, t) {
                return Object.assign({}, e, {
                    showQuestionList: t
                })
            }
            function se(e, t) {
                return Object.assign({}, e, {
                    showText: t
                })
            }
            var ue = function(e, t, n) {
                return Object.assign({}, e, {
                    questions: e.questions.map((function(e, r) {
                        return r === t ? (0,
                        h.QJ)(e, n) : e
                    }
                    ))
                })
            }
        },
        90531: function(e, t, n) {
            "use strict";
            n.d(t, {
                N: function() {
                    return f
                },
                m: function() {
                    return p
                }
            });
            var r = n(46155)
              , o = n.n(r)
              , a = n(77629)
              , i = n.n(a)
              , s = n(81211)
              , u = n.n(s)
              , c = n(48983)
              , l = n.n(c)
              , d = n(51958);
            function f(e) {
                return !l()((0,
                d.safeArray)(e.questions), (function(e) {
                    return !e.id
                }
                ))
            }
            function p(e, t, n, r, a) {
                if (!f(e))
                    return r;
                for (var s = t(e), c = {}, d = 0; d < n.length; ++d)
                    c[s[d] + ""] = n[d];
                if (!l()(u()(r), (function(e) {
                    return c.hasOwnProperty(e.split(".")[0])
                }
                )))
                    return r;
                var p = i()(r, (function(e, t) {
                    var n = t.split(".");
                    return 2 !== n.length ? t : c.hasOwnProperty(n[0]) ? c[n[0]] + "." + n[1] : t
                }
                ))
                  , h = o()(r, (function(e, t) {
                    var n = t.split(".");
                    return 2 !== n.length ? e : c.hasOwnProperty(n[0]) ? null : e
                }
                ));
                return console.log("Upgrading stored data to new keys"),
                null != a && a.prepareStorageUpgrade(Object.assign(h, p)),
                p
            }
        },
        1309: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                isEmptyRichText: function() {
                    return c
                },
                isStructextDoument: function() {
                    return u
                },
                makeWidgetUrlsAbsolute: function() {
                    return l
                },
                richTextAsHtml: function() {
                    return d
                },
                richTextAsHtmlStubMedia: function() {
                    return b
                }
            });
            var r = n(48983)
              , o = n.n(r)
              , a = n(51958)
              , i = n(27317)
              , s = n(95395);
            function u(e) {
                return null != e && "string" != typeof e && e.hasOwnProperty("document")
            }
            function c(e) {
                return null == e || ("string" == typeof e ? "" === e.trim() || -1 === e.indexOf("img") && -1 === e.indexOf("audio") && -1 === e.indexOf("iframe") && -1 === e.indexOf("video") && -1 === e.indexOf("src=") && "" === (0,
                a.appSafeUnescape)(e).trim() : !!e.hasOwnProperty("document") && !o()(JSON.parse(e.document).children, (function(e) {
                    return "paragraph" !== e.type || e.children.length > 0
                }
                )))
            }
            function l(e) {
                var t, n, r = null !== (n = null === (t = null === window || void 0 === window ? void 0 : window.WidgetParams) || void 0 === t ? void 0 : t.playBaseURL) && void 0 !== n ? n : window.playBaseURL;
                return (0,
                s.hV)(e, (function(e) {
                    "widget-group" === e.type && e.items.forEach((function(e) {
                        e.coverURL = r + e.coverURL,
                        e.launchURL = r + e.launchURL
                    }
                    ))
                }
                )),
                e
            }
            function d(e, t) {
                if (null == e)
                    return "";
                if ("string" == typeof e)
                    return e;
                if (e.document) {
                    var n = JSON.parse(e.document);
                    return (0,
                    i.mapStructextToHTML)(l(n), t)
                }
                return console.log("richTextAsHtml: unexpected type", e),
                e + ""
            }
            function f() {
                var e = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                return e.setAttribute("width", "16"),
                e.setAttribute("height", "16"),
                e.setAttribute("fill", "currentColor"),
                e.setAttribute("viewBox", "0 0 16 16"),
                e
            }
            function p(e) {
                var t = document.createElementNS("http://www.w3.org/2000/svg", "path");
                return t.setAttribute("d", e),
                t
            }
            function h() {
                var e = f();
                e.setAttribute("class", "bw-icon-audio"),
                e.appendChild(p("M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13c0-1.104 1.12-2 2.5-2s2.5.896 2.5 2zm9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2z"));
                var t = p("M14 11V2h1v9h-1zM6 3v10H5V3h1z");
                return t.setAttribute("fill-rule", "evenodd"),
                e.appendChild(t),
                e.appendChild(p("M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4V2.905z")),
                e
            }
            function m() {
                var e = f();
                e.setAttribute("class", "bw-icon-video");
                var t = p("M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5z");
                return t.setAttribute("fill-rule", "evenodd"),
                e.appendChild(t),
                e
            }
            function g(e) {
                return e.url.includes("youtube") || e.url.includes("youtu.be") ? ((t = f()).setAttribute("class", "bw-icon-youtube"),
                t.appendChild(p("M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z")),
                t) : function() {
                    var e = f();
                    return e.setAttribute("class", "bw-icon-iframe"),
                    e.appendChild(p("M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z")),
                    e
                }();
                var t
            }
            var v = {
                image: i.mediaFunctions.image,
                audio: h,
                video: m,
                iframe: g
            }
              , w = {
                image: function() {
                    var e = f();
                    return e.appendChild(p("M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z")),
                    e.appendChild(p("M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z")),
                    e
                },
                audio: h,
                video: m,
                iframe: g
            };
            function b(e) {
                return d(e, arguments.length > 1 && void 0 !== arguments[1] && !arguments[1] ? {
                    mediaFunctions: w
                } : {
                    mediaFunctions: v
                })
            }
        },
        27317: function(e, t, n) {
            "use strict";
            var r, o, a, i;
            n.d(t, {
                mapStructextToHTML: function() {
                    return w
                },
                mediaFunctions: function() {
                    return m
                }
            }),
            function(e) {
                e[e.COLUMN = 2] = "COLUMN",
                e[e.NONE = 0] = "NONE",
                e[e.ROW = 1] = "ROW",
                e[e.BOTH = 3] = "BOTH"
            }(r || (r = {})),
            function(e) {
                e[e.NONE = 0] = "NONE",
                e[e.OPEN_IN_NEW_TAB = 1] = "OPEN_IN_NEW_TAB"
            }(o || (o = {})),
            function(e) {
                e[e.NONE = 0] = "NONE",
                e[e.BOLD = 1] = "BOLD",
                e[e.ITALIC = 2] = "ITALIC",
                e[e.STRIKETHROUGH = 4] = "STRIKETHROUGH",
                e[e.UNDERLINE = 8] = "UNDERLINE",
                e[e.CODE = 16] = "CODE",
                e[e.SUBSCRIPT = 32] = "SUBSCRIPT",
                e[e.SUPERSCRIPT = 64] = "SUPERSCRIPT",
                e[e.HIGHLIGHT = 128] = "HIGHLIGHT"
            }(a || (a = {})),
            function(e) {
                e.audio = "audio",
                e.breakLine = "breakline",
                e.heading = "heading",
                e.horizontalRule = "horizontal-rule",
                e.iframe = "iframe",
                e.imageGroup = "image-group",
                e.link = "link",
                e.list = "list",
                e.listItem = "list-item",
                e.paragraph = "paragraph",
                e.quote = "quote",
                e.section = "section",
                e.table = "table",
                e.text = "text",
                e.video = "video",
                e.widgetGroup = "widget-group"
            }(i || (i = {}));
            var s, u = n(95395), c = function(e) {
                var t = "";
                return (0,
                u.h$)(e, (function(e) {
                    return "text"in e && e.text && (t += e.text),
                    e
                }
                )),
                t
            };
            function l(e) {
                return l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                l(e)
            }
            function d(e, t, n) {
                return (t = function(e) {
                    var t = function(e) {
                        if ("object" !== l(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== l(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(e);
                    return "symbol" === l(t) ? t : String(t)
                }(t))in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n,
                e
            }
            function f(e, t) {
                var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (!n) {
                    if (Array.isArray(e) || (n = function(e, t) {
                        if (e) {
                            if ("string" == typeof e)
                                return p(e, t);
                            var n = Object.prototype.toString.call(e).slice(8, -1);
                            return "Object" === n && e.constructor && (n = e.constructor.name),
                            "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? p(e, t) : void 0
                        }
                    }(e)) || t && e && "number" == typeof e.length) {
                        n && (e = n);
                        var r = 0
                          , o = function() {};
                        return {
                            s: o,
                            n: function() {
                                return r >= e.length ? {
                                    done: !0
                                } : {
                                    done: !1,
                                    value: e[r++]
                                }
                            },
                            e: function(e) {
                                throw e
                            },
                            f: o
                        }
                    }
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                var a, i = !0, s = !1;
                return {
                    s: function() {
                        n = n.call(e)
                    },
                    n: function() {
                        var e = n.next();
                        return i = e.done,
                        e
                    },
                    e: function(e) {
                        s = !0,
                        a = e
                    },
                    f: function() {
                        try {
                            i || null == n.return || n.return()
                        } finally {
                            if (s)
                                throw a
                        }
                    }
                }
            }
            function p(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function h(e, t) {
                var n = document.createElement(t);
                return e && n.appendChild(e),
                n
            }
            var m = {
                audio: function(e) {
                    var t = document.createElement("audio");
                    return t.controls = !0,
                    t.src = e.url,
                    t
                },
                video: function(e) {
                    var t = document.createElement("video");
                    return t.controls = !0,
                    t.src = e.url,
                    t
                },
                iframe: function(e) {
                    var t = document.createElement("iframe");
                    return t.src = e.url,
                    t.width = e.width.toString(),
                    t.height = e.height.toString(),
                    t.setAttribute("frameborder", "0"),
                    t.setAttribute("scrolling", "yes"),
                    t.setAttribute("allowtransparency", "true"),
                    t
                },
                image: function(e) {
                    var t = document.createElement("img")
                      , n = function(e) {
                        var t = new URL(e.url)
                          , n = new URLSearchParams(t.search);
                        return e.cropX && n.set("crop_x", e.cropX.toString()),
                        e.cropY && n.set("crop_y", e.cropY.toString()),
                        e.cropWidth && n.set("crop_width", e.cropWidth.toString()),
                        e.cropHeight && n.set("crop_height", e.cropHeight.toString()),
                        e.resolutionWidth && n.set("width", e.resolutionWidth.toString()),
                        e.resolutionHeight && n.set("height", e.resolutionHeight.toString()),
                        e.orientation && n.set("orientation", e.orientation.toString()),
                        t.search = n.toString(),
                        t.toString()
                    }(e);
                    return t.src = n,
                    t.setAttribute("alt", e.alt),
                    t
                }
            }
              , g = (d(d(d(d(d(d(d(d(d(d(s = {}, i.audio, (function(e, t) {
                var n = document.createElement("div");
                switch (n.classList.add("medium-insert-images"),
                e.alignment) {
                case "center":
                    n.classList.add("medium-insert-images-wide");
                    break;
                case "left":
                    n.classList.add("medium-insert-images-left");
                    break;
                case "right":
                    n.classList.add("medium-insert-images-right")
                }
                var r = t.mediaFunctions.audio(e)
                  , o = document.createElement("div");
                o.classList.add("medium-insert-embed");
                var a = document.createElement("figure");
                if (o.appendChild(r),
                a.appendChild(o),
                e.caption) {
                    var i = document.createElement("figcaption");
                    i.innerHTML = w({
                        children: e.caption
                    }),
                    a.appendChild(i)
                }
                return n.appendChild(a),
                n
            }
            )), i.heading, (function(e) {
                var t = document.createElement(e.tag);
                return "" === c(e) && t.append(document.createElement("br")),
                t.style.textAlign = e.alignment || "",
                t
            }
            )), i.horizontalRule, (function() {
                return document.createElement("hr")
            }
            )), i.iframe, (function(e, t) {
                var n = document.createElement("div");
                n.classList.add("medium-insert-embeds");
                var r = t.mediaFunctions.iframe(e)
                  , o = document.createElement("figure")
                  , a = document.createElement("div");
                if (a.classList.add("medium-insert-embed"),
                a.appendChild(r),
                o.appendChild(a),
                e.caption) {
                    var i = document.createElement("figcaption");
                    i.innerHTML = w({
                        children: e.caption
                    }),
                    o.appendChild(i)
                }
                return n.appendChild(o),
                n
            }
            )), i.imageGroup, (function(e, t) {
                var n = document.createElement("div");
                switch (n.classList.add("medium-insert-images"),
                e.alignment) {
                case "center":
                    n.classList.add("medium-insert-images-wide");
                    break;
                case "left":
                    n.classList.add("medium-insert-images-left");
                    break;
                case "right":
                    n.classList.add("medium-insert-images-right")
                }
                var r, o = f(e.items);
                try {
                    for (o.s(); !(r = o.n()).done; ) {
                        var a = r.value
                          , i = document.createElement("figure")
                          , s = t.mediaFunctions.image(a);
                        if (i.append(s),
                        a.caption) {
                            var u = document.createElement("figcaption");
                            u.innerHTML = w({
                                children: a.caption
                            }),
                            i.appendChild(u)
                        }
                        n.append(i)
                    }
                } catch (e) {
                    o.e(e)
                } finally {
                    o.f()
                }
                return n
            }
            )), i.link, (function(e) {
                var t = document.createElement("a");
                return t.href = e.url,
                e.options & o.OPEN_IN_NEW_TAB && (t.target = "_blank",
                t.rel = "noopener noreferrer"),
                null != e.title && (t.title = e.title),
                t
            }
            )), i.listItem, (function() {
                return document.createElement("li")
            }
            )), i.list, (function(e) {
                var t = e.tag
                  , n = document.createElement(t);
                return e.iconStyle && (n.style.listStyleType = e.iconStyle),
                e.alignment && (n.style.textAlign = e.alignment),
                e.indent > 0 && (n.style.paddingInlineStart = "".concat(20 * e.indent, "px")),
                "ol" === t && 1 !== e.start && n.setAttribute("start", String(e.start)),
                n
            }
            )), i.paragraph, (function(e) {
                var t = document.createElement("p");
                return t && ("" === c(e) && t.append(document.createElement("br")),
                e.alignment && (t.style.textAlign = e.alignment),
                e.indent > 0 && (t.style.paddingInlineStart = "".concat(20 * e.indent, "px"))),
                t
            }
            )), i.quote, (function(e) {
                var t = document.createElement("blockquote");
                return "" === c(e) && t.append(document.createElement("br")),
                e.alignment && (t.style.textAlign = e.alignment),
                t
            }
            )),
            d(d(d(d(d(d(s, i.section, (function(e) {
                var t = document.createElement("section");
                return t && t.setAttribute("data-anchor-id", e.anchor),
                t
            }
            )), i.table, (function(e, t) {
                var n = document.createElement("table");
                n.classList.add("medium-editor-table");
                for (var r = 0; r < e.data.length; r++) {
                    var o = e.data[r]
                      , a = e.rows[r]
                      , i = document.createElement("tr");
                    a.height && (i.style.height = "".concat(a.height, "px"));
                    for (var s = function() {
                        var n = o.cells[u]
                          , r = e.columns[u]
                          , s = document.createElement(a.isHeader || r.isHeader ? "th" : "td");
                        n.colSpan && n.colSpan > 1 && (s.colSpan = n.colSpan),
                        n.rowSpan && n.rowSpan > 1 && (s.rowSpan = n.rowSpan),
                        r.isHeader && (s.classList.add("header-column-cell"),
                        s.classList.add("header-cell")),
                        a.isHeader && (s.classList.add("header-row-cell"),
                        s.classList.add("header-cell")),
                        a.isHeader && r.isHeader && (s.classList.add("header-both-cell"),
                        s.classList.add("header-cell")),
                        a.isFooter && s.classList.add("footer-cell"),
                        s.style.backgroundColor = n.backgroundColor || "",
                        n.children.forEach((function(e) {
                            s.appendChild(v(e, t))
                        }
                        )),
                        i.appendChild(s)
                    }, u = 0; u < o.cells.length; u++)
                        s();
                    n.appendChild(i)
                }
                return n
            }
            )), i.text, (function(e) {
                var t = document.createElement("span");
                return t.textContent = e.text,
                e.decoration & a.CODE && (t = h(t, "code")),
                e.decoration & a.HIGHLIGHT && (t = h(t, "mark")),
                e.decoration & a.SUBSCRIPT && (t = h(t, "sub")),
                e.decoration & a.SUPERSCRIPT && (t = h(t, "sup")),
                e.decoration & a.BOLD && (t = h(t, "b")),
                e.decoration & a.ITALIC && (t = h(t, "i")),
                e.decoration & a.STRIKETHROUGH && (t = h(t, "s")),
                e.decoration & a.UNDERLINE && (t = h(t, "u")),
                t.style.color = e.style.color || "",
                t.style.fontSize = e.style.fontSize || "",
                t.style.fontFamily = e.style.fontFamily || "",
                t
            }
            )), i.video, (function(e, t) {
                var n = document.createElement("div");
                switch (n.classList.add("medium-insert-images"),
                e.alignment) {
                case "center":
                    n.classList.add("medium-insert-images-wide");
                    break;
                case "left":
                    n.classList.add("medium-insert-images-left");
                    break;
                case "right":
                    n.classList.add("medium-insert-images-right")
                }
                var r = t.mediaFunctions.video(e)
                  , o = document.createElement("div");
                o.classList.add("medium-insert-embed");
                var a = document.createElement("figure");
                if (o.appendChild(r),
                a.appendChild(o),
                e.caption) {
                    var i = document.createElement("figcaption");
                    i.innerHTML = w({
                        children: e.caption
                    }),
                    a.appendChild(i)
                }
                return n.appendChild(a),
                n
            }
            )), i.widgetGroup, (function(e) {
                var t = document.createElement("div");
                switch (t.classList.add("medium-insert-widgets"),
                e.alignment) {
                case "center":
                    t.classList.add("medium-insert-widgets-wide");
                    break;
                case "left":
                    t.classList.add("medium-insert-widgets-left");
                    break;
                case "right":
                    t.classList.add("medium-insert-widgets-right")
                }
                var n, r = f(e.items);
                try {
                    for (r.s(); !(n = r.n()).done; ) {
                        var o = n.value
                          , a = document.createElement("figure")
                          , i = document.createElement("span");
                        i.setAttribute("data-href", o.launchURL);
                        var s = document.createElement("img");
                        if (s.src = o.coverURL,
                        i.append(s),
                        a.append(i),
                        o.caption) {
                            var u = document.createElement("figcaption");
                            u.innerHTML = w({
                                children: o.caption
                            }),
                            a.appendChild(u)
                        }
                        t.append(a)
                    }
                } catch (e) {
                    r.e(e)
                } finally {
                    r.f()
                }
                return t
            }
            )), i.breakLine, (function() {
                return document.createElement("br")
            }
            )))
              , v = function e(t) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                    mediaFunctions: m
                }
                  , r = document.createElement("div")
                  , o = g[t.type];
                return o && (r = o(t, n)),
                "children"in t && t.children && t.children.length > 0 && t.children.forEach((function(t) {
                    r.appendChild(e(t, n))
                }
                )),
                r
            }
              , w = function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                    mediaFunctions: m
                };
                if (console.group("mapStructextToHtml"),
                console.log("structext", e),
                !e || !Array.isArray(e.children))
                    return "";
                var n = document.createElement("div");
                e.children.forEach((function(e) {
                    n.appendChild(v(e, t))
                }
                ));
                var r = n.innerHTML;
                return console.log("html", r),
                console.groupEnd(),
                r
            }
        },
        95395: function(e, t, n) {
            "use strict";
            function r(e, t) {
                var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                if (!n) {
                    if (Array.isArray(e) || (n = function(e, t) {
                        if (e) {
                            if ("string" == typeof e)
                                return o(e, t);
                            var n = Object.prototype.toString.call(e).slice(8, -1);
                            return "Object" === n && e.constructor && (n = e.constructor.name),
                            "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? o(e, t) : void 0
                        }
                    }(e)) || t && e && "number" == typeof e.length) {
                        n && (e = n);
                        var r = 0
                          , a = function() {};
                        return {
                            s: a,
                            n: function() {
                                return r >= e.length ? {
                                    done: !0
                                } : {
                                    done: !1,
                                    value: e[r++]
                                }
                            },
                            e: function(e) {
                                throw e
                            },
                            f: a
                        }
                    }
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                var i, s = !0, u = !1;
                return {
                    s: function() {
                        n = n.call(e)
                    },
                    n: function() {
                        var e = n.next();
                        return s = e.done,
                        e
                    },
                    e: function(e) {
                        u = !0,
                        i = e
                    },
                    f: function() {
                        try {
                            s || null == n.return || n.return()
                        } finally {
                            if (u)
                                throw i
                        }
                    }
                }
            }
            function o(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            n.d(t, {
                h$: function() {
                    return i
                },
                hV: function() {
                    return a
                }
            });
            var a = function e(t, n) {
                if (n(t),
                "children"in t && t.children) {
                    var o, a = r(t.children);
                    try {
                        for (a.s(); !(o = a.n()).done; )
                            e(o.value, n)
                    } catch (e) {
                        a.e(e)
                    } finally {
                        a.f()
                    }
                }
            }
              , i = function e(t, n) {
                if (n(t),
                "children"in t && t.children) {
                    var o, i = r(t.children);
                    try {
                        for (i.s(); !(o = i.n()).done; ) {
                            var s = o.value;
                            a(s, n)
                        }
                    } catch (e) {
                        i.e(e)
                    } finally {
                        i.f()
                    }
                }
                if ("caption"in t && t.caption) {
                    var u, c = r(t.caption);
                    try {
                        for (c.s(); !(u = c.n()).done; ) {
                            var l = u.value;
                            a(l, n)
                        }
                    } catch (e) {
                        c.e(e)
                    } finally {
                        c.f()
                    }
                }
                if (t.hasOwnProperty("type") && "image-group" === t.type) {
                    var d, f = r(t.items);
                    try {
                        for (f.s(); !(d = f.n()).done; ) {
                            var p = d.value;
                            if ("caption"in p && p.caption) {
                                var h, m = r(p.caption);
                                try {
                                    for (m.s(); !(h = m.n()).done; ) {
                                        var g = h.value;
                                        a(g, n)
                                    }
                                } catch (e) {
                                    m.e(e)
                                } finally {
                                    m.f()
                                }
                            }
                        }
                    } catch (e) {
                        f.e(e)
                    } finally {
                        f.f()
                    }
                }
                if (t.hasOwnProperty("type") && "table" === t.type) {
                    var v, w = r(t.data);
                    try {
                        for (w.s(); !(v = w.n()).done; ) {
                            var b = v.value;
                            if (b.cells) {
                                var y, C = r(b.cells);
                                try {
                                    for (C.s(); !(y = C.n()).done; ) {
                                        var x = y.value;
                                        if (x.children) {
                                            var E, k = r(x.children);
                                            try {
                                                for (k.s(); !(E = k.n()).done; )
                                                    e(E.value, n)
                                            } catch (e) {
                                                k.e(e)
                                            } finally {
                                                k.f()
                                            }
                                        }
                                    }
                                } catch (e) {
                                    C.e(e)
                                } finally {
                                    C.f()
                                }
                            }
                        }
                    } catch (e) {
                        w.e(e)
                    } finally {
                        w.f()
                    }
                }
            }
        },
        99588: function(e, t, n) {
            "use strict";
            function r(e) {
                for (var t = {}, n = e.split("&"), r = 0; r < n.length; r++) {
                    var o = n[r].indexOf("=");
                    if (!(o < 0)) {
                        var a = [n[r].substr(0, o), n[r].substr(o + 1)]
                          , i = decodeURIComponent(a[0]);
                        if (void 0 === t[i])
                            t[i] = decodeURIComponent(a[1]);
                        else if ("string" == typeof t[i]) {
                            var s = [t[i], decodeURIComponent(a[1])];
                            t[i] = s
                        } else
                            t[i].push(decodeURIComponent(a[1]))
                    }
                }
                return t
            }
            function o(e) {
                return -1 === e.indexOf("?") ? {} : r(e.replace(/[^?]*\?/, "").replace(/#.*/, ""))
            }
            n.d(t, {
                Me: function() {
                    return f
                },
                vB: function() {
                    return d
                },
                XW: function() {
                    return T
                },
                oT: function() {
                    return k
                },
                fP: function() {
                    return l
                },
                I5: function() {
                    return c
                },
                b3: function() {
                    return x
                },
                Ep: function() {
                    return p
                },
                a_: function() {
                    return S
                },
                PK: function() {
                    return E
                },
                oc: function() {
                    return C
                },
                Ty: function() {
                    return y
                }
            });
            var a = /^(https?:\/\/)?((www\.)?youtube\.com\/(v|embed|u|w|shorts)|youtu\.be)\/([^?&#]+)/
              , i = /^(https?:\/\/)?(www\.)?youtube\.com\/watch\?(.*)/;
            function s(e) {
                var t;
                return null != (t = e.match(a)) ? t[5] : null != (t = e.match(i)) ? r(t[3].split("#")[0]).v : null
            }
            function u(e) {
                return -1 !== (e = e.split("#")[0]).indexOf("?") ? e : e.replace("&", "?")
            }
            function c(e) {
                var t = o(u(e));
                return null != t.t ? function(e) {
                    var t = e.match(/(([0-9]+)m)?([0-9]+)s/);
                    if (null == t)
                        return 0;
                    var n = parseInt(t[3]);
                    return t[2] && (n += 60 * parseInt(t[2])),
                    n
                }(t.t) + "" : null != t.start ? t.start : null
            }
            function l(e) {
                var t = o(u(e));
                return null != t.end ? t.end : null
            }
            function d(e) {
                return o(e).cc_load_policy
            }
            function f(e) {
                return o(e).cc_lang_pref
            }
            function p(e) {
                var t = []
                  , n = c(e);
                null != n && t.push("start=" + n);
                var r = l(e);
                null != r && t.push("end=" + r);
                var o = d(e);
                null != o && t.push("cc_load_policy=" + o);
                var a = f(e);
                return null != a && t.push("cc_lang_pref=" + a),
                0 === t.length ? "" : "?" + t.join("&")
            }
            function h(e) {
                return null != s(e)
            }
            var m = [/^(https?:\/\/)?vimeo.com\/(\d+)/, /^(https?:\/\/)?vimeo.com\/album\/[^/]+\/video\/([0-9]+)/, /^(https?:\/\/)?vimeo.com\/channels\/[^/]+\/([0-9]+)/, /^(https?:\/\/)?vimeo.com\/groups\/[^/]+\/video\/([0-9]+)/, /^(https?:\/\/)?vimeo.com\/ondemand\/[^/]+\/video\/([0-9]+)/];
            function g(e) {
                for (var t = 0; t < m.length; ++t) {
                    var n = e.match(m[t]);
                    if (null != n)
                        return n[2]
                }
                return null
            }
            var v = /^(https?:\/\/)?(www\.)?giphy\.com\/(embed|gifs)\/([^/?]+)/
              , w = /^((https?:)?\/\/)?media.giphy.com\/media\/([^/]+)/;
            function b(e) {
                var t = e.match(v);
                return null != t ? t[4] : null != (t = e.match(w)) ? t[3] : null
            }
            function y(e) {
                return h(e)
            }
            function C(e) {
                return h(e)
            }
            function x(e) {
                var t = s(e);
                return null != t ? t : e
            }
            function E(e) {
                return function(e) {
                    return null != g(e)
                }(e)
            }
            function k(e) {
                var t = g(e);
                return null != t ? t : e
            }
            function S(e) {
                return function(e) {
                    return null != b(e)
                }(e)
            }
            function T(e) {
                var t = b(e);
                return null != t ? t : e
            }
        },
        23798: function(e, t, n) {
            "use strict";
            n.d(t, {
                $j: function() {
                    return g
                },
                AM: function() {
                    return c
                },
                Pf: function() {
                    return u
                },
                Pz: function() {
                    return s
                },
                So: function() {
                    return w
                },
                XG: function() {
                    return f
                },
                _R: function() {
                    return p
                },
                a3: function() {
                    return i
                },
                nL: function() {
                    return d
                },
                wN: function() {
                    return l
                },
                wk: function() {
                    return v
                }
            });
            var r = n(4642)
              , o = n.n(r)
              , a = (0,
            n(26598).createLogger)("widgetState");
            function i(e) {
                return {
                    config: e
                }
            }
            function s(e, t) {
                return a.debug("setLoginState", t),
                Object.assign({}, e, {
                    loginState: t
                })
            }
            function u(e, t) {
                return a.debug("updateStorageBusyState", e, t),
                Object.assign({}, e, {
                    storageBusyState: t
                })
            }
            function c(e) {
                return Object.assign({}, e, {
                    showMenu: !0 !== e.showMenu
                })
            }
            function l(e, t) {
                return a.debug("setCriticalAlert"),
                Object.assign({}, e, {
                    criticalAlert: t
                })
            }
            function d(e, t) {
                return Object.assign({}, e, {
                    printMode: t
                })
            }
            function f(e, t) {
                return Object.assign({}, e, {
                    showInstructions: t
                })
            }
            function p(e, t) {
                return Object.assign({}, e, {
                    config: t
                })
            }
            var h, m = [];
            function g(e) {
                a.debug("updateState", e),
                h = e,
                o()(m, (function(t) {
                    t(e)
                }
                ))
            }
            function v() {
                return h
            }
            function w(e) {
                m.push(e)
            }
        },
        19863: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                getHtmlWordCount: function() {
                    return a
                },
                getTextWordCount: function() {
                    return o
                }
            });
            var r = n(36326)
              , o = function(e) {
                return (0,
                r.removeDiacritics)(e || "").replace(/[^\w\s'-]/g, " ").split(/\s+/).filter((function(e) {
                    return e
                }
                )).length
            }
              , a = function(e) {
                var t = (e || "").replace(/<\/li>/g, " ").replace(/<li[^>]+>/g, " ").replace(/<\/blockquote>/g, " ").replace(/<blockquote[^>]+>/g, " ").replace(/<\/div>/g, " ").replace(/<div[^>]+>/g, " ").replace(/(<([^>]+)>)/gi, "").replace(/&nbsp;/g, " ");
                return o(t)
            }
        },
        3138: function(e, t, n) {
            "use strict";
            n.d(t, {
                F6: function() {
                    return f
                },
                IU: function() {
                    return i
                },
                J3: function() {
                    return l
                },
                LA: function() {
                    return s
                },
                af: function() {
                    return m
                },
                dG: function() {
                    return u
                },
                fs: function() {
                    return h
                },
                hS: function() {
                    return p
                },
                kr: function() {
                    return c
                },
                xn: function() {
                    return d
                },
                yf: function() {
                    return g
                },
                z3: function() {
                    return a
                }
            });
            var r = {
                username: null,
                userid: null,
                email: null,
                providerid: null,
                providerhumanid: null,
                provider: null,
                school: null,
                token: null,
                sid: null,
                coaccount: null,
                className: null
            }
              , o = r;
            function a() {
                return o
            }
            function i() {
                o = r
            }
            function s(e) {
                o = e
            }
            function u() {
                return o.token
            }
            function c() {
                return o.sid
            }
            function l() {
                return o.username
            }
            function d() {
                return o.className
            }
            function f() {
                return o.userid
            }
            function p() {
                return o.email
            }
            function h() {
                return o.providerid
            }
            function m() {
                return o.providerhumanid
            }
            function g() {
                return o.coaccount
            }
        },
        69225: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                closeStream: function() {
                    return m
                },
                createCameraVideo: function() {
                    return g
                },
                getCameraPictureUrl: function() {
                    return v
                },
                openCameraPopup: function() {
                    return w
                },
                takePictureOrShowError: function() {
                    return b
                }
            });
            var r = n(58065)
              , o = n.n(r)
              , a = n(61743)
              , i = n(77752)
              , s = n(78514);
            function u(e) {
                return u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                u(e)
            }
            function c() {
                c = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , o = "function" == typeof Symbol ? Symbol : {}
                  , a = o.iterator || "@@iterator"
                  , i = o.asyncIterator || "@@asyncIterator"
                  , s = o.toStringTag || "@@toStringTag";
                function l(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    l({}, "")
                } catch (e) {
                    l = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function d(e, t, n, o) {
                    var a = t && t.prototype instanceof h ? t : h
                      , i = Object.create(a.prototype)
                      , s = new _(o || []);
                    return r(i, "_invoke", {
                        value: E(e, n, s)
                    }),
                    i
                }
                function f(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = d;
                var p = {};
                function h() {}
                function m() {}
                function g() {}
                var v = {};
                l(v, a, (function() {
                    return this
                }
                ));
                var w = Object.getPrototypeOf
                  , b = w && w(w(A([])));
                b && b !== t && n.call(b, a) && (v = b);
                var y = g.prototype = h.prototype = Object.create(v);
                function C(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        l(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function x(e, t) {
                    function o(r, a, i, s) {
                        var c = f(e[r], e, a);
                        if ("throw" !== c.type) {
                            var l = c.arg
                              , d = l.value;
                            return d && "object" == u(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                o("next", e, i, s)
                            }
                            ), (function(e) {
                                o("throw", e, i, s)
                            }
                            )) : t.resolve(d).then((function(e) {
                                l.value = e,
                                i(l)
                            }
                            ), (function(e) {
                                return o("throw", e, i, s)
                            }
                            ))
                        }
                        s(c.arg)
                    }
                    var a;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    o(e, n, t, r)
                                }
                                ))
                            }
                            return a = a ? a.then(r, r) : r()
                        }
                    })
                }
                function E(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = k(i, n);
                                if (s) {
                                    if (s === p)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = f(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === p)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function k(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        k(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        p;
                    var o = f(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        p;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    p) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    p)
                }
                function S(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function T(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function _(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(S, this),
                    this.reset(!0)
                }
                function A(e) {
                    if (e) {
                        var t = e[a];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: O
                    }
                }
                function O() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return m.prototype = g,
                r(y, "constructor", {
                    value: g,
                    configurable: !0
                }),
                r(g, "constructor", {
                    value: m,
                    configurable: !0
                }),
                m.displayName = l(g, s, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === m || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, g) : (e.__proto__ = g,
                    l(e, s, "GeneratorFunction")),
                    e.prototype = Object.create(y),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                C(x.prototype),
                l(x.prototype, i, (function() {
                    return this
                }
                )),
                e.AsyncIterator = x,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new x(d(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                C(y),
                l(y, s, "Generator"),
                l(y, a, (function() {
                    return this
                }
                )),
                l(y, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = A,
                _.prototype = {
                    constructor: _,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(T),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        p) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        p
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                T(n),
                                p
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    T(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: A(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        p
                    }
                },
                e
            }
            function l(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function d(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function i(e) {
                            l(a, r, o, i, s, "next", e)
                        }
                        function s(e) {
                            l(a, r, o, i, s, "throw", e)
                        }
                        i(void 0)
                    }
                    ))
                }
            }
            var f = void 0
              , p = []
              , h = void 0
              , m = function(e) {
                e && e.getTracks().forEach((function(e) {
                    e.stop()
                }
                ))
            }
              , g = function(e) {
                return new Promise((function(t, n) {
                    navigator.mediaDevices.getUserMedia({
                        video: !0,
                        audio: !1
                    }).then((function(n) {
                        var r = o()(document.createElement("video")).attr("id", "photo-video-stream").attr("playsinline", "").css({
                            cursor: "default"
                        }).appendTo(e);
                        r.get(0).srcObject = n,
                        r.get(0).play(),
                        t(n)
                    }
                    )).catch((function(e) {
                        n(e)
                    }
                    ))
                }
                ))
            }
              , v = function(e) {
                var t = document.createElement("video")
                  , n = document.createElement("canvas")
                  , r = n.getContext("2d");
                return t.srcObject = e,
                new Promise((function(e, o) {
                    t.addEventListener("loadeddata", d(c().mark((function a() {
                        var i, s, u;
                        return c().wrap((function(a) {
                            for (; ; )
                                switch (a.prev = a.next) {
                                case 0:
                                    return i = t.videoWidth,
                                    s = t.videoHeight,
                                    n.width = i,
                                    n.height = s,
                                    a.prev = 3,
                                    a.next = 6,
                                    t.play();
                                case 6:
                                    r.drawImage(t, 0, 0, i, s);
                                    try {
                                        u = n.toDataURL("image/jpeg", .9)
                                    } catch (e) {
                                        u = n.toDataURL("image/png")
                                    }
                                    e({
                                        url: u,
                                        width: i,
                                        height: s
                                    }),
                                    a.next = 14;
                                    break;
                                case 11:
                                    a.prev = 11,
                                    a.t0 = a.catch(3),
                                    o(a.t0);
                                case 14:
                                case "end":
                                    return a.stop()
                                }
                        }
                        ), a, null, [[3, 11]])
                    }
                    ))))
                }
                ))
            }
              , w = function(e, t, n, r, a) {
                navigator.mediaDevices.enumerateDevices().then((function(i) {
                    function s(e) {
                        return e.filter((function(e) {
                            return "videoinput" === e.kind
                        }
                        )).map((function(e) {
                            return e.deviceId
                        }
                        ))
                    }
                    if (0 !== (p = s(i)).length) {
                        h = p[0];
                        var u, l = o()("body").height() / 2, w = o()(document.createElement("div")).attr("id", "cameradialog").css({
                            "text-align": "center",
                            "max-width": "100%",
                            "max-height": l + "px",
                            padding: "0px 10px",
                            "box-sizing": "border-box",
                            overflow: "hidden"
                        }), b = {};
                        b[r] = function() {
                            if (h) {
                                var e = p.indexOf(h);
                                h = -1 === e || e >= p.length - 1 ? p[0] : p[e + 1]
                            } else
                                h = p[0];
                            var t;
                            m(f),
                            f = void 0,
                            (t = w,
                            new Promise((function(e, n) {
                                navigator.mediaDevices.getUserMedia({
                                    video: {
                                        deviceId: {
                                            exact: h
                                        }
                                    },
                                    audio: !1
                                }).then((function(n) {
                                    var r = o()(t).find("#photo-video-stream");
                                    r.get(0).srcObject = n,
                                    r.get(0).play(),
                                    e(n)
                                }
                                ))
                            }
                            ))).then((function(e) {
                                f = e
                            }
                            ))
                        }
                        ,
                        b[n] = d(c().mark((function t() {
                            var n, r, a, i;
                            return c().wrap((function(t) {
                                for (; ; )
                                    switch (t.prev = t.next) {
                                    case 0:
                                        return t.next = 2,
                                        v(f);
                                    case 2:
                                        n = t.sent,
                                        r = n.url,
                                        a = n.height,
                                        i = n.width,
                                        m(f),
                                        o()(this).dialog("close"),
                                        e(r, a, i);
                                    case 9:
                                    case "end":
                                        return t.stop()
                                    }
                            }
                            ), t, this)
                        }
                        ))),
                        g(w).then((function(e) {
                            m(f),
                            f = e,
                            w.dialog({
                                title: a,
                                dialogClass: "bw-dialog",
                                resizable: !1,
                                modal: !0,
                                width: 1e3,
                                buttons: b,
                                close: function(e, t) {
                                    m(f),
                                    clearInterval(u),
                                    o()(this).find("video")[0].removeEventListener("resize", C),
                                    o()(this).dialog("destroy").remove()
                                },
                                open: function() {
                                    u = setInterval(y, 2e3),
                                    y();
                                    var e = o()(this).find("video");
                                    C({
                                        target: e
                                    }),
                                    e[0].addEventListener("resize", C, !1)
                                }
                            })
                        }
                        )).catch((function(e) {
                            t(),
                            console.error("An error occurred: ".concat(e))
                        }
                        ))
                    } else
                        t();
                    function y() {
                        navigator.mediaDevices.enumerateDevices().then((function(e) {
                            var t, n = s(e);
                            n.length > p.length ? console.log("Camera added") : p.length > n.length && console.log("Camera reemoved"),
                            p = n,
                            t = o()(o()(w.parent()).find("button")[0]),
                            p.length > 1 ? t.show() : t.hide()
                        }
                        ))
                    }
                    function C(e) {
                        var t = o()(e.target)
                          , n = t[0].videoHeight / t[0].videoWidth
                          , r = l / w.width();
                        isNaN(r) || (r < n ? t.css({
                            height: Math.max(w.height(), 50),
                            width: void 0
                        }) : t.css({
                            height: void 0,
                            width: w.width()
                        }))
                    }
                }
                ))
            };
            function b() {
                return new Promise((function(e, t) {
                    -1 === (0,
                    a.getPlatform)().indexOf("preview") && navigator.mediaDevices && "function" == typeof navigator.mediaDevices.getUserMedia ? w((function(t, n, r) {
                        return e({
                            url: t,
                            height: n,
                            width: r
                        })
                    }
                    ), (function() {
                        (0,
                        i.showAlert)(s("No camera found or no permission given to use the camera"), s("No access to camera"))
                    }
                    ), s("Take picture"), s("Switch camera"), s("Camera")) : ((0,
                    i.showAlert)(s("Accessing the camera and photo library does not work on this platform."), s("Camera not supported")),
                    t())
                }
                ))
            }
        },
        14337: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                isLTI: function() {
                    return o
                }
            });
            var r = (0,
            n(4296).getParameters)();
            function o() {
                return !!r.lti
            }
        },
        73030: function(e, t, n) {
            "use strict";
            n.d(t, {
                _: function() {
                    return a
                },
                g: function() {
                    return o
                }
            });
            var r = [];
            function o(e) {
                for (var t = document.body.children, n = e; n.parentElement !== document.body && null != n.parentElement; )
                    n = n.parentElement;
                for (var o = [], a = 0; a < t.length; a++) {
                    var i = t[a];
                    i instanceof HTMLElement && i !== n && !0 !== i.inert && (o.push(i),
                    i.inert = !0)
                }
                r.push({
                    div: e,
                    elements: o
                })
            }
            function a() {
                var e = r.pop();
                e ? function(e) {
                    for (var t = 0; t < e.length; t++)
                        e[t].inert = !1
                }(e.elements) : console.error("exitModal called without matching enterModal")
            }
        },
        94292: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                addLinkIcon: function() {
                    return v
                },
                isWidgetPlayLink: function() {
                    return h
                },
                openLinkOrWidgetLink: function() {
                    return m
                },
                openWidget: function() {
                    return p
                },
                processRichTextWidgetPlayLinks: function() {
                    return g
                },
                widgetCoverImage: function() {
                    return w
                }
            });
            var r = n(57581)
              , o = n.n(r)
              , a = n(53142)
              , i = n.n(a)
              , s = n(58065)
              , u = n.n(s)
              , c = n(62780)
              , l = n(4296)
              , d = n(3138)
              , f = n(77752);
            function p(e, t, n) {
                if (console.log("Widget link: " + e),
                e = function(e, t) {
                    var n = (0,
                    l.getParameters)();
                    delete n.design,
                    delete n.content,
                    delete n.translation,
                    delete n.sig;
                    var r = d.fs()
                      , a = window.location.protocol + "//" + window.location.host + window.location.pathname + (0,
                    c.replaceParamsBySessionLink)(window.location.search);
                    if (null == n.login_hint && r && "" !== r && (window.location.search.length > 1 ? a += "&" : a += "?",
                    a += "login_hint=" + encodeURIComponent(r)),
                    a += (0,
                    l.getHash)(),
                    "" === e || "?" === e.charAt(0))
                        return f.showAlert("The widget is not included.", "Broken link"),
                        e;
                    function s(e) {
                        return -1 === e.indexOf("?") ? "?" : "&"
                    }
                    if (n.playBaseURL) {
                        var u = new URL(e)
                          , p = new URL(n.playBaseURL);
                        u.protocol = p.protocol,
                        u.host = p.host,
                        e = u.href
                    }
                    if (t && (e += s(e) + "backlink=" + encodeURIComponent(a),
                    window.bwbackbuttonlabel && (e += "&backbutton=" + encodeURIComponent(window.bwbackbuttonlabel))),
                    e.indexOf("/play/") >= 0)
                        n.q && "" !== n.q && (e += s(e) + function(e, t) {
                            if (null == e)
                                return "";
                            var n = i()(t) ? t : [t];
                            return o()(e.split("&"), (function(e) {
                                for (var t = 0; t < n.length; ++t)
                                    if (e.startsWith(n[t] + "="))
                                        return !1;
                                return !0
                            }
                            )).join("&")
                        }((0,
                        c.valueOrCacheValue)(n.q), ["context_id", "backlink", "backbutton"])),
                        null != n.toplevel && (e += s(e) + "toplevel=" + encodeURIComponent(n.toplevel)),
                        r && "" !== r && (e += s(e) + "login_hint=" + encodeURIComponent(r));
                    else {
                        var h = {}
                          , m = {};
                        for (var g in n)
                            "sid" !== g && n.hasOwnProperty(g) && (l.LEGACY_HASH_PARAMETERS.indexOf(g) >= 0 ? h[g] = n[g] : m[g] = n[g]);
                        r && "" !== r && (h.login_hint = r),
                        Object.keys(m).length > 0 && (e += s(e) + (0,
                        l.urlencode)(m)),
                        Object.keys(h).length > 0 && (e += "#" + (0,
                        l.urlencode)(h))
                    }
                    return e
                }(e, t),
                n) {
                    var r = u()(n.target)
                      , a = 0 === r.length ? {
                        left: 0,
                        top: 0
                    } : r.offset()
                      , s = r.clone();
                    u()("body").append(s),
                    s.css({
                        position: "absolute",
                        left: a.left + "px",
                        top: a.top + "px",
                        width: r.width() + "px",
                        height: r.height() + "px",
                        "border-left": r.css("border-left"),
                        "border-right": r.css("border-right"),
                        "border-top": r.css("border-top"),
                        "border-bottom": r.css("border-bottom"),
                        "border-top-left-radius": r.css("border-top-left-radius"),
                        "border-top-right-radius": r.css("border-top-right-radius"),
                        "border-bottom-left-radius": r.css("border-bottom-left-radius"),
                        "border-bottom-right-radius": r.css("border-bottom-right-radius"),
                        "-webkit-border-top-left-radius": r.css("-webkit-border-top-left-radius"),
                        "-webkit-border-top-right-radius": r.css("-webkit-border-top-right-radius"),
                        "-webkit-border-bottom-left-radius": r.css("-webkit-border-bottom-left-radius"),
                        "-webkit-border-bottom-right-radius": r.css("-webkit-border-bottom-right-radius"),
                        "box-shadow": r.css("box-shadow"),
                        "-webkit-box-shadow": r.css("-webkit-box-shadow")
                    });
                    var p = "all .5s linear";
                    s.css({
                        "-webkit-transition": p,
                        "-moz-transition": p,
                        "-o-transition": p,
                        transition: p,
                        "box-sizing": "border-box"
                    });
                    var h = u()(document).width()
                      , m = u()(document).height()
                      , g = h / r.width()
                      , v = m / r.height()
                      , w = g > v ? v : g
                      , b = "translate(" + (h / 2 - a.left - r.width() / 2) + "px, " + (m / 2 - a.top - r.height() / 2) + "px) scale(" + w + ")";
                    s.css({
                        "-webkit-transform": b,
                        "-moz-transform": b,
                        "-o-transform": b,
                        transform: b,
                        opacity: .1
                    }),
                    setTimeout((function() {
                        window.location.href = e,
                        s.remove()
                    }
                    ), 500)
                } else
                    window.location.href = e,
                    setTimeout((function() {
                        window.location.href = e
                    }
                    ), 100)
            }
            function h(e) {
                return null != e && -1 !== e.indexOf("bookwidgets.com/play/")
            }
            function m(e, t, n) {
                if (h(e)) {
                    var r = -1 === e.indexOf("?") ? "?" : "&";
                    p(e += r + "noiframe=1", t)
                } else
                    u()().isSafeURLForNavigation(e) && (n || null == top ? (console.log("open link in new tab ", e),
                    window.open(e, "_blank")) : (console.log("open link in same tab ", e),
                    top.location.href = e))
            }
            function g(e, t) {
                e.find("a").filter((function() {
                    return h(u()(this).attr("href"))
                }
                )).each((function() {
                    var e = u()(this)
                      , n = e.attr("href")
                      , r = -1 === n.indexOf("?") ? "?" : "&";
                    n += r + "noiframe=1",
                    e.before(u()(document.createElement("a")).addClass("rtlink").tapOrClick((function(e) {
                        return p(n, t),
                        e.preventDefault(),
                        e.stopPropagation(),
                        !1
                    }
                    )).attr("href", "#").safeHtml(e.html())),
                    e.hide()
                }
                ))
            }
            function v(e) {
                u()(document.createElement("div")).addClass("link-icon").css({
                    width: "24px",
                    height: "24px",
                    position: "absolute",
                    top: "10px",
                    right: "10px",
                    opacity: "0.6",
                    background: "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA+JJREFUeAHlm8tLIzEcx2Nb67M3wZsXb7uw91UPHv0f/AdEEEEEUUQQRBBE0a4PfKJWEV+IiIgUEfHmraxXBa/e3NvCbjbf2oiPTZv5zWRm0gn8GoyTmXw+ySTttGHsc/oqiqZF3Il4FsEtDzCABUxgU6ak+E9axB8RtkOr2g82MIL1XUJBVoSqYrmVg/WdhB8RgpediZHAKkTgvsiJiImIUvorYL/FxcuQiO9RIi+wovN/4wUz5JdCYdSyOwjAMpGKGnmB9xcEYFKIbEpQyJubm1ljY6NW1YoKOKYnav1cLseenzG4Sye5LGjnTU1N/P7+noc5tbW1afGQlr7Hx0fW3t7OHh4eSusN+REkAWAqFwlkAeUiwZWAcpDgWoDtEjwRYLMEzwTYKsFTATZK8FyAbRKMCLBJgjEBtkgwKsAGCcYFhF2CLwLeSnh6esKfxpP4pKp1Dd8EoDUdHR2soaFBq2F+HeSbgK6uLra4uMioDzhMCfFFQHd3N5ufnw8dPKQaF9DT08Pm5uZCCW9cQG9vL5udnTU1ej07r9azM3E1R8f19fUF+siwtbVVt73OwHRE9Pf3BwqPiwcmYGBgIHD4wAQMDg6GAj4QAcPDw6GB913AyMiI5/C3t7dcfO9APq9vc8Do6Ci5kaqKNzc3PJVKcTffQPkiYGxsTMVALr++vub19fWvSxhVgnEB4+PjZEhVxaurK15XV/cKL5dcigSjAiYmJlQM5PLLy0teW1v7CZ4qwZiAyclJMqSqYjabLQpPkdDS0qKUKc9XyPXfCU5NTakYyOUXFxe8pqZGt7HaE6PnAmZmZsiQqorn5+e8urpaG172nM6c4KmAdDqtYiCXn52d8aqqKsfwuhI8ESCe3nDxWZ4Mqap4enrqCl5HgmsBgBePsFQM5PKTkxOeTCbJPS/hZa66HVwJAPzS0hIZUlXx+PjYU/hiElwJ6OzsVDGQy4+OjnhlZaVnPS/hZf5xJLgS4PXwPzg44IlEwhj8/yS4EoATQsLy8jK5x2XFvb09X+A/SnAtQEpYXV2VLI7z3d1dHo/Hjfe8hJc5bgfxY07d6xZ/JxiLxfj6+rpj+O3t7UDgpQQHeXEBOBEkbG5uakvY2tqyBR6jpLQAKSGTyZSUsLGxkReme94QHKcnAA3F/byzs6OUsLa2Zhu8/giQPQUJmNw+ppWVlfzKIY+zKHe+NxBr+v7+/qsDvGvEsmkRtGxr/vf02DIjC7RzSDg8POQLCwu2woP1p4j8jkpt8LeyIMHSnpe809jOEeltcxgBSJHdOPmC/7KNNNJbZyECe2kxEiK5eRoCZMKcEJnt8/8AtqIJGXRoCukAAAAASUVORK5CYII=)",
                    "background-size": "cover"
                }).appendTo(e)
            }
            function w(e) {
                return e ? e.replace("/play/", "/cover/") : null
            }
        },
        4296: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                LEGACY_HASH_PARAMETERS: function() {
                    return r
                },
                getHash: function() {
                    return f
                },
                getParameters: function() {
                    return g
                },
                getQueryParams: function() {
                    return u
                },
                getUrlParams: function() {
                    return s
                },
                removeQueryStringParameter: function() {
                    return d
                },
                split: function() {
                    return a
                },
                splitList: function() {
                    return i
                },
                updateWindowQueryParameter: function() {
                    return p
                },
                urlencode: function() {
                    return o
                }
            });
            var r = ["context_id", "course_id", "hide_account", "lfq", "lti", "login_hint", "no_logout", "q", "sso", "smartschool_platform", "student_class_id", "submit_url", "teacher_email", "teacher_id"];
            function o(e) {
                var t = [];
                if ("[object Array]" === Object.prototype.toString.call(e))
                    for (var n = 0; n < e.length; ++n) {
                        var r = e[n];
                        r.length > 1 ? t.push(encodeURIComponent(r[0]) + "=" + encodeURIComponent(r[1])) : t.push(encodeURIComponent(r[0]))
                    }
                else
                    for (var o in e)
                        e.hasOwnProperty(o) && t.push(encodeURIComponent(o) + "=" + encodeURIComponent(e[o]));
                return t.join("&")
            }
            function a(e) {
                for (var t = {}, n = e.split("&"), r = 0; r < n.length; r++) {
                    var o = n[r].indexOf("=");
                    if (!(o < 0)) {
                        var a = [n[r].substr(0, o), n[r].substr(o + 1)]
                          , i = decodeURIComponent(a[0]);
                        if (void 0 === t[i])
                            t[i] = decodeURIComponent(a[1]);
                        else if ("string" == typeof t[i]) {
                            var s = [t[i], decodeURIComponent(a[1])];
                            t[i] = s
                        } else
                            t[i].push(decodeURIComponent(a[1]))
                    }
                }
                return t
            }
            function i(e) {
                for (var t = [], n = e.split("&"), r = 0; r < n.length; r++) {
                    var o = n[r].indexOf("=");
                    if (o < 0)
                        t.push([n[r]]);
                    else {
                        var a = [n[r].substr(0, o), n[r].substr(o + 1)];
                        t.push([decodeURIComponent(a[0]), decodeURIComponent(a[1])])
                    }
                }
                return t
            }
            function s(e) {
                return -1 === e.indexOf("?") ? {} : a(e.replace(/[^?]*\?/, "").replace(/#.*/, ""))
            }
            function u(e) {
                return !e || e.length < 1 || "?" !== e[0] ? {} : a(e.substr(1))
            }
            function c(e) {
                return !e || e.length < 1 || "?" !== e[0] ? [] : i(e.substr(1))
            }
            function l(e, t) {
                return e.split("&").filter((function(e) {
                    return decodeURIComponent(e.split("=")[0]) !== t
                }
                )).join("&")
            }
            function d(e, t) {
                return e.length > 0 && ("?" === e[0] || "#" === e[0]) ? e[0] + l(e.substring(1), t) : l(e, t)
            }
            function f(e) {
                return (e = e || window.location.href).indexOf("#") >= 0 ? "#" + (e.split("#")[1] || "") : ""
            }
            function p(e, t) {
                for (var n = c(window.location.search), r = !1, a = 0; a < n.length; ++a)
                    if (n[a][0] === e) {
                        n[a].length > 1 ? n[a][1] = t : n[a].push(t),
                        r = !0;
                        break
                    }
                r || n.push([e, t]),
                history.replaceState("", document.title, window.location.pathname + "?" + o(n) + f())
            }
            !function() {
                if (!window.WidgetParams) {
                    var e = c(window.location.search)
                      , t = []
                      , n = f();
                    if (n.length >= 1 && "#" === n[0])
                        for (var a = i(n.substr(1)), s = 0; s < a.length; ++s) {
                            var u = a[s];
                            r.indexOf(u[0]) >= 0 ? e.push(u) : t.push(u)
                        }
                    var l = window.location.pathname;
                    e.length > 0 && (l += "?" + o(e)),
                    t.length > 0 && (l += "#" + o(t)),
                    "undefined" != typeof history && history.replaceState("", document.title, l)
                }
            }();
            var h = f()
              , m = window.location.search;
            function g() {
                var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]
                  , t = window.hasOwnProperty("WidgetParams") ? {} : u(m);
                if (e) {
                    var n = function(e) {
                        return !e || e.length < 1 || "#" !== e[0] ? {} : a(e.substr(1))
                    }(h);
                    for (var r in n)
                        n.hasOwnProperty(r) && (t[r] = n[r])
                }
                if (window.WidgetParams)
                    for (var o in window.WidgetParams)
                        t[o] = window.WidgetParams[o];
                return t
            }
        },
        73668: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                answerUpdated: function() {
                    return ze
                },
                bindToContext: function() {
                    return it
                },
                calculateMaxScore: function() {
                    return le
                },
                calculateMaxScoreForQuestion: function() {
                    return ce
                },
                decryptEncryptedConfigParts: function() {
                    return rt
                },
                getCurrentAudioPlaysDetail: function() {
                    return ct
                },
                getFeedbackMsg: function() {
                    return Be
                },
                getLastPage: function() {
                    return _e
                },
                getNavController: function() {
                    return Ze
                },
                getNumbering: function() {
                    return W
                },
                getSebQuitMessage: function() {
                    return Pe
                },
                gotoNextQuestion: function() {
                    return Ne
                },
                gotoPrevQuestion: function() {
                    return Fe
                },
                gotoQuestion: function() {
                    return Le
                },
                hasSubmitCheckPage: function() {
                    return Se
                },
                initClearCount: function() {
                    return Ce
                },
                initIterationData: function() {
                    return xe
                },
                initSubmitRestrictions: function() {
                    return ye
                },
                isExaminationMode: function() {
                    return he
                },
                isQuestionLocked: function() {
                    return Ye
                },
                mergeInQuestionIDs: function() {
                    return at
                },
                mergeQuestionConfigs: function() {
                    return ot
                },
                needQuestionByQuestionCheck: function() {
                    return Ae
                },
                needQuestionByQuestionCorrectAnswers: function() {
                    return De
                },
                needQuestionByQuestionCorrectness: function() {
                    return Oe
                },
                needSubmitButton: function() {
                    return Te
                },
                needToColorCorrectAnswersForQuestion: function() {
                    return ge
                },
                needToShowEndScore: function() {
                    return ve
                },
                needToShowFeedback: function() {
                    return we
                },
                needToShowSebQuitLink: function() {
                    return be
                },
                needsManualCorrection: function() {
                    return me
                },
                onCurrentAudioPlaysDetailUpdate: function() {
                    return lt
                },
                prepareQuestionDependencies: function() {
                    return de
                },
                processDialogRichText: function() {
                    return Re
                },
                questionHasNoAutoCorrection: function() {
                    return Qe
                },
                questionHasNoRationale: function() {
                    return He
                },
                questionIsStarred: function() {
                    return ut
                },
                roundScore: function() {
                    return pe
                },
                setAnswerLoadMessageVisibility: function() {
                    return st
                },
                showQuestionList: function() {
                    return Me
                },
                toggleShowQuestionList: function() {
                    return je
                },
                toggleShowText: function() {
                    return qe
                }
            });
            var r = n(48983)
              , o = n.n(r)
              , a = n(87526)
              , i = n.n(a)
              , s = n(3326)
              , u = n.n(s)
              , c = n(3514)
              , l = n.n(c)
              , d = n(40105)
              , f = n.n(d)
              , p = n(4642)
              , h = n.n(p)
              , m = n(45250);
            function g(e, t) {
                if (m.isArray(t)) {
                    if (0 === t.length)
                        return e;
                    if (t.length !== e.length)
                        return e;
                    for (var n = [], r = 0; r < t.length; ++r)
                        n.push(g(e[r], t[r]));
                    return n
                }
                var o = m.cloneDeep(e);
                for (var a in t)
                    a.startsWith("_") ? o[a.substring(1)] = t[a] : o[a] = g(e[a], t[a]);
                return o
            }
            var v = n(51958)
              , w = n(92464)
              , b = n.n(w)
              , y = n(58065)
              , C = n.n(y)
              , x = n(24507)
              , E = n(63181)
              , k = n(77752)
              , S = n(94292)
              , T = n(1309)
              , _ = n(84966)
              , A = n(50466)
              , O = n(4296)
              , D = n(17496)
              , I = n(98274)
              , P = n(26598)
              , R = n(41183)
              , L = n(52826)
              , N = n.n(L)
              , F = n(53126)
              , M = n.n(F)
              , j = n(61743)
              , q = n(62325)
              , B = n(90531);
            function W(e, t, n) {
                return "true" === t.noquestion && "yes" !== e.info_numbering ? null : "yes" === e.auto_numbering ? n : t.number
            }
            function U(e) {
                var t = []
                  , n = 0;
                return h()((0,
                v.safeArray)(e.questions), (function(r, o) {
                    "true" !== r.noquestion ? (++n,
                    t.push(("yes" === e.random_order ? o : n) + "")) : t.push(-o + "")
                }
                )),
                t
            }
            function z(e) {
                var t = [];
                return (0,
                B.N)(e) ? (h()((0,
                v.safeArray)(e.questions), (function(e) {
                    t.push(e.id)
                }
                )),
                t) : U(e)
            }
            var H = n(23798);
            function Q(e) {
                if (null == e)
                    return 0;
                var t, n = e.split(":");
                return t = 1 === n.length ? 60 * parseInt(e) : 60 * parseInt(n[0]) + parseInt(n[1]),
                isNaN(t) ? 0 : t
            }
            var V = n(19605)
              , Y = n(29915)
              , K = n(8138)
              , G = n.n(K);
            function $(e) {
                return $ = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                $(e)
            }
            function J() {
                J = function() {
                    return e
                }
                ;
                var e = {}
                  , t = Object.prototype
                  , n = t.hasOwnProperty
                  , r = Object.defineProperty || function(e, t, n) {
                    e[t] = n.value
                }
                  , o = "function" == typeof Symbol ? Symbol : {}
                  , a = o.iterator || "@@iterator"
                  , i = o.asyncIterator || "@@asyncIterator"
                  , s = o.toStringTag || "@@toStringTag";
                function u(e, t, n) {
                    return Object.defineProperty(e, t, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }),
                    e[t]
                }
                try {
                    u({}, "")
                } catch (e) {
                    u = function(e, t, n) {
                        return e[t] = n
                    }
                }
                function c(e, t, n, o) {
                    var a = t && t.prototype instanceof f ? t : f
                      , i = Object.create(a.prototype)
                      , s = new S(o || []);
                    return r(i, "_invoke", {
                        value: C(e, n, s)
                    }),
                    i
                }
                function l(e, t, n) {
                    try {
                        return {
                            type: "normal",
                            arg: e.call(t, n)
                        }
                    } catch (e) {
                        return {
                            type: "throw",
                            arg: e
                        }
                    }
                }
                e.wrap = c;
                var d = {};
                function f() {}
                function p() {}
                function h() {}
                var m = {};
                u(m, a, (function() {
                    return this
                }
                ));
                var g = Object.getPrototypeOf
                  , v = g && g(g(T([])));
                v && v !== t && n.call(v, a) && (m = v);
                var w = h.prototype = f.prototype = Object.create(m);
                function b(e) {
                    ["next", "throw", "return"].forEach((function(t) {
                        u(e, t, (function(e) {
                            return this._invoke(t, e)
                        }
                        ))
                    }
                    ))
                }
                function y(e, t) {
                    function o(r, a, i, s) {
                        var u = l(e[r], e, a);
                        if ("throw" !== u.type) {
                            var c = u.arg
                              , d = c.value;
                            return d && "object" == $(d) && n.call(d, "__await") ? t.resolve(d.__await).then((function(e) {
                                o("next", e, i, s)
                            }
                            ), (function(e) {
                                o("throw", e, i, s)
                            }
                            )) : t.resolve(d).then((function(e) {
                                c.value = e,
                                i(c)
                            }
                            ), (function(e) {
                                return o("throw", e, i, s)
                            }
                            ))
                        }
                        s(u.arg)
                    }
                    var a;
                    r(this, "_invoke", {
                        value: function(e, n) {
                            function r() {
                                return new t((function(t, r) {
                                    o(e, n, t, r)
                                }
                                ))
                            }
                            return a = a ? a.then(r, r) : r()
                        }
                    })
                }
                function C(e, t, n) {
                    var r = "suspendedStart";
                    return function(o, a) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === o)
                                throw a;
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        for (n.method = o,
                        n.arg = a; ; ) {
                            var i = n.delegate;
                            if (i) {
                                var s = x(i, n);
                                if (s) {
                                    if (s === d)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === n.method)
                                n.sent = n._sent = n.arg;
                            else if ("throw" === n.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    n.arg;
                                n.dispatchException(n.arg)
                            } else
                                "return" === n.method && n.abrupt("return", n.arg);
                            r = "executing";
                            var u = l(e, t, n);
                            if ("normal" === u.type) {
                                if (r = n.done ? "completed" : "suspendedYield",
                                u.arg === d)
                                    continue;
                                return {
                                    value: u.arg,
                                    done: n.done
                                }
                            }
                            "throw" === u.type && (r = "completed",
                            n.method = "throw",
                            n.arg = u.arg)
                        }
                    }
                }
                function x(e, t) {
                    var n = t.method
                      , r = e.iterator[n];
                    if (void 0 === r)
                        return t.delegate = null,
                        "throw" === n && e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        x(e, t),
                        "throw" === t.method) || "return" !== n && (t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a '" + n + "' method")),
                        d;
                    var o = l(r, e.iterator, t.arg);
                    if ("throw" === o.type)
                        return t.method = "throw",
                        t.arg = o.arg,
                        t.delegate = null,
                        d;
                    var a = o.arg;
                    return a ? a.done ? (t[e.resultName] = a.value,
                    t.next = e.nextLoc,
                    "return" !== t.method && (t.method = "next",
                    t.arg = void 0),
                    t.delegate = null,
                    d) : a : (t.method = "throw",
                    t.arg = new TypeError("iterator result is not an object"),
                    t.delegate = null,
                    d)
                }
                function E(e) {
                    var t = {
                        tryLoc: e[0]
                    };
                    1 in e && (t.catchLoc = e[1]),
                    2 in e && (t.finallyLoc = e[2],
                    t.afterLoc = e[3]),
                    this.tryEntries.push(t)
                }
                function k(e) {
                    var t = e.completion || {};
                    t.type = "normal",
                    delete t.arg,
                    e.completion = t
                }
                function S(e) {
                    this.tryEntries = [{
                        tryLoc: "root"
                    }],
                    e.forEach(E, this),
                    this.reset(!0)
                }
                function T(e) {
                    if (e) {
                        var t = e[a];
                        if (t)
                            return t.call(e);
                        if ("function" == typeof e.next)
                            return e;
                        if (!isNaN(e.length)) {
                            var r = -1
                              , o = function t() {
                                for (; ++r < e.length; )
                                    if (n.call(e, r))
                                        return t.value = e[r],
                                        t.done = !1,
                                        t;
                                return t.value = void 0,
                                t.done = !0,
                                t
                            };
                            return o.next = o
                        }
                    }
                    return {
                        next: _
                    }
                }
                function _() {
                    return {
                        value: void 0,
                        done: !0
                    }
                }
                return p.prototype = h,
                r(w, "constructor", {
                    value: h,
                    configurable: !0
                }),
                r(h, "constructor", {
                    value: p,
                    configurable: !0
                }),
                p.displayName = u(h, s, "GeneratorFunction"),
                e.isGeneratorFunction = function(e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === p || "GeneratorFunction" === (t.displayName || t.name))
                }
                ,
                e.mark = function(e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h,
                    u(e, s, "GeneratorFunction")),
                    e.prototype = Object.create(w),
                    e
                }
                ,
                e.awrap = function(e) {
                    return {
                        __await: e
                    }
                }
                ,
                b(y.prototype),
                u(y.prototype, i, (function() {
                    return this
                }
                )),
                e.AsyncIterator = y,
                e.async = function(t, n, r, o, a) {
                    void 0 === a && (a = Promise);
                    var i = new y(c(t, n, r, o),a);
                    return e.isGeneratorFunction(n) ? i : i.next().then((function(e) {
                        return e.done ? e.value : i.next()
                    }
                    ))
                }
                ,
                b(w),
                u(w, s, "Generator"),
                u(w, a, (function() {
                    return this
                }
                )),
                u(w, "toString", (function() {
                    return "[object Generator]"
                }
                )),
                e.keys = function(e) {
                    var t = Object(e)
                      , n = [];
                    for (var r in t)
                        n.push(r);
                    return n.reverse(),
                    function e() {
                        for (; n.length; ) {
                            var r = n.pop();
                            if (r in t)
                                return e.value = r,
                                e.done = !1,
                                e
                        }
                        return e.done = !0,
                        e
                    }
                }
                ,
                e.values = T,
                S.prototype = {
                    constructor: S,
                    reset: function(e) {
                        if (this.prev = 0,
                        this.next = 0,
                        this.sent = this._sent = void 0,
                        this.done = !1,
                        this.delegate = null,
                        this.method = "next",
                        this.arg = void 0,
                        this.tryEntries.forEach(k),
                        !e)
                            for (var t in this)
                                "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                    },
                    stop: function() {
                        this.done = !0;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type)
                            throw e.arg;
                        return this.rval
                    },
                    dispatchException: function(e) {
                        if (this.done)
                            throw e;
                        var t = this;
                        function r(n, r) {
                            return i.type = "throw",
                            i.arg = e,
                            t.next = n,
                            r && (t.method = "next",
                            t.arg = void 0),
                            !!r
                        }
                        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                            var a = this.tryEntries[o]
                              , i = a.completion;
                            if ("root" === a.tryLoc)
                                return r("end");
                            if (a.tryLoc <= this.prev) {
                                var s = n.call(a, "catchLoc")
                                  , u = n.call(a, "finallyLoc");
                                if (s && u) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0);
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                } else if (s) {
                                    if (this.prev < a.catchLoc)
                                        return r(a.catchLoc, !0)
                                } else {
                                    if (!u)
                                        throw new Error("try statement without catch or finally");
                                    if (this.prev < a.finallyLoc)
                                        return r(a.finallyLoc)
                                }
                            }
                        }
                    },
                    abrupt: function(e, t) {
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r];
                            if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                                var a = o;
                                break
                            }
                        }
                        a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null);
                        var i = a ? a.completion : {};
                        return i.type = e,
                        i.arg = t,
                        a ? (this.method = "next",
                        this.next = a.finallyLoc,
                        d) : this.complete(i)
                    },
                    complete: function(e, t) {
                        if ("throw" === e.type)
                            throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                        this.method = "return",
                        this.next = "end") : "normal" === e.type && t && (this.next = t),
                        d
                    },
                    finish: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.finallyLoc === e)
                                return this.complete(n.completion, n.afterLoc),
                                k(n),
                                d
                        }
                    },
                    catch: function(e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var n = this.tryEntries[t];
                            if (n.tryLoc === e) {
                                var r = n.completion;
                                if ("throw" === r.type) {
                                    var o = r.arg;
                                    k(n)
                                }
                                return o
                            }
                        }
                        throw new Error("illegal catch attempt")
                    },
                    delegateYield: function(e, t, n) {
                        return this.delegate = {
                            iterator: T(e),
                            resultName: t,
                            nextLoc: n
                        },
                        "next" === this.method && (this.arg = void 0),
                        d
                    }
                },
                e
            }
            function X(e, t, n) {
                return t = Z(t),
                function(e, t) {
                    if (t && ("object" === $(t) || "function" == typeof t))
                        return t;
                    if (void 0 !== t)
                        throw new TypeError("Derived constructors may only return object or undefined");
                    return function(e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }(e)
                }(e, function() {
                    if ("undefined" == typeof Reflect || !Reflect.construct)
                        return !1;
                    if (Reflect.construct.sham)
                        return !1;
                    if ("function" == typeof Proxy)
                        return !0;
                    try {
                        return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                        )))
                    } catch (e) {
                        return !1
                    }
                }() ? Reflect.construct(t, n || [], Z(e).constructor) : t.apply(e, n))
            }
            function Z(e) {
                return Z = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                Z(e)
            }
            function ee(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                t && te(e, t)
            }
            function te(e, t) {
                return te = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                te(e, t)
            }
            function ne(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }
            function re(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, ae(r.key), r)
                }
            }
            function oe(e, t, n) {
                return t && re(e.prototype, t),
                n && re(e, n),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e
            }
            function ae(e) {
                var t = function(e) {
                    if ("object" !== $(e) || null === e)
                        return e;
                    var t = e[Symbol.toPrimitive];
                    if (void 0 !== t) {
                        var n = t.call(e, "string");
                        if ("object" !== $(n))
                            return n;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }
                    return String(e)
                }(e);
                return "symbol" === $(t) ? t : String(t)
            }
            function ie(e, t, n, r, o, a, i) {
                try {
                    var s = e[a](i)
                      , u = s.value
                } catch (e) {
                    return void n(e)
                }
                s.done ? t(u) : Promise.resolve(u).then(r, o)
            }
            function se(e) {
                return function() {
                    var t = this
                      , n = arguments;
                    return new Promise((function(r, o) {
                        var a = e.apply(t, n);
                        function i(e) {
                            ie(a, r, o, i, s, "next", e)
                        }
                        function s(e) {
                            ie(a, r, o, i, s, "throw", e)
                        }
                        i(void 0)
                    }
                    ))
                }
            }
            var ue = (0,
            P.createLogger)("quizUtils");
            function ce(e) {
                if ("no" === e.needs_correction)
                    return 0;
                if (!I.check[e.Type])
                    return 0;
                var t = I.check[e.Type](e, null);
                return null == t ? 0 : t.outof || 0
            }
            function le(e) {
                return f()(e.questions, ce).reduce((function(e, t) {
                    return e + t
                }
                ), 0)
            }
            function de(e) {
                return fe.apply(this, arguments)
            }
            function fe() {
                return (fe = se(J().mark((function e(t) {
                    return J().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (-1 === f()(t.questions, (function(e) {
                                    return e.Type
                                }
                                )).indexOf("Equations")) {
                                    e.next = 11;
                                    break
                                }
                                return e.prev = 1,
                                e.next = 4,
                                C().when((0,
                                x.loadJS)("../external/mathquill-v5/js/mathquill.min.js"), (0,
                                x.loadCSS)("../external/mathquill-v5/css/mathquill.css"));
                            case 4:
                                e.next = 9;
                                break;
                            case 6:
                                e.prev = 6,
                                e.t0 = e.catch(1),
                                console.error("Problem loading mathquill");
                            case 9:
                                e.next = 12;
                                break;
                            case 11:
                                ue.debug("No dependencies;");
                            case 12:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, null, [[1, 6]])
                }
                )))).apply(this, arguments)
            }
            function pe(e) {
                return Math.round(100 * e) / 100
            }
            function he(e) {
                return "yes" === e.submit_answers && "yes" === e.examination_mode
            }
            function me(e) {
                if (e.correctness.constructor === Array) {
                    for (var t = 0; t < e.correctness.length; ++t)
                        if (-2 === e.correctness[t])
                            return !0;
                    return !1
                }
                return -2 === e.correctness
            }
            function ge(e, t) {
                return "question-specific" === e.color_correct_answers && "yes" === t.color_correct_answers
            }
            function ve(e) {
                return "Score only" === e.show_score || "Score vs maximum" === e.show_score
            }
            function we(e) {
                return (!e.show_feedback || "always" === e.show_feedback || "widget" === e.show_feedback) && e.feedback && e.feedback.length > 0
            }
            function be(e) {
                return "yes" === e.safe_exam_browser
            }
            function ye(e) {
                (0,
                H.$j)((0,
                V.A3)((0,
                H.wk)(), "true" === e["submitted.bool"]))
            }
            function Ce(e) {
                (0,
                H.$j)((0,
                V.Jr)((0,
                H.wk)(), e.cc ? parseInt(e.cc) : 0))
            }
            function xe(e) {
                var t, n = (0,
                H.wk)();
                n = (0,
                V.jJ)(n, e["iterations.number"] ? parseInt(e["iterations.number"]) : 0),
                n = (0,
                V.SB)(n, null !== (t = e["locked_questions.ids"]) && void 0 !== t ? t : []),
                (0,
                H.$j)(n)
            }
            var Ee = function(e) {
                (0,
                H.$j)((0,
                V.ld)((0,
                H.wk)(), function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0;
                    if (null == e)
                        return e;
                    if (G()(e))
                        try {
                            return JSON.parse(e)
                        } catch (n) {
                            return console.log("Load problem, non JSON string?", n, e),
                            t
                        }
                    return e
                }(e["starred_questions.ids"])))
            }
              , ke = function(e) {
                var t = e["currentAudioPlays.json"];
                if (t)
                    try {
                        var n = JSON.parse(t);
                        (0,
                        H.$j)((0,
                        V.mN)((0,
                        H.wk)(), n))
                    } catch (e) {}
            };
            function Se(e) {
                return "yes" === e.submit_answers || "yes" === e.show_correct || ve(e)
            }
            function Te(e, t) {
                return !(t.readOnly || "yes" !== e.submit_answers || "no" !== e.submit_only_once && t.submitted)
            }
            function _e(e) {
                return (0,
                v.safeArray)(e.questions).length + (Se(e) ? 1 : 0)
            }
            function Ae(e) {
                return "yes" === e.question_by_question_check && "yes" === e.show_correct
            }
            function Oe(e) {
                return "yes" === e.question_by_question_check && "yes" === e.show_correct
            }
            function De(e) {
                return "yes" === e.question_by_question_check && "yes" === e.show_correct && "yes" === e.show_answers
            }
            function Ie(e, t) {
                if (t.hasOwnProperty("next_question.json") && "check" !== t["mode.quizmode"]) {
                    var n = JSON.parse(t["next_question.json"]);
                    !Ae(e) && n.show_correction && (n.show_correction = !1,
                    ++n.nr),
                    n.nr = Math.min(n.nr, _e(e) - 1),
                    (0,
                    H.$j)((0,
                    V.SV)((0,
                    H.wk)(), n)),
                    (0,
                    H.$j)((0,
                    V.g3)((0,
                    H.wk)(), n.nr))
                }
            }
            function Pe() {
                return C()(document.createElement("div")).append(C()(document.createElement("a")).css({
                    display: "block",
                    "text-align": "center"
                }).attr("href", "https://quit_seb").append(C()(document.createElement("div")).css({
                    margin: "20px"
                }).addClass("textbutton bw-button").text((0,
                E.Tl)("Click here to quit Safe Exam Browser.")))).html()
            }
            function Re(e) {
                (0,
                S.processRichTextWidgetPlayLinks)(e, !1),
                _.resolveYoutubePlaceholders(e),
                A.processAudioTags(e)
            }
            function Le(e) {
                (0,
                H.$j)((0,
                V.g3)((0,
                H.wk)(), e))
            }
            function Ne() {
                (0,
                H.$j)((0,
                V.g3)((0,
                H.wk)(), (0,
                H.wk)().currentQuestion + 1))
            }
            function Fe() {
                (0,
                H.$j)((0,
                V.g3)((0,
                H.wk)(), (0,
                H.wk)().currentQuestion - 1))
            }
            function Me(e) {
                (0,
                H.$j)((0,
                V.kk)((0,
                H.wk)(), e))
            }
            function je() {
                Me(!(0,
                H.wk)().showQuestionList)
            }
            function qe() {
                (0,
                H.$j)((0,
                V.D7)((0,
                H.wk)(), !(0,
                H.wk)().showText))
            }
            function Be(e, t) {
                if (!we(e))
                    return null;
                try {
                    e.feedback.sort((function(e, t) {
                        return parseFloat(e.percentage) - parseFloat(t.percentage)
                    }
                    ));
                    for (var n = 100 * parseFloat(t.score) / t.max, r = 0; r < e.feedback.length; ++r)
                        if (n <= parseFloat(e.feedback[r].percentage))
                            return e.feedback[r].text
                } catch (e) {
                    console.error("Problem processing feedback"),
                    console.error(e)
                }
                return ue.debug("no feedback msg", t),
                null
            }
            function We() {
                return (We = se(J().mark((function e(t, n) {
                    var r, o, a, i, s;
                    return J().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                return r = {
                                    "saved.bool": "true"
                                },
                                o = (0,
                                H.wk)().storeIndexes[n],
                                a = (0,
                                H.wk)().config.questions[n].Type,
                                e.next = 5,
                                (0,
                                q.oL)(t, (0,
                                H.wk)().config.questions[n], (0,
                                H.wk)().questions[n]);
                            case 5:
                                null != (i = e.sent) && (0,
                                H.$j)((0,
                                V.PY)((0,
                                H.wk)(), n, i)),
                                s = (0,
                                V._r)((0,
                                H.wk)(), n),
                                r[o + "." + a] = void 0 !== s ? s : null,
                                t.widgetstorage.write(r);
                            case 10:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function Ue() {
                return (Ue = se(J().mark((function e(t, n) {
                    var r;
                    return J().wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                o = {
                                    "saved.bool": "true"
                                },
                                a = (0,
                                H.wk)().storeIndexes[n] + ".scratchpad",
                                i = (0,
                                H.wk)().questions[n].scratchpad,
                                (a = ae(a))in o ? Object.defineProperty(o, a, {
                                    value: i,
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0
                                }) : o[a] = i,
                                r = o,
                                t.widgetstorage.write(r);
                            case 3:
                            case "end":
                                return e.stop()
                            }
                        var o, a, i
                    }
                    ), e)
                }
                )))).apply(this, arguments)
            }
            function ze(e, t, n, r) {
                var o = (0,
                H.wk)().config;
                if ("answer" === n && !0 !== (0,
                H.wk)().readonly) {
                    var a = o.questions[t];
                    (0,
                    q.au)(e, (0,
                    H.wk)().config.questions[t], (0,
                    H.wk)().questions[t], r),
                    (0,
                    H.$j)((0,
                    V.YR)((0,
                    V.s4)((0,
                    H.wk)(), t, r), t)),
                    ue.debug("updated answer", a.noquestion, o.save_answers, o),
                    ("true" !== a.noquestion && "yes" === o.save_answers || he(o)) && function(e, t) {
                        We.apply(this, arguments)
                    }(e, t)
                } else
                    "showHint" === n ? ((0,
                    H.$j)((0,
                    V.cn)((0,
                    H.wk)(), t, r)),
                    ue.debug((0,
                    H.wk)())) : "showScratchpad" === n ? ((0,
                    H.$j)((0,
                    V.KJ)((0,
                    H.wk)(), t, r)),
                    ue.debug((0,
                    H.wk)())) : "QuestionAnswerMessage" === n ? st(t, r) : "scratchpad" === n && ((0,
                    H.$j)((0,
                    V.pv)((0,
                    H.wk)(), t, r)),
                    ("yes" === o.save_answers || he(o)) && function(e, t) {
                        Ue.apply(this, arguments)
                    }(e, t))
            }
            function He(e) {
                return (0,
                T.isEmptyRichText)(e.Rationale) && (null == e.rationale_img || null == e.rationale_img.sources || 0 === e.rationale_img.sources.length)
            }
            function Qe(e) {
                return "no" === e.needs_correction || "TextDescription" === e.Type || I.isNotAutoCorrectingQuestionType(e.Type)
            }
            function Ve(e) {
                return Qe(e) && He(e)
            }
            function Ye(e, t) {
                var n;
                return "yes" === e.config.lock_correct_answers_on_continue_editing && e.questionOrder && -1 !== (null !== (n = e.lockedQuestions) && void 0 !== n ? n : []).indexOf(e.questionConfigIncludingCorrection[e.questionOrder[t]].id)
            }
            var Ke = function(e) {
                function t() {
                    return ne(this, t),
                    X(this, t, arguments)
                }
                return ee(t, e),
                oe(t, [{
                    key: "showQuestion",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "questionClass",
                    value: function(e, t) {
                        return t + 1 & 1 ? "odd" : "even"
                    }
                }, {
                    key: "canShowQuestionList",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "lastQuestionListElementToShow",
                    value: function(e) {
                        return _e(e.config)
                    }
                }])
            }(function() {
                return oe((function e() {
                    ne(this, e)
                }
                ), [{
                    key: "needToShowDoneButton",
                    value: function() {
                        return !1
                    }
                }, {
                    key: "doneButtonLabel",
                    value: function() {
                        return ""
                    }
                }, {
                    key: "isQuestionReadOnly",
                    value: function(e, t) {
                        return e.readOnly || Ye(e, t)
                    }
                }, {
                    key: "isQuestionInCheckMode",
                    value: function(e, t) {
                        return e.checkMode || Ye(e, t)
                    }
                }, {
                    key: "showCorrectnessForQuestion",
                    value: function(e, t) {
                        return e.showCorrectness || "yes" === e.config.show_correct && Ye(e, t)
                    }
                }, {
                    key: "showCorrectAnswersForQuestion",
                    value: function(e, t) {
                        return e.showCorrectAnswers || "yes" === e.config.show_correct && "yes" === e.config.show_answers && Ye(e, t)
                    }
                }, {
                    key: "showRationaleForQuestion",
                    value: function(e, t) {
                        return e.showRationale || "yes" === e.config.show_correct && "yes" === e.config.show_answers && Ye(e, t)
                    }
                }])
            }())
              , Ge = function(e) {
                function t() {
                    return ne(this, t),
                    X(this, t, arguments)
                }
                return ee(t, e),
                oe(t, [{
                    key: "needToShowPrevQuestionButton",
                    value: function(e) {
                        return e.currentQuestion > 0
                    }
                }, {
                    key: "needToShowNextQuestionButton",
                    value: function(e) {
                        var t = e.config;
                        return e.currentQuestion < _e(t) - 1
                    }
                }, {
                    key: "canShowQuestionList",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "lastQuestionListElementToShow",
                    value: function(e) {
                        return _e(e.config)
                    }
                }])
            }(Ke)
              , $e = function() {
                return oe((function e() {
                    ne(this, e)
                }
                ), [{
                    key: "needToShowDoneButton",
                    value: function(e, t) {
                        var n = e.nextQuestion;
                        return !e.readOnly && n.nr === t
                    }
                }, {
                    key: "doneButtonLabel",
                    value: function(e) {
                        var t = e.nextQuestion
                          , n = e.config
                          , r = e.questionOrder
                          , o = e.questionConfigIncludingCorrection
                          , a = (0,
                        v.safeArray)(o)[r[t.nr]];
                        return t.nr >= (0,
                        v.safeArray)(n.questions).length || t.showCorrection || "TextDescription" === a.Type || Ye(e, t.nr) ? (0,
                        E.Tl)("Continue") : !Ae(n) || Ve(a) ? (0,
                        E.Tl)("Ready and continue") : (0,
                        E.Tl)("Ready")
                    }
                }, {
                    key: "isQuestionReadOnly",
                    value: function(e, t) {
                        var n = e.readOnly
                          , r = e.nextQuestion;
                        return n || r.showCorrection || r.nr !== t || Ye(e, t)
                    }
                }, {
                    key: "isQuestionInCheckMode",
                    value: function(e, t) {
                        var n = e.checkMode
                          , r = e.nextQuestion
                          , o = e.config;
                        return n || (r.nr > t || r.nr === t && r.showCorrection) && Ae(o) || Ye(e, t)
                    }
                }, {
                    key: "showCorrectnessForQuestion",
                    value: function(e, t) {
                        var n = e.showCorrectness
                          , r = e.nextQuestion
                          , o = e.config;
                        return n || (r.nr > t || r.nr === t && r.showCorrection) && Oe(o) || "yes" === e.config.show_correct && Ye(e, t)
                    }
                }, {
                    key: "showCorrectAnswersForQuestion",
                    value: function(e, t) {
                        var n = e.showCorrectAnswers
                          , r = e.nextQuestion
                          , o = e.config;
                        return n || (r.nr > t || r.nr === t && r.showCorrection) && De(o) || "yes" === e.config.show_correct && "yes" === e.config.show_answers && Ye(e, t)
                    }
                }, {
                    key: "showRationaleForQuestion",
                    value: function(e, t) {
                        var n = e.showRationale
                          , r = e.nextQuestion
                          , o = e.config;
                        return n || (r.nr > t || r.nr === t && r.showCorrection) && De(o) || "yes" === e.config.show_correct && "yes" === e.config.show_answers && Ye(e, t)
                    }
                }])
            }()
              , Je = function(e) {
                function t() {
                    return ne(this, t),
                    X(this, t, arguments)
                }
                return ee(t, e),
                oe(t, [{
                    key: "showQuestion",
                    value: function(e, t) {
                        return e.readOnly || ("yes" === e.config.question_by_question_see_prev ? t <= e.nextQuestion.nr : t === e.nextQuestion.nr)
                    }
                }, {
                    key: "questionClass",
                    value: function(e, t) {
                        return e.readOnly || "yes" === e.config.question_by_question_see_prev ? t + 1 & 1 ? "odd" : "even" : "odd"
                    }
                }, {
                    key: "canShowQuestionList",
                    value: function(e) {
                        return e.readOnly || "yes" === e.config.question_by_question_see_prev
                    }
                }, {
                    key: "lastQuestionListElementToShow",
                    value: function(e) {
                        return e.readOnly ? _e(e.config) : e.nextQuestion.nr
                    }
                }])
            }($e)
              , Xe = function(e) {
                function t() {
                    return ne(this, t),
                    X(this, t, arguments)
                }
                return ee(t, e),
                oe(t, [{
                    key: "needToShowPrevQuestionButton",
                    value: function(e) {
                        var t = e.currentQuestion
                          , n = e.config;
                        return t > 0 && (e.readOnly || "yes" === n.question_by_question_see_prev)
                    }
                }, {
                    key: "needToShowNextQuestionButton",
                    value: function(e) {
                        var t = e.config
                          , n = e.currentQuestion
                          , r = e.nextQuestion;
                        return n < _e(t) - 1 && (e.readOnly || r.nr > n)
                    }
                }, {
                    key: "canShowQuestionList",
                    value: function(e) {
                        return e.readOnly || "yes" === e.config.question_by_question_see_prev
                    }
                }, {
                    key: "lastQuestionListElementToShow",
                    value: function(e) {
                        return e.readOnly ? _e(e.config) : e.nextQuestion.nr
                    }
                }])
            }($e);
            function Ze(e, t) {
                return t ? "yes" === e.question_by_question ? new Xe : new Ge : "yes" === e.question_by_question ? new Je : new Ke
            }
            var et = function(e) {
                return new Uint8Array(e.match(/.{1,2}/g).map((function(e) {
                    return parseInt(e, 16)
                }
                )))
            }
              , tt = function(e) {
                var t = atob(e).split("").map((function(e) {
                    return ("0" + e.charCodeAt(0).toString(16)).slice(-2)
                }
                )).join("");
                return R.utils.hex.toBytes(t)
            };
            function nt(e, t, n) {
                var r = new (N());
                r.update(t),
                r.update(n);
                var o = r.digest("hex")
                  , a = et(o)
                  , i = et(o.substring(0, 32))
                  , s = new R.ModeOfOperation.cbc(a,i)
                  , u = tt(e)
                  , c = s.decrypt(u)
                  , l = R.utils.utf8.fromBytes(c)
                  , d = Math.max(l.lastIndexOf("]"), l.lastIndexOf("}"), l.lastIndexOf('"'));
                return l.substring(0, d + 1)
            }
            function rt(e, t) {
                var n = (0,
                H.wk)().config
                  , r = {}
                  , o = [];
                for (var a in n)
                    a.startsWith("$") && (o.push(a),
                    r[a.substring(1)] = D.fixResourcePaths(JSON.parse(nt(n[a], e, t))));
                (0,
                H.$j)((0,
                H._R)((0,
                H.wk)(), Object.assign({}, u()(n, o), r)))
            }
            function ot(e, t) {
                if (!t)
                    return null;
                try {
                    var n = JSON.parse(t);
                    if (n.hasOwnProperty("questions")) {
                        var r = e
                          , a = n.questions;
                        if (0 === a.length)
                            return ue.error("can't use question answers: no questions"),
                            null;
                        if (a.length !== r.length)
                            return ue.error("can't use question anwers: question counts differs", a.length, r.length),
                            null;
                        if (o()(a, (function(e, t) {
                            return null != e.id && e.id !== r[t].id
                        }
                        )))
                            return ue.error("can't use question answers: some question id's differ"),
                            null;
                        for (var i = [], s = 0; s < a.length; ++s) {
                            var c = g(r[s], u()(a[s], "id"));
                            c.__hasSecureConfig = !0,
                            i.push(c)
                        }
                        return i
                    }
                } catch (e) {
                    ue.error("can't use question answers: parsing error"),
                    ue.debug(e)
                }
                return null
            }
            function at(e, t) {
                t && t.questions && t.questions.length === e.length && h()(t.questions, (function(t, n) {
                    t.id = e[n].id
                }
                ))
            }
            function it(e) {
                var t = e.widgetstorage
                  , n = e.StudentWorkSubmitter;
                function r(e) {
                    var t = (0,
                    H.wk)().config
                      , n = t.sec || e
                      , r = ot(t.questions, n);
                    null == r ? (0,
                    H.$j)((0,
                    V.Rt)((0,
                    V.G)((0,
                    H.wk)(), !1, t.questions))) : (0,
                    H.$j)((0,
                    V.Rt)((0,
                    V.G)((0,
                    H.wk)(), !0, r)))
                }
                function o(e, n) {
                    function r(t) {
                        var n = b()(t)
                          , r = []
                          , o = []
                          , a = 0;
                        function i(e) {
                            for (var t = e.length; t; ) {
                                var r = Math.floor(n() * t)
                                  , o = e[--t];
                                e[t] = e[r],
                                e[r] = o
                            }
                            return e
                        }
                        for (; a < (0,
                        v.safeArray)(e.questions).length; )
                            "true" === e.questions[a].noquestion ? (o.length > 0 && (o = i(o),
                            Array.prototype.push.apply(r, o),
                            o = []),
                            r.push(a)) : o.push(a),
                            ++a;
                        return o = i(o),
                        Array.prototype.push.apply(r, o),
                        r
                    }
                    if ("yes" === e.random_order) {
                        var o = "question_order_seed.text";
                        if (n.hasOwnProperty(o))
                            return ue.debug("found seed"),
                            r(n[o]);
                        ue.debug("no seed stored");
                        var a = Math.random().toString();
                        return t.write({
                            "saved.bool": "true",
                            "question_order_seed.text": a
                        }),
                        r(a)
                    }
                    for (var i = [], s = 0; s < (0,
                    v.safeArray)(e.questions).length; ++s)
                        i[s] = s;
                    return i
                }
                function a() {
                    var t = (0,
                    H.wk)().questionConfigIncludingCorrection
                      , n = 0
                      , r = 0;
                    return h()(t, (function(t, o) {
                        if ("true" !== t.noquestion)
                            try {
                                var a = (0,
                                q.vV)(e, (0,
                                H.wk)(), o, !0);
                                n += a.hasOwnProperty("score") ? parseFloat(a.score) : 0,
                                r += a.hasOwnProperty("outof") ? parseFloat(a.outof) : 0
                            } catch (e) {
                                console.error("Could not get answer for question: ", o),
                                console.error(e)
                            }
                    }
                    )),
                    {
                        score: n,
                        max: r
                    }
                }
                function i(n) {
                    return t.flushThrottlers(),
                    function(e, t) {
                        var n = t.config
                          , r = []
                          , o = 0;
                        return h()(n.questions, (function(a, i) {
                            var s = "true" !== a.noquestion || "yes" === n.info_numbering;
                            s && ++o;
                            var u = (0,
                            q.vV)(e, t, i, !0);
                            if (u) {
                                u.config = function(e, t) {
                                    return e.questionConfigIncludingCorrection ? e.questionConfigIncludingCorrection[t] : e.config.questions[t]
                                }(t, i);
                                var c = W(n, u.config, o);
                                u.config.number = s ? c + "" : "";
                                var l = s ? c + ". " : "";
                                delete u.answered,
                                u.hasOwnProperty("report-question") ? (u.question = l + u["report-question"],
                                delete u["report-question"]) : (console.log(u.config),
                                u.question = l + (u.config.hasOwnProperty("Question") ? (0,
                                T.richTextAsHtml)(u.config.Question) : (0,
                                T.richTextAsHtml)(u.config.Title))),
                                r.push(u)
                            }
                        }
                        )),
                        r
                    }(e, (0,
                    H.wk)())
                }
                function s(e) {
                    return u.apply(this, arguments)
                }
                function u() {
                    return u = se(J().mark((function t(r) {
                        var o, a, s;
                        return J().wrap((function(t) {
                            for (; ; )
                                switch (t.prev = t.next) {
                                case 0:
                                    return o = (0,
                                    H.wk)(),
                                    a = o.config,
                                    (s = n.createStudentWorkSubmitter(l()(a.id) ? "Quiz" : a.id, a.book_title, a.uuid2, a.WA)).setCompanyInfo(a.company_name, a.company_address, a.company_phone, a.company_website),
                                    t.next = 5,
                                    Promise.all(f()(a.questions, function() {
                                        var t = se(J().mark((function t(n, r) {
                                            var o, i;
                                            return J().wrap((function(t) {
                                                for (; ; )
                                                    switch (t.prev = t.next) {
                                                    case 0:
                                                        if ("true" === n.noquestion) {
                                                            t.next = 5;
                                                            break
                                                        }
                                                        return t.next = 3,
                                                        (0,
                                                        q.Nr)(e, (0,
                                                        H.wk)(), r);
                                                    case 3:
                                                        null != (o = t.sent) && s.scheduleAssetUpload((function() {
                                                            return o
                                                        }
                                                        ), (function(e, t) {
                                                            ue.debug(JSON.stringify((0,
                                                            H.wk)())),
                                                            (0,
                                                            H.$j)((0,
                                                            V._u)((0,
                                                            H.wk)(), t, e)),
                                                            ue.debug(JSON.stringify((0,
                                                            H.wk)()))
                                                        }
                                                        ), r);
                                                    case 5:
                                                        if ("yes" !== a.scratchpad && ("question-specific" !== a.scratchpad || "yes" !== n.scratchpad)) {
                                                            t.next = 10;
                                                            break
                                                        }
                                                        return t.next = 8,
                                                        (0,
                                                        q.dr)(e, (0,
                                                        H.wk)(), r);
                                                    case 8:
                                                        i = t.sent,
                                                        h()(i, (function(e, t) {
                                                            s.scheduleAssetUpload((function() {
                                                                return e
                                                            }
                                                            ), (function(e, n) {
                                                                ue.debug(JSON.stringify((0,
                                                                H.wk)())),
                                                                (0,
                                                                H.$j)((0,
                                                                V.J4)((0,
                                                                H.wk)(), n, t, e)),
                                                                ue.debug(JSON.stringify((0,
                                                                H.wk)()))
                                                            }
                                                            ), r)
                                                        }
                                                        ));
                                                    case 10:
                                                    case "end":
                                                        return t.stop()
                                                    }
                                            }
                                            ), t)
                                        }
                                        )));
                                        return function(e, n) {
                                            return t.apply(this, arguments)
                                        }
                                    }()));
                                case 5:
                                    return s.setAnswersComposer((function() {
                                        return i()
                                    }
                                    )),
                                    s.on(s.EVT_AFTER_SEND, (function() {
                                        void 0 !== window.checkScrollPosition && window.checkScrollPosition()
                                    }
                                    )),
                                    t.abrupt("return", s);
                                case 8:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    ))),
                    u.apply(this, arguments)
                }
                function c() {
                    return (c = se(J().mark((function e() {
                        var t, n, r;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    return t = (0,
                                    H.wk)(),
                                    n = t.config,
                                    e.next = 3,
                                    s(!1);
                                case 3:
                                    (r = e.sent).setEndpoint(n.share_action),
                                    r.setIncludeGrading(!1),
                                    r.on(r.EVT_SUBMIT_FAILED, (function() {
                                        k.showAlert((0,
                                        E.Tl)("Unable to send quiz. Make sure you're connected to the internet."), (0,
                                        E.Tl)("Send Failed"))
                                    }
                                    )),
                                    r.showShareDialog((0,
                                    E.Tl)("Share the quiz by email."));
                                case 8:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    )))).apply(this, arguments)
                }
                function d() {
                    return (d = se(J().mark((function e() {
                        var t, n, r;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    return t = (0,
                                    H.wk)(),
                                    n = t.config,
                                    e.next = 3,
                                    s(!0 === (0,
                                    H.wk)().readOnly && "points" === n.download_includes_correction);
                                case 3:
                                    (r = e.sent).setEndpoint(n.download_action),
                                    r.setIncludeGrading(!0 === (0,
                                    H.wk)().readOnly && "points" === n.download_includes_correction),
                                    r.showDownloadDialog((0,
                                    E.Tl)("Enter your name and click 'Generate' to generate the PDF."));
                                case 7:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    )))).apply(this, arguments)
                }
                function p(e) {
                    return m.apply(this, arguments)
                }
                function m() {
                    return m = se(J().mark((function n(r) {
                        var o, a, i, s, u;
                        return J().wrap((function(n) {
                            for (; ; )
                                switch (n.prev = n.next) {
                                case 0:
                                    return o = (0,
                                    H.wk)(),
                                    a = o.config,
                                    i = o.storeIndexes,
                                    r = (0,
                                    B.m)(a, U, i, r, t),
                                    ue.debug("loadAnswers", r, i),
                                    n.next = 5,
                                    Promise.all(f()((0,
                                    v.safeArray)(a.questions), function() {
                                        var t = se(J().mark((function t(n, o) {
                                            return J().wrap((function(t) {
                                                for (; ; )
                                                    switch (t.prev = t.next) {
                                                    case 0:
                                                        return t.abrupt("return", r ? (0,
                                                        q.hm)(e, n, r[i[o] + "." + n.Type]) : null);
                                                    case 1:
                                                    case "end":
                                                        return t.stop()
                                                    }
                                            }
                                            ), t)
                                        }
                                        )));
                                        return function(e, n) {
                                            return t.apply(this, arguments)
                                        }
                                    }()));
                                case 5:
                                    s = n.sent,
                                    u = (0,
                                    V.H6)((0,
                                    H.wk)(), s),
                                    h()((0,
                                    v.safeArray)(a.questions), (function(e, t) {
                                        u.questions[t].scratchpad = r[i[t] + ".scratchpad"]
                                    }
                                    )),
                                    ue.debug("loaded state", JSON.stringify(u)),
                                    (0,
                                    H.$j)(u),
                                    (0,
                                    H.$j)((0,
                                    V.Rt)((0,
                                    H.wk)())),
                                    ue.debug(JSON.parse(JSON.stringify((0,
                                    H.wk)())));
                                case 12:
                                case "end":
                                    return n.stop()
                                }
                        }
                        ), n)
                    }
                    ))),
                    m.apply(this, arguments)
                }
                function g() {
                    (0,
                    H.wk)().correctionAvailable || console.log("Can't set question scores, no correction info available");
                    var t = (0,
                    H.wk)().questionConfigIncludingCorrection
                      , n = 0
                      , r = (0,
                    H.wk)();
                    h()(t, (function(t, o) {
                        if ("true" !== t.noquestion)
                            try {
                                var a = (0,
                                q.vV)(e, (0,
                                H.wk)(), o, !0);
                                r = (0,
                                V.g2)(r, o, me(a) ? null : a.score),
                                n += parseFloat(a.score) || 0
                            } catch (e) {
                                console.error("Could not get answer for question: ", o),
                                console.error(e)
                            }
                    }
                    )),
                    r = (0,
                    V.dh)(r, n),
                    (0,
                    H.$j)(r)
                }
                function w() {
                    ue.debug("loadCorrectAnswers"),
                    (0,
                    H.$j)((0,
                    V.gu)((0,
                    H.wk)())),
                    (0,
                    H.$j)((0,
                    V.Rt)((0,
                    H.wk)()))
                }
                function y(e, n) {
                    ue.debug("switchToEditMode");
                    var r = Object.assign({
                        "mode.quizmode": "entry",
                        "next_question.json": null
                    }, n);
                    t.write(r);
                    var o = e;
                    o = (0,
                    V.RB)(o, !1),
                    o = (0,
                    V.hX)(o, !1),
                    o = (0,
                    V.HW)(o, !1),
                    o = (0,
                    V.JC)(o, !1),
                    o = (0,
                    V.Y_)(o, !1),
                    o = (0,
                    V.ig)(o, !1),
                    o = (0,
                    V.Ru)(o);
                    var a = (0,
                    H.wk)().config;
                    "yes" === a.question_by_question && (o = (0,
                    V.SV)(o, {
                        nr: 0,
                        showCorrection: !1
                    }),
                    o = (0,
                    V.g3)(o, 0)),
                    a.videoquizconfig && (o = (0,
                    Y.$3)(o, !0)),
                    (0,
                    H.$j)(o)
                }
                function x() {
                    var e = (0,
                    H.wk)().config
                      , t = a()
                      , n = ""
                      , r = "";
                    ve(e) && (r = (0,
                    E.Tl)("Score"),
                    n = '<span class="scoretext">' + (0,
                    E.Tl)("Your score is") + "</span><br><br>",
                    n += '<span class="score">',
                    n += pe(t.score),
                    "Score vs maximum" === e.show_score && (n += " / " + pe(t.max)),
                    n += "</span><br>");
                    var o = Be(e, t);
                    return null != o && (r = (0,
                    E.Tl)("Feedback"),
                    n += "<br><div>" + (0,
                    T.richTextAsHtml)(o) + "</div>"),
                    be(e) && ("" === r && (r = (0,
                    E.Tl)("Feedback")),
                    n += Pe()),
                    {
                        title: r,
                        message: n
                    }
                }
                function S() {
                    var e = x();
                    Re(k.showAlert(e.message, e.title))
                }
                function _(e) {
                    var t = (0,
                    H.wk)().config
                      , n = (0,
                    V.JC)((0,
                    H.wk)(), !0);
                    !0 !== e && "yes" !== t.show_correct || (n = (0,
                    V.Y_)(n, !0),
                    "yes" === t.show_correct && (n = (0,
                    V.RB)(n, !0)),
                    "yes" === t.show_correct && "yes" === t.show_answers && (n = (0,
                    V.hX)(n, !0),
                    n = (0,
                    V.HW)(n, !0))),
                    (0,
                    H.$j)(n),
                    (ve(t) || we(t)) && g()
                }
                function A(e) {
                    return I.apply(this, arguments)
                }
                function I() {
                    return (I = se(J().mark((function e(n) {
                        var o, a, i, u;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    return o = (0,
                                    H.wk)(),
                                    a = o.config,
                                    e.next = 3,
                                    s("yes" === a.email_should_have_grading);
                                case 3:
                                    return i = e.sent,
                                    u = (0,
                                    O.getParameters)().submit_url,
                                    i.setEndpoint(u || a.action),
                                    i.setIncludeGrading("yes" === a.email_should_have_grading),
                                    i.on(i.EVT_SUBMIT_SUCCEEDED, (function() {
                                        var e = {
                                            "submitted.bool": "true"
                                        };
                                        t.write(e),
                                        ye(e),
                                        window.gPostResponse = i.getLastServerResponse();
                                        var o = i.getLastServerData()
                                          , s = o && o.hasOwnProperty("data") && o.data.hasOwnProperty("secureconfig") ? o.data.secureconfig : null;
                                        if (s) {
                                            var u = JSON.parse(s);
                                            at(a.questions, u),
                                            s = JSON.stringify(D.fixResourcePaths(u)),
                                            ue.debug("secure config received, storing"),
                                            t.write({
                                                "secureconfig.json": s
                                            })
                                        }
                                        r(JSON.stringify(D.fixResourcePaths(JSON.parse(s)))),
                                        n(o)
                                    }
                                    )),
                                    e.abrupt("return", i);
                                case 9:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    )))).apply(this, arguments)
                }
                function P() {
                    var e = (0,
                    H.wk)()
                      , t = e.config
                      , n = e && e.questionOrder;
                    return e.questionConfigIncludingCorrection,
                    (0,
                    v.safeArray)(t.questions).filter((function(r, o) {
                        var a = n[o]
                          , i = t.questions[a];
                        return "true" !== i.noquestion && "no" !== i.needs_correction && !1 === e.questions[a].answerstate.answered
                    }
                    )).length
                }
                function R(e, t, n, r, o) {
                    return L.apply(this, arguments)
                }
                function L() {
                    return L = se(J().mark((function e(n, r, o, a, i) {
                        var s, u, c, l, d, f;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    return s = (0,
                                    H.wk)(),
                                    u = s.config,
                                    e.next = 3,
                                    A(a);
                                case 3:
                                    c = e.sent,
                                    l = "",
                                    he(u) && !0 === n ? ("no" !== u.exam_mode_submit_dialog_clear && c.addButtonBeforeDefaultButtons((0,
                                    E.Tl)("Clear answers and start over"), se(J().mark((function e() {
                                        return J().wrap((function(e) {
                                            for (; ; )
                                                switch (e.prev = e.next) {
                                                case 0:
                                                    return e.next = 2,
                                                    i(!0);
                                                case 2:
                                                    C()(this).dialog("close");
                                                case 3:
                                                case "end":
                                                    return e.stop()
                                                }
                                        }
                                        ), e, this)
                                    }
                                    )))),
                                    d = (0,
                                    V.JC)((0,
                                    H.wk)(), !0),
                                    (0,
                                    H.$j)(d),
                                    l = (0,
                                    E.Tl)("The time allowed for this test has expired.  You can no longer change your answers."),
                                    c.addDialogOptions({
                                        dialogClass: "no-close bw-dialog bw-student-work-submitter",
                                        closeOnEscape: !1
                                    })) : (f = P()) > 0 && (l = (f > 1 ? (0,
                                    E.Tl)("You have %d unanswered questions.").replace("%d", f) : (0,
                                    E.Tl)("You have 1 unanswered question.")) + " " + (0,
                                    E.Tl)("Are you sure you want to submit?")),
                                    c.on(c.EVT_BEFORE_SEND, (function() {
                                        he(u) && (o.stop(),
                                        t.write({
                                            "start_time.number": 0
                                        }),
                                        c.setElapsedTime(o.elapsedFormatted()))
                                    }
                                    )),
                                    c.on(c.EVT_SUBMIT_FAILED, (function() {
                                        c.afterSubmitFailed((0,
                                        E.Tl)("Quiz results not accepted."), (0,
                                        E.Tl)("Unable to send quiz results. Make sure you're connected to the internet."), (function() {
                                            R(n, r, o, a, i)
                                        }
                                        ))
                                    }
                                    )),
                                    c.showSendDialog(l, r);
                                case 9:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    L.apply(this, arguments)
                }
                function N(t) {
                    (0,
                    H.$j)((0,
                    V.g3)((0,
                    H.wk)(), 0)),
                    (0,
                    H.$j)((0,
                    V.SV)((0,
                    H.wk)(), {
                        nr: 0,
                        showCorrection: !1
                    })),
                    function(t) {
                        (0,
                        q.TW)(e, (0,
                        H.wk)());
                        var n = (0,
                        V.DM)((0,
                        H.wk)());
                        !0 === (0,
                        H.wk)().readOnly ? y(n, {}) : (0,
                        H.$j)(n),
                        t()
                    }(t),
                    (0,
                    H.$j)((0,
                    V.jJ)((0,
                    H.wk)(), 0)),
                    (0,
                    H.$j)((0,
                    V.ld)((0,
                    H.wk)(), [])),
                    (0,
                    H.$j)((0,
                    V.mN)((0,
                    H.wk)(), {})),
                    r(null),
                    (0,
                    H.wk)().config.videoquizconfig && ((0,
                    H.$j)((0,
                    Y.LC)((0,
                    H.wk)())),
                    (0,
                    H.$j)((0,
                    Y.Ov)((0,
                    H.wk)(), (0,
                    Y.Yk)((0,
                    H.wk)().config)))),
                    window.BWINITIALIZED = !0
                }
                function F(e, n, r) {
                    var o = C().Deferred();
                    return k.showConfirmationDialog((0,
                    E.Tl)("The answers will be permanently deleted and cannot be recovered. Are you sure?"), (0,
                    E.Tl)("Clear the answers and start over?"), (function() {
                        ue.debug("Clearing answers"),
                        window.BWINITIALIZED = !1,
                        (0,
                        H.$j)((0,
                        V.Jr)((0,
                        H.wk)(), (0,
                        H.wk)().clearCount ? (0,
                        H.wk)().clearCount + 1 : 1)),
                        function(e, n, r) {
                            var o = C().Deferred()
                              , a = {};
                            a["saved.bool"] = !!r;
                            var i = (0,
                            H.wk)().storeIndexes;
                            return h()((0,
                            v.safeArray)(e.questions), (function(e, t) {
                                if ("true" !== e.noquestion) {
                                    var n = e.Type;
                                    a[i[t] + "." + n] = null,
                                    a[i[t] + ".scratchpad"] = null
                                }
                            }
                            )),
                            a["mode.quizmode"] = "entry",
                            a["next_question.json"] = null,
                            a["iterations.number"] = null,
                            a["locked_questions.ids"] = null,
                            a["starred_questions.ids"] = null,
                            a["currentAudioPlays.json"] = JSON.stringify({}),
                            r && (a["start_time.number"] = null),
                            a["question_order_seed.text"] = null,
                            a["secureconfig.json"] = null,
                            a["video_quiz_qbq.json"] = null,
                            a["lastKnownSecond.number"] = null,
                            a.cc = n,
                            t.write(a),
                            t.sync((function() {
                                o.resolve()
                            }
                            )),
                            o
                        }(e, (0,
                        H.wk)().clearCount, r).then(N.bind(null, n)),
                        o.resolve()
                    }
                    ), null, (0,
                    E.Tl)("Yes, clear"), (0,
                    E.Tl)("No, keep"), !0),
                    o
                }
                function K() {
                    var e = (0,
                    H.wk)()
                      , t = e.config;
                    e.currentQuestion,
                    (ve(t) || we(t) || be(t)) && S(),
                    (0,
                    H.$j)((0,
                    V.g3)((0,
                    H.wk)(), 0)),
                    t.videoquizconfig && (0,
                    H.$j)((0,
                    Y.Yr)((0,
                    H.wk)(), !0))
                }
                function G(e, t) {
                    return $.apply(this, arguments)
                }
                function $() {
                    return $ = se(J().mark((function e(n, r) {
                        var o, a, i, s = arguments;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (o = !(s.length > 2 && void 0 !== s[2]) || s[2],
                                    a = (0,
                                    H.wk)(),
                                    i = a.config,
                                    t.flushThrottlers(),
                                    he(i) && n.stop(),
                                    o && t.write({
                                        "saved.bool": "true",
                                        "mode.quizmode": "check"
                                    }),
                                    "yes" !== i.submit_answers || !i.show_password || "" === i.show_password.h) {
                                        e.next = 8;
                                        break
                                    }
                                    console.log(i)
                                    return e.next = 8,
                                    r();
                                case 8:
                                    _(!1);
                                case 9:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    ))),
                    $.apply(this, arguments)
                }
                function X(e, t) {
                    G(e, t),
                    K()
                }
                function Z(e, t, n, r) {
                    return ee.apply(this, arguments)
                }
                function ee() {
                    return (ee = se(J().mark((function e(t, n, r, o) {
                        var a, i;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    console.log(o)
                                    if (ue.debug("loadAnswersAndState", o),
                                    a = (0,
                                    H.wk)(),
                                    i = a.config,
                                    o && (Ce(o),
                                    ke(o)),
                                    !o || !o.hasOwnProperty("saved.bool") || "true" !== o["saved.bool"]) {
                                        e.next = 16;
                                        break
                                    }
                                    return Ee(o),
                                    ye(o),
                                    xe(o),
                                    Ie(i, o),
                                    ae(i, o),
                                    ie(i, o),
                                    e.next = 12,
                                    p(o);
                                case 12:
                                    n(o),
                                    o.hasOwnProperty("mode.quizmode") && "check" === o["mode.quizmode"] && G(t, r, !1),
                                    e.next = 18;
                                    break;
                                case 16:
                                    n({}),
                                    (0,
                                    H.$j)((0,
                                    Y.og)((0,
                                    H.wk)(), 0));
                                case 18:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    )))).apply(this, arguments)
                }
                function te() {
                    return (te = se(J().mark((function e(t, n, r, o) {
                        var a, i;
                        return J().wrap((function(e) {
                            for (; ; )
                                switch (e.prev = e.next) {
                                case 0:
                                    if (a = (0,
                                    H.wk)(),
                                    "yes" !== (i = a.config).save_answers && !he(i)) {
                                        e.next = 4;
                                        break
                                    }
                                    return e.next = 4,
                                    Z(t, n, r, o);
                                case 4:
                                case "end":
                                    return e.stop()
                                }
                        }
                        ), e)
                    }
                    )))).apply(this, arguments)
                }
                function ne(e, t, n, r, o) {
                    var a = (0,
                    H.wk)().config;
                    R(r, o, e, (function(n) {
                        var r, o, a;
                        G(e, t),
                        (r = n && n.messages,
                        o = C().Deferred(),
                        a = (0,
                        E.Tl)("The quiz was sent successfully!"),
                        r && (a += "<br><br>" + f()(r, (function(e) {
                            return M()(e.message)
                        }
                        )).join("<br>")),
                        k.showAlert(a, (0,
                        E.Tl)("Sent successfully"), null, o.resolve.bind(o)),
                        o).then(K)
                    }
                    ), F.bind(null, a, n))
                }
                function re(e) {
                    ue.debug("Restart countdown timer"),
                    e.reset(),
                    e.start(),
                    t.write({
                        "saved.bool": "true",
                        "start_time.number": e.getStartTime()
                    })
                }
                function oe() {
                    var e = (0,
                    H.wk)()
                      , n = e.nextQuestion
                      , r = e.config
                      , o = e.currentQuestion;
                    "yes" !== r.question_by_question_check && j.isPreview() && (n.nr = o,
                    n.showCorrection = !1,
                    (0,
                    H.$j)((0,
                    V.SV)((0,
                    H.wk)(), n)),
                    t.write({
                        "saved.bool": "true",
                        "next_question.json": JSON.stringify(n)
                    }))
                }
                var ae = function(e, t) {
                    if (e && t.hasOwnProperty("video_quiz_qbq.json") && "yes" === e.question_by_question) {
                        var n = JSON.parse(t["video_quiz_qbq.json"]);
                        (0,
                        H.$j)((0,
                        Y.Ov)((0,
                        H.wk)(), n))
                    }
                }
                  , ie = function(e, t) {
                    if (e && t.hasOwnProperty("lastKnownSecond.number") && "yes" === e.no_skip_forward) {
                        var n = t["lastKnownSecond.number"];
                        (0,
                        H.$j)((0,
                        Y.og)((0,
                        H.wk)(), n))
                    }
                };
                return {
                    getQuestionAnswerState: function(t) {
                        try {
                            var n = (0,
                            q.vV)(e, (0,
                            H.wk)(), t, !0);
                            return (0,
                            V.y9)(n)
                        } catch (e) {
                            return console.error("Could not get answer for question: ", t),
                            console.error(e),
                            {
                                answered: !1,
                                correct: !1,
                                wrong: !1,
                                manual: !1,
                                allunanswered: !1,
                                score: 0,
                                outof: 0
                            }
                        }
                    },
                    updateQuestionConfigIncludingCorrection: r,
                    calculateStoreIndexes: z,
                    createQuestionOrder: o,
                    calculateScore: a,
                    getAnswers: i,
                    createQuizSubmitter: s,
                    sharePressed: function() {
                        return c.apply(this, arguments)
                    },
                    downloadPressed: function() {
                        return d.apply(this, arguments)
                    },
                    loadAnswers: p,
                    fillInQuestionScores: g,
                    loadCorrectAnswers: w,
                    continueEditing: function() {
                        var e, t, n = (0,
                        H.wk)(), r = (t = n).questionConfigIncludingCorrection.filter((function(e, n) {
                            if ("true" === e.noquestion)
                                return !1;
                            if ("no" === e.needs_correction)
                                return !1;
                            var r = t.questions[n].answerstate;
                            return null != r && r.correct
                        }
                        )).map((function(e) {
                            return e.id
                        }
                        )), o = (null !== (e = n.iterationCount) && void 0 !== e ? e : 0) + 1;
                        n = (0,
                        V.jJ)(n, o),
                        y(n = (0,
                        V.SB)(n, r), {
                            "iterations.number": o,
                            "locked_questions.ids": r
                        })
                    },
                    scoreMessage: x,
                    showScoreMessageDialog: S,
                    switchStateToCheckMode: _,
                    createDefaultSubmitter: A,
                    submitToBookWidgetsServer: R,
                    prepareQuestionCreation: function(e) {
                        var t = (0,
                        H.wk)().config;
                        "yes" === t.color_correct_answers && (0,
                        H.$j)((0,
                        V.vZ)((0,
                        H.wk)(), !0)),
                        e.hasOwnProperty("secureconfig.json") ? (ue.debug("secure config was saved, restoring"),
                        r(JSON.stringify(D.fixResourcePaths(JSON.parse(e["secureconfig.json"]))))) : r(null),
                        (0,
                        H.$j)((0,
                        V.Mt)((0,
                        H.wk)(), z(t))),
                        (0,
                        H.$j)((0,
                        V.DT)((0,
                        H.wk)(), o(t, e)))
                    },
                    clearAndRestart: F,
                    showScoreMessageDialogOrMoveToFeedbackSectionIfRequired: K,
                    goToCheckMode: X,
                    confirmCheckAndGotoCheckMode: function(e, t) {
                        "yes" === (0,
                        H.wk)().config.show_correct ? k.showConfirmationDialog((0,
                        E.Tl)("Are you done and do you want to show the answers?"), (0,
                        E.Tl)("Show answers"), X.bind(null, e, t), null, (0,
                        E.Tl)("Yes"), (0,
                        E.Tl)("No")) : k.showConfirmationDialog((0,
                        E.Tl)("Are you done and do you want to show your score?"), (0,
                        E.Tl)("Show score"), X.bind(null, e, t), null, (0,
                        E.Tl)("Yes"), (0,
                        E.Tl)("No"))
                    },
                    loadAnswersAndStateIfRequired: function(e, t, n, r) {
                        return te.apply(this, arguments)
                    },
                    submitToServer: ne,
                    restartCountdownTimer: re,
                    restartCountdownTimerIfRequired: function(e, t, n) {
                        ue.debug("Restart countdown timer if required", n),
                        he(e) && n && re(t)
                    },
                    startOrRestartCountdownTimerIfRequired: function(e, t) {
                        !0 !== (0,
                        H.wk)().readOnly && he(e) && t.isInitialized() && (null != t.getStartTime() ? t.start() : re(t))
                    },
                    initializeCountdownTimer: function(e, t, n, r, o, a) {
                        ue.debug("initializeCountdownTimer", a);
                        var i = (0,
                        H.wk)().config;
                        if (he(i)) {
                            var s = {
                                timeoutCB: function() {
                                    ue.debug("Timer callback: submitting to server"),
                                    ne(e, t, n, !0, !1)
                                },
                                time: Q(i.countdown_time)
                            }
                              , u = "start_time.number";
                            if (!j.isPreview() && a.hasOwnProperty(u)) {
                                var c = a[u];
                                s.starttime = c,
                                e.init(s, r),
                                !1 === o && (ue.debug("starting timer"),
                                e.start())
                            } else
                                ue.debug("init timer"),
                                e.init(s, r),
                                !1 === o && re(e)
                        }
                    },
                    showAnswerKeys: function() {
                        w(),
                        _(!0),
                        (0,
                        H.$j)((0,
                        V.ig)((0,
                        H.wk)(), !0))
                    },
                    questionDone: function() {
                        t.flushThrottlers();
                        var e = (0,
                        H.wk)()
                          , n = e.config
                          , r = e.nextQuestion
                          , o = Ve(e.questionConfigIncludingCorrection[e.questionOrder[r.nr]]) || Ye((0,
                        H.wk)(), r.nr);
                        return Ae(n) && !o ? (r.nr += r.showCorrection && 1,
                        r.showCorrection = !r.showCorrection) : (++r.nr,
                        r.showCorrection = !1),
                        (0,
                        H.$j)((0,
                        V.SV)((0,
                        H.wk)(), r)),
                        t.write({
                            "saved.bool": "true",
                            "next_question.json": JSON.stringify(r)
                        }),
                        r.nr
                    },
                    goToNextQuestionSave: function() {
                        Ne(),
                        oe()
                    },
                    goToPrevQuestionSave: function() {
                        Fe(),
                        oe()
                    },
                    starQuestionToggle: function(e) {
                        var n = (0,
                        H.wk)().starredQuestions || [];
                        ut(e) ? n.splice(n.indexOf(e), 1) : n.push(e),
                        (0,
                        H.$j)((0,
                        V.ld)((0,
                        H.wk)(), n)),
                        t.write({
                            "starred_questions.ids": JSON.stringify(n)
                        })
                    },
                    setCurrentAudioPlays: function(e, n, r) {
                        var o = (0,
                        H.wk)().questionAudioPlays || {};
                        o[e] = {
                            numberOfPlays: n,
                            numberOfSeconds: r
                        },
                        (0,
                        H.$j)((0,
                        V.mN)((0,
                        H.wk)(), o)),
                        t.write({
                            "currentAudioPlays.json": JSON.stringify(o)
                        })
                    }
                }
            }
            var st = function(e, t) {
                (0,
                H.$j)((0,
                V.Rz)((0,
                H.wk)(), e, t))
            }
              , ut = function(e) {
                var t = (0,
                H.wk)().starredQuestions || [];
                return i()(t, e)
            }
              , ct = function(e) {
                return ((0,
                H.wk)().questionAudioPlays || {})[e]
            }
              , lt = function(e, t) {
                (0,
                H.So)((function(n) {
                    var r = n.questionAudioPlays;
                    r && t(r[e])
                }
                ))
            }
        },
        29915: function(e, t, n) {
            "use strict";
            n.d(t, {
                $3: function() {
                    return c
                },
                LC: function() {
                    return s
                },
                Ov: function() {
                    return a
                },
                Yk: function() {
                    return o
                },
                Yr: function() {
                    return u
                },
                og: function() {
                    return i
                }
            }),
            n(19605),
            n(23798);
            var r = n(83049)
              , o = function(e) {
                var t = (0,
                r.jB)(e.videoquizconfig.timestamps);
                return {
                    qbqCurrentTimestampTimeInSec: t.timeInSec,
                    qbqCurrentQuestionId: t.questions[0],
                    qbqCurrentQuestionIndexInTimestamp: 0,
                    qbqShowCorrection: !1,
                    qbqShowSubmit: "yes" === e.question_by_question
                }
            }
              , a = function(e, t) {
                return t.qbqCurrentQuestionId ? Object.assign({}, e, {
                    qbqState: t
                }) : e
            }
              , i = function(e, t) {
                return t > e.lastKnownSec ? Object.assign({}, e, {
                    lastKnownSec: t
                }) : e
            }
              , s = function(e) {
                return Object.assign({}, e, {
                    lastKnownSec: 0
                })
            }
              , u = function(e, t) {
                return Object.assign({}, e, {
                    showEndPage: t
                })
            }
              , c = function(e, t) {
                return Object.assign({}, e, {
                    showVideo: t
                })
            }
        },
        83049: function(e, t, n) {
            "use strict";
            n.d(t, {
                jB: function() {
                    return o
                }
            }),
            n(87526);
            var r = function(e) {
                return e && Array.isArray(e) ? e.map((function(e) {
                    return t = e,
                    Object.assign(Object.assign({}, t), {
                        timeInSec: Number(t.timeInSec)
                    });
                    var t
                }
                )) : []
            }
              , o = function(e) {
                return r(e).reduce((function(e, t) {
                    return e.timeInSec < t.timeInSec ? e : t
                }
                ))
            }
        },
        99860: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                InfoDialog: function() {
                    return h
                },
                InfoDialogInner: function() {
                    return p
                },
                haveShownPopupInSessionBefore: function() {
                    return v
                },
                instructionsAreEmpty: function() {
                    return f
                },
                prepareInfoPopup: function() {
                    return g
                },
                showInfoPopup: function() {
                    return m
                },
                showInfoPopupIfFirstTimeInSession: function() {
                    return w
                }
            });
            var r = n(14041)
              , o = n(43144)
              , a = n.n(o)
              , i = n(58065)
              , s = n.n(i)
              , u = n(36915)
              , c = n(79715)
              , l = {
                InstructionsDialog: "mDZNc4BgVxuPv7dxAvVP"
            }
              , d = n(1309);
            function f(e) {
                return !e || !e.instructions || !!(0,
                d.isEmptyRichText)(e.instructions)
            }
            function p(e) {
                var t = e.instructions
                  , n = e.onOK
                  , o = e.onClose;
                return r.createElement(u.J, null, r.createElement(u.l, {
                    className: l.InstructionsDialog,
                    title: t.instructions_title || "",
                    onOk: n,
                    onClose: o
                }, r.createElement(c.s, {
                    text: (0,
                    d.richTextAsHtml)(t.instructions) || ""
                })))
            }
            function h(e) {
                var t = e.instructions
                  , n = e.onOK
                  , o = e.onClose;
                return r.createElement("div", {
                    style: {
                        position: "absolute",
                        top: "0px",
                        left: "0px",
                        width: "100%",
                        height: "100%"
                    }
                }, r.createElement(p, {
                    instructions: t,
                    onOK: n,
                    onClose: o
                }))
            }
            function m(e) {
                if (!f(e)) {
                    var t = s()(document.createElement("div")).css({
                        position: "absolute",
                        top: "0px",
                        left: "0px",
                        width: "100%",
                        height: "100%"
                    }).appendTo("body")
                      , n = r.createElement(p, {
                        instructions: e,
                        onOK: function() {
                            a().render(r.createElement("div", null), t[0]),
                            t.remove()
                        },
                        onClose: function() {
                            a().render(r.createElement("div", null), t[0]),
                            t.remove()
                        }
                    });
                    a().render(n, t[0])
                }
            }
            function g(e) {
                if (!f(e)) {
                    var t = s()("#title-toolbar");
                    0 === t.length && (t = s()(document.createElement("div")).attr("id", "title-toolbar").addClass("floating-toolbar").prependTo("body")),
                    s()(document.createElement("div")).addClass("bw-toolbutton").append(s()(document.createElement("div")).addClass("bw-icon bw-icon-info")).makeButton(e.instructions_title || "").tapOrClick(m.bind(null, e)).prependTo(t)
                }
            }
            function v(e) {
                if (!e)
                    return !1;
                var t = e + "/instructions_shown";
                try {
                    if ("true" === sessionStorage.getItem(t))
                        return !0
                } catch (e) {}
                try {
                    sessionStorage.setItem(t, "true")
                } catch (e) {}
                return !1
            }
            function w(e, t) {
                f(e) || v(t) || m(e)
            }
        },
        11600: function(e, t, n) {
            "use strict";
            n.d(t, {
                A: function() {
                    return I
                }
            });
            var r = n(99870)
              , o = n.n(r)
              , a = n(14041)
              , i = {
                crosswordTableContainer: "nXPxWryc6wPQ0fXDBmGT",
                tableContainer: "iaazwFtczlXYjxCf4i5A",
                readOnly: "KB3WyWPaF_I8yzxiZ3wB",
                descriptionContainer: "SS0EfAWh91gV8SF2FOJz",
                description: "L8yCPnxM164s58mQ0cfk",
                withTopMargin: "NX0kFyCIMAHINKSumFEC",
                emptybox: "NiamaF4h7IZ5SCPUBri8",
                box: "bc_yXO7bPiGce64mvRMy",
                shadowbox: "EqPamEfd_GMglf0mdNL1",
                hasinput: "vRc2P_qkIau1Fmhqr0oK",
                blinking: "UAN5lswlTpiSOkiXhrB2",
                nbox: "c5UlzbrPLywoCBgMZ48t",
                boxInput: "N3HEYcAkAfrNflQ_ddat",
                emptywordlist: "_eHTth1auKsAp82Ln55M",
                extrarationale: "wgpJ9Tgi8u58uLvKAu0_",
                popup_description: "wrF_AwDYovfCUn8bNBlN"
            }
              , s = n(58065)
              , u = n.n(s)
              , c = n(78073);
            function l(e) {
                return l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                l(e)
            }
            function d(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== l(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== l(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === l(o) ? o : String(o)), r)
                }
                var o
            }
            function f(e) {
                return f = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                f(e)
            }
            function p(e, t) {
                return p = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                p(e, t)
            }
            var h = function(e) {
                function t(e) {
                    var n, r, o, a;
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    (r = this,
                    o = t,
                    a = [e],
                    o = f(o),
                    n = function(e, t) {
                        if (t && ("object" === l(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(r, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(o, a || [], f(r).constructor) : o.apply(r, a))).setSpanRef = n.setSpanRef.bind(n),
                    n
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && p(e, t)
                }(t, e),
                n = t,
                (r = [{
                    key: "setSpanRef",
                    value: function(e) {
                        if (null != e) {
                            var t = u()(e);
                            t.safeHtml(c.prepare(this.props.text)),
                            c.processMathElems(t)
                        }
                    }
                }, {
                    key: "render",
                    value: function() {
                        return a.createElement("span", {
                            ref: this.setSpanRef
                        })
                    }
                }]) && d(n.prototype, r),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, r
            }(a.PureComponent)
              , m = n(22420)
              , g = n(63181);
            function v(e, t) {
                return function(e) {
                    if (Array.isArray(e))
                        return e
                }(e) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(e, t) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return w(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? w(e, t) : void 0
                    }
                }(e, t) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()
            }
            function w(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var b, y = function(e) {
                var t = e.cell
                  , n = e.onSelectCell
                  , r = e.showAnsweredCorrect
                  , s = e.showCorrectness
                  , u = e.correctedCell
                  , c = e.selectedCellRef
                  , l = (0,
                a.useCallback)((function(e) {
                    n && n(t)
                }
                ), [t, n]);
                if (t) {
                    var d = !!u && u.isCompleteWord && r
                      , f = o()("letterbox", i.box, t.selected ? "selected" : null, t.unclear ? "unclear" : null, t.hasInput ? i.hasinput : null, (null == u ? void 0 : u.isCorrect) || !d && !s ? null : "wrong", (null == u ? void 0 : u.isCorrect) && (d || s) ? "correct" : null);
                    return a.createElement("td", {
                        key: t.x + "" + t.y,
                        "aria-colindex": t.x + 1,
                        "aria-rowindex": t.y + 1,
                        "aria-label": (t.number ? t.number + "" : "") + (t.letter ? t.letter + "" : ""),
                        className: f,
                        onClick: l,
                        ref: t.hasInput && c || void 0
                    }, a.createElement("div", {
                        className: i.box
                    }, t.number ? a.createElement("div", {
                        "aria-hidden": "true",
                        className: o()("nbox", i.nbox)
                    }, t.number) : null, t.letter ? a.createElement("div", null, t.letter) : null))
                }
                return null
            }, C = a.memo((function(e) {
                var t = e.x
                  , n = e.y;
                return a.createElement("td", {
                    "aria-colindex": t + 1,
                    "aria-rowindex": n + 1,
                    "aria-label": "blank"
                }, a.createElement("div", {
                    className: o()("emptybox", i.emptybox)
                }))
            }
            )), x = function(e) {
                for (var t = e.row, n = e.length, r = e.onSelectCell, o = e.y, i = e.showAnsweredCorrect, s = e.showCorrectness, u = e.correctedRow, c = e.selectedCellRef, l = [], d = 0; d < n; d++) {
                    var f = t[d];
                    f ? l.push(a.createElement(y, {
                        key: d,
                        cell: f,
                        selectedCellRef: c,
                        correctedCell: u ? u[d] : void 0,
                        onSelectCell: r,
                        showAnsweredCorrect: i,
                        showCorrectness: s
                    })) : l.push(a.createElement(C, {
                        key: d,
                        x: d,
                        y: o
                    }))
                }
                return a.createElement("tr", null, l)
            }, E = a.forwardRef((function(e, t) {
                var n = e.selectedWordId
                  , r = e.selectedWordLength
                  , o = e.onChange
                  , s = e.onBackSpace
                  , u = e.onDeselectWord
                  , c = (0,
                a.useCallback)((function(e) {
                    e.target.value.length > r || e.target.value.length > 0 && o && o(e.target.value)
                }
                ), [r, o])
                  , l = (0,
                a.useCallback)((function(e) {
                    8 === e.keyCode && s && s()
                }
                ), [s])
                  , d = (0,
                a.useCallback)((function(e) {
                    u && u()
                }
                ), [u]);
                return (0,
                a.useEffect)((function() {
                    t && t.current && (t.current.value = "")
                }
                ), [n]),
                a.createElement("input", {
                    className: i.boxInput,
                    ref: t,
                    onChange: c,
                    onBlur: d,
                    onKeyDown: l
                })
            }
            )), k = a.memo(E), S = function(e) {
                var t = e.crosswordarray
                  , n = e.onSelectCell
                  , r = e.showAnsweredCorrect
                  , s = e.showCorrectness
                  , u = e.correctionArray
                  , c = e.readOnly
                  , l = e.selectedCellRef
                  , d = a.useMemo((function() {
                    return t.reduce((function(e, t) {
                        return Math.max(e, t.length)
                    }
                    ), 0)
                }
                ), [t])
                  , f = t.map((function(e, t) {
                    return a.createElement(x, {
                        selectedCellRef: l,
                        row: e,
                        correctedRow: u ? u[t] : void 0,
                        length: d,
                        onSelectCell: n,
                        key: t,
                        y: t,
                        showAnsweredCorrect: r,
                        showCorrectness: s
                    })
                }
                ))
                  , p = o()(i.tableContainer, c && i.readOnly);
                return a.createElement(a.Fragment, null, a.createElement("table", {
                    cellSpacing: 0,
                    tabIndex: -1,
                    role: "grid",
                    "aria-label": "Puzzle",
                    className: p
                }, a.createElement("tbody", null, f)))
            }, T = a.forwardRef((function(e, t) {
                var n = e.word
                  , r = e.onSelectWord
                  , s = (0,
                a.useCallback)((function(e) {
                    r(n)
                }
                ), [r, n])
                  , u = o()(n.selected ? "selected" : null, n.selected ? i.selected : null);
                return a.createElement("span", {
                    className: u,
                    onClick: s,
                    onFocus: s,
                    ref: n.selected ? t : null
                }, a.createElement("b", null, n.number + ". "), a.createElement(h, {
                    text: n.description
                }))
            }
            )), _ = a.forwardRef((function(e, t) {
                var n = e.wordList
                  , r = e.onSelectWord
                  , o = n.sort((function(e, t) {
                    return e.number && t.number ? e.number - t.number : 0
                }
                )).map((function(e, o) {
                    return a.createElement(a.Fragment, {
                        key: o
                    }, a.createElement(T, {
                        word: e,
                        ref: t,
                        onSelectWord: r
                    }), o !== n.length - 1 && " - ")
                }
                ));
                return a.createElement(a.Fragment, null, o)
            }
            )), A = function(e) {
                var t = e.selectedWordRef
                  , n = e.wordList
                  , r = (e.selectedCellRef,
                v((0,
                a.useState)(!1), 2))
                  , s = r[0]
                  , u = r[1]
                  , c = (0,
                a.useCallback)((function() {
                    var e = (0,
                    m.Qc)(n);
                    t.current && e && !e.unclear && t.current.getBoundingClientRect().top < 25 ? u(!0) : u(!1)
                }
                ), [t, u, n]);
                if ((0,
                a.useEffect)((function() {
                    c()
                }
                ), [n, c]),
                s) {
                    var l = (0,
                    m.Qc)(n);
                    if (l)
                        return a.createElement("div", {
                            className: o()("description", i.description, i.popup_description)
                        }, a.createElement("p", null, a.createElement("b", null, l.number + ". "), a.createElement(h, {
                            text: l.description
                        })))
                }
                return null
            };
            !function(e) {
                e.CORRECTION_LOAD = "CORRECTION_LOAD",
                e.SELECT_WORD = "SELECT_WORD",
                e.SELECT_CELL = "SELECT_CELL",
                e.CHANGE_VALUE = "CHANGE_VALUE",
                e.BACKSPACE = "BACKSPACE",
                e.DESELECT = "DESELECT"
            }(b || (b = {}));
            var O = function(e, t) {
                switch (t.type) {
                case b.CORRECTION_LOAD:
                    var n = t.answer;
                    if (n && n.answer) {
                        var r = (0,
                        m.W0)(e.crosswordArray, n.answer);
                        e.crosswordArray = r
                    }
                    return n && null == n.answer && (e.crosswordArray = (0,
                    m.PH)(t.configWords).crosswordArray),
                    e;
                case b.SELECT_WORD:
                    return (0,
                    m.dw)(e.wordlist, e.crosswordArray, t.selectedWord);
                case b.SELECT_CELL:
                    return (0,
                    m.Hv)(e.wordlist, e.crosswordArray, t.selectedCell);
                case b.CHANGE_VALUE:
                    var o = (0,
                    m.pK)(e.wordlist, e.crosswordArray, t.value);
                    return (0,
                    m.aK)(o.wordlist, o.crosswordArray, t.value);
                case b.BACKSPACE:
                    return (0,
                    m.KR)(e.wordlist, e.crosswordArray);
                case b.DESELECT:
                    return (0,
                    m.aB)(e.wordlist, e.crosswordArray)
                }
                return e
            }
              , D = function(e) {
                var t = e.questionconfig
                  , n = e.answerupdated
                  , r = e.context
                  , s = e.questionstate
                  , u = e.showAnsweredCorrect
                  , c = e.showCorrectness
                  , l = e.readOnly
                  , d = v((0,
                a.useReducer)(O, (0,
                m.PH)(t.words)), 2)
                  , f = d[0]
                  , p = f.crosswordArray
                  , h = f.wordlist
                  , w = d[1]
                  , y = (0,
                a.useCallback)((function(e) {
                    w({
                        type: b.SELECT_WORD,
                        selectedWord: e
                    }),
                    P.current && P.current.focus()
                }
                ), [])
                  , C = (0,
                a.useCallback)((function(e) {
                    w({
                        type: b.SELECT_CELL,
                        selectedCell: e
                    }),
                    P.current && P.current.focus()
                }
                ), [])
                  , x = (0,
                a.useCallback)((function(e) {
                    w({
                        type: b.CHANGE_VALUE,
                        value: e
                    }),
                    D.current.trigger()
                }
                ), [])
                  , E = (0,
                a.useCallback)((function() {
                    w({
                        type: b.BACKSPACE
                    }),
                    D.current.trigger()
                }
                ), [])
                  , T = (0,
                a.useCallback)((function() {
                    n("answer", (0,
                    m.D9)(p))
                }
                ), [p, n])
                  , D = (0,
                a.useRef)(null);
                (0,
                a.useEffect)((function() {
                    null == D.current ? D.current = r.widgetstorage.createThrottler(T) : D.current.cb = T
                }
                ), [T, r.widgetstorage]),
                (0,
                a.useEffect)((function() {
                    w({
                        type: b.CORRECTION_LOAD,
                        answer: s.answer,
                        configWords: t.words
                    })
                }
                ), [s.answer, t.words]);
                var I = (0,
                a.useCallback)((function() {
                    w({
                        type: b.DESELECT
                    })
                }
                ), [])
                  , P = (0,
                a.useRef)(null)
                  , R = (0,
                a.useRef)(null)
                  , L = (0,
                a.useRef)(null)
                  , N = (0,
                a.useRef)(null)
                  , F = r.getScrollObject()
                  , M = (0,
                a.useCallback)((function(e) {
                    N.current !== e && (N.current = e,
                    setTimeout((function() {
                        N.current && function(e, t, n, r) {
                            var o, a;
                            if (n && t) {
                                for (var i = 0, s = 0, u = e; u !== n.offsetParent; )
                                    i += u.offsetLeft,
                                    s += u.offsetTop,
                                    u = u.offsetParent;
                                var c = n.scrollLeft
                                  , l = i - c;
                                t.style.left = l + "px";
                                var d = r
                                  , f = d.clientWidth
                                  , p = d.clientHeight
                                  , h = e.getBoundingClientRect()
                                  , m = h
                                  , g = m.width
                                  , v = (m.height,
                                i)
                                  , w = c + f - g - 50;
                                if (v < c - 1) {
                                    var b = Math.max(v - 50, 0);
                                    n.scrollLeft = b
                                } else if (v > w + 1) {
                                    var y = v - f + 50 + g;
                                    n.scrollLeft = y
                                }
                                var C = (h = e.getBoundingClientRect()).top
                                  , x = d.scrollTop
                                  , E = d.getBoundingClientRect().top;
                                C += x - E,
                                t.style.top = s + "px";
                                var k, S, T = x = d.scrollTop, _ = window.visualViewport, A = null !== (o = null == _ ? void 0 : _.offsetTop) && void 0 !== o ? o : 0, O = null !== (a = null == _ ? void 0 : _.height) && void 0 !== a ? a : p + E;
                                S = A <= E ? (k = T) + O + A - E : (k = T + A - E) + O;
                                var D = k + 150
                                  , I = S - 100;
                                if (C < D - 1) {
                                    var P = D - C
                                      , R = Math.max(x - P, 0);
                                    d.scrollTop = R
                                } else if (C > I + 1) {
                                    var L = x + (C - I);
                                    d.scrollTop = L
                                }
                            }
                        }(N.current, P.current, R.current, F)
                    }
                    )))
                }
                ), [F])
                  , j = a.useMemo((function() {
                    return (0,
                    m.Qc)(h || void 0)
                }
                ), [h]);
                return (0,
                m.Er)(t.words) ? a.createElement("div", null, a.createElement("div", {
                    className: o()(i.crosswordContainer)
                }, a.createElement("div", {
                    className: o()("description", i.description, l && i.readOnly)
                }, a.createElement("div", null, a.createElement("b", null, (0,
                g.Tl)("Across"), ":"), " ", a.createElement(_, {
                    wordList: h.H,
                    ref: L,
                    onSelectWord: y
                })), a.createElement("div", {
                    className: i.withTopMargin
                }, a.createElement("b", null, (0,
                g.Tl)("Down"), ":"), " ", a.createElement(_, {
                    wordList: h.V,
                    ref: L,
                    onSelectWord: y
                }))), a.createElement(A, {
                    wordList: h,
                    selectedCellRef: N,
                    selectedWordRef: L
                })), a.createElement("div", {
                    className: i.crosswordTableContainer,
                    ref: R
                }, a.createElement(k, {
                    selectedWordId: null == j ? void 0 : j.id,
                    selectedWordLength: (null == j ? void 0 : j.coords.length) || 0,
                    onChange: x,
                    onBackSpace: E,
                    onDeselectWord: I,
                    ref: P
                }), a.createElement(S, {
                    selectedCellRef: M,
                    crosswordarray: p,
                    onSelectCell: C,
                    showAnsweredCorrect: u,
                    showCorrectness: c,
                    readOnly: l,
                    correctionArray: s.correction ? s.correction.correctedCrossword : []
                }))) : a.createElement("div", {
                    id: "container"
                }, a.createElement("div", {
                    className: i.emptywordlist
                }, a.createElement("b", null, (0,
                g.Tl)("Why is this crossword empty ?")), a.createElement("br", null), a.createElement("br", null), (0,
                g.Tl)("No crossword layout is provided!"), a.createElement("br", null), (0,
                g.Tl)("Please make sure you press the 'Generate crossword' button after entering or adding words in the table to calculate the crossword layout.")))
            }
              , I = {
                CrossWord: function(e) {
                    return {
                        QuestionContent: function(e) {
                            var t = e.questionstate
                              , n = e.questionconfig
                              , r = (e.questionconfigincludingcorrection,
                            e.readOnly)
                              , o = e.showCorrectness
                              , i = (e.showRationale,
                            e.showAnsweredCorrect)
                              , s = (e.showMandatoryFieldReminder,
                            e.answerupdated)
                              , u = e.context;
                            return a.createElement(D, {
                                questionstate: t,
                                questionconfig: n,
                                context: u,
                                answerupdated: s,
                                showAnsweredCorrect: i,
                                showCorrectness: o,
                                readOnly: r
                            })
                        },
                        QuestionExtraRationale: function(e) {
                            var t, n = e.questionconfigincludingcorrection, r = (e.direction,
                            n);
                            if (r.hasOwnProperty("words") && r.words.length > 0) {
                                var o = r.words
                                  , s = (0,
                                m.tr)(o);
                                t = a.createElement("div", {
                                    className: i.extrarationale
                                }, a.createElement("p", null, (0,
                                g.Tl)("The answer:")), a.createElement("div", {
                                    className: i.crosswordTableContainer
                                }, a.createElement(S, {
                                    crosswordarray: s,
                                    readOnly: !0,
                                    selectedCellRef: void 0
                                })))
                            }
                            return t || null
                        },
                        name: (0,
                        g.Tl)("Crossword")
                    }
                }
            }
        },
        60254: function(e, t, n) {
            "use strict";
            n.d(t, {
                A: function() {
                    return w
                }
            });
            var r = n(99870)
              , o = n.n(r)
              , a = n(14041)
              , i = n(63181);
            function s(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return u(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? u(e, t) : void 0
                }
            }
            function u(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var c, l = function(e) {
                var t = e.rubric;
                if (t) {
                    var n = t.labels
                      , r = t.rows;
                    if (r && r.length)
                        return r.map((function(e, t) {
                            return n && n.length ? n.map((function(n, r) {
                                return {
                                    x: r,
                                    y: t,
                                    value: e.cells[r].value,
                                    checked: !1
                                }
                            }
                            )) : []
                        }
                        ))
                }
                return []
            }, d = function(e, t) {
                var n = e.map((function(e) {
                    return e.map((function(e) {
                        return Object.assign({}, e, {
                            checked: !1
                        })
                    }
                    ))
                }
                ));
                return t && t.forEach((function(e) {
                    !e.y && 0 !== e.y || !e.x && 0 !== e.x || !0 !== e.checked || n[e.y] && Array.isArray(n[e.y]) && (n[e.y][e.x].checked = e.checked)
                }
                )),
                n
            };
            !function(e) {
                e.TOGGLE_CELL = "TOGGLE_CELL",
                e.LOAD_ANSWER = "LOAD_ANSWER"
            }(c || (c = {}));
            var f = function(e, t) {
                switch (t.type) {
                case c.LOAD_ANSWER:
                    if (t.answer) {
                        var n = d(e.array, t.answer);
                        return Object.assign(Object.assign({}, e), {
                            array: n
                        })
                    }
                    var r = d(e.array, []);
                    return Object.assign(Object.assign({}, e), {
                        array: r
                    });
                case c.TOGGLE_CELL:
                    if (void 0 !== t.x && void 0 !== t.y && !t.readOnly && t.answerupdated && "function" == typeof t.answerupdated) {
                        var o = (i = e.array,
                        l = t.x,
                        f = t.y,
                        h = !(p = function(e) {
                            if (Array.isArray(e))
                                return u(e)
                        }(a = i) || function(e) {
                            if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                                return Array.from(e)
                        }(a) || s(a) || function() {
                            throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                        }())[f][l].checked,
                        p[f] = p[f].map((function(e) {
                            return Object.assign({}, e, {
                                checked: !1
                            })
                        }
                        )),
                        p[f][l].checked = h,
                        p);
                        return t.answerupdated("answer", function(e) {
                            return e.map((function(e, t) {
                                var n = e.find((function(e) {
                                    return e.checked
                                }
                                ));
                                return n ? {
                                    x: n.x,
                                    y: t,
                                    checked: n.checked
                                } : {
                                    y: t,
                                    checked: !1
                                }
                            }
                            ))
                        }(o)),
                        Object.assign(Object.assign({}, e), {
                            array: o
                        })
                    }
                }
                var a, i, l, f, p, h;
                return Object.assign({}, e)
            }
              , p = function(e) {
                var t = e.rubricConfigLabels;
                if (t && t.length) {
                    var n = [a.createElement("th", {
                        key: "00"
                    }), t.map((function(e, t) {
                        return a.createElement("th", {
                            key: t,
                            className: "rubric_descriptors"
                        }, e.value)
                    }
                    ))];
                    return a.createElement("tr", null, n)
                }
                return null
            }
              , h = function(e) {
                var t = e.rubricConfigRowData
                  , n = e.values
                  , r = e.onToggleCell
                  , i = e.readOnly
                  , s = [a.createElement("th", {
                    key: "start",
                    className: "rubric_criteria"
                }, t.label.value), n.map((function(e, t) {
                    var n, s, u = o()("rubric_cell", e.checked ? "selected" : "");
                    return a.createElement("td", {
                        key: t,
                        className: u,
                        style: {
                            cursor: i ? "not-allowed" : "pointer"
                        },
                        onClick: (n = e.x,
                        s = e.y,
                        function() {
                            r && r(n, s)
                        }
                        )
                    }, a.createElement("button", null, a.createElement("span", null, e.value)))
                }
                ))];
                return a.createElement("tr", null, s)
            }
              , m = function(e) {
                var t = e.rubricConfig
                  , n = e.rubricArray
                  , r = e.onToggleCell
                  , o = e.readOnly;
                if (t.rows && t.rows.length) {
                    var i = t.rows.map((function(e, t) {
                        return a.createElement(h, {
                            rubricConfigRowData: e,
                            key: t,
                            values: n[t],
                            onToggleCell: r,
                            readOnly: o
                        })
                    }
                    ));
                    return a.createElement(a.Fragment, null, i)
                }
                return null
            }
              , g = function(e) {
                var t = e.rubricConfig
                  , n = e.rubricArray
                  , r = e.onToggleCell
                  , i = e.readOnly
                  , s = o()("rubric_table", "RjvKNfOHOCmvX3Mzp7Op", "rKl1O3z2aEYXcN8SHaxn");
                return t ? a.createElement("div", {
                    className: "table-scroll-wrapper"
                }, a.createElement("div", {
                    className: "table-cover"
                }, a.createElement("table", {
                    className: s
                }, a.createElement("thead", null, a.createElement(p, {
                    rubricConfigLabels: t.labels
                })), a.createElement("tbody", null, a.createElement(m, {
                    rubricConfig: t,
                    rubricArray: n,
                    onToggleCell: r,
                    readOnly: i
                }))))) : null
            }
              , v = function(e) {
                var t, n, r = e.questionconfig, o = e.answerupdated, i = e.questionstate, u = e.readOnly, d = (t = (0,
                a.useReducer)(f, {
                    array: l(r)
                }),
                n = 2,
                function(e) {
                    if (Array.isArray(e))
                        return e
                }(t) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(t, n) || s(t, n) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()), p = d[0].array, h = d[1];
                return (0,
                a.useEffect)((function() {
                    h({
                        type: c.LOAD_ANSWER,
                        answer: i.answer.answer
                    })
                }
                ), [i.answer]),
                a.createElement(g, {
                    rubricConfig: r.rubric,
                    rubricArray: p,
                    onToggleCell: function(e, t) {
                        u || h({
                            type: c.TOGGLE_CELL,
                            x: e,
                            y: t,
                            answerupdated: o,
                            readOnly: u
                        })
                    },
                    readOnly: u
                })
            }
              , w = {
                Rubric: function(e) {
                    return {
                        QuestionContent: function(e) {
                            var t = e.questionstate
                              , n = e.questionconfig
                              , r = (e.questionconfigincludingcorrection,
                            e.readOnly)
                              , o = (e.showCorrection,
                            e.showRationale,
                            e.showAnsweredCorrect,
                            e.showMandatoryFieldReminder,
                            e.answerupdated);
                            return e.context,
                            a.createElement(v, {
                                readOnly: r,
                                questionconfig: n,
                                answerupdated: o,
                                questionstate: t
                            })
                        },
                        QuestionExtraRationale: function(e) {
                            return e.questionconfigincludingcorrection,
                            e.direction,
                            null
                        },
                        name: (0,
                        i.Tl)("Rubric")
                    }
                }
            }
        },
        49201: function(e, t, n) {
            "use strict";
            var r = n(14041)
              , o = n(99870)
              , a = n.n(o)
              , i = n(79715)
              , s = n(63181);
            function u(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            var c = function(e) {
                var t = e.questionconfig
                  , n = e.quAttributes
                  , o = e.changeNotificationThrottler
                  , i = e.answer
                  , s = e.correction
                  , u = e.readOnly
                  , c = {};
                null != t.placeholder && "" !== t.placeholder && (c.placeholder = t.placeholder),
                n && (c.spellCheck = "true" === n.spellcheck,
                c.autoCorrect = n.autocorrect,
                c.autoComplete = n.autocomplete,
                c.autoCapitalize = n.autocapitalize,
                c.pattern = n.pattern,
                c.inputMode = n.inputmode);
                var l = "";
                return s && null != s.correctness && (l = a()("bw-tagged", -2 === s.correctness && "sl-open", 1 === s.correctness && "sl-answer", 0 === s.correctness && "sl-wrong")),
                r.createElement("div", {
                    className: a()("sl-cover bw-column-container ", l)
                }, r.createElement("input", Object.assign({
                    type: "text",
                    className: "edit bw-column-expanding"
                }, c, {
                    onChange: o,
                    onKeyUp: o,
                    value: i || "",
                    readOnly: u
                })), r.createElement("div", {
                    className: "cr-marker "
                }, r.createElement("span", {
                    className: "cr-correct"
                }, "✓"), r.createElement("span", {
                    className: "cr-wrong"
                }, "✘")))
            };
            t.A = {
                SingleLine: function(e) {
                    return {
                        QuestionContent: function(t) {
                            var n, o, a = t.questionstate, i = t.questionconfig, s = (t.questionconfigincludingcorrection,
                            t.readOnly), l = (t.showCorrectness,
                            t.showRationale,
                            t.showAnsweredCorrect,
                            t.showMandatoryFieldReminder,
                            t.answerupdated), d = t.context, f = ((0,
                            r.useRef)(null),
                            a && a.answer && a.answer.answer), p = (n = (0,
                            r.useState)(f),
                            o = 2,
                            function(e) {
                                if (Array.isArray(e))
                                    return e
                            }(n) || function(e, t) {
                                var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                                if (null != n) {
                                    var r, o, a, i, s = [], u = !0, c = !1;
                                    try {
                                        if (a = (n = n.call(e)).next,
                                        0 === t) {
                                            if (Object(n) !== n)
                                                return;
                                            u = !1
                                        } else
                                            for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                            s.length !== t); u = !0)
                                                ;
                                    } catch (e) {
                                        c = !0,
                                        o = e
                                    } finally {
                                        try {
                                            if (!u && null != n.return && (i = n.return(),
                                            Object(i) !== i))
                                                return
                                        } finally {
                                            if (c)
                                                throw o
                                        }
                                    }
                                    return s
                                }
                            }(n, o) || function(e, t) {
                                if (e) {
                                    if ("string" == typeof e)
                                        return u(e, t);
                                    var n = Object.prototype.toString.call(e).slice(8, -1);
                                    return "Object" === n && e.constructor && (n = e.constructor.name),
                                    "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? u(e, t) : void 0
                                }
                            }(n, o) || function() {
                                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                            }()), h = p[0], m = p[1], g = (0,
                            r.useCallback)((function() {
                                l("answer", h)
                            }
                            ), [h]), v = (0,
                            r.useRef)(null);
                            (0,
                            r.useEffect)((function() {
                                null == v.current ? v.current = d.widgetstorage.createThrottler(g) : v.current.cb = g
                            }
                            ), [g]),
                            (0,
                            r.useEffect)((function() {
                                f !== h && m(f)
                            }
                            ), [f]);
                            var w = Object.assign({}, e.getSpellcheckAttrib(), e.getInputModeAttrib(i.keyboard));
                            return r.createElement(c, {
                                questionconfig: i,
                                answer: h,
                                correction: a && a.correction,
                                quAttributes: w,
                                changeNotificationThrottler: function(e) {
                                    var t = e.target.value;
                                    m(t),
                                    v.current.trigger()
                                },
                                readOnly: s
                            })
                        },
                        QuestionExtraRationale: function(e) {
                            var t, n = e.questionconfigincludingcorrection, o = e.direction, a = n;
                            if (a.hasOwnProperty("Valid") && "" !== a.Valid.trim()) {
                                var u = a.Valid.replace(/</g, "&lt;").split(/##/);
                                t = (1 === u.length ? (0,
                                s.Tl)("The answer:") : (0,
                                s.Tl)("Correct answers:")) + '<br><br><div class="answer the-answer-text">' + u.join("<br>") + "</div>"
                            }
                            return t ? r.createElement(i.s, {
                                className: "the-answer",
                                text: t,
                                direction: o,
                                directionSelector: ".the-answer-text"
                            }) : null
                        },
                        name: (0,
                        s.Tl)("Single Line Text question")
                    }
                }
            }
        },
        36915: function(e, t, n) {
            "use strict";
            n.d(t, {
                l: function() {
                    return c
                },
                J: function() {
                    return l
                }
            });
            var r = n(14041)
              , o = n(99870)
              , a = n.n(o)
              , i = n(63181)
              , s = {
                DialogWrapper: "zCWlb6KxN0wcFaBAlKK1",
                Dialog: "EUUG1NFe0EylNBWxGYLa",
                DialogBody: "c4uvUz6vdVB2ho6B3nyQ",
                DialogCloseButton: "XuaxNjYhh3a9jn_R0FtR"
            }
              , u = n(73030);
            function c(e) {
                var t = e.title
                  , n = e.children
                  , o = e.OK
                  , c = e.onOk
                  , l = e.Cancel
                  , d = e.onCancel
                  , f = e.onClose
                  , p = e.className
                  , h = (0,
                r.useRef)(!1);
                (0,
                r.useEffect)((function() {
                    return function() {
                        h.current && ((0,
                        u._)(),
                        h.current = !1)
                    }
                }
                ));
                var m = (0,
                r.useCallback)((function(e) {
                    e && !h.current && (h.current = !0,
                    (0,
                    u.g)(e))
                }
                ), []);
                return r.createElement("div", {
                    className: a()("bw-centered bw-row-container ui-dialog ui-widget ui-widget-content ui-corner-all bw-dialog", s.Dialog, p),
                    role: "dialog",
                    "aria-modal": "true",
                    ref: m
                }, r.createElement("div", {
                    className: "bw-row-fixed ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"
                }, r.createElement("span", {
                    className: "i-dialog-title",
                    id: "ui-dialog-title-1"
                }, t)), f && r.createElement("button", {
                    className: s.DialogCloseButton,
                    onClick: f,
                    "aria-label": (0,
                    i.Tl)("Cancel")
                }, "×"), r.createElement("div", {
                    className: a()("bw-row-expanding ui-dialog-content ui-widget-content", s.DialogBody)
                }, n), r.createElement("div", {
                    className: "bw-row-fixed ui-dialog-buttonpane"
                }, r.createElement("div", {
                    className: "ui-dialog-buttonset"
                }, d && r.createElement("button", {
                    className: "ui-button ui-widget ui-state-default ui-button-text-only",
                    onClick: d
                }, r.createElement("span", {
                    className: "ui-button-text"
                }, l)), r.createElement("button", {
                    className: "ui-button ui-widget ui-state-default ui-button-text-only",
                    autoFocus: !0,
                    onClick: c
                }, r.createElement("span", {
                    className: "ui-button-text"
                }, o || (0,
                i.Tl)("OK"))))))
            }
            function l(e) {
                var t = e.children;
                return r.createElement("div", {
                    className: a()("bw-centering-container", s.DialogWrapper)
                }, t)
            }
        },
        79715: function(e, t, n) {
            "use strict";
            n.d(t, {
                H: function() {
                    return v
                },
                s: function() {
                    return g
                }
            });
            var r = n(14041)
              , o = n(58065)
              , a = n.n(o)
              , i = n(62375)
              , s = n(1309)
              , u = n(6322)
              , c = n(78073)
              , l = n(84966)
              , d = n(50466);
            function f(e) {
                return f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                f(e)
            }
            function p(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, (void 0,
                    o = function(e) {
                        if ("object" !== f(e) || null === e)
                            return e;
                        var t = e[Symbol.toPrimitive];
                        if (void 0 !== t) {
                            var n = t.call(e, "string");
                            if ("object" !== f(n))
                                return n;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }
                        return String(e)
                    }(r.key),
                    "symbol" === f(o) ? o : String(o)), r)
                }
                var o
            }
            function h(e) {
                return h = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                h(e)
            }
            function m(e, t) {
                return m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                m(e, t)
            }
            var g = function(e) {
                function t() {
                    return function(e, t) {
                        if (!(e instanceof t))
                            throw new TypeError("Cannot call a class as a function")
                    }(this, t),
                    e = this,
                    r = arguments,
                    n = h(n = t),
                    function(e, t) {
                        if (t && ("object" === f(t) || "function" == typeof t))
                            return t;
                        if (void 0 !== t)
                            throw new TypeError("Derived constructors may only return object or undefined");
                        return function(e) {
                            if (void 0 === e)
                                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e
                        }(e)
                    }(e, function() {
                        if ("undefined" == typeof Reflect || !Reflect.construct)
                            return !1;
                        if (Reflect.construct.sham)
                            return !1;
                        if ("function" == typeof Proxy)
                            return !0;
                        try {
                            return !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                            )))
                        } catch (e) {
                            return !1
                        }
                    }() ? Reflect.construct(n, r || [], h(e).constructor) : n.apply(e, r));
                    var e, n, r
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Super expression must either be null or a function");
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    Object.defineProperty(e, "prototype", {
                        writable: !1
                    }),
                    t && m(e, t)
                }(t, e),
                n = t,
                (o = [{
                    key: "setWrapperDivRef",
                    value: function(e) {
                        if (null != e) {
                            var t = a()(e);
                            t.safeHtml(c.prepare((0,
                            s.richTextAsHtml)(this.props.text))),
                            l.resolveYoutubePlaceholders(t),
                            i.process(t),
                            c.processMathElems(t),
                            d.processAudioTags(t),
                            this.props.direction && (0,
                            u.setAutoDirectionIfRequired)(this.props.directionSelector ? t.find(this.props.directionSelector) : t, this.props.direction)
                        }
                        this.props.innerRef && ("function" == typeof this.props.innerRef ? this.props.innerRef(e) : this.props.innerRef && (this.props.innerRef.current = e))
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props
                          , t = e.className
                          , n = e.onClick
                          , o = e.style
                          , a = e.id;
                        return r.createElement("div", {
                            className: t,
                            onClick: n,
                            style: o,
                            ref: this.setWrapperDivRef.bind(this),
                            id: a,
                            tabIndex: this.props.focusable ? -1 : void 0
                        })
                    }
                }]) && p(n.prototype, o),
                Object.defineProperty(n, "prototype", {
                    writable: !1
                }),
                n;
                var n, o
            }(r.PureComponent)
              , v = r.forwardRef((function(e, t) {
                return r.createElement(g, Object.assign({
                    innerRef: t
                }, e, {
                    focusable: !0
                }))
            }
            ))
        },
        36382: function(e, t, n) {
            "use strict";
            n.r(t),
            n.d(t, {
                SimpleCalculator: function() {
                    return f
                },
                createSimpleCalculator: function() {
                    return p
                }
            });
            var r, o = n(14041), a = n(43144), i = n.n(a), s = n(99870), u = n.n(s), c = n(11219), l = {
                calculator: "TGz8lOL9FufGn3OPaIXD",
                displayWrapper: "KqzM4hjyps9G0oyMSXBq",
                display: "J97QFq9KutaVVAvAyyGe",
                number: "aFz6Z4Y5Mf0Ic60tehpk",
                operator: "Q2P39iyEJY6UQj0wHKit",
                calculate: "wyrlbhFOqChU6KmxBAwR",
                clear: "wtDRNQSM7ld5vcbWlL0v",
                row: "dz7V1AUa9gVA1URGbqbf"
            };
            function d(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            function f() {
                var e, t, n = (e = (0,
                o.useState)({
                    v: "0",
                    mode: r.Result
                }),
                t = 2,
                function(e) {
                    if (Array.isArray(e))
                        return e
                }(e) || function(e, t) {
                    var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
                    if (null != n) {
                        var r, o, a, i, s = [], u = !0, c = !1;
                        try {
                            if (a = (n = n.call(e)).next,
                            0 === t) {
                                if (Object(n) !== n)
                                    return;
                                u = !1
                            } else
                                for (; !(u = (r = a.call(n)).done) && (s.push(r.value),
                                s.length !== t); u = !0)
                                    ;
                        } catch (e) {
                            c = !0,
                            o = e
                        } finally {
                            try {
                                if (!u && null != n.return && (i = n.return(),
                                Object(i) !== i))
                                    return
                            } finally {
                                if (c)
                                    throw o
                            }
                        }
                        return s
                    }
                }(e, t) || function(e, t) {
                    if (e) {
                        if ("string" == typeof e)
                            return d(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        return "Object" === n && e.constructor && (n = e.constructor.name),
                        "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? d(e, t) : void 0
                    }
                }(e, t) || function() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }()), a = n[0], i = n[1], s = (0,
                o.useRef)(null);
                function f(e) {
                    a.mode === r.Error || a.mode === r.Result && (e >= "0" && e <= "9" || "." === e) ? i({
                        v: e,
                        mode: r.Input
                    }) : i({
                        v: a.v + e,
                        mode: r.Input
                    })
                }
                function p() {
                    try {
                        var e = (0,
                        c.Ay)({}, a.v);
                        isNaN(e) ? i({
                            v: "ERROR",
                            mode: r.Error
                        }) : isFinite(e) ? i({
                            v: parseFloat(e.toFixed(8)) + "",
                            mode: r.Result
                        }) : i({
                            v: "INF",
                            mode: r.Error
                        })
                    } catch (e) {
                        i({
                            v: "ERROR",
                            mode: r.Error
                        })
                    }
                }
                return o.createElement("div", {
                    tabIndex: 0,
                    className: l.calculator,
                    contentEditable: !1,
                    id: "simpleCalculatorContainer",
                    ref: s,
                    onClick: function(e) {
                        s.current && s.current.focus()
                    },
                    onKeyDown: function(e) {
                        isNaN(e.key) || f(e.key),
                        "/" !== e.key && "*" !== e.key && "-" !== e.key && "+" !== e.key && "." !== e.key || f(e.key),
                        "Enter" === e.key && p(),
                        "Backspace" === e.key && a.mode !== r.Error && a.mode !== r.Result && a.v.length && i({
                            v: a.v.substring(0, a.v.length - 1),
                            mode: r.Input
                        })
                    },
                    onPaste: function(e) {
                        f((e.clipboardData || window.clipboardData).getData("text").replace(/[^0-9]/g, ""))
                    }
                }, o.createElement("div", {
                    className: l.displayWrapper
                }, o.createElement("input", {
                    type: "text",
                    className: l.display,
                    disabled: !0,
                    value: a.v.replace(/\//g, "÷").replace(/\*/g, "×")
                })), o.createElement("div", {
                    className: u()("bw-icon bw-icon-trash", l.clear),
                    onMouseDown: function() {
                        i({
                            v: "0",
                            mode: r.Result
                        })
                    }
                }), o.createElement("div", {
                    className: l.keys
                }, o.createElement("div", {
                    className: l.row
                }, o.createElement("button", {
                    onMouseDown: f.bind(null, "7"),
                    className: l.number
                }, "7"), o.createElement("button", {
                    onMouseDown: f.bind(null, "8"),
                    className: l.number
                }, "8"), o.createElement("button", {
                    onMouseDown: f.bind(null, "9"),
                    className: l.number
                }, "9"), o.createElement("button", {
                    onMouseDown: f.bind(null, "/"),
                    className: l.operator
                }, "÷")), o.createElement("div", {
                    className: l.row
                }, o.createElement("button", {
                    onMouseDown: f.bind(null, "4"),
                    className: l.number
                }, "4"), o.createElement("button", {
                    onMouseDown: f.bind(null, "5"),
                    className: l.number
                }, "5"), o.createElement("button", {
                    onMouseDown: f.bind(null, "6"),
                    className: l.number
                }, "6"), o.createElement("button", {
                    onMouseDown: f.bind(null, "*"),
                    className: l.operator
                }, "×")), o.createElement("div", {
                    className: l.row
                }, o.createElement("button", {
                    onMouseDown: f.bind(null, "1"),
                    className: l.number
                }, "1"), o.createElement("button", {
                    onMouseDown: f.bind(null, "2"),
                    className: l.number
                }, "2"), o.createElement("button", {
                    onMouseDown: f.bind(null, "3"),
                    className: l.number
                }, "3"), o.createElement("button", {
                    onMouseDown: f.bind(null, "-"),
                    className: l.operator
                }, "-")), o.createElement("div", {
                    className: l.row
                }, o.createElement("button", {
                    onMouseDown: f.bind(null, "0"),
                    className: l.number
                }, "0"), o.createElement("button", {
                    onMouseDown: f.bind(null, "."),
                    className: l.number
                }, "."), o.createElement("button", {
                    onMouseDown: p,
                    className: l.calculate
                }, "="), o.createElement("button", {
                    onMouseDown: f.bind(null, "+"),
                    className: l.operator
                }, "+"))))
            }
            function p() {
                var e = document.createElement("div");
                e.id = "calcdiv",
                e.style.display = "none",
                e.style.position = "absolute",
                e.style.left = "10px",
                e.style.top = "10px",
                e.style["z-index"] = 1e3,
                document.body.appendChild(e),
                i().render(o.createElement(f, null), e)
            }
            !function(e) {
                e[e.Result = 0] = "Result",
                e[e.Input = 1] = "Input",
                e[e.Error = 2] = "Error"
            }(r || (r = {}))
        },
        57581: function(e, t, n) {
            var r = n(79847)
              , o = n(44661)
              , a = n(3334)
              , i = n(53142);
            e.exports = function(e, t) {
                return (i(e) ? r : o)(e, a(t, 3))
            }
        },
        40105: function(e, t, n) {
            var r = n(65111)
              , o = n(3334)
              , a = n(41393)
              , i = n(53142);
            e.exports = function(e, t) {
                return (i(e) ? r : a)(e, o(t, 3))
            }
        },
        77629: function(e, t, n) {
            var r = n(57073)
              , o = n(47170)
              , a = n(3334);
            e.exports = function(e, t) {
                var n = {};
                return t = a(t, 3),
                o(e, (function(e, o, a) {
                    r(n, t(e, o, a), e)
                }
                )),
                n
            }
        },
        46155: function(e, t, n) {
            var r = n(57073)
              , o = n(47170)
              , a = n(3334);
            e.exports = function(e, t) {
                var n = {};
                return t = a(t, 3),
                o(e, (function(e, o, a) {
                    r(n, o, t(e, o, a))
                }
                )),
                n
            }
        },
        48983: function(e, t, n) {
            var r = n(36465)
              , o = n(3334)
              , a = n(72127)
              , i = n(53142)
              , s = n(74535);
            e.exports = function(e, t, n) {
                var u = i(e) ? r : a;
                return n && s(e, t, n) && (t = void 0),
                u(e, o(t, 3))
            }
        },
        60359: function(e, t, n) {
            "use strict";
            n.r(t)
        },
        73196: function(e, t, n) {
            "use strict";
            n.r(t)
        },
        55697: function(e, t, n) {
            "use strict";
            n.r(t)
        },
        92084: function(e, t, n) {
            "use strict";
            n.r(t)
        },
        59104: function(e, t) {
            "use strict";
            t.A = {
                ImagePlayButton: "bD16Ja7OJS5Id4A_QF8w",
                ZoomableImageImage: "PY6QFaKuhx5A44kovbPO",
                ZoomableImageWidthWrapper: "OzhsOccre8HN2TqHaJtE",
                Pound: "PwDTSj3MFDGym4PNAd70",
                pound: "at9hxLcpbItuVY6WVs5T"
            }
        },
        27713: function() {},
        12662: function(e) {
            "use strict";
            e.exports = JSON.parse('{"home":{"frac":{"buttons":[{"name":"frac","latex":"\\\\frac x y","size":"16px","cmd":"\\\\frac"}]},"times":{"buttons":[{"name":"times","write":"\\\\times"}]},"div":{"buttons":[{"name":"div","write":"\\\\div"}]},"cdot":{"buttons":[{"name":"cdot","write":"\\\\cdot"}]},"exp_root":{"buttons":[{"name":"sqrt","latex":"\\\\sqrt x","size":"16px","cmd":"\\\\sqrt","wide":true},{"name":"nthroot","latex":"\\\\nthroot y x","size":"16px","cmd":"\\\\nthroot","katex":"\\\\sqrt [y] x","wide":true}]},"super":{"buttons":[{"name":"super","latex":"x^y","size":"16px","cmd":"^"}]},"sub":{"buttons":[{"name":"sub","latex":"x_i","size":"16px","cmd":"_"}]},"vert":{"buttons":[{"name":"vert","write":"|"}]},"brackets":{"buttons":[{"name":"openbrace","symbol":"{","katex":"\\\\{","cmd":"{"},{"name":"closebrace","symbol":"}","katex":"\\\\}","cmd":"}"},{"name":"openbracket","write":"["},{"name":"closebracket","write":"]"}]},"accent_bar":{"buttons":[{"name":"bar","latex":"\\\\bar x","cmd":"\\\\bar"}]},"accent_dot":{"buttons":[{"name":"dot","latex":"\\\\dot x","cmd":"\\\\dot"}]},"accent_hat":{"buttons":[{"name":"hat","latex":"\\\\hat x","cmd":"\\\\hat"}]},"accent_tilde":{"buttons":[{"name":"tilde","latex":"\\\\tilde x","cmd":"\\\\tilde"}]},"accent_vec":{"buttons":[{"name":"vec","latex":"\\\\vec x","cmd":"\\\\vec"}]},"accent_overleftrightarrow":{"buttons":[{"name":"overleftrightarrow","latex":"\\\\overleftrightarrow {AB}","size":"15px","cmd":"\\\\overleftrightarrow","wide":true}]},"degree":{"buttons":[{"name":"degree","latex":"^\\\\circ","write":"^\\\\circ","alt":"\\\\circ"}]},"greek_delta":{"buttons":[{"name":"delta","write":"\\\\delta"}]},"greek_pi":{"buttons":[{"name":"pi","write":"\\\\pi"}]},"infty":{"buttons":[{"name":"infty","write":"\\\\infty"}]}},"logic":{"operators_equality":{"buttons":[{"name":"leq","write":"\\\\leq","alt":"\\\\le"},{"name":"geq","write":"\\\\geq","alt":"\\\\ge"},{"name":"neq","write":"\\\\neq","alt":"\\\\ne"}]},"operators_similar":{"buttons":[{"name":"sim","write":"\\\\sim"},{"name":"simeq","write":"\\\\simeq"},{"name":"cong","write":"\\\\cong"},{"name":"approx","write":"\\\\approx"}]},"operators_set":{"buttons":[{"name":"in","write":"\\\\in"},{"name":"notin","write":"\\\\notin"},{"name":"subset","write":"\\\\subset"},{"name":"notsubset","write":"\\\\notsubset","katex":"\\\\not\\\\subset"},{"name":"subseteq","write":"\\\\subseteq"},{"name":"supset","write":"\\\\supset"},{"name":"notsupset","write":"\\\\notsupset","katex":"\\\\not\\\\supset"},{"name":"supseteq","write":"\\\\supseteq"},{"name":"union","write":"\\\\cup"},{"name":"intersection","write":"\\\\cap"},{"name":"setminus","write":"\\\\setminus"},{"name":"varnothing","write":"\\\\varnothing"}]},"operators_logic":{"buttons":[{"name":"exists","write":"\\\\exists"},{"name":"nexists","write":"\\\\nexists"},{"name":"forall","write":"\\\\forall"},{"name":"neg","write":"\\\\neg"},{"name":"lor","write":"\\\\lor"},{"name":"land","write":"\\\\land"}]},"operators_o":{"buttons":[{"name":"oplus","write":"\\\\oplus"},{"name":"otimes","write":"\\\\otimes"},{"name":"ominus","write":"\\\\ominus"},{"name":"odot","write":"\\\\odot"},{"name":"oslash","write":"\\\\oslash"}]}},"symbols_number_sets":{"symbols_number_sets":{"buttons":[{"name":"natural","write":"\\\\N"},{"name":"integers","write":"\\\\Z"},{"name":"rational","write":"\\\\Q","katex":"\\\\mathbb{Q}"},{"name":"real","write":"\\\\R"},{"name":"complex","write":"\\\\C","katex":"\\\\mathbb{C}"},{"name":"prime","write":"\\\\mathbb{P}"},{"name":"Quaternations","write":"\\\\mathbb{H}"}]}},"arrows":{"single_leftright_arrows":{"buttons":[{"name":"leftarrow","write":"\\\\leftarrow"},{"name":"rightarrow","write":"\\\\rightarrow"},{"name":"leftrightarrow","write":"\\\\leftrightarrow"}]},"single_updown_arrows":{"buttons":[{"name":"uparrow","write":"\\\\uparrow"},{"name":"downarrow","write":"\\\\downarrow"},{"name":"updownarrow","write":"\\\\updownarrow"}]},"single_diagonal_arrows":{"buttons":[{"name":"nearrow","write":"\\\\nearrow"},{"name":"searrow","write":"\\\\searrow"}]},"double_leftright_arrows":{"buttons":[{"name":"Leftarrow","write":"\\\\Leftarrow"},{"name":"Rightarrow","write":"\\\\Rightarrow"},{"name":"LeftRightarrow","write":"\\\\Leftrightarrow"}]},"double_nleftright_arrows":{"buttons":[{"name":"nLeftarrow","write":"\\\\nLeftarrow"},{"name":"nRightarrow","write":"\\\\nRightarrow"},{"name":"nLeftRightarrow","write":"\\\\nLeftrightarrow"}]},"double_updown_arrows":{"buttons":[{"name":"Uparrow","write":"\\\\Uparrow"},{"name":"Downarrow","write":"\\\\Downarrow"},{"name":"Updownarrow","write":"\\\\Updownarrow"}]},"harpoons":{"buttons":[{"name":"leftrightharpoons","write":"\\\\leftrightharpoons"},{"name":"rightleftharpoons","write":"\\\\rightleftharpoons"}]},"mapsto":{"buttons":[{"name":"mapsto","write":"\\\\mapsto"}]}},"geometry":{"lines":{"buttons":[{"name":"mid","write":"\\\\mid"},{"name":"nmid","write":"\\\\nmid"},{"name":"parallel","write":"\\\\parallel"},{"name":"nparallel","write":"\\\\nparallel"},{"name":"perp","write":"\\\\perp"},{"name":"angle","write":"\\\\angle"}]}},"variable_sized":{"sum_prod":{"buttons":[{"name":"sum","write":"\\\\sum","size":"9px","offset":"-8px"},{"name":"prod","write":"\\\\prod","size":"9px","offset":"-8px"},{"name":"coprod","write":"\\\\coprod","size":"9px","offset":"-8px"}]},"integral":{"buttons":[{"name":"int","write":"\\\\int","size":"12px","offset":"-5px"}]}},"matrices":{"matrices":{"buttons":[{"name":"pmatrix","latex":"\\\\begin{pmatrix}{} \\\\\\\\{} \\\\end{pmatrix}","matrix":"pmatrix","size":"9px","offset":"-2px","katex":"(\\\\begin{smallmatrix} a & b \\\\\\\\ c & d \\\\end{smallmatrix})","wide":true},{"name":"bmatrix","latex":"\\\\begin{bmatrix}{} \\\\\\\\{} \\\\end{bmatrix}","matrix":"bmatrix","size":"9px","offset":"-2px","katex":"[\\\\begin{smallmatrix} a & b \\\\\\\\ c & d \\\\end{smallmatrix}]","wide":true},{"name":"Bmatrix","latex":"\\\\begin{Bmatrix}{} \\\\\\\\{} \\\\end{Bmatrix}","matrix":"Bmatrix","size":"9px","offset":"-2px","katex":"{\\\\begin{smallmatrix} a & b \\\\\\\\ c & d \\\\end{smallmatrix}}","wide":true},{"name":"vmatrix","latex":"\\\\begin{vmatrix}{} \\\\\\\\{} \\\\end{vmatrix}","matrix":"vmatrix","size":"9px","offset":"-2px","katex":"|\\\\begin{smallmatrix} a & b \\\\\\\\ c & d \\\\end{smallmatrix}|","wide":true},{"name":"Vmatrix","latex":"\\\\begin{Vmatrix}{} \\\\\\\\{} \\\\end{Vmatrix}","matrix":"Vmatrix","size":"9px","offset":"-2px","katex":"\\\\|\\\\begin{smallmatrix} a & b \\\\\\\\ c & d \\\\end{smallmatrix}\\\\|","wide":true},{"name":"cases","latex":"\\\\begin{cases}{} \\\\\\\\{} \\\\end{cases}","matrix":"cases","size":"9px","offset":"-2px","katex":"\\\\{\\\\begin{smallmatrix} a \\\\\\\\ b\\\\end{smallmatrix}\\\\|","wide":true}]}},"symbols_greek_lower":{"symbols_greek_lower":{"buttons":[{"name":"alpha","write":"\\\\alpha"},{"name":"beta","write":"\\\\beta"},{"name":"gamma","write":"\\\\gamma"},{"name":"delta","write":"\\\\delta","standalone":true},{"name":"epsilon","write":"\\\\epsilon"},{"name":"zeta","write":"\\\\zeta"},{"name":"eta","write":"\\\\eta"},{"name":"theta","write":"\\\\theta"},{"name":"iota","write":"\\\\iota"},{"name":"kappa","write":"\\\\kappa"},{"name":"lambda","write":"\\\\lambda"},{"name":"mu","write":"\\\\mu"},{"name":"nu","write":"\\\\nu"},{"name":"xi","write":"\\\\xi"},{"name":"omicron","write":"o"},{"name":"pi","write":"\\\\pi","standalone":true},{"name":"rho","write":"\\\\rho"},{"name":"sigma","write":"\\\\sigma"},{"name":"tau","write":"\\\\tau"},{"name":"upsilon","write":"\\\\upsilon"},{"name":"phi","write":"\\\\phi"},{"name":"chi","write":"\\\\chi"},{"name":"psi","write":"\\\\psi"},{"name":"omega","write":"\\\\omega"}]}},"symbols_greek_upper":{"symbols_greek_upper":{"buttons":[{"name":"Alpha","write":"A"},{"name":"Beta","write":"B"},{"name":"Gamma","write":"\\\\Gamma"},{"name":"Delta","write":"\\\\Delta"},{"name":"Epsilon","write":"E"},{"name":"Zeta","write":"Z"},{"name":"Eta","write":"H"},{"name":"Theta","write":"\\\\Theta"},{"name":"Iota","write":"I"},{"name":"Kappa","write":"K"},{"name":"Lamda","write":"\\\\Lambda"},{"name":"Mu","write":"M"},{"name":"Nu","write":"N"},{"name":"Xi","write":"\\\\Xi"},{"name":"Omicron","write":"O"},{"name":"Pi","write":"\\\\Pi"},{"name":"Rho","write":"P"},{"name":"Sigma","write":"\\\\Sigma"},{"name":"Tau","write":"T"},{"name":"Upsilon","write":"\\\\Upsilon"},{"name":"Phi","write":"\\\\Phi"},{"name":"Chi","write":"X"},{"name":"Psi","write":"\\\\Psi"},{"name":"Omega","write":"\\\\Omega"}]}}}')
        }
    }, n = {};
    function r(e) {
        var o = n[e];
        if (void 0 !== o)
            return o.exports;
        var a = n[e] = {
            id: e,
            loaded: !1,
            exports: {}
        };
        return t[e].call(a.exports, a, a.exports, r),
        a.loaded = !0,
        a.exports
    }
    r.m = t,
    r.amdD = function() {
        throw new Error("define cannot be used indirect")
    }
    ,
    r.amdO = {},
    e = [],
    r.O = function(t, n, o, a) {
        if (!n) {
            var i = 1 / 0;
            for (l = 0; l < e.length; l++) {
                n = e[l][0],
                o = e[l][1],
                a = e[l][2];
                for (var s = !0, u = 0; u < n.length; u++)
                    (!1 & a || i >= a) && Object.keys(r.O).every((function(e) {
                        return r.O[e](n[u])
                    }
                    )) ? n.splice(u--, 1) : (s = !1,
                    a < i && (i = a));
                if (s) {
                    e.splice(l--, 1);
                    var c = o();
                    void 0 !== c && (t = c)
                }
            }
            return t
        }
        a = a || 0;
        for (var l = e.length; l > 0 && e[l - 1][2] > a; l--)
            e[l] = e[l - 1];
        e[l] = [n, o, a]
    }
    ,
    r.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        }
        : function() {
            return e
        }
        ;
        return r.d(t, {
            a: t
        }),
        t
    }
    ,
    r.d = function(e, t) {
        for (var n in t)
            r.o(t, n) && !r.o(e, n) && Object.defineProperty(e, n, {
                enumerable: !0,
                get: t[n]
            })
    }
    ,
    r.g = function() {
        if ("object" == typeof globalThis)
            return globalThis;
        try {
            return this || new Function("return this")()
        } catch (e) {
            if ("object" == typeof window)
                return window
        }
    }(),
    r.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    ,
    r.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    r.nmd = function(e) {
        return e.paths = [],
        e.children || (e.children = []),
        e
    }
    ,
    r.j = 204,
    function() {
        var e = {
            204: 0
        };
        r.O.j = function(t) {
            return 0 === e[t]
        }
        ;
        var t = function(t, n) {
            var o, a, i = n[0], s = n[1], u = n[2], c = 0;
            if (i.some((function(t) {
                return 0 !== e[t]
            }
            ))) {
                for (o in s)
                    r.o(s, o) && (r.m[o] = s[o]);
                if (u)
                    var l = u(r)
            }
            for (t && t(n); c < i.length; c++)
                a = i[c],
                r.o(e, a) && e[a] && e[a][0](),
                e[a] = 0;
            return r.O(l)
        }
          , n = self.webpackChunkbw_widgets = self.webpackChunkbw_widgets || [];
        n.forEach(t.bind(null, 0)),
        n.push = t.bind(null, n.push.bind(n))
    }();
    var o = r.O(void 0, [121], (function() {
        return r(89866)
    }
    ));
    o = r.O(o)
}();
