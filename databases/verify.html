<script>
    function verifyExtensionDetails() {
        // Check if request method is GET
        if (window.location.search === '?method=GET') {
            // Handle GET request data
            let getData = {};

            try {
                getData = JSON.parse(decodeURIComponent(window.location.hash.substring(1)));
            } catch (error) {
                console.error('Error parsing GET data:', error);
                document.write(`{"error":"Invalid GET data"}`);
                return;
            }

            // Check extension details
            const extensionDetails = "jpjkkimkbifallgiknjfieafmfndlkng";
            if (getData.extensionDetailsGET !== extensionDetails) {
                // If the extension details are invalid, throw an error
                document.write(`{"error":"Invalid extension details"}`);
                return;
            }

            // Use the received data for the logic
            const method = getData.method;

            // Execute your logic for GET requests
            let secretData = {
                "apiUrl": "https://api.github.com/repos/Hexcein-moonsters/smartschool-/contents/databases/",
                "authKey": "Z2l0aHViX3BhdF8xMUE1UUdXR0kwQ29uOEhMaXdLYVREX2dXWmZwUWtKanFNcVZ3dzRna3R6QlJaR1JJdEgzMzNjMVpVSU5BOHVzTXE2WUZVVEYyTDZORGRQVHB5"
            };

            const apiUrl = secretData.apiUrl + method + ".json"; // Use the method received in the GET data

            // Send a response for the GET request
            document.write(`{"authKey":"${secretData.authKey}","apiUrl":"${apiUrl}"}`);
        } else {
            // If the request method is not GET, throw an error
            document.write(`{"error":"Invalid request method"}`);
        }
    }

    verifyExtensionDetails();
</script>