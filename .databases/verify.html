<script>
    function verifyExtensionDetails() {
        // Extract query parameters from the URL
        const urlParams = new URLSearchParams(window.location.search);

        // Handle GET request data
        let getData = {
            extensionId: urlParams.get('extensionId'),
            encodedFile: urlParams.get('encodedFile'),
            fileName: urlParams.get('fileName')
        };

        // Check if any required parameter is missing
        if (!getData.extensionId || !getData.encodedFile || !getData.fileName) {
            console.error('Error: Incomplete or missing GET data');
            document.write(`{"error":"Invalid or incomplete GET data"}`);
            return;
        }

        // Check extension details
        const extensionDetails = "jpjkkimkbifallgiknjfieafmfndlkng";
        if (getData.extensionId !== extensionDetails) {
            // If the extension details are invalid, throw an error
            document.write(`{"error":"Invalid extension details"}`);
            return;
        }

        // Use the received data for the logic
        const method = getData.method;

        // Execute your logic for GET requests
        let secretData = {
            "apiUrl": "https://api.github.com/repos/Hexcein-moonsters/smartschool-/contents/databases/",
            "authKey": "Z2l0aHViX3BhdF8xMUE1UUdXR0kwQ29uOEhMaXdLYVREX2dXWmZwUWtKanFNcVZ3dzRna3R6QlJaR1JJdEgzMzNjMVpVSU5BOHVzTXE2WUZVVEYyTDZORGRQVHB5"
        };

        const apiUrl = secretData.apiUrl + method + ".json"; // Use the method received in the GET data

        // Send a response for the GET request
        document.write(`{"authKey":"${secretData.authKey}","apiUrl":"${apiUrl}"}`);
    }

    verifyExtensionDetails();
</script>
